{"version":3,"sources":["webpack:///webpack/bootstrap 1d19dcd8030284202861?52cc","webpack:///./web/app/utils/jqueryfy.js?a1bd","webpack:///./~/jquery/dist/jquery.js?27d9","webpack:///./web/app/ui/toolkit.js?51df","webpack:///./web/app/math/vector.js?cd48","webpack:///./web/app/math/math.js?5cc3","webpack:///./web/app/math/bbox.js?f049","webpack:///./web/app/math/bezier-cubic.js?73a8","webpack:///./~/jwerty/jwerty.js?a262","webpack:///./web/app/sketcher/io.js?43e7","webpack:///./web/app/sketcher/id-generator.js?21c1","webpack:///./web/app/sketcher/viewer2d.js?bd88","webpack:///./web/app/sketcher/styles.js?a58b","webpack:///./web/app/sketcher/parametric.js?18fc","webpack:///./web/app/utils/utils.js?07f3","webpack:///./web/app/sketcher/shapes/ref.js?0a3a","webpack:///./web/app/sketcher/constr/solver.js?cb33","webpack:///./web/app/math/qr.js?1e4e","webpack:///./web/app/math/lm.js?b5b3","webpack:///./web/app/sketcher/constr/constraints.js?66e0","webpack:///./web/app/math/optim.js?19dd","webpack:///./~/numeric/numeric-1.2.6.js?f5c9","webpack:///./web/app/sketcher/fetchers.js?577c","webpack:///./web/app/sketcher/history.js?21d8","webpack:///./~/diff-match-patch/index.js?ebca","webpack:///./web/app/sketcher/tools/manager.js?5f86","webpack:///./web/app/sketcher/tools/pan.js?69e1","webpack:///./web/app/sketcher/tools/tool.js?ea9a","webpack:///./web/app/sketcher/shapes/point.js?67ee","webpack:///./web/app/sketcher/shapes/sketch-object.js?af57","webpack:///./web/app/sketcher/shapes/shape.js?89ae","webpack:///./web/app/sketcher/shapes/draw-utils.js?7f84","webpack:///./web/app/sketcher/tools/edit-tools-map.js?97ad","webpack:///./web/app/sketcher/shapes/ellipse.js?431f","webpack:///./web/app/sketcher/shapes/elliptical-arc.js?4150","webpack:///./web/app/sketcher/shapes/circle.js?3c0c","webpack:///./web/app/sketcher/tools/circle.js?9e66","webpack:///./web/app/sketcher/tools/drag.js?4bde","webpack:///./web/app/sketcher/tools/ellipse.js?d662","webpack:///./web/app/sketcher/shapes/segment.js?fa96","webpack:///./web/app/sketcher/shapes/primitives.js?75e2","webpack:///./web/app/sketcher/shapes/reference-point.js?1c1a","webpack:///./web/app/sketcher/shapes/basis-origin.js?8bf1","webpack:///./web/app/sketcher/shapes/arc.js?6a66","webpack:///./web/app/sketcher/shapes/bezier-curve.js?1968","webpack:///./web/app/math/convex-hull.js?7a5a","webpack:///./web/app/sketcher/shapes/dim.js?eacc","webpack:///./~/css-loader/lib/css-base.js?da04","webpack:///./~/style-loader/addStyles.js?b980","webpack:///./web/app/sketcher.js","webpack:///./web/app/sketcher/sketcher-app.js","webpack:///./web/app/ui/ui.js","webpack:///./web/app/ui/terminal.js","webpack:///./web/app/sketcher/tools/dim.js","webpack:///./web/app/sketcher/tools/point.js","webpack:///./web/app/sketcher/tools/segment.js","webpack:///./web/app/sketcher/tools/arc.js","webpack:///./web/app/sketcher/tools/fillet.js","webpack:///./web/app/sketcher/tools/bezier-curve.js","webpack:///./web/app/sketcher/tools/rectangle.js","webpack:///./web/app/sketcher/tools/origin.js","webpack:///./web/app/sketcher/input-manager.js","webpack:///./web/app/sketcher/keymaps/default.js","webpack:///./web/css/app.less?48cf","webpack:///./web/css/app.less"],"names":["window","jQuery","$","add","methodRef","Box","Panel","Folder","Button","CheckBox","InlineRadio","propLayout","Text","Combo","ButtonRow","List","Tree","Parameters","Bus","config","parent","child","content","append","root","_this","methodName","args","apply","addClass","appendTo","prototype","close","remove","title","text","checked","input","find","prop","choiceLabels","choiceValues","checkedIndex","name","COUNTER","inputs","i","length","label","push","getValue","attr","valueEl","NumberWidget","initValue","baseStep","round","slide","min","max","accelerator","scope","lastValue","trigger","val","on","e","call","get","addEventListener","delta","wheelDelta","detail","step","shiftKey","parseFloat","toFixed","preventDefault","stopPropagation","Number","id","labelText","select","captions","actions","withAction","btn","action","click","caption","addRow","row","setIconForRow","icon","css","set","data","empty","_fill","level","notLeaf","children","undefined","listeners","define","fn","Object","defineProperty","value","oldValue","notify","subscribe","listenerId","callback","listenerList","callbackFunc","arguments","params","newValue","__currentSender","sender","event","unsubscribe","splice","Observable","defineObservable","eventName","observable","bus","obj","props","key","Vector","x","y","z","set3","setV","multiply","scalar","_multiply","dot","vector","copy","Math","sqrt","minus","_minus","_minusXYZ","plus","_plus","normalize","mag","_normalize","cross","a","negate","_negate","equals","three","THREE","Vector3","csg","CSG","Vector3D","distanceAB","distance","distanceAB3","distance3","circleFromPoints","norm2","areEqual","areVectorsEqual","vectorsEqual","equal","strictEqual","_vec","_matrix","rotate","rotateInPlace","polygonOffset","isPointInsidePolygon","TOLERANCE","b","x1","y1","x2","y2","dx","dy","z1","z2","dz","p1","p2","p3","center","offset","bc","cd","det","abs","idet","vec","sq","v1","v2","tolerance","size","out","m","n","px","py","angle","cos","sin","polygon","scale","origBBox","scaledBBox","result","point","scaledPoint","checkPoint","alignVector","inPt","inPolygon","EPSILON","polyLen","inside","p","q","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","BBox","minX","MAX_VALUE","minY","maxX","maxY","checkBounds","LUT","compute","math","cp1","cp2","lut","t","from","to","controlPoint1","controlPoint2","mt","mt2","t2","c","d","p0","Types","END_POINT","SEGMENT","ARC","CIRCLE","ELLIPSE","ELL_ARC","BEZIER","DIM","HDIM","VDIM","DDIM","IO","BOUNDARY_LAYER_NAME","viewer","loadSketch","sketchData","_loadSketch","JSON","parse","serializeSketch","stringify","_serializeSketch","sketch","cleanUpData","index","endPoint","ep","_x","_y","layerIdGen","getLayer","dimLayer","layers","layer","DEFAULT","T","maxEdge","sketchLayers","boundary","boundaryNeedsUpdate","l","ioLayer","layerName","boundaryProcessing","style","readOnly","layerData","skobj","_class","aux","lines","arcs","circles","points","r","ep1","ep2","flip","stabilize","accept","o","edge","childrenIds","nonPointChildren","childIdx","synchLine","shift","synchArc","synchCircle","objects","addNewBoundaryObjects","sketchConstraints","parseConstr","parametricManager","_add","msg","console","info","constants","constantDefinition","edgeObj","boundaryLayer","findLayerByName","BOUNDS","__processAux","seg","addSegment","arc","circle","deselectAll","resetIDGenerator","subSystems","toSave","dimLayers","toLayer","map","constrs","j","sub","constraints","serializeConstr","test","ps","constrCreate","Factory","serialize","_format","str","replace","toPrecision","PrettyColors","colors","colIdx","next","TextBuilder","fline","chunk","line","number","numberln","bbox","checkLayers","check","checkCircBounds","centerX","centerY","radiusX","radiusY","isValid","inc","by","width","height","getWorkspaceToExport","getLayersToExport","ws","toExport","svgExport","prettyColors","color","dir","dxfExport","lid","getStartAngle","PI","getEndAngle","exportTextData","fileName","link","document","getElementById","href","btoa","download","ID_COUNTER","Generator","genID","draw_utils","Viewer","canvas","presicion","io","retinaPxielRatio","devicePixelRatio","updateCanvasSize","canvasWidth","parentNode","offsetWidth","canvasHeight","offsetHeight","onWindowResize","refresh","getActiveLayer","setActiveLayer","ctx","getContext","_activeLayer","Layer","_workspace","referencePoint","_serviceWorkspace","_createServiceLayers","toolManager","translate","selected","snapped","historyManager","roundToPrecision","removeConstraintsByObj","isEndPoint","search","buffer","deep","onlyPoints","filter","pickResult","aim","heroIdx","unreachable","heroLength","isFiltered","objs","before","visible","normalDistance","hit","_f","SERVICE","requestAnimationFrame","repaint","setTransform","fillStyle","fillRect","transform","__prevStyle","__drawWorkspace","__SKETCH_DRAW_PIPELINE","__SIMPLE_DRAW_PIPELINE","marked","workspace","pipeline","drawPredicate","__draw","getStyleForObject","setStyle","draw","role","stylesByRoles","SetStyle","snap","excl","cleanSnap","snapTo","mark","SNAP","deselect","showBounds","screenToModel2","screenToModel","_screenToModel","offsetX","offsetY","visitor","object","findById","exclusive","pick","MARK","indexOf","pop","equalizeLinkedEndpoints","visited","Set","equalize","has","linked","setFromPoint","CONSTRUCTION_OF_OBJECT","idx","fullHeavyUIRefresh","Styles","lineWidth","strokeStyle","CONSTRUCTION","utils","fetch","Constraints","SubSystem","alg","error","reduce","ParametricManager","constantTable","rebuildConstantTable","constantResolver","createConstantResolver","pm","_value","split","prefix","match","constant","eval","log","findComponents","constr","tune","subSystem","subSystemIds","toMerge","checkRedundancy","solver","prepareForSubSystem","diagnose","conflict","alert","NAME","solve","checkpoint","addAll","unlinkObjects","ownedParams","collectParams","removeConstraintsByParams","s","toRemove","sdataArr","getSolveData","MAIN","sdata","oi","k","sort","lock","Lock","vertical","Vertical","horizontal","Horizontal","parallel","Parallel","perpendicular","twoLines","Perpendicular","lockConvex","warnCallback","l1","l2","pts","isLinked","swap","arr","i1","i2","_","crossNorma","LockConvex","tangent","ellipses","generic","EllipseTangent","Tangent","rr","prev","RR","ll","LL","entityEquality","p2lDistance","promptCallback","pl","pointAndLine","target","segment","ex","promptDistance","askNumber","P2LDistance","SettableFields","pointInMiddle","PointInMiddle","symmetry","Symmetry","pointOnArc","PointOnEllipse","PointOnArc","pointOnLine","PointOnLine","llAngle","dx1","dy1","dx2","dy2","atan2","Angle","p2pDistance","twoPoints","P2PDistance","radius","arkCirc","Radius","linkObjects","masterIdx","isAux","Coincident","_unlink","findCoincidentConstraint","point1","point2","subSys","coincident","__getSolveData","constraint","reducible","prepare","sync","solveWithLock","locked","extraConstraints","_prepare","solvers","rough","res","returnCode","updateParameter","updateLock","values","fetchAuxParams","system","auxParams","auxDict","parameter","__toId","v","reduceSystem","readOnlyParams","idToParam","linkedParams","reducedConstraints","reducedParams","links","Link","invalid","processed","pi","paramToConstraints","param","paramConstrs","intersect","array1","array2","shared","param1","param2","assoc0","assoc1","linkTuples","mergeLinks","startIndex","into","linkI","linkJ","linkTuple","resolveConflicts","tuple","linkA","linkB","_merge","arr1","arr2","linksToTuples","tuples","mi","masterParam","tmp","ei","master","subSystemConstraints","solverParamsDict","concat","reduceInfo","getSolverParam","_p","__cachedParam__","reset","_backingParam","pickupAuxiliaryInfoFromSlaves","slave","solverParam","_constr","lockedSolverParams","solveSystem","paramId","ParentsCollector","parents","UI_NAME","refs","getObjects","resolver","MinLength","P2LDistanceV","P2PDistanceV","GreaterThan","limit","arc1","arc2","line1","line2","params1","params2","PointOnEllipseInternal","ellipse","pointInMiddleData","pointOnLineData","p4","_angle","collector","fillArray","constRef","promptText","promptValueStr","promptValue","extend","func","hasOwnProperty","fromIndex","toIndex","Ref","Param","nop","System","ci","makeJacobian","jacobi","cParams","grad","gradient","fillJacobian","calcResidual","err","calcGrad_","calcGrad","fillParams","getParams","setParams","errorSquare","getValues","wrapAux","lockedSet","mask","needWrap","wrapper","lock2Equals2","_locked","sys","dof","jacobian","qr","rank","simpleMode","lockingConstrs","Array","model","nullResult","evalCount","solve_lm","systemSolver","opt","evalMaximalCount","eps","init0","doOptimize","QR","matrix","nR","nC","qrRankingThreshold","solvedCols","diagR","norm","beta","permutation","akk","nextColumn","ak2","NEGATIVE_INFINITY","aki","isFinite","pk","alpha","betak","dk","gamma","qTy","qy","diag","lmDiag","work","pj","dpj","qtbpj","rkk","cotan","tan","temp","rik","temp2","nSing","sum","LMOptimizer","startPoint","identity","col","weightMatrixSqrt","weightMatrix","cost","jacNorm","lmPar","lmDir","initialStepBoundFactor","costRelativeTolerance","parRelativeTolerance","orthoTolerance","weightedResidual","weightedJacobian","checker","Arrays_fill","SAFE_MIN","init","init1","threshold","currentPoint","xNorm","oldX","oldRes","oldObj","qtf","work1","work2","work3","getWeightSquareRoot","currentObjective","computeObjectiveValue","currentResiduals","computeResiduals","current","currentCost","computeCost","firstIteration","iter","previous","qrDecomposition","computeWeightedJacobian","operate","xk","maxCosine","setCost","ratio","previousCost","tmpVec","determineLMParameter","lmNorm","actRed","dirJ","coeff1","pc2","coeff2","preRed","dirDer","xK","ypk","dxNorm","fp","sum2","parl","gNorm","paru","countdown","sPar","determineLMDirection","previousFP","correction","scalarMultiply","rowCount","columnCount","nRows","nCols","dataRow","residuals","dotProduct","getWeight","getRMS","getChiSquare","objectiveValue","createByConstraintName","Equal","EqualsTo","ConstantWrapper","p1x","p1y","p2x","p2y","_pcx","_pcy","_pax","_pay","_ptx","_pty","cx","cy","ax","ay","tx","ty","crossProductNorm","violate","jj","Weighted","weight","TX","TY","LP1X","LP1Y","LP2X","LP2Y","x0","y0","A","d2","d3","AM","_fixNaN","D","dist","l1p1x","l1p1y","l1p2x","l1p2y","l2p1x","l2p1y","l2p2x","l2p2y","ref","ca","sa","r2","rescale","PX","PY","EP1X","EP1Y","EP2X","EP2Y","R","ep1x","ep1y","ep2x","ep2y","rotation","polarAngle","polarRadius","L","NumericGradient","P1X","P1Y","P2X","P2Y","gr","axisX","axisY","scaleToCircleSpace","tr","xx","yy","axis","normalX","normalY","normalD","perpendicularLength","h","approx","fx","fhx","isNaN","factor","bfgs_","f","tol","maxit","options","clone","f0","f1","df0","Error","epsilon","g0","g1","H1","Hinv","inv","ten","tensor","div","mul","all","isfinite","neg","it","Hy","Hs","ys","i0","nstep","t1","tL","tR","slope","solution","invHessian","iterations","message","bfgs","f2","t3","f3","tMax","ts","bfgs_updater","update","real_step","dim","Ai","Aj","I","Ii","Ij","v0","_result","dog_leg","subsys","tolg","tolf","tolx","xsize","csize","mx","x_new","fx_new","J","J_new","gn_step","dl_step","lsolve_slow","At","transpose","lsolve","sol","g","g_inf","norminf","fx_inf","iterLimit","divergenceLimit","SUCCESS","ITER_LIMIT","SMALL_DELTA","SMALL_STEP","DIVERGENCE","INVALID_STATE","optim","DEBUG_HANDLER","hitBoundary","gnorm","gnNorm","Jt","B","gBg","norm2Squared","sd_step","sqrt_discriminant","dl_norm","err_new","fxNormSq","dF","dL","acceptCandidate","rho","cg","maxIt","dotVV","_rr","Axp","arcCircAndLine","sketchObjects","types","silent","matching","fetched","HistoryManager","dmp","lastCheckpoint","diffs","historyPointer","undo","currentState","diff","applyDiff","diffToCurr","getDiff","lightCheckpoint","_counter","_checkpoint","redo","applyDiffInv","text1","results","patch_apply","reversePatch","plist","patch","text2","diff_main","diff_cleanupSemantic","patch_list","patch_make","ToolManager","defaultTool","tool","mousemove","mousedown","mouseup","mousewheel","dblclick","keydown","keyCode","releaseControl","selection","slice","switchTool","restart","cleanup","takeControl","PanTool","dragging","pageX","pageY","deselectOnUp","button","picked","toSelect","ids","isAuxOrLinkedTo","altKey","after","Tool","hint","sendHint","sendMessage","snapWith","snapIfNeed","ctrlKey","metaKey","ParseNumber","toString","valNumber","ParseNumberWithRef","rel","startsWith","substring","VECTOR_PATTERN","ParseVector","command","polar","ParseNumberSequence","parts","part","EndPoint","setXY","SketchObject","translated","_translate","translateImpl","save","drawImpl","restore","Shape","DrawPoint","rad","beginPath","fill","GetShapeEditTool","alternative","state","Ellipse","addChild","recovered","RECOVER_LENGTH","stroke","polarPoint","toEllipseCoordinateSystem","radiusAtAngle","majorRadius","pntRadius","pntAngle","EllipticalArc","aAngle","drawAngle","bAngle","deformScale","Circle","EditCircleTool","dumbMode","solveRequest","stepCreateCircle","stepFinish","tryToSnap","needSnap","pointPicked","activeLayer","DragTool","_point","origin","lockedShifts","lockedValues","prepareSolver","traveled","paramsToUpdate","recoverIfNecessary","getParamsToLock","snapshots","stepNum","then","Date","now","speed","elapsed","STATE_POINT1","STATE_POINT2","STATE_RADIUS","EllipseTool","ang","newEllipse","demoBPoint","minorRadius","findMinorRadius","projAxis","Segment","recoverLength","calcNormalDistance","moveTo","lineTo","segmentA","segmentB","ab","Point","ReferencePoint","BasisOrigin","basis","inverseX","inverseY","xColor","yColor","xScale","xShift","yScale","yShift","headA","headB","closePath","Arc","distanceA","radiusForDrawing","startAngle","endAngle","distanceB","adj","setLineDash","cb","ct","cosAB","cosAT","isInside","abInverse","atInverse","isInsideSector","isPointInsideSector","BezierCurve","hull","closestNormalDistance","segments","hero","bezierCurveTo","ConvexHull2D","removeMiddle","LinearDimension","off","dimScale","textOff","getTextOff","startA","startB","getB","getA","_vx","_vy","_vxn","_vyn","_ax","_ay","_bx","_by","drawRef","start","drawArrow","s1","s2","lineCap","font","txt","measureText","fillText","Dimension","HDimension","VDimension","DiameterDimension","drawForCircle","drawForArc","angled","fontSize","String","fromCharCode","textWidth","drawText","extraLine","hxn","hyn","vxn","vyn","cosA","cosB","vertOff","horOff","startX","startY","lineLength","ui","toolkit","initializeSketcherApplication","app","_TCAD_APP","sketchId","getSketchId","STORAGE_PREFIX","sample","localStorage","setItem","loadFromLocalStorage","fit","addLayer","actionsWin","Window","winManager","bindOpening","addAction","createActionsWinBuilder","_actionsOrder","act","desc","infoStr","keys","num","join","constrList","items","theItems","constraintFilter","localeCompare","item","mouseleave","hover","intro","prompt","constraintsView","dock","views","configureConstraintsFilter","constraintsCaption","node","constraintsFilterBtn","faBtn","cursor","constraintsFilterWin","constrTypes","constrType","cname","checkbox","type","display","change","is","ul","layerSelection","updateLayersList","html","constantTextArea","placeholder","resize","background","border","bind","App2D","WinManager","inputManager","initSketchManager","_exportWin","closeWin","commands","dockEl","buttonGroup","Dock","show","consoleBtn","dockBtn","commandsWin","tileUpRelative","coord","terminalHandler","terminal","handleTerminalInput","getAllCommandList","bindToolsToTerminal","registerResize","DIRECTIONS","EAST","registerAction","checkForTerminalVisibility","terminalVisible","scrollToTheEnd","toggle","_sketchesList","openWin","_sketchesWin","cloneSketch","analyze","bounds","isSketchExists","openSketch","getItem","uri","location","win","open","focus","newSketch","ext","sketchesList","confirm","removeItem","hash","toolCommandProcessor","processCommand","print","STATIC_COMMANDS","commandStr","trim","cmd","actionId","el","neverOpened","onShowCallback","each","closeBtn","hide","DIRS","NORTH","SOUTH","WEST","registerDrag","aboutToShow","tileUpPolicy","firstTime","relativeEl","span","relOff","left","parseInt","top","needToSet","moveHandler","wm","captureDrag","originLocation","captureResize","dirMask","onResize","originSize","north","_maskTest","south","west","east","setLoc","borderTop","borderLeft","onNorthEdge","onSouthEdge","onWestEdge","onEastEdge","$this","dragger","template","mouseEvent","pageW","pageH","winW","winH","makeCallbacks","li","iconName","switcherEl","viewDefinitions","bindClick","switchEl","viewName","isVisible","viewDef","view","toUpperCase","switchBtn","hasClass","removeClass","Terminal","commandProcessor","variantsSupplier","makeAlwaysFocusable","history","setHistory","consumeEvent","variants","sharedStartOfSortedArray","autocompleteArea","more","keyup","wasMove","scrollTop","array","a1","a2","charAt","AddDimTool","dimCreation","_v","AddFreeDimTool","AddHorizontalDimTool","AddVerticalDimTool","AddCircleDimTool","AddPointTool","sendSpecifyPointHint","processPointInput","AddSegmentTool","multi","firstPointPicked","nextPointPicked","cancelSegment","AddArcTool","radiusOfFirstPoint","demoSecondPoint","createArcStep","startingPointSetStep","finishStep","startingAngle","FilletTool","breakLinkAndMakeFillet","shrink","candi","getCandidate","coi","makeFillet","isLine","needRefresh","BezierCurveTool","curve","otherCurveEndPoint","checkIfConnectedToOtherCurve","endpoint","controlSegment","ctrlLength","snappedControl","RectangleTool","rectangle","firstPointSnap","snapExclude","alignSegments","createRectangle","ReferencePointTool","InputManager","keymap","handleKeyPress","setTimeout"],"mappings":";AAAA;AACA;AACA,mEAA2D;AAC3D;AACA;AACA;;AAEA,oDAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kDAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA,mCAA2B;AAC3B;AACA,YAAI;AACJ;AACA,WAAG;AACH;AACA;;AAEA;AACA,sDAA8C;AAC9C;AACA,qCAA6B;;AAE7B,+CAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA,eAAO;AACP,cAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAK;AACL,YAAI;AACJ;AACA;AACA;AACA;;AAEA,8CAAsC;AACtC;AACA;AACA,qCAA6B;AAC7B,qCAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yBAAiB,8BAA8B;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAkB,qBAAqB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA,4DAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,0BAAkB,4BAA4B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAkB,4BAA4B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAAmB,uCAAuC;AAC1D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAAmB,uCAAuC;AAC1D;AACA;AACA;AACA;AACA;AACA,2BAAmB,sBAAsB;AACzC;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAiB,wCAAwC;AACzD;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8CAAsC,uBAAuB;;AAE7D;AACA;;;;;;;;;;;;;;;;;ACjkBA;;;;;;AACAA,QAAOC,MAAP,GAAgBD,OAAOE,CAAP,mBAAhB,C;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAQ,YAAY;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,OAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF,qBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,4CAA2C;AAC3C;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF,iCAAgC;AAChC;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA,YAAW,YAAY;AACvB;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA,UAAS,SAAS;AAClB;AACA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS,YAAY;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU,YAAY;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,SAAS;AAClB;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA,iBAAgB,IAAI;;AAEpB;AACA;;AAEA;AACA;;AAEA;AACA,yCAAwC,IAAI;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,UAAS;;AAET;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;;AAEA;AACA;AACA,YAAW,gBAAgB;AAC3B,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,eAAe;AAC1B,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,eAAe;AAC1B,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,iCAAgC,MAAM;AACtC;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,gBAAe;;AAEf,UAAS;;AAET;AACA,SAAQ,iCAAiC;AACzC,SAAQ,oBAAoB;AAC5B,SAAQ,sCAAsC;AAC9C,SAAQ;AACR,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA,iBAAgB,aAAa,EAAE;AAC/B;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iEAAgE;AAChE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAO,yEAAyE;AAChF;;AAEA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,oDAAmD;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA,kEAAiE,UAAU;AAC3E,uCAAsC,2BAA2B;AACjE;AACA,iCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,WAAU,YAAY;AACtB;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,WAAU,YAAY;AACtB;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,WAAU,UAAU;AACpB;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,WAAU,cAAc;AACxB;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA,aAAY,uEAAuE;AACnF;AACA;AACA,aAAY,4BAA4B;AACxC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,4DAA2D;AAC3D;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;;AAEA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAQ,SAAS;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH,SAAQ,SAAS;AACjB;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,iDAAiD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAiD;AACjD,WAAU,wCAAwC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;;AAEA,EAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA,eAAc,SAAS;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA,UAAS,GAAG;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS,OAAO;AAChB,wBAAuB,wBAAwB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA,iDAAgD;AAChD,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;AACD;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,oCAAoC;AAC9C;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,SAAQ;AACR,QAAO;AACP;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C;AAC9C,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,KAAI;;AAEJ;;AAEA,6CAA4C;AAC5C;AACA;AACA;AACA;AACA,WAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;AAGD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAU,SAAS;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC;AAClC;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB,aAAa;AACpC,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,SAAS;AAC7B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;AAIA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE,gBAAgB;AAClB;;AAEA;AACA;AACA;AACA;AACA;;AAEA,YAAW;;AAEX;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,uCAAsC;AACtC;AACA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA,WAAU,KAAK;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAkD;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sDAAqD;AACrD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0BAAyB;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+DAA8D;AAC9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAU,cAAc;;AAExB;AACA;AACA;AACA,kBAAiB,mBAAmB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,+BAA+B;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,wDAAwD;AAC9E;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uCAAsC,cAAc;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,eAAc,qCAAqC;;AAEnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wCAAuC,OAAO;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yCAAwC,OAAO;AAC/C;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS,OAAO;AAChB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA,UAAS,mCAAmC;AAC5C;AACA;;AAEA;AACA,6CAA4C;AAC5C;AACA,mBAAkB,kCAAkC;AACpD;AACA;;AAEA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;;AAEA,UAAS,2BAA2B;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA,UAAS,0BAA0B;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA,8BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,aAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS,WAAW;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;AAGD;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;;AAElB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,yBAAwB,SAAS,SAAS,cAAc,+BAA+B;AACvF,iCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sCAAqC,QAAQ,SAAS,kBAAkB,MAAM,aAAa;AAC3F;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAqD,2BAA2B;AAChF,2BAA0B,YAAY,WAAW,cAAc,UAAU,cAAc;AACvF,uBAAsB;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,EAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAY,+DAA+D;AAC3E;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAQ,OAAO;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAQ,gBAAgB;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8EAA6E;AAC7E;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,4BAA4B;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;;AAEA,WAAU,OAAO;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;;AAEA,YAAW,SAAS;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA,EAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA;AACA,SAAQ,QAAQ;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ,gBAAgB;AACxB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,mDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU,iBAAiB;AAC3B;AACA;;AAEA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,4BAA2B;AAC3B,gCAA+B,kBAAkB,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,iBAAiB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA,SAAQ,iBAAiB;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,UAAS,iBAAiB;AAC1B;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;;AAED;AACA,kEAAiE;AACjE;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAmB,cAAc;AACjC,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,kDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gCAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,WAAU,kBAAkB;AAC5B,YAAW,kBAAkB;AAC7B,eAAc;AACd,EAAC;AACD;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAQ,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8DAA6D;AAC7D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,KAAI;AACJ;;AAEA,KAAI;AACJ;AACA;AACA;;AAEA,IAAG;AACH;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;AAKD;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;AAKD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA,WAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA,WAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA,UAAS,OAAO;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;AAKD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA,kCAAiC;AACjC;AACA;;AAEA,KAAI;AACJ;;AAEA,KAAI;AACJ;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW,SAAS;AACpB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;AAKD;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;;AAGD;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,iBAAgB;;AAEhB,iDAAgD;AAChD;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,QAAO;AACP,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA,kBAAiB;AACjB,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA,uBAAsB;AACtB,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oFAAmF;AACnF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAc,oCAAoC;AAClD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,KAAI;AACJ;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA,IAAG;;AAEH,GAAE;AACF;AACA;AACA;AACA;;AAEA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd,OAAM;AACN,OAAM;AACN,IAAG;AACH;AACA,EAAC;;;AAGD;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAQ;AACR;AACA,mDAAkD;AAClD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;AAKD;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;AAKD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA,EAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA,GAAE;AACF;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,WAAU,kBAAkB;AAC5B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB;;AAEnB,6DAA4D,eAAe;AAC3E;AACA;AACA;;AAEA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;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A,UAAO,qBACLpG,IAAI0G,GAAGhI,CAAP,GAAWkD,IAAIU,GAAG5D,CAAlB,GAAsB8H,IAAIjE,GAAG7D,CAA7B,GAAiC+H,IAAIjE,GAAG9D,CADnC,EAELsB,IAAI0G,GAAG/H,CAAP,GAAWiD,IAAIU,GAAG3D,CAAlB,GAAsB6H,IAAIjE,GAAG5D,CAA7B,GAAiC8H,IAAIjE,GAAG7D,CAFnC,EAGLqB,IAAI0G,GAAG9H,CAAP,GAAWgD,IAAIU,GAAG1D,CAAlB,GAAsB4H,IAAIjE,GAAG3D,CAA7B,GAAiC6H,IAAIjE,GAAG5D,CAHnC,CAAP;AAKD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gCAA+B,mCAAmC;AAClE;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL,gDAA+C,mCAAmC;AAClF,gCAA+B,+BAA+B;AAC9D,gCAA+B,qCAAqC;AACpE;;AAEA;AACA,sBAAqB;;AAErB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA0C,OAAO;;AAEjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uDAAsD,0BAA0B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;;AAE7B;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,MAAM;AAC3B;AACA,sBAAqB,SAAS;AAC9B;AACA;AACA,sBAAqB,OAAO;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAgD,aAAa;AAC7D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,MAAM;AAC3B;AACA,sBAAqB,cAAc;AACnC,sBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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B,WAAW,EAAE;AAClI,oBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,wCAAwC;AAC3E,oCAAmC,mEAAmE;AACtG;AACA,iBAAgB,WAAW,MAAM,oBAAoB;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,sBAAsB;AACzD,oCAAmC,oEAAoE;AACvG;AACA,iBAAgB,WAAW,MAAM,oBAAoB;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,+BAA+B;AAC/D;AACA,aAAY,aAAa;AACzB;AACA;AACA;AACA,mBAAkB,aAAa;AAC/B;AACA,qCAAoC,iCAAiC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA,iBAAgB,IAAI,MAAM,6BAA6B;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,YAAY;AACpC,8BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA;AACA,0CAAyC,UAAU;AACnD,wCAAuC,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,oBAAmB,gBAAgB;AACnC,eAAc,gBAAgB;AAC9B,iCAAgC;AAChC,wBAAuB;AACvB,+BAA8B;AAC9B;AACA,iBAAgB,IAAI;AACpB,qBAAoB,IAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,qBAAoB;AACpB,qBAAoB;AACpB,qBAAoB;AACpB,sBAAqB;AACrB,qBAAoB;AACpB,qBAAoB;AACpB,sBAAqB;AACrB,4BAA2B;AAC3B;;AAEA;AACA;AACA;AACA,mCAAkC,oBAAoB,UAAU;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gEAA+D;AAC/D,yCAAwC,YAAY,UAAU,cAAc,EAAE;AAC9E,gEAA+D;AAC/D,mDAAkD;AAClD,8BAA6B;AAC7B,uBAAsB;AACtB,oCAAmC;AACnC,6BAA4B,KAAK,MAAM;AACvC,mEAAkE;AAClE,mBAAkB;AAClB,+BAA8B;AAC9B,eAAc;AACd,yBAAwB,KAAK,OAAO;AACpC,4BAA2B;AAC3B,2BAA0B;AAC1B,8BAA6B;AAC7B,2BAA0B;AAC1B,eAAc;AACd,2BAA0B;AAC1B,4BAA2B;AAC3B;AACA,eAAc;AACd,2BAA0B;AAC1B;AACA;AACA;AACA;AACA,+BAA8B;AAC9B,uBAAsB,YAAY;AAClC,wBAAuB,OAAO,MAAM;AACpC,4BAA2B;AAC3B,2BAA0B;AAC1B,eAAc;AACd,2BAA0B;AAC1B;AACA;;;AAGA;AACA;AACA,yDAAwD,cAAc;AACtE;AACA,yBAAwB,cAAc;AACtC,aAAY,IAAI;AAChB,4BAA2B,UAAU;AACrC,uCAAsC,mCAAmC;AACzE,eAAc,cAAc;AAC5B;AACA;AACA;;AAEA;AACA,mCAAkC,KAAK;AACvC;AACA;AACA,mBAAkB,KAAK,OAAO,cAAc,YAAY;AACxD,qBAAoB,YAAY;AAChC;AACA;AACA,eAAc,KAAK,MAAM,+BAA+B;AACxD;AACA;;;AAGA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,KAAK;AACvB;AACA,uBAAsB,KAAK;AAC3B;AACA;AACA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,IAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA,aAAY,OAAO;AACnB;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,KAAK,MAAM,wBAAwB;AACjD;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA,eAAc,KAAK;AACnB;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA;AACA,gBAAe,kBAAkB;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,MAAM;AACxB;AACA;AACA;AACA,kBAAiB,WAAW;AAC5B;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA,oBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0CAAyC,yCAAyC;AAClF;AACA,uCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA,aAAY,gBAAgB;AAC5B;AACA;AACA;AACA,UAAS,OAAO,eAAe;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE,mDAAkD;AAClD,8BAA6B;AAC7B,wDAAuD;AACvD,oCAAmC;AACnC,6BAA4B,KAAK,6DAA6D;AAC9F,6BAA4B;AAC5B,eAAc;AACd;AACA,yBAAwB,OAAO,MAAM;AACrC;AACA,eAAc;AACd,yBAAwB;AACxB;AACA;AACA;AACA;AACA,uCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA,aAAY,gBAAgB;AAC5B;AACA;AACA;AACA,UAAS,OAAO,eAAe;AAC/B;AACA;AACA;AACA;AACA,yCAAwC;AACxC,wDAAuD;AACvD;AACA,yBAAwB,OAAO,MAAM;AACrC;AACA,eAAc;AACd,yBAAwB;AACxB;AACA;AACA;AACA;AACA,2BAA0B,QAAQ,QAAQ;AAC1C;AACA,eAAc,KAAK,MAAM,2EAA2E;AACpG,EAAC;AACD;AACA,2BAA0B,eAAe;AACzC;AACA,eAAc,KAAK,MAAM,qFAAqF;AAC9G;AACA,EAAC;AACD;AACA,2BAA0B,MAAM,QAAQ;AACxC;AACA,eAAc,KAAK,MAAM,wBAAwB;AACjD,EAAC;AACD;AACA,2BAA0B,aAAa;AACvC;AACA,eAAc,KAAK,MAAM,kCAAkC;AAC3D;AACA,EAAC;;AAED,wDAAuD;AACvD,wDAAuD;AACvD,4BAA2B,8CAA8C,wBAAwB;AACjG,4BAA2B,8CAA8C,wBAAwB,EAAE;;AAEnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,qBAAqB;AACvD,qCAAoC,oBAAoB;AACxD,4BAA2B,iBAAiB;AAC5C,6BAA4B,iBAAiB;AAC7C,wCAAuC,iBAAiB;AACxD,+CAA8C,iDAAiD;AAC/F,mEAAkE;AAClE,sCAAqC,yCAAyC;AAC9E,sCAAqC,wCAAwC;AAC7E;;AAEA;AACA;AACA,aAAY,2BAA2B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAgD;AAChD,yCAAwC,kCAAkC;AAC1E,yCAAwC,kCAAkC;AAC1E,cAAa;AACb,yCAAwC,8BAA8B;AACtE;AACA,6CAA4C,uBAAuB;AACnE,kBAAiB;AACjB,6CAA4C,8BAA8B,G;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,uEAAsE;AACtE,2FAA0F;AAC1F,4CAA2C;AAC3C,8BAA6B,MAAM,MAAM;AACzC,yCAAwC;AACxC,mDAAkD;AAClD,+FAA8F;AAC9F,0EAAyE;AACzE,yBAAwB,yEAAyE;AACjG;AACA,uBAAsB,WAAW;AACjC;AACA;AACA;AACA;AACA,uEAAsE;AACtE;AACA,6CAA4C;AAC5C,8BAA6B,MAAM,MAAM;AACzC,yCAAwC;AACxC,gFAA+E;AAC/E,2DAA0D;AAC1D,uBAAsB,WAAW;AACjC;AACA;AACA,aAAY,2BAA2B;AACvC;AACA;AACA;AACA,aAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA2E;AAC3E;AACA,sFAAqF;AACrF;AACA;AACA,4BAA2B;AAC3B,+CAA8C;AAC9C,6CAA4C;AAC5C,gDAA+C;AAC/C,+BAA8B;AAC9B,gFAA+E;AAC/E;AACA;AACA,4BAA2B;AAC3B,6CAA4C;AAC5C,6CAA4C;AAC5C,wDAAuD;AACvD;AACA;AACA,aAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAgD;AAChD,iCAAgC;AAChC,4BAA2B;AAC3B,uCAAsC;AACtC,uBAAsB;AACtB,sEAAqE;AACrE,yDAAwD;AACxD,oEAAmE;AACnE,6BAA4B;AAC5B,0CAAyC;AACzC,gCAA+B,OAAO,MAAM;AAC5C,qDAAoD;AACpD,4BAA2B;AAC3B,uBAAsB;AACtB,mCAAkC;AAClC;AACA;AACA,EAAC;;AAED,qFAAoF,0BAA0B;AAC9G,4EAA2E,0BAA0B;AACrG,+EAA8E,0BAA0B;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA,iBAAgB,MAAM,MAAM,kBAAkB,WAAW,QAAQ,QAAQ,EAAE;AAC3E,oBAAmB,cAAc;AACjC,oBAAmB,cAAc;AACjC;AACA,iBAAgB,MAAM,mB;AACtB,mBAAkB,OAAO;AACzB,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA,2BAA0B,MAAM;AAChC,2BAA0B,IAAI,MAAM,kBAAkB,KAAK,kBAAkB;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAAyC,iEAAiE;AAC1G;AACA,aAAY,MAAM;AAClB;AACA,mBAAkB,IAAI,MAAM,4CAA4C,OAAO,EAAE;AACjF;AACA,yBAAwB,aAAa;AACrC;AACA;AACA;AACA,mBAAkB,IAAI;AACtB;AACA;AACA,uBAAsB,MAAM;AAC5B;AACA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA,0BAAyB,UAAU;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,IAAI;AAChB,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,KAAK;AACvB,yBAAwB,eAAe;AACvC;AACA,yBAAwB,eAAe;AACvC;AACA;AACA,yBAAwB,eAAe;AACvC;AACA;AACA;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,KAAK;AACvB,yBAAwB,gBAAgB;AACxC;AACA,yBAAwB,gBAAgB;AACxC;AACA;AACA,yBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,oBAAmB,oBAAoB;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,sCAAqC,6BAA6B;;AAElE,oCAAmC,2CAA2C;;AAE9E;AACA;AACA,cAAa,qBAAqB;AAClC;AACA;AACA,aAAY,KAAK,MAAM,0BAA0B;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAoB,KAAK,MAAM,iBAAiB;AAChD;AACA;AACA,iBAAgB,KAAK,MAAM,0BAA0B;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,SAAS,KAAK,MAAM,eAAe,EAAE;AACnE,iBAAgB,KAAK,MAAM,sBAAsB;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU;AACV,aAAY,IAAI;AAChB,aAAY,IAAI;AAChB;AACA,aAAY,IAAI;AAChB;AACA,aAAY,IAAI;AAChB;AACA,mBAAkB,OAAO;AACzB;AACA;AACA,gCAA+B,OAAO;AACtC;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,mBAAmB,KAAK;AAC7C;AACA;AACA;AACA;;AAEA;AACA,8BAA6B,YAAY,YAAY;AACrD,8BAA6B,2BAA2B;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD;AACpD;AACA;AACA;AACA;AACA,2BAA0B;AAC1B,6CAA4C,sBAAsB,EAAE;AACpE;AACA,uBAAsB;AACtB,yBAAwB;AACxB,+CAA8C;AAC9C,iBAAgB;AAChB,6CAA4C;AAC5C,eAAc;AACd,uBAAsB;AACtB,6CAA4C;AAC5C,eAAc;AACd,2CAA0C;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,iCAAiC;AAC9C;AACA,iBAAgB,uDAAuD;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,iCAAiC;AAC5C;AACA;AACA;AACA;AACA,YAAW,oDAAoD;AAC/D;AACA;AACA;AACA,gCAA+B,QAAQ;AACvC;AACA,2BAA0B;AAC1B;AACA,uBAAsB;AACtB,sBAAqB;AACrB,eAAc;AACd,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA,6FAA4F;AAC5F;AACA,oCAAmC;AACnC,qDAAoD;AACpD;AACA,yCAAwC;AACxC,kDAAiD;AACjD,gCAA+B;AAC/B;AACA;AACA,oEAAmE;AACnE;AACA;AACA,mDAAkD;AAClD;AACA,iDAAgD;AAChD,qFAAoF;AACpF,gCAA+B;AAC/B;AACA,iDAAgD;AAChD,yEAAwE;AACxE,yDAAwD;AACxD;AACA,oCAAmC;AACnC,uCAAsC;AACtC,0CAAyC;AACzC;AACA;AACA,qCAAoC,wCAAwC;AAC5E;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,uBAAsB;AACtB;AACA;AACA,mBAAkB,IAAI;AACtB,2BAA0B;AAC1B;AACA,yBAAwB,KAAK,QAAQ;AACrC;AACA;AACA,0BAAyB,eAAe;AACxC,0BAAyB,eAAe;AACxC,0BAAyB,eAAe;AACxC,0BAAyB,eAAe;AACxC;AACA,qBAAoB;AACpB,qBAAoB;AACpB,qBAAoB;AACpB,mBAAkB,IAAI;AACtB,yBAAwB;AACxB;AACA;AACA;AACA,iBAAgB,IAAI;AACpB,yBAAwB;AACxB;AACA;AACA;AACA,mBAAkB,IAAI;AACtB,yBAAwB;AACxB,yBAAwB;AACxB,yBAAwB;AACxB,uBAAsB,IAAI;AAC1B,6BAA4B;AAC5B;AACA;AACA;AACA,qBAAoB,IAAI;AACxB,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,eAAc,IAAI;AAClB,qBAAoB;AACpB,mBAAkB,KAAK;AACvB,yBAAwB;AACxB,2BAA0B;AAC1B,uBAAsB,KAAK;AAC3B,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,aAAa;AAC7B,qBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,MAAM,MAAM,iBAAiB;AAC1C;AACA;AACA,kBAAiB,MAAM,MAAM,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,MAAM,MAAM,iBAAiB;AAC1C;AACA,kBAAiB,qCAAqC,aAAa;AACnE,kBAAiB,MAAM,MAAM,iBAAiB;AAC9C,MAAK;AACL,kBAAiB,MAAM,MAAM,yCAAyC;AACtE;AACA;AACA;AACA;AACA;AACA,YAAW,iCAAiC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,qCAAqC,aAAa;AACnE;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,iDAAiD;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,2CAA2C,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,+DAA+D;AAC/E;AACA;AACA,4CAA2C,2CAA2C;AACtF;AACA;AACA;AACA,YAAW,2CAA2C;AACtD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qEAAqE;AACxF;AACA;;AAEA;AACA;AACA,0CAAyC,+EAA+E;AACxH;AACA,aAAY,MAAM;AAClB;AACA,mBAAkB,IAAI,MAAM,oBAAoB;AAChD;AACA;AACA;AACA;AACA,uBAAsB,IAAI,MAAM,WAAW,eAAe,SAAS,IAAI,wBAAwB;AAC/F;AACA;AACA,qBAAoB,IAAI,MAAM,WAAW,WAAW,WAAW,IAAI,0BAA0B;AAC7F;AACA,uBAAsB,IAAI;AAC1B;AACA,uBAAsB,IAAI,MAAM,WAAW,eAAe,SAAS,IAAI,sBAAsB;AAC7F;AACA;AACA,aAAY;AACZ;;AAEA;;AAEA;AACA,yCAAwC,iBAAiB;AACzD;AACA;AACA;AACA,cAAa,SAAS,oBAAoB;AAC1C;AACA,gBAAe,aAAa;AAC5B,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA,yBAAwB,KAAK,MAAM,aAAa;AAChD;AACA,yBAAwB,KAAK,MAAM,aAAa;AAChD;AACA,2BAA0B,IAAI,MAAM,iBAAiB;AACrD;AACA,2BAA0B,IAAI,MAAM,iBAAiB;AACrD,yBAAwB;AACxB;AACA;AACA,yBAAwB;AACxB,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,IAAI,MAAM,WAAW,WAAW,SAAS,IAAI,sBAAsB;AACnF;AACA;AACA,iBAAgB,IAAI,MAAM,WAAW,WAAW,SAAS,IAAI,sBAAsB;AACnF;AACA;AACA,iBAAgB,IAAI,MAAM,WAAW,WAAW,SAAS,IAAI,sBAAsB;AACnF;AACA,iBAAgB,MAAM;AACtB,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA,6BAA4B,KAAK,MAAM,aAAa;AACpD;AACA,6BAA4B,KAAK,MAAM,aAAa;AACpD;AACA,+BAA8B,IAAI,MAAM,iBAAiB;AACzD;AACA,+BAA8B,IAAI,MAAM,iBAAiB;AACzD,6BAA4B;AAC5B;AACA;AACA;AACA;AACA,uBAAsB,KAAK,MAAM,oBAAoB;AACrD;AACA;AACA;AACA,uBAAsB,KAAK,MAAM,WAAW,eAAe,SAAS,IAAI,wBAAwB;AAChG;AACA;AACA,qBAAoB,IAAI,MAAM,WAAW,WAAW,WAAW,KAAK,0BAA0B;AAC9F;AACA,uBAAsB,KAAK;AAC3B;AACA,uBAAsB,KAAK,MAAM,WAAW,eAAe,SAAS,IAAI,sBAAsB;AAC9F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA,uBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA,kBAAiB,KAAK,MAAM,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA,uBAAsB,OAAO,MAAM,YAAY;AAC/C;AACA,uBAAsB,OAAO,MAAM,cAAc;AACjD,uBAAsB,OAAO,MAAM,WAAW,aAAa;AAC3D,uBAAsB,OAAO;AAC7B;AACA;AACA;AACA,kBAAiB,OAAO,MAAM,kBAAkB,eAAe,OAAO,EAAE;AACxE;AACA,kBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,KAAK,MAAM,sCAAsC;AAC9D,uBAAsB,OAAO,MAAM,cAAc;AACjD,cAAa,OAAO,MAAM,iBAAiB,cAAc;AACzD,uBAAsB,OAAO;AAC7B;AACA;AACA;AACA,kBAAiB,KAAK,MAAM,wBAAwB,eAAe,OAAO,EAAE;AAC5E;AACA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,eAAe;AACzD,aAAY,IAAI;AAChB;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA,wBAAuB,OAAO,OAAO;AACrC;AACA;AACA;AACA;AACA,sBAAqB;AACrB,sBAAqB;AACrB,sBAAqB,aAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA,uBAAsB,WAAW,WAAW,OAAO;AACnD,uBAAsB,cAAc,aAAa,KAAK;AACtD;AACA;AACA;AACA;AACA,uBAAsB,OAAO,MAAM,qBAAqB;AACxD,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,KAAK,MAAM,kCAAkC;AAC1D,uBAAsB,OAAO,MAAM,WAAW,aAAa;AAC3D,cAAa,OAAO,MAAM,WAAW,cAAc;AACnD,uBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA,kBAAiB,KAAK,MAAM,kBAAkB,eAAe,OAAO,EAAE;AACtE;AACA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,eAAe;AACzD,aAAY,IAAI;AAChB;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA,wBAAuB,OAAO,OAAO;AACrC;AACA;AACA;AACA;AACA,sBAAqB;AACrB,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA,uBAAsB,WAAW,WAAW,OAAO;AACnD,uBAAsB,cAAc,aAAa,KAAK;AACtD;AACA;AACA;AACA;AACA,uBAAsB,OAAO,MAAM,qBAAqB;AACxD,aAAY;AACZ;AACA;;AAEA,sCAAqC,4CAA4C;AACjF;AACA;AACA,mCAAkC,6BAA6B;AAC/D,qCAAoC,SAAS;AAC7C,mCAAkC,6BAA6B;AAC/D,qCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,iBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM;AAClB;AACA;AACA;AACA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,sBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAgC,qDAAqD,WAAW,aAAa;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,kBAAiB,KAAK,M;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA,2BAA0B,OAAO;AACjC,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAiD;AACjD,kDAAiD;AACjD,kFAAiF;AACjF,8DAA6D;AAC7D,gEAA+D;AAC/D,2BAA0B;AAC1B,kCAAiC;AACjC;AACA,sBAAqB,IAAI,MAAM;AAC/B,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,MAAM;AACrC,4BAA2B;AAC3B,2BAA0B;AAC1B,4BAA2B;AAC3B,sBAAqB;AACrB,iBAAgB;AAChB,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,MAAM;AACrC,4BAA2B;AAC3B,+BAA8B;AAC9B,kCAAiC;AACjC,8BAA6B;AAC7B,wBAAuB;AACvB,mBAAkB;AAClB,iBAAgB;AAChB,4BAA2B;AAC3B,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,sBAAsB;AACrD,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,MAAM;AACrC,4BAA2B;AAC3B,4BAA2B;AAC3B,4BAA2B;AAC3B;AACA,6BAA4B;AAC5B,iBAAgB;AAChB,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,kBAAkB;AACjD,2BAA0B,cAAc;AACxC,yBAAwB,OAAO,kBAAkB;AACjD,eAAc;AACd,gCAA+B;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAgF;AAChF;AACA,yDAAwD;AACxD,yDAAwD;AACxD,+BAA8B;AAC9B;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,aAAY,IAAI;AAChB;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qCAAoC,UAAU;AAC9C;AACA,mCAAkC,KAAK;AACvC,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAkC,KAAK;AACvC,mCAAkC,4BAA4B;AAC9D;AACA;AACA,sBAAqB,uCAAuC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,KAAK;AACnB;AACA,qBAAoB;AACpB,sBAAqB;AACrB;AACA,gBAAe,aAAa,kBAAkB;AAC9C;AACA;;AAEA,2CAA0C,0CAA0C;;AAEpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C,aAAa;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,+BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,kCAAkC;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,KAAK;AACvC;AACA,6BAA4B,KAAK;AACjC;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM,MAAM,iDAAiD;AACzE,eAAc,KAAK,MAAM,2CAA2C;AACpE;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI,MAAM,UAAU,2BAA2B;AAC3D,aAAY,MAAM;AAClB;AACA;AACA,mBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA,yBAAwB,KAAK,MAAM,0BAA0B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,aAAY,IAAI;AAChB;AACA;AACA;AACA,iBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,gCAAgC;AACnE;AACA;AACA,oCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA,aAAY,SAAS,aAAa,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,MAAM,aAAa,MAAM;AACrC;AACA,iBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,IAAI,MAAM,uBAAuB;AAC7C;AACA;AACA,aAAY,IAAI,MAAM,4BAA4B;AAClD;AACA;;AAEA;;AAEA,kDAAiD,YAAY,cAAc,cAAc,cAAc,cAAc;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,iBAAiB;AACrC;AACA;AACA;AACA,iC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,KAAK,MAAM,qBAAqB,0BAA0B;AACxE,2D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,OAAO;AAChC;AACA;AACA;AACA,MAAK;AACL,0BAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,qBAAoB,aAAa,aAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,0CAAyC,IAAI;AAC7C;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB,0CAAyC,IAAI;AAC7C;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,wBAAuB,6CAA6C;AACpE;AACA;AACA;AACA;AACA;AACA,yCAAwC,OAAO,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,cAAc;AACtD,qCAAoC,YAAY;AAChD,0CAAyC,yBAAyB,kBAAkB,GAAG;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C,+BAA+B,gCAAgC,OAAO,EAAE;AACpH,iCAAgC,sCAAsC,OAAO;AAC7E;AACA,mCAAkC,8CAA8C,OAAO;AACvF;AACA,0BAAyB,oCAAoC,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA,gCAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,gDAAgD,OAAO;AAClF,2BAA0B,0CAA0C,OAAO;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,YAAY;AAChD,uCAAsC,cAAc;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,SAAS,WAAW,SAAS,mBAAmB,6BAA6B;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa,OAAO;AACpB;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAmB,OAAO;AAC1B;AACA;;AAEA,oBAAmB,OAAO;AAC1B;AACA,sBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA,kBAAiB,QAAQ;AACzB;AACA,oBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2CAA0C,+CAA+C;;AAEzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,iBAAgB,IAAI;AACpB;AACA;AACA;AACA,iBAAgB,IAAI;AACpB,sBAAqB;AACrB,uBAAsB,OAAO;AAC7B;AACA,uBAAsB,OAAO;AAC7B;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,YAAY;AAC7B;AACA,mBAAkB,OAAO;AACzB;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA,mCAAkC;AAClC;AACA,+BAA8B;AAC9B;AACA;AACA;AACA,uBAAsB,OAAO,oBAAoB,mBAAmB,OAAO;AAC3E,UAAS;AACT;AACA;AACA;AACA,+BAA8B;AAC9B;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS,mEAAmE;AAC3F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,OAAO;AAC5B,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,OAAO;AAC5B,sBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,OAAO;AAC5B,sBAAqB,OAAO;AAC5B,aAAY;AACZ;;AAEA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA,4BAA2B,8BAA8B;AACzD;AACA;AACA,sBAAqB,+FAA+F;AACpH,aAAY,IAAI;AAChB;AACA;AACA;AACA,iBAAgB,YAAY;AAC5B;AACA,iBAAgB,gBAAgB;AAChC;AACA;AACA,wBAAuB,aAAa;AACpC,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,gCAAgC;AACzE,uCAAsC,cAAc,WAAW,MAAM;AACrE,uCAAsC,eAAe,UAAU,MAAM;AACrE,uCAAsC,cAAc,UAAU,MAAM;AACpE;AACA;AACA;AACA;AACA,6CAA4C,iBAAiB,WAAW,6BAA6B,MAAM;AAC3G;AACA,qBAAoB,WAAW;AAC/B,iCAAgC,2BAA2B,UAAU;AACrE;AACA;AACA;AACA;AACA;AACA,qBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B,oCAAmC;AACnC,oCAAmC;AACnC,6BAA4B;AAC5B;AACA,uCAAsC;AACtC,oCAAmC;AACnC;AACA,yBAAwB;AACxB,oCAAmC;AACnC;AACA,gCAA+B;AAC/B,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB;;AAEA;AACA;AACA;AACA,uBAAsB;;AAEtB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAsC;AACtC,4BAA2B;AAC3B,wBAAuB;AACvB,eAAc;AACd,+BAA8B;AAC9B,2BAA0B;AAC1B,kBAAiB;AACjB,qBAAoB;AACpB;AACA,4BAA2B;AAC3B,cAAa;AACb,cAAa;AACb,gBAAe;AACf;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAgB,kBAAkB;;AAElC;AACA,sBAAqB,eAAe;AACpC,cAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B;AAC9B,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,0BAAyB;AACzB,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,QAAQ;AACpB,aAAY,QAAQ;AACpB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC,cAAa,4CAA4C,EAAE;AAC3D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,QAAQ;AACpB,aAAY,QAAQ;AACpB;AACA,cAAa;AACb;AACA,cAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA,mBAAkB,qCAAqC;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB,wBAAwB;;AAE7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAA+B,UAAU;AACzC;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA,gCAA+B,UAAU;AACzC;AACA,aAAY,IAAI;AAChB;AACA;;AAEA;AACA;;AAEA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB,QAAQ;AAC7B;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAe,QAAQ;AACvB;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;;AAEA,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,wBAAuB,UAAU;AACjC;AACA;AACA,4BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL,gBAAe,QAAQ;AACvB;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,oBAAmB,QAAQ;AAC3B;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;;AAEA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,QAAQ;AACvB;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,gCAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,WAAW;AAC9B;AACA;;AAEA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAmB,QAAQ;AAC3B;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA,2BAA0B,QAAQ;AAClC,wBAAuB,QAAQ;AAC/B;AACA;AACA;;AAEA;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;AACA,4BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,eAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,4BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,WAAW;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA2B,eAAe;AAC1C;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB,gCAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,4BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,oCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,8BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,gBAAe,8CAA8C;AAC7D;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,WAAU,KAAK;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU,OAAO;AACjB,G;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA,I;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA,I;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,K;AACA;AACA,cAAa,OAAO;AACpB;AACA,cAAa,OAAO;AACpB;AACA,K;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,SAAS;AACrB,G;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA,aAAY,OAAO;AACnB,K;AACA;AACA,cAAa,OAAO;AACpB;AACA,cAAa,OAAO;AACpB;AACA,K;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,SAAS;AACrB,G;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA,cAAa,OAAO;AACpB;AACA,cAAa,OAAO;AACpB;AACA,aAAY,OAAO;AACnB;AACA;AACA,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA,aAAY,SAAS;AACrB;AACA,wBAAuB,mBAAmB;AAC1C,IAAG;AACH;AACA,aAAY,SAAS;AACrB,K;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,eAAc,OAAO;AACrB,M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,O;AACA;AACA;AACA;AACA;AACA,O;AACA,M;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,MAAK;AACL;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,QAAQ;AACt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B,CAAjB;AACA;AACA;AACA,UAAOkB,UAAP;AACD,EAZD;;SAcQzB,c,GAAAA,c;;;;;;ACrHR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,sBAAsB;AACrC;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA,aAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB;AACA;AACA,YAAW,OAAO;AAClB,aAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;;AAEd;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;;AAEA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,qBAAoB;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;;;AAGA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C,YAAW,gBAAgB;AAC3B;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc,eAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,gCAAgC;AAC3C;AACA;AACA;AACA,uBAAsB;AACtB,4BAA2B;AAC3B,cAAa,QAAQ;AACrB;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,OAAO;AACZ;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,gCAAgC;AAC3C;AACA;AACA;AACA,uBAAsB;AACtB,4BAA2B;AAC3B,cAAa,QAAQ;AACrB;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK,OAAO;AACZ;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,kBAAkB;AAC/B,uCAAsC;AACtC;AACA;AACA,uCAAsC;AACtC;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,gCAAgC;AAC3C,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC,0BAAyB;AACzB,4BAA2B;AAC3B,gDAA+C,4BAA4B;AAC3E,mCAAkC,gCAAgC;AAClE;AACA;AACA,mDAAkD;AAClD;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,gCAAgC;AAC3C,aAAY,OAAO;AACnB;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,gCAAgC;AAC3C,aAAY,OAAO;AACnB;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,qCAAoC;AACpC;AACA,YAAW,gCAAgC;AAC3C,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C,aAAY,OAAO;AACnB;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,gCAAgC;AAC5C,aAAY,OAAO;AACnB;AACA;AACA;AACA,uBAAsB;AACtB,mBAAkB;AAClB;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB;;AAEjB;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAwB,YAAY;AACpC;AACA;AACA;AACA,qBAAoB;AACpB;AACA,QAAO,OAAO;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA,YAAW,4BAA4B;AACvC,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,uCAAuC;AAClD;AACA,YAAW,uCAAuC;AAClD;AACA,YAAW,uCAAuC;AAClD;AACA,aAAY,qCAAqC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B,8CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,wBAAuB,gCAAgC;AACvD;AACA,IAAG;AACH;AACA;AACA,wBAAuB,OAAO;AAC9B,wBAAuB,gCAAgC;AACvD,IAAG;AACH;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B,wBAAuB,gCAAgC;AACvD,IAAG;AACH;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;AACA,2BAA0B;AAC1B,uBAAsB;AACtB,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,YAAW,qCAAqC;AAChD,aAAY,qCAAqC;AACjD;AACA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA,oBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,qCAAqC;AAChD,YAAW,OAAO;AAClB,aAAY,iCAAiC;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,0BAAyB,6BAA6B;AACtD;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA,cAAa,mCAAmC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,qCAAqC;AAChD,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;;AAEA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC,mCAAkC;AAClC;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAW,qCAAqC;AAChD;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,qCAAqC;AAChD,aAAY,OAAO;AACnB;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;;;AAGA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,qCAAqC;AACjD,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,cAAa,gCAAgC;AAC7C;AACA,cAAa,QAAQ;AACrB;AACA,cAAa,QAAQ;AACrB;AACA,cAAa,OAAO;AACpB;AACA,cAAa,OAAO;AACpB;AACA;;;AAGA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;KChpEa2B,W,WAAAA,W;AAEX,wBAAY73B,MAAZ,EAAoB83B,WAApB,EAAiC;AAAA;;AAAA;;AAC/B,UAAKA,WAAL,GAAmBA,WAAnB;AACA,UAAKC,IAAL,GAAYD,WAAZ;AACA,UAAK93B,MAAL,GAAcA,MAAd;AACA,SAAMkJ,SAASlJ,OAAOkJ,MAAtB;AACAA,YAAOjW,gBAAP,CAAwB,WAAxB,EAAqC,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+a,SAASN,MAAMG,OAAf,GAAyBL,MAAMM,MAAxC;AACAp7B,WAAIqxB,IAAJ;AACArxB,WAAIS,SAAJ,CAAc6f,EAAd,EAAkBC,EAAlB;AACAvgB,WAAInQ,MAAJ,CAAW,CAAClC,KAAK4e,KAAL,CAAWwuB,GAAX,EAAgBC,GAAhB,CAAZ;AACAh7B,WAAI3N,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd;AACA2N,WAAI+5B,QAAJ,CAAaF,GAAb,EAAkB,CAAlB,EAAqB,CAArB;AACA75B,WAAIuxB,OAAJ;AACD;;;oCAEcjwB,G,EAAK;AAClB,cAAO,CAAC,CAAR;AACD;;;;;;AAEH64B,mBAAkBzzC,SAAlB,CAA4BwR,MAA5B,GAAqC,4BAArC;;AAGA,UAASugC,UAAT,CAAoBpmC,KAApB,EAA2B;AACzB,UAAO,IAAIA,KAAX;AACD,E;;;;;;;;;;AC/SD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;ACrPA;;;;AACA;;AACA;;AACA;;KAAYmpC,E;;AACZ;;KAAYC,O;;AACZ;;AACA;;AACA;;AACA;;;;;;AAEA,UAASC,6BAAT,GAAyC;AACvC,OAAIC,MAAM,2BAAV;AACAh3C,UAAOi3C,SAAP,GAAmBD,GAAnB;AACA,OAAIE,WAAWF,IAAIG,WAAJ,EAAf;AACA,OAAID,YAAY,sBAAME,cAAN,G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","file":"sketcher.bundle.js","sourcesContent":[" \tvar parentHotUpdateCallback = this[\"webpackHotUpdate\"];\n \tthis[\"webpackHotUpdate\"] = \r\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) { // eslint-disable-line no-unused-vars\r\n \t\thotAddUpdateChunk(chunkId, moreModules);\r\n \t\tif(parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\r\n \t}\r\n \t\r\n \tfunction hotDownloadUpdateChunk(chunkId) { // eslint-disable-line no-unused-vars\r\n \t\tvar head = document.getElementsByTagName(\"head\")[0];\r\n \t\tvar script = document.createElement(\"script\");\r\n \t\tscript.type = \"text/javascript\";\r\n \t\tscript.charset = \"utf-8\";\r\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\r\n \t\thead.appendChild(script);\r\n \t}\r\n \t\r\n \tfunction hotDownloadManifest(callback) { // eslint-disable-line no-unused-vars\r\n \t\tif(typeof XMLHttpRequest === \"undefined\")\r\n \t\t\treturn callback(new Error(\"No browser support\"));\r\n \t\ttry {\r\n \t\t\tvar request = new XMLHttpRequest();\r\n \t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\r\n \t\t\trequest.open(\"GET\", requestPath, true);\r\n \t\t\trequest.timeout = 10000;\r\n \t\t\trequest.send(null);\r\n \t\t} catch(err) {\r\n \t\t\treturn callback(err);\r\n \t\t}\r\n \t\trequest.onreadystatechange = function() {\r\n \t\t\tif(request.readyState !== 4) return;\r\n \t\t\tif(request.status === 0) {\r\n \t\t\t\t// timeout\r\n \t\t\t\tcallback(new Error(\"Manifest request to \" + requestPath + \" timed out.\"));\r\n \t\t\t} else if(request.status === 404) {\r\n \t\t\t\t// no update available\r\n \t\t\t\tcallback();\r\n \t\t\t} else if(request.status !== 200 && request.status !== 304) {\r\n \t\t\t\t// other failure\r\n \t\t\t\tcallback(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\r\n \t\t\t} else {\r\n \t\t\t\t// success\r\n \t\t\t\ttry {\r\n \t\t\t\t\tvar update = JSON.parse(request.responseText);\r\n \t\t\t\t} catch(e) {\r\n \t\t\t\t\tcallback(e);\r\n \t\t\t\t\treturn;\r\n \t\t\t\t}\r\n \t\t\t\tcallback(null, update);\r\n \t\t\t}\r\n \t\t};\r\n \t}\r\n\n \t\r\n \t\r\n \t// Copied from https://github.com/facebook/react/blob/bef45b0/src/shared/utils/canDefineProperty.js\r\n \tvar canDefineProperty = false;\r\n \ttry {\r\n \t\tObject.defineProperty({}, \"x\", {\r\n \t\t\tget: function() {}\r\n \t\t});\r\n \t\tcanDefineProperty = true;\r\n \t} catch(x) {\r\n \t\t// IE will fail on defineProperty\r\n \t}\r\n \t\r\n \tvar hotApplyOnUpdate = true;\r\n \tvar hotCurrentHash = \"1d19dcd8030284202861\"; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentModuleData = {};\r\n \tvar hotCurrentParents = []; // eslint-disable-line no-unused-vars\r\n \t\r\n \tfunction hotCreateRequire(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar me = installedModules[moduleId];\r\n \t\tif(!me) return __webpack_require__;\r\n \t\tvar fn = function(request) {\r\n \t\t\tif(me.hot.active) {\r\n \t\t\t\tif(installedModules[request]) {\r\n \t\t\t\t\tif(installedModules[request].parents.indexOf(moduleId) < 0)\r\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\r\n \t\t\t\t\tif(me.children.indexOf(request) < 0)\r\n \t\t\t\t\t\tme.children.push(request);\r\n \t\t\t\t} else hotCurrentParents = [moduleId];\r\n \t\t\t} else {\r\n \t\t\t\tconsole.warn(\"[HMR] unexpected require(\" + request + \") from disposed module \" + moduleId);\r\n \t\t\t\thotCurrentParents = [];\r\n \t\t\t}\r\n \t\t\treturn __webpack_require__(request);\r\n \t\t};\r\n \t\tfor(var name in __webpack_require__) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(__webpack_require__, name)) {\r\n \t\t\t\tif(canDefineProperty) {\r\n \t\t\t\t\tObject.defineProperty(fn, name, (function(name) {\r\n \t\t\t\t\t\treturn {\r\n \t\t\t\t\t\t\tconfigurable: true,\r\n \t\t\t\t\t\t\tenumerable: true,\r\n \t\t\t\t\t\t\tget: function() {\r\n \t\t\t\t\t\t\t\treturn __webpack_require__[name];\r\n \t\t\t\t\t\t\t},\r\n \t\t\t\t\t\t\tset: function(value) {\r\n \t\t\t\t\t\t\t\t__webpack_require__[name] = value;\r\n \t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t};\r\n \t\t\t\t\t}(name)));\r\n \t\t\t\t} else {\r\n \t\t\t\t\tfn[name] = __webpack_require__[name];\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\tfunction ensure(chunkId, callback) {\r\n \t\t\tif(hotStatus === \"ready\")\r\n \t\t\t\thotSetStatus(\"prepare\");\r\n \t\t\thotChunksLoading++;\r\n \t\t\t__webpack_require__.e(chunkId, function() {\r\n \t\t\t\ttry {\r\n \t\t\t\t\tcallback.call(null, fn);\r\n \t\t\t\t} finally {\r\n \t\t\t\t\tfinishChunkLoading();\r\n \t\t\t\t}\r\n \t\r\n \t\t\t\tfunction finishChunkLoading() {\r\n \t\t\t\t\thotChunksLoading--;\r\n \t\t\t\t\tif(hotStatus === \"prepare\") {\r\n \t\t\t\t\t\tif(!hotWaitingFilesMap[chunkId]) {\r\n \t\t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\t\t\t\thotUpdateDownloaded();\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t\t}\r\n \t\tif(canDefineProperty) {\r\n \t\t\tObject.defineProperty(fn, \"e\", {\r\n \t\t\t\tenumerable: true,\r\n \t\t\t\tvalue: ensure\r\n \t\t\t});\r\n \t\t} else {\r\n \t\t\tfn.e = ensure;\r\n \t\t}\r\n \t\treturn fn;\r\n \t}\r\n \t\r\n \tfunction hotCreateModule(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar hot = {\r\n \t\t\t// private stuff\r\n \t\t\t_acceptedDependencies: {},\r\n \t\t\t_declinedDependencies: {},\r\n \t\t\t_selfAccepted: false,\r\n \t\t\t_selfDeclined: false,\r\n \t\t\t_disposeHandlers: [],\r\n \t\r\n \t\t\t// Module API\r\n \t\t\tactive: true,\r\n \t\t\taccept: function(dep, callback) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfAccepted = true;\r\n \t\t\t\telse if(typeof dep === \"function\")\r\n \t\t\t\t\thot._selfAccepted = dep;\r\n \t\t\t\telse if(typeof dep === \"object\")\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback;\r\n \t\t\t\telse\r\n \t\t\t\t\thot._acceptedDependencies[dep] = callback;\r\n \t\t\t},\r\n \t\t\tdecline: function(dep) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfDeclined = true;\r\n \t\t\t\telse if(typeof dep === \"number\")\r\n \t\t\t\t\thot._declinedDependencies[dep] = true;\r\n \t\t\t\telse\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\r\n \t\t\t},\r\n \t\t\tdispose: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\taddDisposeHandler: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\tremoveDisposeHandler: function(callback) {\r\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\r\n \t\t\t\tif(idx >= 0) hot._disposeHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t// Management API\r\n \t\t\tcheck: hotCheck,\r\n \t\t\tapply: hotApply,\r\n \t\t\tstatus: function(l) {\r\n \t\t\t\tif(!l) return hotStatus;\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\taddStatusHandler: function(l) {\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\tremoveStatusHandler: function(l) {\r\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\r\n \t\t\t\tif(idx >= 0) hotStatusHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t//inherit from previous dispose call\r\n \t\t\tdata: hotCurrentModuleData[moduleId]\r\n \t\t};\r\n \t\treturn hot;\r\n \t}\r\n \t\r\n \tvar hotStatusHandlers = [];\r\n \tvar hotStatus = \"idle\";\r\n \t\r\n \tfunction hotSetStatus(newStatus) {\r\n \t\thotStatus = newStatus;\r\n \t\tfor(var i = 0; i < hotStatusHandlers.length; i++)\r\n \t\t\thotStatusHandlers[i].call(null, newStatus);\r\n \t}\r\n \t\r\n \t// while downloading\r\n \tvar hotWaitingFiles = 0;\r\n \tvar hotChunksLoading = 0;\r\n \tvar hotWaitingFilesMap = {};\r\n \tvar hotRequestedFilesMap = {};\r\n \tvar hotAvailibleFilesMap = {};\r\n \tvar hotCallback;\r\n \t\r\n \t// The update info\r\n \tvar hotUpdate, hotUpdateNewHash;\r\n \t\r\n \tfunction toModuleId(id) {\r\n \t\tvar isNumber = (+id) + \"\" === id;\r\n \t\treturn isNumber ? +id : id;\r\n \t}\r\n \t\r\n \tfunction hotCheck(apply, callback) {\r\n \t\tif(hotStatus !== \"idle\") throw new Error(\"check() is only allowed in idle status\");\r\n \t\tif(typeof apply === \"function\") {\r\n \t\t\thotApplyOnUpdate = false;\r\n \t\t\tcallback = apply;\r\n \t\t} else {\r\n \t\t\thotApplyOnUpdate = apply;\r\n \t\t\tcallback = callback || function(err) {\r\n \t\t\t\tif(err) throw err;\r\n \t\t\t};\r\n \t\t}\r\n \t\thotSetStatus(\"check\");\r\n \t\thotDownloadManifest(function(err, update) {\r\n \t\t\tif(err) return callback(err);\r\n \t\t\tif(!update) {\r\n \t\t\t\thotSetStatus(\"idle\");\r\n \t\t\t\tcallback(null, null);\r\n \t\t\t\treturn;\r\n \t\t\t}\r\n \t\r\n \t\t\thotRequestedFilesMap = {};\r\n \t\t\thotAvailibleFilesMap = {};\r\n \t\t\thotWaitingFilesMap = {};\r\n \t\t\tfor(var i = 0; i < update.c.length; i++)\r\n \t\t\t\thotAvailibleFilesMap[update.c[i]] = true;\r\n \t\t\thotUpdateNewHash = update.h;\r\n \t\r\n \t\t\thotSetStatus(\"prepare\");\r\n \t\t\thotCallback = callback;\r\n \t\t\thotUpdate = {};\r\n \t\t\tvar chunkId = 1;\r\n \t\t\t{ // eslint-disable-line no-lone-blocks\r\n \t\t\t\t/*globals chunkId */\r\n \t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t}\r\n \t\t\tif(hotStatus === \"prepare\" && hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\thotUpdateDownloaded();\r\n \t\t\t}\r\n \t\t});\r\n \t}\r\n \t\r\n \tfunction hotAddUpdateChunk(chunkId, moreModules) { // eslint-disable-line no-unused-vars\r\n \t\tif(!hotAvailibleFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\r\n \t\t\treturn;\r\n \t\thotRequestedFilesMap[chunkId] = false;\r\n \t\tfor(var moduleId in moreModules) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\r\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\tif(--hotWaitingFiles === 0 && hotChunksLoading === 0) {\r\n \t\t\thotUpdateDownloaded();\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotEnsureUpdateChunk(chunkId) {\r\n \t\tif(!hotAvailibleFilesMap[chunkId]) {\r\n \t\t\thotWaitingFilesMap[chunkId] = true;\r\n \t\t} else {\r\n \t\t\thotRequestedFilesMap[chunkId] = true;\r\n \t\t\thotWaitingFiles++;\r\n \t\t\thotDownloadUpdateChunk(chunkId);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotUpdateDownloaded() {\r\n \t\thotSetStatus(\"ready\");\r\n \t\tvar callback = hotCallback;\r\n \t\thotCallback = null;\r\n \t\tif(!callback) return;\r\n \t\tif(hotApplyOnUpdate) {\r\n \t\t\thotApply(hotApplyOnUpdate, callback);\r\n \t\t} else {\r\n \t\t\tvar outdatedModules = [];\r\n \t\t\tfor(var id in hotUpdate) {\r\n \t\t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t\tcallback(null, outdatedModules);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotApply(options, callback) {\r\n \t\tif(hotStatus !== \"ready\") throw new Error(\"apply() is only allowed in ready status\");\r\n \t\tif(typeof options === \"function\") {\r\n \t\t\tcallback = options;\r\n \t\t\toptions = {};\r\n \t\t} else if(options && typeof options === \"object\") {\r\n \t\t\tcallback = callback || function(err) {\r\n \t\t\t\tif(err) throw err;\r\n \t\t\t};\r\n \t\t} else {\r\n \t\t\toptions = {};\r\n \t\t\tcallback = callback || function(err) {\r\n \t\t\t\tif(err) throw err;\r\n \t\t\t};\r\n \t\t}\r\n \t\r\n \t\tfunction getAffectedStuff(module) {\r\n \t\t\tvar outdatedModules = [module];\r\n \t\t\tvar outdatedDependencies = {};\r\n \t\r\n \t\t\tvar queue = outdatedModules.slice();\r\n \t\t\twhile(queue.length > 0) {\r\n \t\t\t\tvar moduleId = queue.pop();\r\n \t\t\t\tvar module = installedModules[moduleId];\r\n \t\t\t\tif(!module || module.hot._selfAccepted)\r\n \t\t\t\t\tcontinue;\r\n \t\t\t\tif(module.hot._selfDeclined) {\r\n \t\t\t\t\treturn new Error(\"Aborted because of self decline: \" + moduleId);\r\n \t\t\t\t}\r\n \t\t\t\tif(moduleId === 0) {\r\n \t\t\t\t\treturn;\r\n \t\t\t\t}\r\n \t\t\t\tfor(var i = 0; i < module.parents.length; i++) {\r\n \t\t\t\t\tvar parentId = module.parents[i];\r\n \t\t\t\t\tvar parent = installedModules[parentId];\r\n \t\t\t\t\tif(parent.hot._declinedDependencies[moduleId]) {\r\n \t\t\t\t\t\treturn new Error(\"Aborted because of declined dependency: \" + moduleId + \" in \" + parentId);\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(outdatedModules.indexOf(parentId) >= 0) continue;\r\n \t\t\t\t\tif(parent.hot._acceptedDependencies[moduleId]) {\r\n \t\t\t\t\t\tif(!outdatedDependencies[parentId])\r\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\r\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\r\n \t\t\t\t\t\tcontinue;\r\n \t\t\t\t\t}\r\n \t\t\t\t\tdelete outdatedDependencies[parentId];\r\n \t\t\t\t\toutdatedModules.push(parentId);\r\n \t\t\t\t\tqueue.push(parentId);\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\r\n \t\t\treturn [outdatedModules, outdatedDependencies];\r\n \t\t}\r\n \t\r\n \t\tfunction addAllToSet(a, b) {\r\n \t\t\tfor(var i = 0; i < b.length; i++) {\r\n \t\t\t\tvar item = b[i];\r\n \t\t\t\tif(a.indexOf(item) < 0)\r\n \t\t\t\t\ta.push(item);\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// at begin all updates modules are outdated\r\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\r\n \t\tvar outdatedDependencies = {};\r\n \t\tvar outdatedModules = [];\r\n \t\tvar appliedUpdate = {};\r\n \t\tfor(var id in hotUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\tvar moduleId = toModuleId(id);\r\n \t\t\t\tvar result = getAffectedStuff(moduleId);\r\n \t\t\t\tif(!result) {\r\n \t\t\t\t\tif(options.ignoreUnaccepted)\r\n \t\t\t\t\t\tcontinue;\r\n \t\t\t\t\thotSetStatus(\"abort\");\r\n \t\t\t\t\treturn callback(new Error(\"Aborted because \" + moduleId + \" is not accepted\"));\r\n \t\t\t\t}\r\n \t\t\t\tif(result instanceof Error) {\r\n \t\t\t\t\thotSetStatus(\"abort\");\r\n \t\t\t\t\treturn callback(result);\r\n \t\t\t\t}\r\n \t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\r\n \t\t\t\taddAllToSet(outdatedModules, result[0]);\r\n \t\t\t\tfor(var moduleId in result[1]) {\r\n \t\t\t\t\tif(Object.prototype.hasOwnProperty.call(result[1], moduleId)) {\r\n \t\t\t\t\t\tif(!outdatedDependencies[moduleId])\r\n \t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\r\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[moduleId], result[1][moduleId]);\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Store self accepted outdated modules to require them later by the module system\r\n \t\tvar outdatedSelfAcceptedModules = [];\r\n \t\tfor(var i = 0; i < outdatedModules.length; i++) {\r\n \t\t\tvar moduleId = outdatedModules[i];\r\n \t\t\tif(installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)\r\n \t\t\t\toutdatedSelfAcceptedModules.push({\r\n \t\t\t\t\tmodule: moduleId,\r\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\r\n \t\t\t\t});\r\n \t\t}\r\n \t\r\n \t\t// Now in \"dispose\" phase\r\n \t\thotSetStatus(\"dispose\");\r\n \t\tvar queue = outdatedModules.slice();\r\n \t\twhile(queue.length > 0) {\r\n \t\t\tvar moduleId = queue.pop();\r\n \t\t\tvar module = installedModules[moduleId];\r\n \t\t\tif(!module) continue;\r\n \t\r\n \t\t\tvar data = {};\r\n \t\r\n \t\t\t// Call dispose handlers\r\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\r\n \t\t\tfor(var j = 0; j < disposeHandlers.length; j++) {\r\n \t\t\t\tvar cb = disposeHandlers[j];\r\n \t\t\t\tcb(data);\r\n \t\t\t}\r\n \t\t\thotCurrentModuleData[moduleId] = data;\r\n \t\r\n \t\t\t// disable module (this disables requires from this module)\r\n \t\t\tmodule.hot.active = false;\r\n \t\r\n \t\t\t// remove module from cache\r\n \t\t\tdelete installedModules[moduleId];\r\n \t\r\n \t\t\t// remove \"parents\" references from all children\r\n \t\t\tfor(var j = 0; j < module.children.length; j++) {\r\n \t\t\t\tvar child = installedModules[module.children[j]];\r\n \t\t\t\tif(!child) continue;\r\n \t\t\t\tvar idx = child.parents.indexOf(moduleId);\r\n \t\t\t\tif(idx >= 0) {\r\n \t\t\t\t\tchild.parents.splice(idx, 1);\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// remove outdated dependency from module children\r\n \t\tfor(var moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tvar module = installedModules[moduleId];\r\n \t\t\t\tvar moduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\tfor(var j = 0; j < moduleOutdatedDependencies.length; j++) {\r\n \t\t\t\t\tvar dependency = moduleOutdatedDependencies[j];\r\n \t\t\t\t\tvar idx = module.children.indexOf(dependency);\r\n \t\t\t\t\tif(idx >= 0) module.children.splice(idx, 1);\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Not in \"apply\" phase\r\n \t\thotSetStatus(\"apply\");\r\n \t\r\n \t\thotCurrentHash = hotUpdateNewHash;\r\n \t\r\n \t\t// insert new code\r\n \t\tfor(var moduleId in appliedUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\r\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// call accept handlers\r\n \t\tvar error = null;\r\n \t\tfor(var moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tvar module = installedModules[moduleId];\r\n \t\t\t\tvar moduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\tvar callbacks = [];\r\n \t\t\t\tfor(var i = 0; i < moduleOutdatedDependencies.length; i++) {\r\n \t\t\t\t\tvar dependency = moduleOutdatedDependencies[i];\r\n \t\t\t\t\tvar cb = module.hot._acceptedDependencies[dependency];\r\n \t\t\t\t\tif(callbacks.indexOf(cb) >= 0) continue;\r\n \t\t\t\t\tcallbacks.push(cb);\r\n \t\t\t\t}\r\n \t\t\t\tfor(var i = 0; i < callbacks.length; i++) {\r\n \t\t\t\t\tvar cb = callbacks[i];\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\tcb(outdatedDependencies);\r\n \t\t\t\t\t} catch(err) {\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Load self accepted modules\r\n \t\tfor(var i = 0; i < outdatedSelfAcceptedModules.length; i++) {\r\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\r\n \t\t\tvar moduleId = item.module;\r\n \t\t\thotCurrentParents = [moduleId];\r\n \t\t\ttry {\r\n \t\t\t\t__webpack_require__(moduleId);\r\n \t\t\t} catch(err) {\r\n \t\t\t\tif(typeof item.errorHandler === \"function\") {\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\titem.errorHandler(err);\r\n \t\t\t\t\t} catch(err) {\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t} else if(!error)\r\n \t\t\t\t\terror = err;\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// handle errors in accept handlers and self accepted module load\r\n \t\tif(error) {\r\n \t\t\thotSetStatus(\"fail\");\r\n \t\t\treturn callback(error);\r\n \t\t}\r\n \t\r\n \t\thotSetStatus(\"idle\");\r\n \t\tcallback(null, outdatedModules);\r\n \t}\r\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false,\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: hotCurrentParents,\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(0)(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1d19dcd8030284202861\n **/","import $ from 'jquery'\nwindow.jQuery = window.$ = $;\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/utils/jqueryfy.js\n **/","/*!\n * jQuery JavaScript Library v2.1.0\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-01-23T21:10Z\n */\n\n(function( global, factory ) {\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// For CommonJS and CommonJS-like environments where a proper window is present,\n\t\t// execute the factory and get jQuery\n\t\t// For environments that do not inherently posses a window with a document\n\t\t// (such as Node.js), expose a jQuery-making factory as module.exports\n\t\t// This accentuates the need for the creation of a real window\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Can't do this because several apps including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n// Support: Firefox 18+\n//\n\nvar arr = [];\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar trim = \"\".trim;\n\nvar support = {};\n\n\n\nvar\n\t// Use the correct document accordingly with window argument (sandbox)\n\tdocument = window.document,\n\n\tversion = \"2.1.0\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num != null ?\n\n\t\t\t// Return a 'clean' array\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\n\n\t\t\t// Return just the object\n\t\t\tslice.call( this );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach: function( callback, args ) {\n\t\treturn jQuery.each( this, callback, args );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t}));\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor(null);\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend({\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\t// See test/unit/core.js for details concerning isFunction.\n\t// Since version 1.3, DOM methods and functions like alert\n\t// aren't supported. They return false on IE (#2968).\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type(obj) === \"function\";\n\t},\n\n\tisArray: Array.isArray,\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\t\t// parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\treturn obj - parseFloat( obj ) >= 0;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\t// Not plain objects:\n\t\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t\t// - DOM nodes\n\t\t// - window\n\t\tif ( jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Support: Firefox <20\n\t\t// The try/catch suppresses exceptions thrown when attempting to access\n\t\t// the \"constructor\" property of certain host objects, ie. |window.location|\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=814622\n\t\ttry {\n\t\t\tif ( obj.constructor &&\n\t\t\t\t\t!hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the function hasn't returned already, we're confident that\n\t\t// |obj| is a plain object, created by {} or constructed with new Object\n\t\treturn true;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\t\t// Support: Android < 4.0, iOS < 6 (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call(obj) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tvar script,\n\t\t\tindirect = eval;\n\n\t\tcode = jQuery.trim( code );\n\n\t\tif ( code ) {\n\t\t\t// If the code includes a valid, prologue position\n\t\t\t// strict mode pragma, execute code by injecting a\n\t\t\t// script tag into the document.\n\t\t\tif ( code.indexOf(\"use strict\") === 1 ) {\n\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\tscript.text = code;\n\t\t\t\tdocument.head.appendChild( script ).parentNode.removeChild( script );\n\t\t\t} else {\n\t\t\t// Otherwise, avoid the DOM node creation, insertion\n\t\t\t// and removal by using an indirect global eval\n\t\t\t\tindirect( code );\n\t\t\t}\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\t// args is for internal usage only\n\teach: function( obj, callback, args ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = obj.length,\n\t\t\tisArray = isArraylike( obj );\n\n\t\tif ( args ) {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t\t} else {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\ttrim: function( text ) {\n\t\treturn text == null ? \"\" : trim.call( text );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tisArray = isArraylike( elems ),\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArray ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n});\n\n// Populate the class2type map\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\nfunction isArraylike( obj ) {\n\tvar length = obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\tif ( obj.nodeType === 1 && length ) {\n\t\treturn true;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v1.10.16\n * http://sizzlejs.com/\n *\n * Copyright 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-01-13\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\tcompile,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + -(new Date()),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// General-purpose constants\n\tstrundefined = typeof undefined,\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf if we can't use a native one\n\tindexOf = arr.indexOf || function( elem ) {\n\t\tvar i = 0,\n\t\t\tlen = this.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( this[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t// http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\n\t\t\"*(?:([*^$|!~]?=)\" + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\n\n\t// Prefer arguments quoted,\n\t//   then not containing pseudos/brackets,\n\t//   then attribute selectors/non-parenthetical expressions,\n\t//   then anything else\n\t// These preferences are here to reduce the number of selectors\n\t//   needing tokenize in the PSEUDO preFilter\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\trescape = /'|\\\\/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t};\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\t// QSA vars\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\n\tif ( !selector || typeof selector !== \"string\" ) {\n\t\treturn results;\n\t}\n\n\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {\n\t\treturn [];\n\t}\n\n\tif ( documentIsHTML && !seed ) {\n\n\t\t// Shortcuts\n\t\tif ( (match = rquickExpr.exec( selector )) ) {\n\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document (jQuery #6963)\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Context is not a document\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\treturn results;\n\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\t// QSA path\n\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\t\t\tnid = old = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType === 9 && selector;\n\n\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t// IE 8 doesn't work on object elements\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn !!fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( div.parentNode ) {\n\t\t\tdiv.parentNode.removeChild( div );\n\t\t}\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = attrs.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== strundefined && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc,\n\t\tparent = doc.defaultView;\n\n\t// If no document and documentElement is available, return\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Set our document\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\n\t// Support tests\n\tdocumentIsHTML = !isXML( doc );\n\n\t// Support: IE>8\n\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\n\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\n\t// IE6-8 do not support the defaultView property so parent will be undefined\n\tif ( parent && parent !== parent.top ) {\n\t\t// IE11 does not have attachEvent, so all must suffer\n\t\tif ( parent.addEventListener ) {\n\t\t\tparent.addEventListener( \"unload\", function() {\n\t\t\t\tsetDocument();\n\t\t\t}, false );\n\t\t} else if ( parent.attachEvent ) {\n\t\t\tparent.attachEvent( \"onunload\", function() {\n\t\t\t\tsetDocument();\n\t\t\t});\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.className = \"i\";\n\t\treturn !div.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Check if getElementsByClassName can be trusted\n\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {\n\t\tdiv.innerHTML = \"<div class='a'></div><div class='a i'></div>\";\n\n\t\t// Support: Safari<4\n\t\t// Catch class over-caching\n\t\tdiv.firstChild.className = \"i\";\n\t\t// Support: Opera<10\n\t\t// Catch gEBCN failure to find non-leading classes\n\t\treturn div.getElementsByClassName(\"i\").length === 2;\n\t});\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( div ) {\n\t\tdocElem.appendChild( div ).id = expando;\n\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\n\t});\n\n\t// ID find and filter\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\treturn m && m.parentNode ? [m] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\t// Support: IE6/7\n\t\t// getElementById is not reliable as a find shortcut\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\t\t\t}\n\t\t} :\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See http://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdiv.innerHTML = \"<select t=''><option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 10-12\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\tif ( div.querySelectorAll(\"[t^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = doc.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn doc;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch(e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [elem] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[5] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] && match[4] !== undefined ) {\n\t\t\t\tmatch[2] = match[4];\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\nfunction tokenize( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n}\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\touterCache[ dir ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !group ) {\n\t\t\tgroup = tokenize( selector );\n\t\t}\n\t\ti = group.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( group[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\t}\n\treturn cached;\n};\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction select( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tmatch = tokenize( selector );\n\n\tif ( !seed ) {\n\t\t// Try to minimize operations if there is only one group\n\t\tif ( match.length === 1 ) {\n\n\t\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\t\ttokens = match[0] = match[0].slice( 0 );\n\t\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\t\tif ( !context ) {\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t\t}\n\n\t\t\t// Fetch a seed set for right-to-left matching\n\t\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\ttoken = tokens[i];\n\n\t\t\t\t// Abort if we hit a combinator\n\t\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\t\tif ( (seed = find(\n\t\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t\t)) ) {\n\n\t\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\tcompile( selector, match )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\trsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n}\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome<14\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( div1 ) {\n\t// Should return 1, but returns 4 (following)\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( div ) {\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( div ) {\n\tdiv.innerHTML = \"<input/>\";\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( div ) {\n\treturn div.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[\":\"] = jQuery.expr.pseudos;\njQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = (/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/);\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\t/* jshint -W018 */\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t});\n\n\t}\n\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t});\n\n\t}\n\n\tif ( typeof qualifier === \"string\" ) {\n\t\tif ( risSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t}\n\n\t\tqualifier = jQuery.filter( qualifier, elements );\n\t}\n\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) >= 0 ) !== not;\n\t});\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t}));\n};\n\njQuery.fn.extend({\n\tfind: function( selector ) {\n\t\tvar i,\n\t\t\tlen = this.length,\n\t\t\tret = [],\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) );\n\t\t}\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\n\t\treturn ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], false) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], true) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n});\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\tinit = jQuery.fn.init = function( selector, context ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[0] === \"<\" && selector[ selector.length - 1 ] === \">\" && selector.length >= 3 ) {\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[1] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t// scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[0] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn typeof rootjQuery.ready !== \"undefined\" ?\n\t\t\t\trootjQuery.ready( selector ) :\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\t// methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.extend({\n\tdir: function( elem, dir, until ) {\n\t\tvar matched = [],\n\t\t\ttruncate = until !== undefined;\n\n\t\twhile ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmatched.push( elem );\n\t\t\t}\n\t\t}\n\t\treturn matched;\n\t},\n\n\tsibling: function( n, elem ) {\n\t\tvar matched = [];\n\n\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\tmatched.push( n );\n\t\t\t}\n\t\t}\n\n\t\treturn matched;\n\t}\n});\n\njQuery.fn.extend({\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter(function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tfor ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {\n\t\t\t\t// Always skip document fragments\n\t\t\t\tif ( cur.nodeType < 11 && (pos ?\n\t\t\t\t\tpos.index(cur) > -1 :\n\n\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\tjQuery.find.matchesSelector(cur, selectors)) ) {\n\n\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within\n\t// the matched set of elements\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.unique(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t);\n\t}\n});\n\nfunction sibling( cur, dir ) {\n\twhile ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each({\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn jQuery.sibling( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.unique( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n});\nvar rnotwhite = (/\\S+/g);\n\n\n\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// Flag to know if list is currently firing\n\t\tfiring,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\tfiringLength = 0;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\n\n\n// The deferred used on DOM ready\nvar readyList;\n\njQuery.fn.ready = function( fn ) {\n\t// Add the callback\n\tjQuery.ready.promise().done( fn );\n\n\treturn this;\n};\n\njQuery.extend({\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.trigger ) {\n\t\t\tjQuery( document ).trigger(\"ready\").off(\"ready\");\n\t\t}\n\t}\n});\n\n/**\n * The ready event handler and self cleanup method\n */\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\twindow.removeEventListener( \"load\", completed, false );\n\tjQuery.ready();\n}\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t// we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\tsetTimeout( jQuery.ready );\n\n\t\t} else {\n\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed, false );\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Kick off the DOM ready check even if the user does not\njQuery.ready.promise();\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn chainable ?\n\t\telems :\n\n\t\t// Gets\n\t\tbulk ?\n\t\t\tfn.call( elems ) :\n\t\t\tlen ? fn( elems[0], key ) : emptyGet;\n};\n\n\n/**\n * Determines whether an object can have data\n */\njQuery.acceptData = function( owner ) {\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\t/* jshint -W018 */\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\nfunction Data() {\n\t// Support: Android < 4,\n\t// Old WebKit does not have Object.preventExtensions/freeze method,\n\t// return new empty object instead with no [[set]] accessor\n\tObject.defineProperty( this.cache = {}, 0, {\n\t\tget: function() {\n\t\t\treturn {};\n\t\t}\n\t});\n\n\tthis.expando = jQuery.expando + Math.random();\n}\n\nData.uid = 1;\nData.accepts = jQuery.acceptData;\n\nData.prototype = {\n\tkey: function( owner ) {\n\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t// but we should not, see #8335.\n\t\t// Always return the key for a frozen object.\n\t\tif ( !Data.accepts( owner ) ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar descriptor = {},\n\t\t\t// Check if the owner object already has a cache key\n\t\t\tunlock = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !unlock ) {\n\t\t\tunlock = Data.uid++;\n\n\t\t\t// Secure it in a non-enumerable, non-writable property\n\t\t\ttry {\n\t\t\t\tdescriptor[ this.expando ] = { value: unlock };\n\t\t\t\tObject.defineProperties( owner, descriptor );\n\n\t\t\t// Support: Android < 4\n\t\t\t// Fallback to a less secure definition\n\t\t\t} catch ( e ) {\n\t\t\t\tdescriptor[ this.expando ] = unlock;\n\t\t\t\tjQuery.extend( owner, descriptor );\n\t\t\t}\n\t\t}\n\n\t\t// Ensure the cache object\n\t\tif ( !this.cache[ unlock ] ) {\n\t\t\tthis.cache[ unlock ] = {};\n\t\t}\n\n\t\treturn unlock;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\t// There may be an unlock assigned to this node,\n\t\t\t// if there is no entry for this \"owner\", create one inline\n\t\t\t// and set the unlock as though an owner entry had always existed\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\t// Handle: [ owner, key, value ] args\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ data ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\t\t\t// Fresh assignments by object are shallow copied\n\t\t\tif ( jQuery.isEmptyObject( cache ) ) {\n\t\t\t\tjQuery.extend( this.cache[ unlock ], data );\n\t\t\t// Otherwise, copy the properties one-by-one to the cache object\n\t\t\t} else {\n\t\t\t\tfor ( prop in data ) {\n\t\t\t\t\tcache[ prop ] = data[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\t// Either a valid cache is found, or will be created.\n\t\t// New caches will be created and the unlock returned,\n\t\t// allowing direct access to the newly created\n\t\t// empty data object. A valid owner object must be provided.\n\t\tvar cache = this.cache[ this.key( owner ) ];\n\n\t\treturn key === undefined ?\n\t\t\tcache : cache[ key ];\n\t},\n\taccess: function( owner, key, value ) {\n\t\tvar stored;\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t((key && typeof key === \"string\") && value === undefined) ) {\n\n\t\t\tstored = this.get( owner, key );\n\n\t\t\treturn stored !== undefined ?\n\t\t\t\tstored : this.get( owner, jQuery.camelCase(key) );\n\t\t}\n\n\t\t// [*]When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i, name, camel,\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\tif ( key === undefined ) {\n\t\t\tthis.cache[ unlock ] = {};\n\n\t\t} else {\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( jQuery.isArray( key ) ) {\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = key.concat( key.map( jQuery.camelCase ) );\n\t\t\t} else {\n\t\t\t\tcamel = jQuery.camelCase( key );\n\t\t\t\t// Try the string as a key before any manipulation\n\t\t\t\tif ( key in cache ) {\n\t\t\t\t\tname = [ key, camel ];\n\t\t\t\t} else {\n\t\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\t\tname = camel;\n\t\t\t\t\tname = name in cache ?\n\t\t\t\t\t\t[ name ] : ( name.match( rnotwhite ) || [] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = name.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ name[ i ] ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\treturn !jQuery.isEmptyObject(\n\t\t\tthis.cache[ owner[ this.expando ] ] || {}\n\t\t);\n\t},\n\tdiscard: function( owner ) {\n\t\tif ( owner[ this.expando ] ) {\n\t\t\tdelete this.cache[ owner[ this.expando ] ];\n\t\t}\n\t}\n};\nvar data_priv = new Data();\n\nvar data_user = new Data();\n\n\n\n/*\n\tImplementation Summary\n\n\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n\t2. Improve the module's maintainability by reducing the storage\n\t\tpaths to a single mechanism.\n\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n*/\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\tdata;\n\t\t\t} catch( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdata_user.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend({\n\thasData: function( elem ) {\n\t\treturn data_user.hasData( elem ) || data_priv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn data_user.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdata_user.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to data_priv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn data_priv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdata_priv.remove( elem, name );\n\t}\n});\n\njQuery.fn.extend({\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = data_user.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !data_priv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tname = attrs[ i ].name;\n\n\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata_priv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tdata_user.set( this, key );\n\t\t\t});\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data,\n\t\t\t\tcamelKey = jQuery.camelCase( key );\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key as-is\n\t\t\t\tdata = data_user.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key camelized\n\t\t\t\tdata = data_user.get( elem, camelKey );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, camelKey, undefined );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each(function() {\n\t\t\t\t// First, attempt to store a copy or reference of any\n\t\t\t\t// data that might've been store with a camelCased key.\n\t\t\t\tvar data = data_user.get( this, camelKey );\n\n\t\t\t\t// For HTML5 data-* attribute interop, we have to\n\t\t\t\t// store property names with dashes in a camelCase form.\n\t\t\t\t// This might not apply to all properties...*\n\t\t\t\tdata_user.set( this, camelKey, value );\n\n\t\t\t\t// *... In the case of properties that might _actually_\n\t\t\t\t// have dashes, we need to also store a copy of that\n\t\t\t\t// unchanged property.\n\t\t\t\tif ( key.indexOf(\"-\") !== -1 && data !== undefined ) {\n\t\t\t\t\tdata_user.set( this, key, value );\n\t\t\t\t}\n\t\t\t});\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each(function() {\n\t\t\tdata_user.remove( this, key );\n\t\t});\n\t}\n});\n\n\njQuery.extend({\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = data_priv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = data_priv.access( elem, type, jQuery.makeArray(data) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// not intended for public consumption - generates a queueHooks object, or returns the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn data_priv.get( elem, key ) || data_priv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\tdata_priv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t})\n\t\t});\n\t}\n});\n\njQuery.fn.extend({\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[0], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t});\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = data_priv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n});\nvar pnum = (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source;\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHidden = function( elem, el ) {\n\t\t// isHidden might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n\t};\n\nvar rcheckableType = (/^(?:checkbox|radio)$/i);\n\n\n\n(function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) );\n\n\t// #11217 - WebKit loses check when the name is after the checked attribute\n\tdiv.innerHTML = \"<input type='radio' checked='checked' name='t'/>\";\n\n\t// Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3\n\t// old WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\t// Support: IE9-IE11+\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n})();\nvar strundefined = typeof undefined;\n\n\n\nsupport.focusinBubbles = \"onfocusin\" in window;\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|contextmenu)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !(events = elemData.events) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend({\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.hasData( elem ) && data_priv.get( elem );\n\n\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\t\t\tdata_priv.remove( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split(\".\");\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join(\".\");\n\t\tevent.namespace_re = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( data_priv.get( cur, \"events\" ) || {} )[ event.type ] && data_priv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && jQuery.acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&\n\t\t\t\tjQuery.acceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, j, ret, matched, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\targs = slice.call( arguments ),\n\t\t\thandlers = ( data_priv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[0] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or\n\t\t\t\t// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, matches, sel, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: \"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\t\t\tvar eventDoc, doc, body,\n\t\t\t\tbutton = original.button;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: Cordova 2.5 (WebKit) (#13255)\n\t\t// All events should have a target; Cordova deviceready doesn't\n\t\tif ( !event.target ) {\n\t\t\tevent.target = document;\n\t\t}\n\n\t\t// Support: Safari 6.0+, Chrome < 28\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\tspecial: {\n\t\tload: {\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsimulate: function( type, elem, event, bubble ) {\n\t\t// Piggyback on a donor event to simulate a different one.\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t// simulated event prevents default then we do the same on the donor.\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true,\n\t\t\t\toriginalEvent: {}\n\t\t\t}\n\t\t);\n\t\tif ( bubble ) {\n\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t} else {\n\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t}\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle, false );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\t// Allow instantiation without the 'new' keyword\n\tif ( !(this instanceof jQuery.Event) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\t// Support: Android < 4.0\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\t\t\t\tsrc.getPreventDefault && src.getPreventDefault() ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && e.preventDefault ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// Support: Chrome 15+\njQuery.each({\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n});\n\n// Create \"bubbling\" focus and blur events\n// Support: Firefox, Chrome, Safari\nif ( !support.focusinBubbles ) {\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdata_priv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdata_priv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdata_priv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n}\n\njQuery.fn.extend({\n\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\tvar origFn, type;\n\n\t\t// Types can be a map of types/handlers\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-Object, selector, data )\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t// ( types-Object, data )\n\t\t\t\tdata = data || selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( data == null && fn == null ) {\n\t\t\t// ( types, fn )\n\t\t\tfn = selector;\n\t\t\tdata = selector = undefined;\n\t\t} else if ( fn == null ) {\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t// ( types, selector, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = undefined;\n\t\t\t} else {\n\t\t\t\t// ( types, data, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t} else if ( !fn ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( one === 1 ) {\n\t\t\torigFn = fn;\n\t\t\tfn = function( event ) {\n\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\tjQuery().off( event );\n\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t};\n\t\t\t// Use same guid so caller can remove using origFn\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t});\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn this.on( types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t});\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t});\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[0];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n});\n\n\nvar\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\trtagName = /<([\\w:]+)/,\n\trhtml = /<|&#?\\w+;/,\n\trnoInnerhtml = /<(?:script|style|link)/i,\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\twrapMap = {\n\n\t\t// Support: IE 9\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t_default: [ 0, \"\", \"\" ]\n\t};\n\n// Support: IE 9\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: 1.x compatibility\n// Manipulating tables requires a tbody\nfunction manipulationTarget( elem, content ) {\n\treturn jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ?\n\n\t\telem.getElementsByTagName(\"tbody\")[0] ||\n\t\t\telem.appendChild( elem.ownerDocument.createElement(\"tbody\") ) :\n\t\telem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute(\"type\");\n\t}\n\n\treturn elem;\n}\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdata_priv.set(\n\t\t\telems[ i ], \"globalEval\", !refElements || data_priv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( data_priv.hasData( src ) ) {\n\t\tpdataOld = data_priv.access( src );\n\t\tpdataCur = data_priv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( data_user.hasData( src ) ) {\n\t\tudataOld = data_user.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdata_user.set( dest, udataCur );\n\t}\n}\n\nfunction getAll( context, tag ) {\n\tvar ret = context.getElementsByTagName ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\tcontext.querySelectorAll ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\t[];\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], ret ) :\n\t\tret;\n}\n\n// Support: IE >= 9\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\njQuery.extend({\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Support: IE >= 9\n\t\t// Fix Cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\tvar elem, tmp, tag, wrap, contains, j,\n\t\t\tfragment = context.createDocumentFragment(),\n\t\t\tnodes = [],\n\t\t\ti = 0,\n\t\t\tl = elems.length;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\telem = elems[ i ];\n\n\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t// Add nodes directly\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t// Convert non-html into a text node\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t} else {\n\t\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\t\ttmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[ 2 ];\n\n\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\tj = wrap[ 0 ];\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t// Remember the top-level container\n\t\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t\t// Fixes #12346\n\t\t\t\t\t// Support: Webkit, IE\n\t\t\t\t\ttmp.textContent = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove wrapper from fragment\n\t\tfragment.textContent = \"\";\n\n\t\ti = 0;\n\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t// that element, do not do anything\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Append to fragment\n\t\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t\t// Preserve script evaluation history\n\t\t\tif ( contains ) {\n\t\t\t\tsetGlobalEval( tmp );\n\t\t\t}\n\n\t\t\t// Capture executables\n\t\t\tif ( scripts ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fragment;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, events, type, key, j,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[ i ]) !== undefined; i++ ) {\n\t\t\tif ( jQuery.acceptData( elem ) ) {\n\t\t\t\tkey = elem[ data_priv.expando ];\n\n\t\t\t\tif ( key && (data = data_priv.cache[ key ]) ) {\n\t\t\t\t\tevents = Object.keys( data.events || {} );\n\t\t\t\t\tif ( events.length ) {\n\t\t\t\t\t\tfor ( j = 0; (type = events[j]) !== undefined; j++ ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( data_priv.cache[ key ] ) {\n\t\t\t\t\t\t// Discard any remaining `private` data\n\t\t\t\t\t\tdelete data_priv.cache[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Discard any remaining `user` data\n\t\t\tdelete data_user.cache[ elem[ data_user.expando ] ];\n\t\t}\n\t}\n});\n\njQuery.fn.extend({\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each(function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t});\n\t},\n\n\tprepend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t});\n\t},\n\n\tbefore: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t});\n\t},\n\n\tafter: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t});\n\t},\n\n\tremove: function( selector, keepData /* Internal Use Only */ ) {\n\t\tvar elem,\n\t\t\telems = selector ? jQuery.filter( selector, this ) : this,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t}\n\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t}\n\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map(function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t});\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar arg = arguments[ 0 ];\n\n\t\t// Make the changes, replacing each context element with the new content\n\t\tthis.domManip( arguments, function( elem ) {\n\t\t\targ = this.parentNode;\n\n\t\t\tjQuery.cleanData( getAll( this ) );\n\n\t\t\tif ( arg ) {\n\t\t\t\targ.replaceChild( elem, this );\n\t\t\t}\n\t\t});\n\n\t\t// Force removal if there was no new content (e.g., from empty arguments)\n\t\treturn arg && (arg.length || arg.nodeType) ? this : this.remove();\n\t},\n\n\tdetach: function( selector ) {\n\t\treturn this.remove( selector, true );\n\t},\n\n\tdomManip: function( args, callback ) {\n\n\t\t// Flatten any nested arrays\n\t\targs = concat.apply( [], args );\n\n\t\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tset = this,\n\t\t\tiNoClone = l - 1,\n\t\t\tvalue = args[ 0 ],\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\tif ( isFunction ||\n\t\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\t\treturn this.each(function( index ) {\n\t\t\t\tvar self = set.eq( index );\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t\t}\n\t\t\t\tself.domManip( args, callback );\n\t\t\t});\n\t\t}\n\n\t\tif ( l ) {\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\n\t\t\tfirst = fragment.firstChild;\n\n\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\tfragment = first;\n\t\t\t}\n\n\t\t\tif ( first ) {\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback.call( this[ i ], node, i );\n\t\t\t\t}\n\n\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t// Reenable scripts\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t!data_priv.access( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.globalEval( node.textContent.replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\njQuery.each({\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: QtWebKit\n\t\t\t// .get() because push.apply(_, arraylike) throws\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\n\nvar iframe,\n\telemdisplay = {};\n\n/**\n * Retrieve the actual display of a element\n * @param {String} name nodeName of the element\n * @param {Object} doc Document object\n */\n// Called only from within defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\n\t\t// getDefaultComputedStyle might be reliably used only on attached element\n\t\tdisplay = window.getDefaultComputedStyle ?\n\n\t\t\t// Use of this method is a temporary fix (more like optmization) until something better comes along,\n\t\t\t// since it was removed from specification and supported only in FF\n\t\t\twindow.getDefaultComputedStyle( elem[ 0 ] ).display : jQuery.css( elem[ 0 ], \"display\" );\n\n\t// We don't have any data stored on the element,\n\t// so use \"detach\" method as fast way to get rid of the element\n\telem.detach();\n\n\treturn display;\n}\n\n/**\n * Try to determine the default display value of an element\n * @param {String} nodeName\n */\nfunction defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = (iframe || jQuery( \"<iframe frameborder='0' width='0' height='0'/>\" )).appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = iframe[ 0 ].contentDocument;\n\n\t\t\t// Support: IE\n\t\t\tdoc.write();\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\nvar rmargin = (/^margin/);\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\t\treturn elem.ownerDocument.defaultView.getComputedStyle( elem, null );\n\t};\n\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// Support: IE9\n\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\t}\n\n\tif ( computed ) {\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// Support: iOS < 6\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\t\t// Support: IE\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\t\t\t\t// Hook not needed (or it's not possible to use it due to missing dependency),\n\t\t\t\t// remove it.\n\t\t\t\t// Since there are no other hooks for marginRight, remove the whole object.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\n\t\t\treturn (this.get = hookFn).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\n(function() {\n\tvar pixelPositionVal, boxSizingReliableVal,\n\t\t// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).\n\t\tdivReset = \"padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;\" +\n\t\t\t\"-moz-box-sizing:content-box;box-sizing:content-box\",\n\t\tdocElem = document.documentElement,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;\" +\n\t\t\"margin-top:1px\";\n\tcontainer.appendChild( div );\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computePixelPositionAndBoxSizingReliable() {\n\t\t// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).\n\t\tdiv.style.cssText = \"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;\" +\n\t\t\t\"box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;\" +\n\t\t\t\"position:absolute;top:1%\";\n\t\tdocElem.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div, null );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\tdocElem.removeChild( container );\n\t}\n\n\t// Use window.getComputedStyle because jsdom on node.js will break without it.\n\tif ( window.getComputedStyle ) {\n\t\tjQuery.extend(support, {\n\t\t\tpixelPosition: function() {\n\t\t\t\t// This test is executed only once but we still do memoizing\n\t\t\t\t// since we can use the boxSizingReliable pre-computing.\n\t\t\t\t// No need to check if the test was already performed, though.\n\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\treturn pixelPositionVal;\n\t\t\t},\n\t\t\tboxSizingReliable: function() {\n\t\t\t\tif ( boxSizingReliableVal == null ) {\n\t\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\t}\n\t\t\t\treturn boxSizingReliableVal;\n\t\t\t},\n\t\t\treliableMarginRight: function() {\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t// This support function is only executed once so no memoizing is needed.\n\t\t\t\tvar ret,\n\t\t\t\t\tmarginDiv = div.appendChild( document.createElement( \"div\" ) );\n\t\t\t\tmarginDiv.style.cssText = div.style.cssText = divReset;\n\t\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\t\tdiv.style.width = \"1px\";\n\t\t\t\tdocElem.appendChild( container );\n\n\t\t\t\tret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );\n\n\t\t\t\tdocElem.removeChild( container );\n\n\t\t\t\t// Clean up the div for other support tests.\n\t\t\t\tdiv.innerHTML = \"\";\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t});\n\t}\n})();\n\n\n// A method for quickly swapping in/out CSS properties to get correct calculations.\njQuery.swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar\n\t// swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trnumsplit = new RegExp( \"^(\" + pnum + \")(.*)$\", \"i\" ),\n\trrelNum = new RegExp( \"^([+-])=(\" + pnum + \")\", \"i\" ),\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: 0,\n\t\tfontWeight: 400\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( style, name ) {\n\n\t// shortcut for names that are not vendor prefixed\n\tif ( name in style ) {\n\t\treturn name;\n\t}\n\n\t// check for vendor prefixed names\n\tvar capName = name[0].toUpperCase() + name.slice(1),\n\t\torigName = name,\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\t}\n\n\treturn origName;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\t\t// both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// at this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\t\t\t// at this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// at this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test(val) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// we need the check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = data_priv.get( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] = data_priv.access( elem, \"olddisplay\", defaultDisplay(elem.nodeName) );\n\t\t\t}\n\t\t} else {\n\n\t\t\tif ( !values[ index ] ) {\n\t\t\t\thidden = isHidden( elem );\n\n\t\t\t\tif ( display && display !== \"none\" || !hidden ) {\n\t\t\t\t\tdata_priv.set( elem, \"olddisplay\", hidden ? display : jQuery.css(elem, \"display\") );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.extend({\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t// normalize float css property\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// convert relative number strings (+= or -=) to relative numbers. #7345\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set. See: #7116\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add 'px' to the (except for certain CSS properties)\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\tvalue += \"px\";\n\t\t\t}\n\n\t\t\t// Fixes #8908, it can be done more correctly by specifying setters in cssHooks,\n\t\t\t// but it would mean to define eight (for every problematic property) identical functions\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\t\t\t\t// Support: Chrome, Safari\n\t\t\t\t// Setting style to blank string required to delete \"style: x !important;\"\n\t\t\t\tstyle[ name ] = \"\";\n\t\t\t\tstyle[ name ] = value;\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t//convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n});\n\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\t\t\t\t// certain elements can have dimension info if we invisibly show them\n\t\t\t\t// however, it must have a current display style that would benefit from this\n\t\t\t\treturn elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, \"display\" ) ) ?\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t}) :\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n});\n\n// Support: Android 2.3\njQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t// Work around by temporarily setting element display to inline-block\n\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each({\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n});\n\njQuery.fn.extend({\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t});\n\t}\n});\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || \"swing\";\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\n\t\t\t// so, simple values such as \"10px\" are parsed to Float.\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\n\t\t\t// available and use plain properties where available\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE9\n// Panic based approach to setting things on disconnected nodes\n\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t}\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" ),\n\trrun = /queueHooks$/,\n\tanimationPrefilters = [ defaultPrefilter ],\n\ttweeners = {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value ),\n\t\t\t\ttarget = tween.cur(),\n\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\tunit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t\t\t// Starting value computation is required for potential unit mismatches\n\t\t\t\tstart = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +target ) &&\n\t\t\t\t\trfxnum.exec( jQuery.css( tween.elem, prop ) ),\n\t\t\t\tscale = 1,\n\t\t\t\tmaxIterations = 20;\n\n\t\t\tif ( start && start[ 3 ] !== unit ) {\n\t\t\t\t// Trust units reported by jQuery.css\n\t\t\t\tunit = unit || start[ 3 ];\n\n\t\t\t\t// Make sure we update the tween properties later on\n\t\t\t\tparts = parts || [];\n\n\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\tstart = +target || 1;\n\n\t\t\t\tdo {\n\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*\n\t\t\t\t\t// Use a string for doubling factor so we don't accidentally see scale as unchanged below\n\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t// Adjust and apply\n\t\t\t\t\tstart = start / scale;\n\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t\t\t// And breaking the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t}\n\n\t\t\t// Update tween properties\n\t\t\tif ( parts ) {\n\t\t\t\tstart = tween.start = +start || +target || 0;\n\t\t\t\ttween.unit = unit;\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\ttween.end = parts[ 1 ] ?\n\t\t\t\t\tstart + ( parts[ 1 ] + 1 ) * parts[ 2 ] :\n\t\t\t\t\t+parts[ 2 ];\n\t\t\t}\n\n\t\t\treturn tween;\n\t\t} ]\n\t};\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\tsetTimeout(function() {\n\t\tfxNow = undefined;\n\t});\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// if we include width, step value is 1 to do all cssExpand values,\n\t// if we don't include width, step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( (tween = collection[ index ].call( animation, prop, value )) ) {\n\n\t\t\t// we're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/* jshint validthis: true */\n\tvar prop, value, toggle, tween, hooks, oldfire, display,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHidden( elem ),\n\t\tdataShow = data_priv.get( elem, \"fxshow\" );\n\n\t// handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always(function() {\n\t\t\t// doing this makes sure that the complete handler will be called\n\t\t\t// before this completes\n\t\t\tanim.always(function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE9-10 do not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t// Get default display if display is currently \"none\"\n\t\tif ( display === \"none\" ) {\n\t\t\tdisplay = defaultDisplay( elem.nodeName );\n\t\t}\n\t\tif ( display === \"inline\" &&\n\t\t\t\tjQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\tstyle.display = \"inline-block\";\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always(function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t});\n\t}\n\n\t// show/hide pass\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\tif ( !jQuery.isEmptyObject( orig ) ) {\n\t\tif ( dataShow ) {\n\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\thidden = dataShow.hidden;\n\t\t\t}\n\t\t} else {\n\t\t\tdataShow = data_priv.access( elem, \"fxshow\", {} );\n\t\t}\n\n\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done(function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t});\n\t\t}\n\t\tanim.done(function() {\n\t\t\tvar prop;\n\n\t\t\tdata_priv.remove( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t});\n\t\tfor ( prop in orig ) {\n\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// not quite $.extend, this wont overwrite keys already present.\n\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = animationPrefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t// don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t}),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise({\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// resolve when we played the last frame\n\t\t\t\t// otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t})\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.split(\" \");\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\ttweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tanimationPrefilters.unshift( callback );\n\t\t} else {\n\t\t\tanimationPrefilters.push( callback );\n\t\t}\n\t}\n});\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend({\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// animate to the value specified\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || data_priv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = data_priv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start the next in the queue if the last step wasn't forced\n\t\t\t// timers currently will call their complete callbacks, which will dequeue\n\t\t\t// but only if they were gotoEnd\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t});\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tvar index,\n\t\t\t\tdata = data_priv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t});\n\t}\n});\n\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n});\n\n// Generate shortcuts for custom animations\njQuery.each({\n\tslideDown: genFx(\"show\"),\n\tslideUp: genFx(\"hide\"),\n\tslideToggle: genFx(\"toggle\"),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n});\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tclearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t});\n};\n\n\n(function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: iOS 5.1, Android 4.x, Android 2.3\n\t// Check the default checkbox/radio value (\"\" on old WebKit; \"on\" elsewhere)\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Must access the parent to make an option select properly\n\t// Support: IE9, IE10\n\tsupport.optSelected = opt.selected;\n\n\t// Make sure that the options inside disabled selects aren't marked as disabled\n\t// (WebKit marks them as disabled)\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Check if an input maintains its value after becoming a radio\n\t// Support: IE9, IE10\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n})();\n\n\nvar nodeHook, boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend({\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tattr: function( elem, name, value ) {\n\t\tvar hooks, ret,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === strundefined ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t} else if ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t} else if ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\treturn ret;\n\n\t\t} else {\n\t\t\tret = jQuery.find.attr( elem, name );\n\n\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\treturn ret == null ?\n\t\t\t\tundefined :\n\t\t\t\tret;\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\n\t\t\t\t\t// Set corresponding property to false\n\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE6-9\n\t\t\t\t\t// Reset value to default in case type is set after value during creation\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle;\n\t\tif ( !isXML ) {\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ name ];\n\t\t\tattrHandle[ name ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tname.toLowerCase() :\n\t\t\t\tnull;\n\t\t\tattrHandle[ name ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n});\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i;\n\njQuery.fn.extend({\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t},\n\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks, notxml,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set properties on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\tif ( notxml ) {\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\treturn hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?\n\t\t\t\tret :\n\t\t\t\t( elem[ name ] = value );\n\n\t\t} else {\n\t\t\treturn hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ?\n\t\t\t\tret :\n\t\t\t\telem[ name ];\n\t\t}\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.hasAttribute( \"tabindex\" ) || rfocusable.test( elem.nodeName ) || elem.href ?\n\t\t\t\t\telem.tabIndex :\n\t\t\t\t\t-1;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Support: IE9+\n// Selectedness for an option in an optgroup can be inaccurate\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\njQuery.each([\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n});\n\n\n\n\nvar rclass = /[\\t\\r\\n\\f]/g;\n\njQuery.fn.extend({\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( proceed ) {\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\" \"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\t\tif ( proceed ) {\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( type === \"string\" ) {\n\t\t\t\t// toggle individual class names\n\t\t\t\tvar className,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\tclassNames = value.match( rnotwhite ) || [];\n\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t// check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( type === strundefined || type === \"boolean\" ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\t// store className if set\n\t\t\t\t\tdata_priv.set( this, \"__className__\", this.className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed \"false\",\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tthis.className = this.className || value === false ? \"\" : data_priv.get( this, \"__className__\" ) || \"\";\n\t\t\t}\n\t\t});\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className = \" \" + selector + \" \",\n\t\t\ti = 0,\n\t\t\tl = this.length;\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n});\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend({\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[0];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t// handle most common string cases\n\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t// handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each(function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tvalHooks: {\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// IE6-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( support.optDisabled ? !option.disabled : option.getAttribute( \"disabled\" ) === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\t\t\t\t\tif ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Radios and checkboxes getter/setter\njQuery.each([ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\t// Support: Webkit\n\t\t\t// \"\" is returned instead of \"on\" if a value isn't specified\n\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t};\n\t}\n});\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n});\n\njQuery.fn.extend({\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t},\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t}\n});\n\n\nvar nonce = jQuery.now();\n\nvar rquery = (/\\?/);\n\n\n\n// Support: Android 2.3\n// Workaround failure to string-cast null input\njQuery.parseJSON = function( data ) {\n\treturn JSON.parse( data + \"\" );\n};\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, tmp;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE9\n\ttry {\n\t\ttmp = new DOMParser();\n\t\txml = tmp.parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\t// Document location\n\tajaxLocParts,\n\tajaxLocation,\n\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat(\"*\");\n\n// #8138, IE may throw an exception when accessing\n// a field from window.location if document.domain has been set\ntry {\n\tajaxLocation = location.href;\n} catch( e ) {\n\t// Use the href attribute of an A element\n\t// since IE will modify it given document.location\n\tajaxLocation = document.createElement( \"a\" );\n\tajaxLocation.href = \"\";\n\tajaxLocation = ajaxLocation.href;\n}\n\n// Segment location into parts\najaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t});\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[ \"throws\" ] ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend({\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /xml/,\n\t\t\thtml: /html/,\n\t\t\tjson: /json/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\t\t\t// Cross-domain detection vars\n\t\t\tparts,\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\t\t\t// Loop variable\n\t\t\ti,\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" )\n\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\tfireGlobals = s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We extract error from statusText\n\t\t\t\t// then normalize statusText and status for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n});\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t// shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n});\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax({\n\t\turl: url,\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t});\n};\n\n\njQuery.fn.extend({\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapAll( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\tif ( this[ 0 ] ) {\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map(function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t}).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t});\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each(function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t});\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each(function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t}).end();\n\t}\n});\n\n\njQuery.expr.filters.hidden = function( elem ) {\n\t// Support: Opera <= 12.12\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;\n};\njQuery.expr.filters.visible = function( elem ) {\n\treturn !jQuery.expr.filters.hidden( elem );\n};\n\n\n\n\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t}\n\t\t});\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t});\n\n\t} else {\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\njQuery.fn.extend({\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map(function() {\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t})\n\t\t.filter(function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t})\n\t\t.map(function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ) {\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t}) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t}).get();\n\t}\n});\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new XMLHttpRequest();\n\t} catch( e ) {}\n};\n\nvar xhrId = 0,\n\txhrCallbacks = {},\n\txhrSuccessStatus = {\n\t\t// file protocol always yields status code 0, assume 200\n\t\t0: 200,\n\t\t// Support: IE9\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\n// Support: IE9\n// Open requests must be manually aborted on unload (#5280)\nif ( window.ActiveXObject ) {\n\tjQuery( window ).on( \"unload\", function() {\n\t\tfor ( var key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]();\n\t\t}\n\t});\n}\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport(function( options ) {\n\tvar callback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr(),\n\t\t\t\t\tid = ++xhrId;\n\n\t\t\t\txhr.open( options.type, options.url, options.async, options.username, options.password );\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\n\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t// file: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\t\t\t\t\t\t\t\t\t// Support: IE9\n\t\t\t\t\t\t\t\t\t// Accessing binary-data responseText throws an exception\n\t\t\t\t\t\t\t\t\t// (#11426)\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText === \"string\" ? {\n\t\t\t\t\t\t\t\t\t\ttext: xhr.responseText\n\t\t\t\t\t\t\t\t\t} : undefined,\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\txhr.onerror = callback(\"error\");\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = xhrCallbacks[ id ] = callback(\"abort\");\n\n\t\t\t\t// Do send the request\n\t\t\t\t// This may raise an exception which is actually\n\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\n// Install script dataType\njQuery.ajaxSetup({\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /(?:java|ecma)script/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n});\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n});\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery(\"<script>\").prop({\n\t\t\t\t\tasync: true,\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t}).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup({\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n});\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[\"script json\"] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always(function() {\n\t\t\t// Restore preexisting value\n\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t});\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n});\n\n\n\n\n// data: string of html\n// context (optional): If specified, the fragment will be created in this context, defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\tcontext = context || document;\n\n\tvar parsed = rsingleTag.exec( data ),\n\t\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[1] ) ];\n\t}\n\n\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n// Keep a copy of the old load method\nvar _load = jQuery.fn.load;\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf(\" \");\n\n\tif ( off >= 0 ) {\n\t\tselector = url.slice( off );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax({\n\t\t\turl: url,\n\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\ttype: type,\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t}).done(function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t});\n\t}\n\n\treturn this;\n};\n\n\n\n\njQuery.expr.filters.animated = function( elem ) {\n\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t}).length;\n};\n\n\n\n\nvar docElem = window.document.documentElement;\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf(\"auto\") > -1;\n\n\t\t// Need to be able to calculate position if either top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\toptions = options.call( elem, i, curOffset );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend({\n\toffset: function( options ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each(function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t});\n\t\t}\n\n\t\tvar docElem, win,\n\t\t\telem = this[ 0 ],\n\t\t\tbox = { top: 0, left: 0 },\n\t\t\tdoc = elem && elem.ownerDocument;\n\n\t\tif ( !doc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocElem = doc.documentElement;\n\n\t\t// Make sure it's not a disconnected DOM node\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\t\treturn box;\n\t\t}\n\n\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\t// BlackBerry 5, iOS 3 (original iPhone)\n\t\tif ( typeof elem.getBoundingClientRect !== strundefined ) {\n\t\t\tbox = elem.getBoundingClientRect();\n\t\t}\n\t\twin = getWindow( doc );\n\t\treturn {\n\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t// We assume that getBoundingClientRect is available when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map(function() {\n\t\t\tvar offsetParent = this.offsetParent || docElem;\n\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\" ) === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || docElem;\n\t\t});\n\t}\n});\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : window.pageXOffset,\n\t\t\t\t\ttop ? val : window.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n});\n\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// getComputedStyle returns percent when specified for top/left/bottom/right\n// rather than make the css module depend on the offset module, we just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t// if curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n});\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t// margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t});\n});\n\n\n// The number of elements contained in the matched element set\njQuery.fn.size = function() {\n\treturn this.length;\n};\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t});\n}\n\n\n\n\nvar\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in\n// AMD (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( typeof noGlobal === strundefined ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jquery/dist/jquery.js\n ** module id = 3\n ** module chunks = 0 1\n **/","\nexport function add(parent, child) {\n  parent.content.append(child.root);\n}\n\nexport function methodRef(_this, methodName, args) {\n  return function() {\n    _this[methodName].apply(_this, args);\n  };\n}\n\nexport function Box(parent) {\n  this.root = this.content = $('<div class=\"tc-box\" />');\n  this.root.addClass('tc-box tc-scroll');\n  this.root.appendTo(parent ? parent : 'body');\n}\n\nBox.prototype.close = function() {\n  this.root.remove();\n};\n\nexport function Panel() {\n  this.root = this.content = $('<div />');\n  this.root.addClass('tc-panel tc-scroll');\n}\n\nPanel.prototype.close = function() {\n  this.root.remove();\n};\n\nexport function Folder(title) {\n  this.root = $('<div/>', {'class': 'tc-folder'});\n  this.content = $('<div/>');\n  this.root.append($('<div/>', {text: title, 'class': 'tc-row tc-title'}));\n  this.root.append(this.content);\n}\n\nexport function Button(title) {\n  this.root = $('<div/>',\n    {'class': 'tc-row tc-ctrl tc-ctrl-btn', text: title});\n}\n\nexport function CheckBox(title, checked) {\n  this.root = $('<div/>',\n    {'class': 'tc-row tc-ctrl'});\n  this.root.append('<label><input type=\"checkbox\">' + title + '</label>')\n  this.input = this.root.find(\"input\");\n  this.input.prop('checked', !!checked);\n}\n\nexport function InlineRadio(choiceLabels, choiceValues, checkedIndex) {\n  var name = 'TCAD.toolkit.InlineRadio_' + (InlineRadio.COUNTER++)\n  this.root = $('<div/>',\n    {'class': 'tc-row tc-ctrl tc-inline-radio'});\n  this.inputs = [];\n  for (var i = 0; i < choiceLabels.length; i++) {\n    var checked = checkedIndex === i ? \"checked\" : '';\n    var label = $('<label><input type=\"radio\" name=\"' + name + '\" value=\"' + choiceValues[i] + '\"><span>' + choiceLabels[i] + '</span></label>');\n    this.inputs.push(label.find(\"input\"));\n     this.root.append(label);\n  }\n  this.inputs[checkedIndex].prop('checked', true);\n}\n\nInlineRadio.prototype.getValue = function() {\n  for (var i = 0; i < this.inputs.length; i++) {\n    if (this.inputs[i].prop('checked')) {\n      return this.inputs[i].attr('value');\n    }\n  }\n  return null;\n};\n\nInlineRadio.COUNTER = 0;\n\nexport function propLayout(root, name, valueEl) {\n  root.append($('<span/>', {'class': 'tc-prop-name', text: name}))\n    .append($('<div/>', {'class': 'tc-prop-value'})\n    .append(valueEl));\n}\n\nfunction NumberWidget(name, initValue, baseStep, round) {\n  this.root = $('<div/>', {'class': 'tc-row tc-ctrl tc-ctrl-number'});\n  this.input = $(\"<input type='text' value='\"+initValue+\"' />\");\n  this.slide = false;\n  baseStep = baseStep || 1;\n  round = round || 0;\n  this.min = null;\n  this.max = null;\n  this.accelerator = 100;\n  var scope = this;\n  var lastValue = null;\n  function trigger() {\n    if ($(this).val() !== lastValue) {\n      $(this).trigger('t-change');\n      lastValue = $(this).val();\n    }\n  }\n  \n  this.input.on('input', function(e) {\n    var val = $(this).val();\n    //var floatRegex = /[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/;\n    //if (!floatRegex.test(val)) {\n    //  $(this).val(val.replace(/[^0-9\\.-]/g, ''));\n    //}\n    trigger.call(this);\n  });\n  this.input.get(0).addEventListener('mousewheel', function (e) {\n    var delta = 0;\n    if ( e.wheelDelta ) { // WebKit / Opera / Explorer 9\n      delta = e.wheelDelta;\n    } else if ( e.detail ) { // Firefox\n      delta = - e.detail;\n    }\n    var val = $(this).val();\n    if (!val) val = 0;\n    var step = baseStep * (e.shiftKey ? scope.accelerator : 1);\n    val = parseFloat(val) + (delta < 0 ? -step : step);\n    if (scope.min != null && val < scope.min) {\n      val = scope.min;\n    }\n    if (scope.max != null && val > scope.max) {\n      val = scope.max;\n    }\n    if (round !== 0) {\n      val = val.toFixed(round);\n    }\n    $(this).val(val);\n    e.preventDefault();\n    e.stopPropagation();\n    trigger.call(this);\n  }, false);\n  propLayout(this.root, name, this.input);\n}\n\nNumberWidget.prototype.val = function() {\n  return Number(this.input.val());\n};\n\nexport function Text(name, initValue) {\n  this.root = $('<div/>', {'class': 'tc-row tc-ctrl'});\n  this.input = $(\"<input type='text' value='\"+initValue+\"' />\");\n  propLayout(this.root, name, this.input);\n}\n\nexport function Combo(id, labelText) {\n  this.root = $('<div/>', {'class': 'tc-row tc-ctrl tc-ctrl-combo'});\n  var label = $('<span/>', {'class': 'tc-prop-name', text: labelText});\n  this.select = $('<select>', {id : id});\n  this.root.append(label)\n    .append($('<div/>', {'class': 'tc-prop-value'}).append(this.select));\n}\n\nexport function ButtonRow(captions, actions) {\n\n  this.root = $('<div/>',\n    {'class': 'tc-row tc-ctrl tc-buttons-block'});\n\n  function withAction(btn, action) {\n    return btn.click(function(){\n      action.call()\n    });\n  }\n  for (var i = 0; i < captions.length; i++) {\n    var caption = captions[i];\n    var btn = $('<span/>', {\n      text: caption,\n      'class': 'tc-block-btn active-btn'\n    });\n    withAction(btn, actions[i]);\n    this.root.append(btn);\n  }\n}\n\nexport function List() {\n  this.root = $('<div/>', {'class': 'tc-list'});\n}\n\nList.prototype.addRow = function(name) {\n  var row = $('<div/>', {\n    text: name, 'class': 'tc-row tc-pseudo-btn'\n  });\n  this.root.append(row);\n  return row;\n};\n\nList.setIconForRow = function(row, icon) {\n  row.css({\n    'background-image' : 'url('+icon+')'\n  });\n};\n\nexport function Tree() {\n  this.root = $('<div/>', {'class': 'tc-tree'});\n}\n\nTree.prototype.set = function(data) {\n  this.root.empty();\n  this._fill(data, 0);\n};\n\nTree.prototype._fill = function(data, level) {\n  var notLeaf = data.children !== undefined && data.children.length !== 0;\n  if (data.name !== undefined) {\n    this.root.append($('<div/>', {\n      text: data.name, 'class': 'tc-row' + (notLeaf ? ' tc-chevron-open' : ''),\n      css: {'margin-left': level * (notLeaf ? 10 : 16) + 'px'}\n    }));\n  }\n  if (notLeaf) {\n    for (var i = 0; i < data.children.length; i++) {\n      var child = data.children[i];\n      this._fill(child, level + 1);\n    }\n  }\n};\n\nexport function Parameters() {\n  this.listeners = {};\n}\n\nParameters.prototype.define = function(name, initValue) {\n  function fn(name) {\n    return '___' + name;\n  }\n  this[fn(name)] = initValue;\n  return Object.defineProperty(this, name, {\n    get: function() { return this[fn(name)]},\n    set: function(value) {\n      var oldValue = this[fn(name)];\n      this[fn(name)] = value;\n      this.notify(name, value, oldValue);\n    }\n  });\n};\n\nParameters.prototype.subscribe = function(name, listenerId, callback, scope) {\n  var listenerList = this.listeners[name];\n  if (listenerList === undefined) {\n    listenerList = [];\n    this.listeners[name] = listenerList;\n  }\n  var callbackFunc = scope === undefined ? callback : function() {\n    callback.apply(scope, arguments);\n  }; \n  listenerList.push([listenerId, callbackFunc]);\n  var params = this;\n  return (function () { callbackFunc(params[name], undefined, null) }); // return init function\n};\n\nParameters.prototype.notify = function(name, newValue, oldValue) {\n  var listenerList = this.listeners[name];\n  if (listenerList !== undefined) {\n    for (var i = 0; i < listenerList.length; i++) {\n      var listenerId = listenerList[i][0];\n      var callback = listenerList[i][1];\n      if (listenerId == null || this.__currentSender == null || listenerId != this.__currentSender) {\n        callback(newValue, oldValue, this.__currentSender);\n      }\n    }\n  }\n  this.__currentSender = null;\n};\n\nParameters.prototype.set = function(name, value, sender) {\n  this.__currentSender = sender;\n  this[name] = value;\n};\n\nexport function Bus() {\n  this.listeners = {};\n}\n\nBus.prototype.subscribe = function(event, callback, listenerId) {\n  var listenerList = this.listeners[event];\n  if (listenerList === undefined) {\n    listenerList = [];\n    this.listeners[event] = listenerList;\n  }\n  if (listenerId == undefined) listenerId = null;\n  listenerList.push([callback, listenerId]);\n  return callback;\n};\n\nBus.prototype.unsubscribe = function(event, callback) {\n  const listenerList = this.listeners[event];\n  for (let i = 0; i < listenerList.length; i++) {\n    if (listenerList[i][0] === callback) {\n      listenerList.splice(i, 1);\n      return;\n    }\n  }\n};\n\nBus.prototype.notify = function(event, data, sender) {\n  var listenerList = this.listeners[event];\n  if (listenerList !== undefined) {\n    for (var i = 0; i < listenerList.length; i++) {\n      const callback = listenerList[i][0];\n      const listenerId = listenerList[i][1];\n      if (sender == undefined || listenerId == null  || listenerId != sender) {\n        callback(data);\n      }\n    }\n  }\n};\n\nBus.Observable = function(initValue) {\n  this.value = initValue;\n};\n\nBus.prototype.defineObservable = function(scope, name, initValue, eventName) {\n  if (eventName == undefined) eventName = name;\n  var observable = new Bus.Observable(initValue);\n  var bus = this;\n  return Object.defineProperty(scope, name, {\n    get: function() { return observable.value;},\n    set: function(value) { \n      observable.value = value;\n      bus.notify(eventName, value);\n    }\n  });\n};\n\nexport function config(obj, props) {\n  for (var key in props) {\n    obj[key] = props[key];   \n  }\n  return obj;\n}\n\nexport {NumberWidget as Number}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/ui/toolkit.js\n **/","import {vectorsEqual} from './math'\n\n/** @constructor */\nfunction Vector(x, y, z) {\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n}\n\nVector.prototype.set = function(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  return this;\n};\n\nVector.prototype.set3 = function(data) {\n  this.x = data[0];\n  this.y = data[1];\n  this.z = data[2];\n  return this;\n};\n\nVector.prototype.setV = function(data) {\n  this.x = data.x;\n  this.y = data.y;\n  this.z = data.z;\n  return this;\n};\n\nVector.prototype.multiply = function(scalar) {\n  return new Vector(this.x * scalar, this.y * scalar, this.z * scalar);\n};\n\nVector.prototype._multiply = function(scalar) {\n  return this.set(this.x * scalar, this.y * scalar, this.z * scalar);\n};\n\nVector.prototype.dot = function(vector) {\n  return this.x * vector.x + this.y * vector.y + this.z * vector.z;\n};\n\nVector.prototype.copy = function() {\n  return new Vector(this.x, this.y, this.z);\n};\n\nVector.prototype.length = function() {\n  return Math.sqrt(this.x*this.x + this.y*this.y + this.z*this.z);\n};\n\nVector.prototype.minus = function(vector) {\n  return new Vector(this.x - vector.x, this.y - vector.y, this.z - vector.z);\n};\n\nVector.prototype._minus = function(vector) {\n  this.x -= vector.x;\n  this.y -= vector.y;\n  this.z -= vector.z;\n  return this;\n};\n\nVector.prototype._minusXYZ = function(x, y, z) {\n  this.x -= x;\n  this.y -= y;\n  this.z -= z;\n  return this;\n};\n\nVector.prototype.plus = function(vector) {\n  return new Vector(this.x + vector.x, this.y + vector.y, this.z + vector.z);\n};\n\nVector.prototype._plus = function(vector) {\n  this.x += vector.x;\n  this.y += vector.y;\n  this.z += vector.z;\n  return this;\n};\n\nVector.prototype.normalize = function() {\n  var mag = this.length();\n  if (mag == 0.0) {\n    return new Vector(0.0, 0.0, 0.0);\n  }\n  return new Vector(this.x / mag, this.y / mag, this.z / mag);\n};\n\n\nVector.prototype._normalize = function() {\n  var mag = this.length();\n  if (mag == 0.0) {\n    return this.set(0, 0, 0)\n  }\n  return this.set(this.x / mag, this.y / mag, this.z / mag)\n};\n\nVector.prototype.cross = function(a) {\n  return new Vector(\n      this.y * a.z - this.z * a.y,\n      this.z * a.x - this.x * a.z,\n      this.x * a.y - this.y * a.x\n  );\n};\n\nVector.prototype.negate = function() {\n  return this.multiply(-1);\n};\n\nVector.prototype._negate = function() {\n  return this._multiply(-1);\n};\n\nVector.prototype.equals = function(vector) {\n  return vectorsEqual(this, vector);\n};\n\nVector.prototype.three = function() {\n  return new THREE.Vector3(this.x, this.y, this.z);\n};\n\nVector.prototype.csg = function() {\n  return new CSG.Vector3D(this.x, this.y, this.z);\n};\n\nexport default Vector;\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/vector.js\n **/","import Vector from './vector'\nimport BBox from './bbox'\n\nexport const TOLERANCE = 1E-6;\n\nexport function distanceAB(a, b) {\n  return distance(a.x, a.y, b.x, b.y);\n}\n\nexport function distance(x1, y1, x2, y2) {\n  var dx = x1 - x2;\n  var dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function distanceAB3(a, b) {\n  return distance3(a.x, a.y, a.z, b.x, b.y, b.z);\n}\n\nexport function distance3(x1, y1, z1, x2, y2, z2) {\n  var dx = x1 - x2;\n  var dy = y1 - y2;\n  var dz = z1 - z2;\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n\nexport function circleFromPoints(p1, p2, p3) {\n  var center = new Vector();\n  var offset = p2.x*p2.x + p2.y*p2.y;\n  var bc =   ( p1.x*p1.x + p1.y*p1.y - offset )/2.0;\n  var cd =   (offset - p3.x*p3.x - p3.y*p3.y)/2.0;\n  var det =  (p1.x - p2.x) * (p2.y - p3.y) - (p2.x - p3.x)* (p1.y - p2.y);\n\n  if (Math.abs(det) < TOLERANCE) { return null; }\n\n  var idet = 1/det;\n\n  center.x =  (bc * (p2.y - p3.y) - cd * (p1.y - p2.y)) * idet;\n  center.y =  (cd * (p1.x - p2.x) - bc * (p2.x - p3.x)) * idet;\n  return center;\n}\n\nexport function norm2(vec) {\n  var sq = 0;\n  for (var i = 0; i < vec.length; i++) {\n    sq += vec[i] * vec[i];\n  }\n  return Math.sqrt(sq);  \n}\n\nexport function areEqual(v1, v2, tolerance) {\n  return Math.abs(v1 - v2) < tolerance;\n}\n\nexport function areVectorsEqual(v1, v2, tolerance) {\n  return areEqual(v1.x, v2.x, tolerance) &&\n         areEqual(v1.y, v2.y, tolerance) &&\n         areEqual(v1.z, v2.z, tolerance);\n}\n\nexport function vectorsEqual(v1, v2) {\n  return areVectorsEqual(v1, v2, TOLERANCE);\n}\n\nexport function equal(v1, v2) {\n  return areEqual(v1, v2, TOLERANCE);\n}\n\nexport function strictEqual(a, b) {\n  return a.x == b.x && a.y == b.y && a.z == b.z;\n}\n\nexport function _vec(size) {\n  var out = [];\n  out.length = size;\n  for (var i = 0; i < size; ++i) {\n    out[i] = 0;\n  }\n  return out;\n}\n\nexport function _matrix(m, n) {\n  var out = [];\n  out.length = m;\n  for (var i = 0; i < m; ++i) {\n    out[i] = _vec(n);\n  }\n  return out;\n}\n\nexport function rotate(px, py, angle) {\n  return rotateInPlace(px, py, angle, new Vector());\n}\n\nexport function rotateInPlace(px, py, angle, out) {\n  out.x =  px * Math.cos(angle) - py * Math.sin(angle);\n  out.y =  px * Math.sin(angle) + py * Math.cos(angle);\n  return out;\n}\n\nexport function polygonOffset( polygon, scale ) {\n  const origBBox = new BBox();\n  const scaledBBox = new BBox();\n  const result = [];\n  for (let point of polygon) {\n    const scaledPoint = new Vector(point.x, point.y)._multiply(scale);\n    result.push(scaledPoint);\n    origBBox.checkPoint(point);\n    scaledBBox.checkPoint(scaledPoint);\n  }\n  const alignVector = scaledBBox.center()._minus(origBBox.center());\n  for (let point of result) {\n    point._minus(alignVector);\n  }\n  return result;\n}\n\nexport function isPointInsidePolygon( inPt, inPolygon ) {\n  var EPSILON = TOLERANCE;\n\n  var polyLen = inPolygon.length;\n\n  // inPt on polygon contour => immediate success    or\n  // toggling of inside/outside at every single! intersection point of an edge\n  //  with the horizontal line through inPt, left of inPt\n  //  not counting lowerY endpoints of edges and whole edges on that line\n  var inside = false;\n  for( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n    var edgeLowPt  = inPolygon[ p ];\n    var edgeHighPt = inPolygon[ q ];\n\n    var edgeDx = edgeHighPt.x - edgeLowPt.x;\n    var edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n    if ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\n      if ( edgeDy < 0 ) {\n        edgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n        edgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n      }\n      if ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n      if ( inPt.y == edgeLowPt.y ) {\n        if ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n        // continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n      } else {\n        var perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n        if ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n        if ( perpEdge < 0 ) \t\t\t\tcontinue;\n        inside = ! inside;\t\t// true intersection left of inPt\n      }\n    } else {\t\t// parallel or colinear\n      if ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n      // egde lies on the same horizontal line as inPt\n      if ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n        ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n      // continue;\n    }\n  }\n\n  return\tinside;\n}\n\nexport const sq = (a) => a * a;\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/math.js\n **/","import Vector from './vector'\n\nexport default class BBox {\n  \n  constructor() {\n    this.minX = Number.MAX_VALUE;\n    this.minY = Number.MAX_VALUE;\n    this.maxX = -Number.MAX_VALUE;\n    this.maxY = -Number.MAX_VALUE;\n  }\n  \n  checkBounds(x, y) {\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  checkPoint(p) {\n    this.checkBounds(p.x, p.y);\n  }\n\n  center() {\n    return new Vector(this.minX + (this.maxX - this.minX) / 2, this.minY + (this.maxY - this.minY) / 2, 0)\n  }\n\n  width() {\n    return this.maxX - this.minX;\n  }\n\n  height() {\n    return this.maxY - this.minY;\n  }\n\n  expand(delta) {\n    this.minX -= delta;\n    this.minY -= delta;\n    this.maxX += delta;\n    this.maxY += delta;\n  }\n\n  toPolygon() {\n    return [\n      new Vector(this.minX, this.minY, 0),\n      new Vector(this.maxX, this.minY, 0),\n      new Vector(this.maxX, this.maxY, 0),\n      new Vector(this.minX, this.maxY, 0)\n    ];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/bbox.js\n **/","import Vector from './vector'\nimport * as math from './math'\n\nexport function LUT(a, b, cp1, cp2, scale) {\n  scale = 1 / scale;\n  const lut = [a];\n  for (let t = 0; t < 1; t += 0.1 * scale) {\n    const p = compute(t, a, b, cp1, cp2);\n    lut.push(p);\n  }\n  lut.push(b);\n  return lut;\n}\n\nexport function compute(t, from, to, controlPoint1, controlPoint2) {\n  const mt = 1 - t;\n  const mt2 = mt * mt;\n  const t2 = t * t;\n\n  const a = mt2 * mt;\n  const b = mt2 * t * 3;\n  const c = mt * t2 * 3;\n  const d = t * t2;\n  const p0 = from;\n  const p3 = to;\n  const p1 = controlPoint1;\n  const p2 = controlPoint2;\n  return new Vector(\n    a * p0.x + b * p1.x + c * p2.x + d * p3.x,\n    a * p0.y + b * p1.y + c * p2.y + d * p3.y,\n    a * p0.z + b * p1.z + c * p2.z + d * p3.z\n  );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/bezier-cubic.js\n **/","/*\n * jwerty - Awesome handling of keyboard events\n *\n * jwerty is a JS lib which allows you to bind, fire and assert key combination\n * strings against elements and events. It normalises the poor std api into\n * something easy to use and clear.\n *\n * This code is licensed under the MIT\n * For the full license see: http://keithamus.mit-license.org/\n * For more information see: http://keithamus.github.com/jwerty\n *\n * @author Keith Cirkel ('keithamus') <jwerty@keithcirkel.co.uk>\n * @license http://keithamus.mit-license.org/\n * @copyright Copyright © 2011, Keith Cirkel\n *\n */\n(function (global, exports) {\n    \n    // Helper methods & vars:\n    var $d = global.document\n    ,   $ = (global.jQuery || global.Zepto || global.ender || $d)\n    ,   $$\n    ,   $b\n    ,   ke = 'keydown';\n    \n    function realTypeOf(v, s) {\n        return (v === null) ? s === 'null'\n        : (v === undefined) ? s === 'undefined'\n        : (v.is && v instanceof $) ? s === 'element'\n        : Object.prototype.toString.call(v).toLowerCase().indexOf(s) > 7;\n    }\n    \n    if ($ === $d) {\n        $$ = function (selector, context) {\n            return selector ? $.querySelector(selector, context || $) : $;\n        };\n        \n        $b = function (e, fn) { e.addEventListener(ke, fn, false); };\n        $f = function (e, jwertyEv) {\n            var ret = document.createEvent('Event')\n            ,   i;\n            \n            ret.initEvent(ke, true, true);\n            \n            for (i in jwertyEv) ret[i] = jwertyEv[i];\n            \n            return (e || $).dispatchEvent(ret);\n        }\n    } else {\n        $$ = function (selector, context, fn) { return $(selector || $d, context); };\n        $b = function (e, fn) { $(e).bind(ke + '.jwerty', fn); };\n        $f = function (e, ob) { $(e || $d).trigger($.Event(ke, ob)); };\n    }\n    \n    // Private\n    var _modProps = { 16: 'shiftKey', 17: 'ctrlKey', 18: 'altKey', 91: 'metaKey' };\n    \n    // Generate key mappings for common keys that are not printable.\n    var _keys = {\n        \n        // MOD aka toggleable keys\n        mods: {\n            // Shift key, ⇧\n            '⇧': 16, shift: 16,\n            // CTRL key, on Mac: ⌃\n            '⌃': 17, ctrl: 17,\n            // ALT key, on Mac: ⌥ (Alt)\n            '⌥': 18, alt: 18, option: 18,\n            // META, on Mac: ⌘ (CMD), on Windows (Win), on Linux (Super)\n            '⌘': 91, meta: 91, cmd: 91, 'super': 91, win: 91\n        },\n        \n        // Normal keys\n        keys: {\n            // Backspace key, on Mac: ⌫ (Backspace)\n            '⌫': 8, backspace: 8,\n            // Tab Key, on Mac: ⇥ (Tab), on Windows ⇥⇥\n            '⇥': 9, '⇆': 9, tab: 9,\n            // Return key, ↩\n            '↩': 13, 'return': 13, enter: 13, '⌅': 13,\n            // Pause/Break key\n            'pause': 19, 'pause-break': 19,\n            // Caps Lock key, ⇪\n            '⇪': 20, caps: 20, 'caps-lock': 20,\n            // Escape key, on Mac: ⎋, on Windows: Esc\n            '⎋': 27, escape: 27, esc: 27,\n            // Space key\n            space: 32,\n            // Page-Up key, or pgup, on Mac: ↖\n            '↖': 33, pgup: 33, 'page-up': 33,\n            // Page-Down key, or pgdown, on Mac: ↘\n            '↘': 34, pgdown: 34, 'page-down': 34,\n            // END key, on Mac: ⇟\n            '⇟': 35, end: 35,\n            // HOME key, on Mac: ⇞\n            '⇞': 36, home: 36,\n            // Insert key, or ins\n            ins: 45, insert: 45,\n            // Delete key, on Mac: ⌫ (Delete)\n            del: 46, 'delete': 46,\n            \n            // Left Arrow Key, or ←\n            '←': 37, left: 37, 'arrow-left': 37,\n            // Up Arrow Key, or ↑\n            '↑': 38, up: 38, 'arrow-up': 38,\n            // Right Arrow Key, or →\n            '→': 39, right: 39, 'arrow-right': 39,\n            // Up Arrow Key, or ↓\n            '↓': 40, down: 40, 'arrow-down': 40,\n            \n            // odities, printing characters that come out wrong:\n            // Num-Multiply, or *\n            '*': 106, star: 106, asterisk: 106, multiply: 106,\n            // Num-Plus or +\n            '+': 107, 'plus': 107,\n            // Num-Subtract, or -\n            '-': 109, subtract: 109,\n            // Semicolon\n            ';': 186, semicolon:186,\n            // = or equals\n            '=': 187, 'equals': 187,\n            // Comma, or ,\n            ',': 188, comma: 188,\n            //'-': 189, //???\n            // Period, or ., or full-stop\n            '.': 190, period: 190, 'full-stop': 190,\n            // Slash, or /, or forward-slash\n            '/': 191, slash: 191, 'forward-slash': 191,\n            // Tick, or `, or back-quote \n            '`': 192, tick: 192, 'back-quote': 192,\n            // Open bracket, or [\n            '[': 219, 'open-bracket': 219,\n            // Back slash, or \\\n            '\\\\': 220, 'back-slash': 220,\n            // Close backet, or ]\n            ']': 221, 'close-bracket': 221,\n            // Apostraphe, or Quote, or '\n            '\\'': 222, quote: 222, apostraphe: 222\n        }\n        \n    };\n    \n    // To minimise code bloat, add all of the NUMPAD 0-9 keys in a loop\n    i = 95, n = 0;\n    while(++i < 106) {\n        _keys.keys['num-' + n] = i;\n        ++n;\n    }\n    \n    // To minimise code bloat, add all of the top row 0-9 keys in a loop\n    i = 47, n = 0;\n    while(++i < 58) {\n        _keys.keys[n] = i;\n        ++n;\n    }\n    \n    // To minimise code bloat, add all of the F1-F25 keys in a loop\n    i = 111, n = 1;\n    while(++i < 136) {\n        _keys.keys['f' + n] = i;\n        ++n;\n    }\n    \n    // To minimise code bloat, add all of the letters of the alphabet in a loop\n    var i = 64;\n    while(++i < 91) {\n        _keys.keys[String.fromCharCode(i).toLowerCase()] = i;\n    }\n    \n    function JwertyCode(jwertyCode) {\n        var i\n        ,   c\n        ,   n\n        ,   z\n        ,   keyCombo\n        ,   optionals\n        ,   jwertyCodeFragment\n        ,   rangeMatches\n        ,   rangeI;\n        \n        // In-case we get called with an instance of ourselves, just return that.\n        if (jwertyCode instanceof JwertyCode) return jwertyCode;\n        \n        // If jwertyCode isn't an array, cast it as a string and split into array.\n        if (!realTypeOf(jwertyCode, 'array')) {\n            jwertyCode = (String(jwertyCode)).replace(/\\s/g, '').toLowerCase().\n                match(/(?:\\+,|[^,])+/g);\n        }\n        \n        // Loop through each key sequence in jwertyCode\n        for (i = 0, c = jwertyCode.length; i < c; ++i) {\n            \n            // If the key combo at this part of the sequence isn't an array,\n            // cast as a string and split into an array.\n            if (!realTypeOf(jwertyCode[i], 'array')) {\n                jwertyCode[i] = String(jwertyCode[i])\n                    .match(/(?:\\+\\/|[^\\/])+/g);\n            }\n            \n            // Parse the key optionals in this sequence\n            optionals = [], n = jwertyCode[i].length;\n            while (n--) {\n                \n                // Begin creating the object for this key combo\n                var jwertyCodeFragment = jwertyCode[i][n];\n                \n                keyCombo = {\n                    jwertyCombo: String(jwertyCodeFragment),\n                    shiftKey: false,\n                    ctrlKey: false,\n                    altKey: false,\n                    metaKey: false\n                }\n                \n                // If jwertyCodeFragment isn't an array then cast as a string\n                // and split it into one.\n                if (!realTypeOf(jwertyCodeFragment, 'array')) {\n                    jwertyCodeFragment = String(jwertyCodeFragment).toLowerCase()\n                        .match(/(?:(?:[^\\+])+|\\+\\+|^\\+$)/g);\n                }\n                \n                z = jwertyCodeFragment.length;\n                while (z--) {\n                    \n                    // Normalise matching errors\n                    if (jwertyCodeFragment[z] === '++') jwertyCodeFragment[z] = '+';\n                    \n                    // Inject either keyCode or ctrl/meta/shift/altKey into keyCombo\n                    if (jwertyCodeFragment[z] in _keys.mods) {\n                        keyCombo[_modProps[_keys.mods[jwertyCodeFragment[z]]]] = true;\n                    } else if(jwertyCodeFragment[z] in _keys.keys) {\n                        keyCombo.keyCode = _keys.keys[jwertyCodeFragment[z]];\n                    } else {\n                        rangeMatches = jwertyCodeFragment[z].match(/^\\[([^-]+\\-?[^-]*)-([^-]+\\-?[^-]*)\\]$/);\n                    }\n                }\n                if (realTypeOf(keyCombo.keyCode, 'undefined')) {\n                    // If we picked up a range match earlier...\n                    if (rangeMatches && (rangeMatches[1] in _keys.keys) && (rangeMatches[2] in _keys.keys)) {\n                        rangeMatches[2] = _keys.keys[rangeMatches[2]];\n                        rangeMatches[1] = _keys.keys[rangeMatches[1]];\n                        \n                        // Go from match 1 and capture all key-comobs up to match 2\n                        for (rangeI = rangeMatches[1]; rangeI < rangeMatches[2]; ++rangeI) {\n                            optionals.push({\n                                altKey: keyCombo.altKey,\n                                shiftKey: keyCombo.shiftKey,\n                                metaKey: keyCombo.metaKey,\n                                ctrlKey: keyCombo.ctrlKey,\n                                keyCode: rangeI,\n                                jwertyCombo: String(jwertyCodeFragment)\n                            });\n                            \n                        }\n                        keyCombo.keyCode = rangeI;\n                    // Inject either keyCode or ctrl/meta/shift/altKey into keyCombo\n                    } else {\n                        keyCombo.keyCode = 0;\n                    }\n                }\n                optionals.push(keyCombo);\n            \n            }\n            this[i] = optionals;\n        }\n        this.length = i;\n        return this;\n    }\n    \n    var jwerty = exports.jwerty = {        \n        /**\n         * jwerty.event\n         *\n         * `jwerty.event` will return a function, which expects the first\n         *  argument to be a key event. When the key event matches `jwertyCode`,\n         *  `callbackFunction` is fired. `jwerty.event` is used by `jwerty.key`\n         *  to bind the function it returns. `jwerty.event` is useful for\n         *  attaching to your own event listeners. It can be used as a decorator\n         *  method to encapsulate functionality that you only want to fire after\n         *  a specific key combo. If `callbackContext` is specified then it will\n         *  be supplied as `callbackFunction`'s context - in other words, the\n         *  keyword `this` will be set to `callbackContext` inside the\n         *  `callbackFunction` function.\n         *\n         *   @param {Mixed} jwertyCode can be an array, or string of key\n         *      combinations, which includes optinals and or sequences\n         *   @param {Function} callbackFucntion is a function (or boolean) which\n         *      is fired when jwertyCode is matched. Return false to\n         *      preventDefault()\n         *   @param {Object} callbackContext (Optional) The context to call\n         *      `callback` with (i.e this)\n         *      \n         */\n        event: function (jwertyCode, callbackFunction, callbackContext /*? this */) {\n            \n            // Construct a function out of callbackFunction, if it is a boolean.\n            if (realTypeOf(callbackFunction, 'boolean')) {\n                var bool = callbackFunction;\n                callbackFunction = function () { return bool; }\n            }\n            \n            jwertyCode = new JwertyCode(jwertyCode);\n            \n            // Initialise in-scope vars.\n            var i = 0\n            ,   c = jwertyCode.length - 1\n            ,   returnValue\n            ,   jwertyCodeIs;\n            \n            // This is the event listener function that gets returned...\n            return function (event) {\n                \n                // if jwertyCodeIs returns truthy (string)...\n                if ((jwertyCodeIs = jwerty.is(jwertyCode, event, i))) {\n                    // ... and this isn't the last key in the sequence,\n                    // incriment the key in sequence to check.\n                    if (i < c) {\n                        ++i;\n                        return;\n                    // ... and this is the last in the sequence (or the only\n                    // one in sequence), then fire the callback\n                    } else {\n                        returnValue = callbackFunction.call(\n                            callbackContext || this, event, jwertyCodeIs);\n                        \n                        // If the callback returned false, then we should run\n                        // preventDefault();\n                        if (returnValue === false) event.preventDefault();\n                        \n                        // Reset i for the next sequence to fire.\n                        i = 0;\n                        return;\n                    }\n                }\n                \n                // If the event didn't hit this time, we should reset i to 0,\n                // that is, unless this combo was the first in the sequence,\n                // in which case we should reset i to 1.\n                i = jwerty.is(jwertyCode, event) ? 1 : 0;\n            }\n        },\n        \n        /**\n         * jwerty.is\n         *\n         * `jwerty.is` will return a boolean value, based on if `event` matches\n         *  `jwertyCode`. `jwerty.is` is called by `jwerty.event` to check\n         *  whether or not to fire the callback. `event` can be a DOM event, or\n         *  a jQuery/Zepto/Ender manufactured event. The properties of\n         *  `jwertyCode` (speficially ctrlKey, altKey, metaKey, shiftKey and\n         *  keyCode) should match `jwertyCode`'s properties - if they do, then\n         *  `jwerty.is` will return `true`. If they don't, `jwerty.is` will\n         *  return `false`.\n         *\n         *   @param {Mixed} jwertyCode can be an array, or string of key\n         *      combinations, which includes optinals and or sequences\n         *   @param {KeyboardEvent} event is the KeyboardEvent to assert against\n         *   @param {Integer} i (Optional) checks the `i` key in jwertyCode\n         *      sequence\n         *      \n         */\n        is: function (jwertyCode, event, i /*? 0*/) {\n            jwertyCode = new JwertyCode(jwertyCode);\n            // Default `i` to 0\n            i = i || 0;\n            // We are only interesting in `i` of jwertyCode;\n            jwertyCode = jwertyCode[i];\n            // jQuery stores the *real* event in `originalEvent`, which we use\n            // because it does annoything stuff to `metaKey`\n            event = event.originalEvent || event;\n            \n            // We'll look at each optional in this jwertyCode sequence...\n            var key\n            ,   n = jwertyCode.length\n            ,   returnValue = false;\n            \n            // Loop through each fragment of jwertyCode\n            while (n--) {\n                returnValue = jwertyCode[n].jwertyCombo;\n                // For each property in the jwertyCode object, compare to `event`\n                for (var p in jwertyCode[n]) {\n                    // ...except for jwertyCode.jwertyCombo...\n                    if (p !== 'jwertyCombo' && event[p] != jwertyCode[n][p]) returnValue = false;\n                }\n                // If this jwertyCode optional wasn't falsey, then we can return early.\n                if (returnValue !== false) return returnValue;\n            }\n            return returnValue;\n        },\n        \n        /**\n         * jwerty.key\n         *\n         *  `jwerty.key` will attach an event listener and fire\n         *   `callbackFunction` when `jwertyCode` matches. The event listener is\n         *   attached to `document`, meaning it will listen for any key events\n         *   on the page (a global shortcut listener). If `callbackContext` is\n         *   specified then it will be supplied as `callbackFunction`'s context\n         *   - in other words, the keyword `this` will be set to\n         *   `callbackContext` inside the `callbackFunction` function.\n         *\n         *   @param {Mixed} jwertyCode can be an array, or string of key\n         *      combinations, which includes optinals and or sequences\n         *   @param {Function} callbackFunction is a function (or boolean) which\n         *      is fired when jwertyCode is matched. Return false to\n         *      preventDefault()\n         *   @param {Object} callbackContext (Optional) The context to call\n         *      `callback` with (i.e this)\n         *   @param {Mixed} selector can be a string, jQuery/Zepto/Ender object,\n         *      or an HTML*Element on which to bind the eventListener\n         *   @param {Mixed} selectorContext can be a string, jQuery/Zepto/Ender\n         *      object, or an HTML*Element on which to scope the selector\n         *  \n         */\n        key: function (jwertyCode, callbackFunction, callbackContext /*? this */, selector /*? document */, selectorContext /*? body */) {\n            // Because callbackContext is optional, we should check if the\n            // `callbackContext` is a string or element, and if it is, then the\n            // function was called without a context, and `callbackContext` is\n            // actually `selector`\n            var realSelector = realTypeOf(callbackContext, 'element') || realTypeOf(callbackContext, 'string') ? callbackContext : selector\n            // If `callbackContext` is undefined, or if we skipped it (and\n            // therefore it is `realSelector`), set context to `global`.\n            ,   realcallbackContext = realSelector === callbackContext ? global : callbackContext\n            // Finally if we did skip `callbackContext`, then shift\n            // `selectorContext` to the left (take it from `selector`)\n            ,    realSelectorContext = realSelector === callbackContext ? selector : selectorContext;\n            \n            // If `realSelector` is already a jQuery/Zepto/Ender/DOM element,\n            // then just use it neat, otherwise find it in DOM using $$()\n            $b(realTypeOf(realSelector, 'element') ?\n               realSelector : $$(realSelector, realSelectorContext)\n            , jwerty.event(jwertyCode, callbackFunction, realcallbackContext));\n        },\n        \n        /**\n         * jwerty.fire\n         *\n         * `jwerty.fire` will construct a keyup event to fire, based on\n         *  `jwertyCode`. The event will be fired against `selector`.\n         *  `selectorContext` is used to search for `selector` within\n         *  `selectorContext`, similar to jQuery's\n         *  `$('selector', 'context')`.\n         *\n         *   @param {Mixed} jwertyCode can be an array, or string of key\n         *      combinations, which includes optinals and or sequences\n         *   @param {Mixed} selector can be a string, jQuery/Zepto/Ender object,\n         *      or an HTML*Element on which to bind the eventListener\n         *   @param {Mixed} selectorContext can be a string, jQuery/Zepto/Ender\n         *      object, or an HTML*Element on which to scope the selector\n         *  \n         */\n        fire: function (jwertyCode, selector /*? document */, selectorContext /*? body */, i) {\n            jwertyCode = new JwertyCode(jwertyCode);\n            var realI = realTypeOf(selectorContext, 'number') ? selectorContext : i;\n            \n            // If `realSelector` is already a jQuery/Zepto/Ender/DOM element,\n            // then just use it neat, otherwise find it in DOM using $$()\n            $f(realTypeOf(selector, 'element') ?\n                selector : $$(selector, selectorContext)\n            , jwertyCode[realI || 0][0]);\n        },\n        \n        KEYS: _keys\n    };\n    \n}(this, (typeof module !== 'undefined' && module.exports ? module.exports : this)));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jwerty/jwerty.js\n ** module id = 74\n ** module chunks = 0 1\n **/","import {Generator} from './id-generator'\nimport {Layer} from './viewer2d'\nimport {Styles} from './styles'\nimport {Arc} from './shapes/arc'\nimport {EndPoint} from './shapes/point'\nimport {Segment} from './shapes/segment'\nimport {Circle} from './shapes/circle'\nimport {Ellipse} from './shapes/ellipse'\nimport {EllipticalArc} from './shapes/elliptical-arc'\nimport {BezierCurve} from './shapes/bezier-curve'\nimport {HDimension, VDimension, Dimension, DiameterDimension} from './shapes/dim'\nimport {Constraints} from './parametric'\nimport Vector from '../math/vector'\n\nconst Types = {\n  END_POINT : 'TCAD.TWO.EndPoint',\n  SEGMENT   : 'TCAD.TWO.Segment',\n  ARC       : 'TCAD.TWO.Arc',\n  CIRCLE    : 'TCAD.TWO.Circle',\n  ELLIPSE   : 'TCAD.TWO.Ellipse',\n  ELL_ARC   : 'TCAD.TWO.EllipticalArc',\n  BEZIER    : 'TCAD.TWO.BezierCurve',\n  DIM       : 'TCAD.TWO.Dimension',\n  HDIM      : 'TCAD.TWO.HDimension',\n  VDIM      : 'TCAD.TWO.VDimension',\n  DDIM      : 'TCAD.TWO.DiameterDimension'\n};\n\nIO.BOUNDARY_LAYER_NAME = \"__bounds__\";\n\n/** @constructor */\nfunction IO(viewer) {\n  this.viewer = viewer;\n}\n\nIO.prototype.loadSketch = function(sketchData) {\n  return this._loadSketch(JSON.parse(sketchData));\n};\n\nIO.prototype.serializeSketch = function() {\n  return JSON.stringify(this._serializeSketch());\n};\n\nIO.prototype._loadSketch = function(sketch) {\n\n  this.cleanUpData();\n\n  var index = {};\n\n  function endPoint(p) {\n    var id = p[0];\n    var ep = index[id];\n    if (ep !== undefined) {\n      return\n    }\n    ep = new EndPoint(p[1][1], p[2][1]);\n    index[p[1][0]] = ep._x;\n    index[p[2][0]] = ep._y;\n    index[id] = ep;\n    return ep;\n  }\n\n  var layerIdGen = 0;\n  function getLayer(viewer, name) {\n    if (name === undefined) {\n      name = \"layer_\" + layerIdGen++;\n    } else {\n      if (name === viewer.dimLayer.name) {\n        return viewer.dimLayer;\n      }\n      for (var i = 0; i < viewer.layers.length; ++i) {\n        if (name === viewer.layers[i].name) {\n          return viewer.layers[i];\n        }\n      }\n    }\n    var layer = new Layer(name, Styles.DEFAULT);\n    viewer.layers.push(layer);\n    return layer;\n  }\n  var T = Types;\n  var maxEdge = 0;\n  var sketchLayers = sketch['layers'];\n  var boundary = sketch['boundary'];\n  var boundaryNeedsUpdate = !(boundary === undefined || boundary == null);\n  if (sketchLayers !== undefined) {\n    for (var l = 0; l < sketchLayers.length; ++l) {\n      var ioLayer = sketchLayers[l];\n      var layerName = ioLayer['name'];\n      var boundaryProcessing = layerName == IO.BOUNDARY_LAYER_NAME && boundaryNeedsUpdate;\n      var layer = getLayer(this.viewer, layerName);\n      if (!!ioLayer.style) layer.style = ioLayer.style;\n      layer.readOnly = !!ioLayer.readOnly;\n      var layerData = ioLayer['data'];\n      for (i = 0; i < layerData.length; ++i) {\n        var obj = layerData[i];\n        var skobj = null;\n        var _class = obj['_class'];\n        var aux = !!obj['aux'];\n        \n        if (boundaryProcessing) {\n          if (_class === T.SEGMENT && boundary.lines.length == 0) continue;\n          else if (_class === T.ARC && boundary.arcs.length == 0) continue;\n          else if (_class === T.CIRCLE && boundary.circles.length == 0) continue;\n        }\n        \n        if (_class === T.SEGMENT) {\n          const points = obj['points'];\n          const a = endPoint(points[0]);\n          const b = endPoint(points[1]);\n          skobj = new Segment(a, b);\n        } else if (_class === T.END_POINT) {\n          skobj = endPoint(obj['location']);\n        } else if (_class === T.ARC) {\n          const points = obj['points'];\n          const a = endPoint(points[0]);\n          const b = endPoint(points[1]);\n          const c = endPoint(points[2]);\n          skobj = new Arc(a, b, c);\n        } else if (_class === T.CIRCLE) {\n          const c = endPoint(obj['c']);\n          skobj = new Circle(c);\n          skobj.r.set(obj['r']);\n        } else if (_class === T.ELLIPSE) {\n          const ep1 = endPoint(obj['ep1']);\n          const ep2 = endPoint(obj['ep2']);\n          skobj = new Ellipse(ep1, ep2);\n          skobj.r.set(obj['r']);\n        } else if (_class === T.ELL_ARC) {\n          const ep1 = endPoint(obj['ep1']);\n          const ep2 = endPoint(obj['ep2']);\n          const a = endPoint(obj['a']);\n          const b = endPoint(obj['b']);\n          skobj = new EllipticalArc(ep1, ep2, a, b);\n          skobj.r.set(obj['r']);\n        } else if (_class === T.BEZIER) {\n          const a = endPoint(obj['a']);\n          const b = endPoint(obj['b']);\n          const cp1 = endPoint(obj['cp1']);\n          const cp2 = endPoint(obj['cp2']);\n          skobj = new BezierCurve(a, b, cp1, cp2);\n        } else if (_class === T.HDIM) {\n          skobj = new HDimension(obj['a'], obj['b']);\n          skobj.flip = obj['flip'];\n        } else if (_class === T.VDIM) {\n          skobj = new VDimension(obj['a'], obj['b']);\n          skobj.flip = obj['flip'];\n        } else if (_class === T.DIM) {\n          skobj = new Dimension(obj['a'], obj['b']);\n          skobj.flip = obj['flip'];\n        } else if (_class === T.DDIM) {\n          skobj = new DiameterDimension(obj['obj']);\n        }\n        if (skobj != null) {\n          if (!aux) skobj.stabilize(this.viewer);\n          if (aux) skobj.accept(function(o){o.aux = true; return true;});\n          if (obj['edge'] !== undefined) {\n            skobj.edge = obj['edge'];\n            maxEdge = Math.max(maxEdge, skobj.edge);\n          }\n          layer.add(skobj);\n          index[obj['id']] = skobj;\n          \n          //reindex non point children to recover constraints\n          const childrenIds = obj['children'];\n          if (childrenIds) {\n            const children = nonPointChildren(skobj);\n            for (let childIdx = 0; childIdx < childrenIds.length; childIdx++) {\n              index[childrenIds[childIdx]] = children[childIdx];\n            }\n          }\n        }\n        if (boundaryProcessing) {\n          if (_class === T.SEGMENT) this.synchLine(skobj, boundary.lines.shift());\n          else if (_class === T.ARC) this.synchArc(skobj, boundary.arcs.shift());\n          else if (_class === T.CIRCLE) this.synchCircle(skobj, boundary.circles.shift());\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < this.viewer.dimLayer.objects.length; ++i) {\n    obj = this.viewer.dimLayer.objects[i];\n    if (obj._class === T.DIM || obj._class === T.HDIM || obj._class === T.VDIM) {\n      obj.a = index[obj.a];\n      obj.b = index[obj.b];\n    } else if (obj._class === T.DDIM) {\n      obj.obj = index[obj.obj];\n    }\n  }\n\n  if (boundaryNeedsUpdate) {\n    this.addNewBoundaryObjects(boundary, maxEdge);\n  }\n\n  var sketchConstraints = sketch['constraints'];\n  if (sketchConstraints !== undefined) {\n    for (var i = 0; i < sketchConstraints.length; ++i) {\n      try {\n        const c = this.parseConstr(sketchConstraints[i], index);\n        this.viewer.parametricManager._add(c);\n      } catch (msg) {\n        console.info(\"Skipping. \" + msg);\n      }\n    }\n    this.viewer.parametricManager.notify();\n  }\n  var constants = sketch['constants'];\n  if (constants !== undefined) {\n    this.viewer.params.constantDefinition = constants;\n  }\n};\n\nIO.prototype.synchLine = function(skobj, edgeObj) {\n  skobj.a.x = edgeObj.a.x;\n  skobj.a.y = edgeObj.a.y;\n  skobj.b.x = edgeObj.b.x;\n  skobj.b.y = edgeObj.b.y;\n};\n\nIO.prototype.synchArc = function(skobj, edgeObj) {\n  skobj.a.x = edgeObj.a.x;\n  skobj.a.y = edgeObj.a.y;\n  skobj.b.x = edgeObj.b.x;\n  skobj.b.y = edgeObj.b.y;\n  skobj.c.x = edgeObj.c.x;\n  skobj.c.y = edgeObj.c.y;\n};\n\nIO.prototype.synchCircle = function(skobj, edgeObj) {\n  skobj.c.x = edgeObj.c.x;\n  skobj.c.y = edgeObj.c.y;\n  skobj.r.set(edgeObj.r);\n};\n\nIO.prototype.addNewBoundaryObjects = function(boundary, maxEdge) {\n  var boundaryLayer = this.viewer.findLayerByName(IO.BOUNDARY_LAYER_NAME);\n\n  if (boundaryLayer === null) {\n    boundaryLayer = new Layer(IO.BOUNDARY_LAYER_NAME, Styles.BOUNDS);\n    this.viewer.layers.splice(0, 0, boundaryLayer);\n  } \n\n  boundaryLayer.readOnly = true;\n  boundaryLayer.style = Styles.BOUNDS;\n\n  var i, obj, id = maxEdge + 1;\n  function __processAux(obj) {\n    obj.edge = id ++;\n    obj.accept(function(o){\n      o.aux = true;\n      return true;\n    });\n  }\n\n  for (i = 0; i < boundary.lines.length; ++i) {\n    var edge = boundary.lines[i];\n    var seg = this.viewer.addSegment(edge.a.x, edge.a.y, edge.b.x, edge.b.y, boundaryLayer);\n    __processAux(seg);\n  }\n  for (i = 0; i < boundary.arcs.length; ++i) {\n    var a = boundary.arcs[i];\n    var arc = new Arc(\n      new EndPoint(a.a.x, a.a.y),\n      new EndPoint(a.b.x, a.b.y),\n      new EndPoint(a.c.x, a.c.y)\n    );\n    boundaryLayer.objects.push(arc);\n    __processAux(arc);\n  }\n  for (i = 0; i < boundary.circles.length; ++i) {\n    obj = boundary.circles[i];\n    var circle = new Circle(new EndPoint(obj.c.x, obj.c.y));\n    circle.r.set(obj.r);\n    boundaryLayer.objects.push(circle);\n    __processAux(circle);\n  }\n};\n\nIO.prototype.cleanUpData = function() {\n  for (var l = 0; l < this.viewer.layers.length; ++l) {\n    var layer = this.viewer.layers[l];\n    if (layer.objects.length != 0) {\n      layer.objects = [];\n    }\n  }\n  this.viewer.deselectAll();\n  Generator.resetIDGenerator(0);\n  if (this.viewer.parametricManager.subSystems.length != 0) {\n    this.viewer.parametricManager.subSystems = [];\n    this.viewer.parametricManager.notify();\n  }\n};\n\nIO.prototype._serializeSketch = function() {\n  var sketch = {};\n  //sketch.boundary = boundary;\n  sketch['layers'] = [];\n  function point(p) {\n    return [ p.id, [p._x.id, p.x], [p._y.id, p.y] ];\n  }\n  var T = Types;\n  var toSave = [this.viewer.dimLayers, this.viewer.layers];\n  for (var t = 0; t < toSave.length; ++t) {\n    var layers = toSave[t];\n    for (var l = 0; l < layers.length; ++l) {\n      var layer = layers[l];\n      var toLayer = {'name' : layer.name, style : layer.style, readOnly: layer.readOnly, 'data' : []};\n      sketch['layers'].push(toLayer);\n      for (var i = 0; i < layer.objects.length; ++i) {\n        var obj = layer.objects[i];\n        var to = {'id': obj.id, '_class': obj._class};\n        if (obj.aux) to.aux = obj.aux;\n        if (obj.edge !== undefined) to.edge = obj.edge;\n        toLayer['data'].push(to);\n        if (obj._class === T.SEGMENT) {\n          to['points'] = [point(obj.a), point(obj.b)];\n        } else if (obj._class === T.END_POINT) {\n          to['location'] = point(obj);\n        } else if (obj._class === T.ARC) {\n          to['points'] = [point(obj.a), point(obj.b), point(obj.c)];\n        } else if (obj._class === T.CIRCLE) {\n          to['c'] = point(obj.c);\n          to['r'] = obj.r.get();\n        } else if (obj._class === T.ELLIPSE) {\n          to['ep1'] = point(obj.ep1);\n          to['ep2'] = point(obj.ep2);\n          to['r'] = obj.r.get();\n        } else if (obj._class === T.ELL_ARC) {\n          to['ep1'] = point(obj.ep1);\n          to['ep2'] = point(obj.ep2);\n          to['a'] = point(obj.a);\n          to['b'] = point(obj.b);\n          to['r'] = obj.r.get();\n        } else if (obj._class === T.BEZIER) {\n          to['a'] = point(obj.a);\n          to['b'] = point(obj.b);\n          to['cp1'] = point(obj.cp1);\n          to['cp2'] = point(obj.cp2);\n        } else if (obj._class === T.DIM || obj._class === T.HDIM || obj._class === T.VDIM) {\n          to['a'] = obj.a.id;\n          to['b'] = obj.b.id;\n          to['flip'] = obj.flip;\n        } else if (obj._class === T.DDIM) {\n          to['obj'] = obj.obj.id;\n        }\n        const children = nonPointChildren(obj).map(c => c.id);\n        if (children.length != 0) {\n          to['children'] = children;\n        }\n      }\n    }\n  }\n\n  var constrs = sketch['constraints'] = [];\n  var subSystems = this.viewer.parametricManager.subSystems;\n  for (var j = 0; j < subSystems.length; j++) {\n    var sub = subSystems[j];\n    for (i = 0; i < sub.constraints.length; ++i) {\n      if (!sub.constraints[i].aux) {\n        constrs.push(this.serializeConstr(sub.constraints[i]));\n      }\n    }\n  }\n\n  var constantDefinition = this.viewer.params.constantDefinition;\n  if (constantDefinition !== undefined && constantDefinition != null && !/^\\s*$/.test(constantDefinition)) {\n    sketch['constants'] = constantDefinition;\n  }\n  return sketch;\n};\n\nfunction nonPointChildren(obj){\n  const children = [];\n  obj.accept((o) => {\n    if (o._class !== Types.END_POINT) {\n      children.push(o);\n    }\n    return true;\n  });\n  return children;\n}\n\nIO.prototype.parseConstr = function (c, index) {\n  var name = c[0];\n  var ps = c[1];\n  function find(id) {\n    var p = index[id];\n    if (!p) {\n      throw \"Constraint \" + name + \" refers to nonexistent object.\";\n    }\n    return p;\n  }\n  var constrCreate = Constraints.Factory[name];\n  if (constrCreate === undefined) {\n    throw \"Constraint \" + name + \" doesn't exist.\";\n  }\n  return constrCreate(find, ps);\n};\n\nIO.prototype.serializeConstr = function (c) {\n  return c.serialize();\n};\n\nfunction _format(str, args) {\n  if (args.length == 0) return str;\n  var i = 0;\n  return str.replace(/\\$/g, function() {\n    if (args === undefined || args[i] === undefined) throw \"format arguments mismatch\";\n    var val =  args[i];\n    if (typeof val === 'number') val = val.toPrecision();\n    i ++;\n    return val;\n  });\n}\n\n/** @constructor */\nfunction PrettyColors() {\n  var colors = [\"#000000\", \"#00008B\", \"#006400\", \"#8B0000\", \"#FF8C00\", \"#E9967A\"];\n  var colIdx = 0;\n  this.next = function () {\n    return colors[colIdx++ % colors.length];\n  }\n}\n\n/** @constructor */\nfunction TextBuilder() {\n  this.data = \"\";\n  this.fline = function (chunk, args) {\n    this.data += _format(chunk, args) + \"\\n\"\n  };\n  this.line = function (chunk) {\n    this.data += chunk + \"\\n\"\n  };\n  this.number = function (n) {\n    this.data += n.toPrecision()\n  };\n  this.numberln = function (n) {\n    this.number(n)\n    this.data += \"\\n\"\n  }\n}\n\n/** @constructor */\nfunction BBox() {\n  var bbox = [Number.MAX_VALUE, Number.MAX_VALUE, - Number.MAX_VALUE, - Number.MAX_VALUE];\n\n  var T = Types;\n\n  this.checkLayers = function(layers) {\n    for (var l = 0; l < layers.length; ++l)\n      for (var i = 0; i < layers[l].objects.length; ++i)\n        this.check(layers[l].objects[i]);\n  };\n\n  this.check = function(obj) {\n    if (obj._class === T.SEGMENT) {\n      this.checkBounds(obj.a.x, obj.a.y);\n      this.checkBounds(obj.b.x, obj.b.y);\n    } else if (obj._class === T.END_POINT) {\n      this.checkBounds(obj.x, obj.y);\n    } else if (obj._class === T.ARC) {\n      this.checkCircBounds(obj.c.x, obj.c.y, obj.r.get());\n    } else if (obj._class === T.CIRCLE) {\n      this.checkCircBounds(obj.c.x, obj.c.y, obj.r.get());\n    } else if (obj._class === T.ELLIPSE || obj._class === T.ELL_ARC) {\n      this.checkCircBounds(obj.centerX, obj.centerY, Math.max(obj.radiusX, obj.radiusY));\n    } else if (obj) {\n      obj.accept((o) => {\n        if (o._class == T.END_POINT) {\n          this.checkBounds(o.x, o.y);\n        }\n        return true;\n      });\n//    } else if (obj._class === T.DIM || obj._class === T.HDIM || obj._class === T.VDIM) {\n    }\n  };\n\n  this.isValid = function() {\n    return bbox[0] != Number.MAX_VALUE;\n  };\n  \n  this.checkBounds = function(x, y) {\n    bbox[0] = Math.min(bbox[0], x);\n    bbox[1] = Math.min(bbox[1], y);\n    bbox[2] = Math.max(bbox[2], x);\n    bbox[3] = Math.max(bbox[3], y);\n  };\n\n  this.checkCircBounds = function(x, y, r) {\n    this.checkBounds(x + r, y + r);\n    this.checkBounds(x - r, y + r);\n    this.checkBounds(x - r, y - r);\n    this.checkBounds(x - r, y + r);\n  };\n\n  this.inc = function(by) {\n    bbox[0] -= by;\n    bbox[1] -= by;\n    bbox[2] += by;\n    bbox[3] += by;\n  };\n  \n  this.width = function() {\n    return bbox[2] - bbox[0];\n  };\n\n  this.height = function() {\n    return bbox[3] - bbox[1];\n  };\n\n  this.bbox = bbox;\n}\n\nIO.prototype.getWorkspaceToExport = function() {\n  return [this.viewer.layers];\n};\n\nIO.prototype.getLayersToExport = function() {\n  var ws = this.getWorkspaceToExport();\n  var toExport = [];\n  for (var t = 0; t < ws.length; ++t) {\n    var layers = ws[t];\n    for (var l = 0; l < layers.length; ++l) {\n      var layer = layers[l];\n      toExport.push(layer)\n    }\n  }\n  return toExport;\n};\n\nIO.prototype.svgExport = function () {\n\n  var T = Types;\n  var out = new TextBuilder();\n\n  var bbox = new BBox();\n\n  var a = new Vector();\n  var b = new Vector();\n\n  var prettyColors = new PrettyColors();\n  var toExport = this.getLayersToExport();\n  for (var l = 0; l < toExport.length; ++l) {\n    var layer = toExport[l];\n    var color = prettyColors.next();\n    out.fline('<g id=\"$\" fill=\"$\" stroke=\"$\" stroke-width=\"$\">', [layer.name, \"none\", color, '2']);\n    for (var i = 0; i < layer.objects.length; ++i) {\n      var obj = layer.objects[i];\n      if (obj._class !== T.END_POINT) bbox.check(obj);\n      if (obj._class === T.SEGMENT) {\n        out.fline('<line x1=\"$\" y1=\"$\" x2=\"$\" y2=\"$\" />', [obj.a.x, obj.a.y, obj.b.x, obj.b.y]);\n      } else if (obj._class === T.ARC) {\n        a.set(obj.a.x - obj.c.x, obj.a.y - obj.c.y, 0);\n        b.set(obj.b.x - obj.c.x, obj.b.y - obj.c.y, 0);\n        var dir = a.cross(b).z > 0 ? 0 : 1;\n        var r = obj.r.get();\n        out.fline('<path d=\"M $ $ A $ $ 0 $ $ $ $\" />', [obj.a.x, obj.a.y, r, r, dir, 1, obj.b.x, obj.b.y]);\n      } else if (obj._class === T.CIRCLE) {\n        out.fline('<circle cx=\"$\" cy=\"$\" r=\"$\" />', [obj.c.x, obj.c.y, obj.r.get()]);\n//      } else if (obj._class === T.DIM || obj._class === T.HDIM || obj._class === T.VDIM) {\n      }\n    }\n    out.line('</g>');\n  }\n  bbox.inc(20);\n  return _format(\"<svg viewBox='$ $ $ $'>\\n\", bbox.bbox) + out.data + \"</svg>\"\n};\n\nIO.prototype.dxfExport = function () {\n  var T = Types;\n  var out = new TextBuilder();\n  var bbox = new BBox();\n  var toExport = this.getLayersToExport();\n  var i;\n  bbox.checkLayers(toExport);\n  out.line(\"999\");\n  out.line(\"js.parametric.sketcher\");\n  out.line(\"0\");\n  out.line(\"SECTION\");\n  out.line(\"2\");\n  out.line(\"HEADER\");\n  out.line(\"9\");\n  out.line(\"$ACADVER\");\n  out.line(\"1\");\n  out.line(\"AC1006\");\n  out.line(\"9\");\n  out.line(\"$INSBASE\");\n  out.line(\"10\");\n  out.line(\"0\");\n  out.line(\"20\");\n  out.line(\"0\");\n  out.line(\"30\");\n  out.line(\"0\");\n  out.line(\"9\");\n  out.line(\"$EXTMIN\");\n  out.line(\"10\");\n  out.numberln(bbox.bbox[0]);\n  out.line(\"20\");\n  out.numberln(bbox.bbox[1]);\n  out.line(\"9\");\n  out.line(\"$EXTMAX\");\n  out.line(\"10\");\n  out.numberln(bbox.bbox[2]);\n  out.line(\"20\");\n  out.numberln(bbox.bbox[3]);\n  out.line(\"0\");\n  out.line(\"ENDSEC\");\n\n  out.line(\"0\");\n  out.line(\"SECTION\");\n  out.line(\"2\");\n  out.line(\"TABLES\");\n\n  for (i = 0; i < toExport.length; i++) {\n    out.line(\"0\");\n    out.line(\"LAYER\");\n    out.line(\"2\");\n    out.line(\"\" + (i + 1));\n    out.line(\"70\");\n    out.line(\"64\");\n    out.line(\"62\");\n    out.line(\"7\");\n    out.line(\"6\");\n    out.line(\"CONTINUOUS\");\n  }\n  out.line(\"0\");\n  out.line(\"ENDTAB\");\n  out.line(\"0\");\n  out.line(\"ENDSEC\");\n  out.line(\"0\");\n  out.line(\"SECTION\");\n  out.line(\"2\");\n  out.line(\"BLOCKS\");\n  out.line(\"0\");\n  out.line(\"ENDSEC\");\n  out.line(\"0\");\n  out.line(\"SECTION\");\n  out.line(\"2\");\n  out.line(\"ENTITIES\");\n\n  for (var l = 0; l < toExport.length; l++) {\n    var lid = l + 1;\n    var layer = toExport[l];\n    for (i = 0; i < layer.objects.length; ++i) {\n      var obj = layer.objects[i];\n      if (obj._class === T.END_POINT) {\n        out.line(\"0\");\n        out.line(\"POINT\");\n        out.line(\"8\");\n        out.line(lid);\n        out.line(\"10\");\n        out.numberln(obj.x);\n        out.line(\"20\");\n        out.numberln(obj.y);\n        out.line(\"30\");\n        out.line(\"0\");\n      } else if (obj._class === T.SEGMENT) {\n        out.line(\"0\");\n        out.line(\"LINE\");\n        out.line(\"8\");\n        out.line(lid);\n        //out.line(\"62\"); color\n        //out.line(\"4\");\n        out.line(\"10\");\n        out.numberln(obj.a.x);\n        out.line(\"20\");\n        out.numberln(obj.a.y);\n        out.line(\"30\");\n        out.line(\"0\");\n        out.line(\"11\");\n        out.numberln(obj.b.x);\n        out.line(\"21\");\n        out.numberln(obj.b.y);\n        out.line(\"31\");\n        out.line(\"0\");\n      } else if (obj._class === T.ARC) {\n        out.line(\"0\");\n        out.line(\"ARC\");\n        out.line(\"8\");\n        out.line(lid);\n        out.line(\"10\");\n        out.numberln(obj.c.x);\n        out.line(\"20\");\n        out.numberln(obj.c.y);\n        out.line(\"30\");\n        out.line(\"0\");\n        out.line(\"40\");\n        out.numberln(obj.r.get());\n        out.line(\"50\");\n        out.numberln(obj.getStartAngle() * (180 / Math.PI));\n        out.line(\"51\");\n        out.numberln(obj.getEndAngle() * (180 / Math.PI));\n      } else if (obj._class === T.CIRCLE) {\n        out.line(\"0\");\n        out.line(\"CIRCLE\");\n        out.line(\"8\");\n        out.line(lid);\n        out.line(\"10\");\n        out.numberln(obj.c.x);\n        out.line(\"20\");\n        out.numberln(obj.c.y);\n        out.line(\"30\");\n        out.line(\"0\");\n        out.line(\"40\");\n        out.numberln(obj.r.get());\n//      } else if (obj._class === T.DIM || obj._class === T.HDIM || obj._class === T.VDIM) {\n      }\n    }\n  }\n\n  out.line(\"0\");\n  out.line(\"ENDSEC\");\n  out.line(\"0\");\n  out.line(\"EOF\");\n  return out.data;\n};\n\nIO.exportTextData = function(data, fileName) {\n  var link = document.getElementById(\"downloader\");\n  link.href = \"data:application/octet-stream;charset=utf-8;base64,\" + btoa(data);\n  link.download = fileName;\n  link.click();\n  //console.log(app.viewer.io.svgExport());\n};\n\nexport {IO, BBox, Types};\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/io.js\n **/","\nlet ID_COUNTER = 0;\n\nexport const Generator = {\n  genID : function() {\n    return ID_COUNTER ++;\n  },\n\n  resetIDGenerator : function(value) {\n    ID_COUNTER = value;\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/id-generator.js\n **/","import {Generator} from './id-generator'\nimport {Styles} from './styles'\nimport {Parameters, Bus} from '../ui/toolkit'\nimport {ParametricManager} from './parametric'\nimport {HistoryManager} from './history'\nimport {ToolManager} from './tools/manager'\nimport {PanTool} from './tools/pan'\nimport {DragTool} from './tools/drag'\nimport {Segment} from './shapes/segment'\nimport {EndPoint} from './shapes/point'\nimport {Point} from './shapes/primitives'\nimport {ReferencePoint} from './shapes/reference-point'\nimport {BasisOrigin} from './shapes/basis-origin'\nimport Vector from '../math/vector'\n\nimport * as draw_utils from './shapes/draw-utils'\nimport * as math from '../math/math'\n\n/** @constructor */\nfunction Viewer(canvas, IO) {\n\n  // 1/1000'' aka 1 mil is a standard precision for the imperial system(for engeneering) \n  // this precision also covers the metric system which is supposed to be ~0.01\n  // this field is used only for displaying purposes now, although in future it could be\n  // used to keep all internal data with such precision transforming the input from user\n  this.presicion = 3; \n  this.canvas = canvas;\n  this.params = new Parameters();\n  this.io = new IO(this);\n  var viewer = this;\n  this.retinaPxielRatio = window.devicePixelRatio > 1 ? window.devicePixelRatio : 1;\n  function updateCanvasSize() {\n    var canvasWidth = canvas.parentNode.offsetWidth;\n    var canvasHeight = canvas.parentNode.offsetHeight;\n\n    canvas.width = canvasWidth * viewer.retinaPxielRatio;\n    canvas.height = canvasHeight * viewer.retinaPxielRatio;\n\n    canvas.style.width = canvasWidth + \"px\";\n    canvas.style.height = canvasHeight + \"px\";\n  }\n\n  this.onWindowResize = function() {\n    updateCanvasSize();\n    viewer.refresh();\n  };\n  updateCanvasSize();\n  window.addEventListener( 'resize', this.onWindowResize, false );\n\n  Object.defineProperty(this, \"activeLayer\", {\n    get: viewer.getActiveLayer ,\n    set: viewer.setActiveLayer\n  });\n\n  this.bus = new Bus();\n  this.ctx = this.canvas.getContext(\"2d\");\n  this._activeLayer = null;\n  this.layers = [];\n  this.dimLayer = new Layer(\"_dim\", Styles.DIM);\n  this.dimLayers = [this.dimLayer];\n  this.bus.defineObservable(this, 'dimScale', 1);\n  this.bus.subscribe('dimScale', function(){ viewer.refresh(); });\n  \n  this._workspace = [this.layers, this.dimLayers];\n\n  this.referencePoint = new ReferencePoint();\n  this._serviceWorkspace = [this._createServiceLayers()];\n  \n  this.toolManager = new ToolManager(this, new PanTool(this));\n  this.parametricManager = new ParametricManager(this);\n\n  this.translate = {x : 0.0, y : 0.0};\n  this.scale = 1.0;\n\n  this.selected = [];\n  this.snapped = null;\n  \n  this.historyManager = new HistoryManager(this);\n  this.refresh();\n}\n\nViewer.prototype.roundToPrecision = function(value) {\n  return value.toFixed(this.presicion);\n};\n\nViewer.prototype.addSegment = function(x1, y1, x2, y2, layer) {\n  var a = new EndPoint(x1, y1);\n  var b = new EndPoint(x2, y2);\n  var line = new Segment(a, b);\n  layer.add(line);\n  return line;\n};\n\nViewer.prototype.remove = function(obj) {\n  if (obj.layer != null) {\n    if (obj.layer.remove(obj)) {\n      this.parametricManager.removeConstraintsByObj(obj);\n    }\n  }\n};\n\nViewer.prototype.add = function(obj, layer) {\n  layer.add(obj);\n};\n\nfunction isEndPoint(o) {\n  return o._class === 'TCAD.TWO.EndPoint'\n}\n\nViewer.prototype.search = function(x, y, buffer, deep, onlyPoints, filter) {\n\n  buffer *= 0.5;\n  \n  var pickResult = [];\n  var aim = new Vector(x, y);\n\n  var heroIdx = 0;\n  var unreachable = buffer * 2;\n  var heroLength = unreachable; // unreachable\n\n  function isFiltered(o) {\n    for (var i = 0; i < filter.length; ++i) {\n      if (filter[i] === o) return true;\n    }\n    return false;\n  }\n\n  for (var i = 0; i < this.layers.length; i++) {\n    var objs = this.layers[i].objects;\n    for (var j = 0; j < objs.length; j++) {\n      var l = unreachable + 1;\n      var before = pickResult.length;\n      objs[j].accept((o) => {\n        if (!o.visible) return true;\n        if (onlyPoints && !isEndPoint(o)) {\n          return true;  \n        }\n        l = o.normalDistance(aim, this.scale);\n        if (l >= 0 && l <= buffer && !isFiltered(o)) {\n          pickResult.push(o);\n          return false;\n        }\n        return true;\n      });\n      var hit = before - pickResult.length != 0;\n      if (hit) {\n        if (!deep && pickResult.length != 0) return pickResult;\n        if (l >= 0 && l < heroLength) {\n          heroLength = l;\n          heroIdx = pickResult.length - 1;\n        }\n      }\n    }\n  }\n  if (pickResult.length > 0) {\n    var _f = pickResult[0];\n    pickResult[0] = pickResult[heroIdx];\n    pickResult[heroIdx] = _f;\n  }\n  return pickResult;\n};\n\nViewer.prototype._createServiceLayers = function() {\n  let layer = new Layer(\"_service\", Styles.SERVICE);\n//  layer.objects.push(new CrossHair(0, 0, 20));\n  layer.objects.push(new Point(0, 0, 2));\n  layer.objects.push(this.referencePoint);\n  layer.objects.push(new BasisOrigin(null, this));\n  return [layer];\n\n};\n\nViewer.prototype.refresh = function() {\n  var viewer = this;\n  window.requestAnimationFrame( function() {\n    viewer.repaint();     \n  });  \n};\n\nViewer.prototype.repaint = function() {\n\n  const ctx = this.ctx;\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  \n  ctx.fillStyle = \"#808080\";\n  ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  \n  //Order is important!\n  ctx.transform(1, 0, 0, -1, 0, this.canvas.height );\n  ctx.transform(1, 0, 0, 1, this.translate.x , this.translate.y );\n  ctx.transform(this.scale, 0, 0, this.scale, 0, 0);\n\n  this.__prevStyle = null;\n\n  this.__drawWorkspace(ctx, this._workspace, Viewer.__SKETCH_DRAW_PIPELINE);\n  this.__drawWorkspace(ctx, this._serviceWorkspace, Viewer.__SIMPLE_DRAW_PIPELINE);\n};\n\nViewer.__SKETCH_DRAW_PIPELINE = [\n  (obj) => !isEndPoint(obj) && obj.marked === null,\n  (obj) => !isEndPoint(obj) && obj.marked !== null,\n  (obj) =>  isEndPoint(obj) && obj.marked === null,\n  (obj) =>  isEndPoint(obj) && obj.marked !== null\n];\n\nViewer.__SIMPLE_DRAW_PIPELINE = [\n  (obj) => true\n];\n\nViewer.prototype.__drawWorkspace = function(ctx, workspace, pipeline) {\n  for (let drawPredicate of pipeline) {\n    for (let layers of workspace) {\n      for (let layer of layers) {\n        for (let obj of layer.objects) {\n          obj.accept((obj) => {\n            if (!obj.visible) return true;\n            if (drawPredicate(obj)) {\n              this.__draw(ctx, layer, obj);\n            }\n            return true;\n          });\n        }\n      }\n    }\n  }\n};\n\nViewer.prototype.__draw = function(ctx, layer, obj) {\n  const style = this.getStyleForObject(layer, obj);\n  if (style !== this.__prevStyle) {\n    this.setStyle(style, ctx);\n  }\n  this.__prevStyle = style;\n  obj.draw(ctx, this.scale / this.retinaPxielRatio, this);\n};\n\nViewer.prototype.getStyleForObject = function(layer, obj) {\n  if (obj.style != null) {\n    return obj.style;\n  } else if (obj.role != null) {\n    const style = layer.stylesByRoles[obj.role];\n    if (style) {\n      return style;\n    }\n  }\n  return layer.style;  \n};\n  \nViewer.prototype.setStyle = function(style, ctx) {\n  draw_utils.SetStyle(style, ctx, this.scale / this.retinaPxielRatio);\n};\n\nViewer.prototype.snap = function(x, y, excl) {\n  this.cleanSnap();\n  var snapTo = this.search(x, y, 20 / this.scale, true, true, excl);\n  if (snapTo.length > 0) {\n    this.snapped = snapTo[0];\n    this.mark(this.snapped, Styles.SNAP);\n  }\n  return this.snapped;\n};\n\nViewer.prototype.cleanSnap = function() {\n  if (this.snapped != null) {\n    this.deselect(this.snapped);\n    this.snapped = null;\n  }\n};\n\nViewer.prototype.showBounds = function(x1, y1, x2, y2, offset) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  if (this.canvas.width > this.canvas.height) {\n    this.scale = this.canvas.height / dy;\n  } else {\n    this.scale = this.canvas.width / dx;\n  }\n  this.translate.x = -x1 * this.scale;\n  this.translate.y = -y1 * this.scale;\n};\n\nViewer.prototype.screenToModel2 = function(x, y, out) {\n\n  out.x = x * this.retinaPxielRatio;\n  out.y = this.canvas.height - y * this.retinaPxielRatio;\n\n  out.x -= this.translate.x;\n  out.y -= this.translate.y;\n\n  out.x /= this.scale;\n  out.y /= this.scale;\n};\n\nViewer.prototype.screenToModel = function(e) {\n  return this._screenToModel(e.offsetX, e.offsetY);\n};\n\nViewer.prototype._screenToModel = function(x, y) {\n  var out = {x: 0, y: 0};\n  this.screenToModel2(x, y, out);\n  return out;\n};\n\nViewer.prototype.accept = function(visitor) {\n  for (let layer of this.layers) {\n    for (let object of layer.objects) {\n      if (!object.accept(visitor)) {\n        return false;\n      }\n    }\n  }\n};\n\nViewer.prototype.findLayerByName = function(name) {\n  for (var i = 0; i < this.layers.length; i++) {\n    if (this.layers[i].name == name) {\n      return this.layers[i];\n    }\n  }\n  return null;\n};\n\nViewer.prototype.findById = function(id) {\n  var result = null;\n  this.accept(function(o) {\n    if (o.id === id) {\n      result = o;\n      return false;\n    }\n    return true;\n  });\n  return result;\n};\n\nViewer.prototype.select = function(objs, exclusive) {\n  if (exclusive) this.deselectAll();\n  for (var i = 0; i < objs.length; i++) {\n    this.mark(objs[i]);\n  }\n};\n\nViewer.prototype.pick = function(e) {\n  var m = this.screenToModel(e);\n  return this.search(m.x, m.y, 20 / this.scale, true, false, []);\n};\n\nViewer.prototype.mark = function(obj, style) {\n  if (style === undefined) {\n    style = Styles.MARK;\n  }\n  obj.marked = style;\n  \n  if (this.selected.indexOf(obj) == -1) {\n    this.selected.push(obj);\n  }\n};\n\nViewer.prototype.getActiveLayer = function() {\n  var layer = this._activeLayer;\n  if (layer == null || layer.readOnly) {\n    layer = null;\n    for (var i = 0; i < this.layers.length; i++) {\n      var l = this.layers[i];\n      if (!l.readOnly) {\n        layer = l;\n        break;\n      }\n    }\n  }\n  if (layer == null) {\n    layer = new Layer(\"JustALayer\", Styles.DEFAULT);\n    this.layers.push(layer);\n  }\n  return layer;\n};\n\nViewer.prototype.setActiveLayer = function(layer) {\n  if (!layer.readOnly) {\n    this._activeLayer = layer;\n    this.bus.notify(\"activeLayer\");\n  }\n};\n\nViewer.prototype.deselect = function(obj) {\n  for (var i = 0; i < this.selected.length; i++) {\n    if (obj === this.selected[i]) {\n      this.selected.splice(i, 1)[0].marked = null;\n      break;\n    }\n  }\n};\n\nViewer.prototype.deselectAll = function() {\n  for (var i = 0; i < this.selected.length; i++) {\n    this.selected[i].marked = null;\n  }\n  while(this.selected.length > 0) this.selected.pop();\n};\n\nViewer.prototype.equalizeLinkedEndpoints = function() {\n  const visited = new Set();\n\n  function equalize(obj) {\n    if (visited.has(obj.id)) return;\n    visited.add(obj.id);\n    for (let link of obj.linked) {\n      if (isEndPoint(link)) {\n        equalize(obj, link);\n        link.setFromPoint(obj);\n        equalize(link);\n      }\n    }\n  }\n  this.accept((obj) => {\n    if (isEndPoint(obj)) {\n      equalize(obj);\n    }\n    return true;\n  });\n};\n\n\n/** @constructor */\nfunction Layer(name, style) {\n  this.name = name;\n  this.style = style;\n  this.stylesByRoles = {\n    'construction': Styles.CONSTRUCTION_OF_OBJECT  \n  };\n  this.objects = [];\n  this.readOnly = false; // This is actually a mark for boundary layers coming from 3D\n}\n\nLayer.prototype.remove = function(object) {\n  const idx = this.objects.indexOf(object);\n  if (idx != -1) {\n    this.objects.splice(idx, 1);\n    return true; \n  }\n  return false;\n};\n\nLayer.prototype.add = function(object) {\n  if (object.layer !== undefined) {\n    if (object.layer != null) {\n      object.layer.remove(object);\n    }\n    if (object.layer !== this) {\n      this.objects.push(object);\n      object.layer = this;\n    }\n  } else {\n    this.objects.push(object);\n  }\n};\n\nViewer.prototype.fullHeavyUIRefresh = function() {\n  this.refresh();\n  this.parametricManager.notify();\n};\n\nexport {Viewer, Layer, Styles}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/viewer2d.js\n **/","export const Styles = {\n  DEFAULT : {\n    lineWidth : 2,\n    strokeStyle : \"#ffffff\",\n    fillStyle : \"#000000\"\n  },\n\n  SERVICE : {\n    lineWidth : 0.3,\n    strokeStyle : \"#ff0000\",\n    fillStyle : \"#FF0000\"\n  },\n\n  MARK : {\n    lineWidth : 2,\n    strokeStyle : \"#ff0000\",\n    fillStyle : \"#FF0000\"\n  },\n\n  SNAP : {\n    lineWidth : 2,\n    strokeStyle : \"#00FF00\",\n    fillStyle : \"#00FF00\"\n  },\n\n  DIM : {\n    lineWidth : 1,\n    strokeStyle : \"#bcffc1\",\n    fillStyle : \"#00FF00\"\n  },\n\n  BOUNDS : {\n    lineWidth : 2,\n    strokeStyle : \"#fff5c3\",\n    fillStyle : \"#000000\"\n  },\n\n  CONSTRUCTION : {\n    lineWidth : 1,\n    strokeStyle : \"#aaaaaa\",\n    fillStyle : \"#000000\"\n  },\n\n  CONSTRUCTION_OF_OBJECT : {\n    lineWidth : 1,\n    strokeStyle : \"#888888\",\n    fillStyle : \"#000000\"\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/styles.js\n **/","import * as utils from '../utils/utils'\nimport {Ref} from './shapes/ref'\nimport {Param, prepare} from './constr/solver'\nimport {createByConstraintName} from './constr/constraints'\nimport Vector from '../math/vector'\nimport * as math from '../math/math'\nimport * as fetch from './fetchers'\n\nvar Constraints = {};\n\n/** @constructor */\nfunction SubSystem() {\n  this.alg = 1;\n  this.error = 0;\n  this.reduce = false;\n  this.constraints = [];\n}\n\n/** @constructor */\nfunction ParametricManager(viewer) {\n  this.viewer = viewer;\n  this.subSystems = [];\n  this.listeners = [];\n  this.constantTable = {};\n  \n  this.viewer.params.define(\"constantDefinition\", null);\n  this.viewer.params.subscribe(\"constantDefinition\", \"parametricManager\", this.rebuildConstantTable, this)();\n  this.constantResolver = this.createConstantResolver();\n}\n\nParametricManager.prototype.createConstantResolver = function() {\n  var pm = this;\n  return function(value) {\n    var _value = pm.constantTable[value];\n    if (_value !== undefined) {\n      value = _value;\n    } else if (typeof(value) != 'number') {\n      console.error(\"unable to resolve constant \" + value);\n    }\n    return value;\n  }\n};\n\nParametricManager.prototype.notify = function(event) {\n  for (var i = 0; i < this.listeners.length; ++i) {\n    var l = this.listeners[i];\n    l(event);\n  }\n};\n\nParametricManager.prototype.rebuildConstantTable = function(constantDefinition) {\n  this.constantTable = {};\n  if (constantDefinition == null) return;\n  var lines = constantDefinition.split('\\n');\n  var prefix = \"(function() { \\n\";\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var m = line.match(/^\\s*([^\\s]+)\\s*=(.+)$/);\n    if (m != null && m.length == 3) {\n      var constant = m[1];\n      try {\n        var value = eval(prefix + \"return \" + m[2] + \"; \\n})()\");\n        this.constantTable[constant] = value;\n        prefix += constant + \" = \" + value + \";\\n\"\n      } catch(e) {\n        console.log(e);\n      }\n    }\n  }\n  this.refresh();\n};\n\n\nParametricManager.prototype.findComponents = function(constr) {\n  if (this.subSystems.length === 0) {\n    this.subSystems.push(new SubSystem());\n  }\n  return [0];  \n};\n\nParametricManager.prototype.tune = function(subSystem) {\n  \n};\n\nParametricManager.prototype._add = function(constr) {\n  var subSystemIds = this.findComponents(constr);\n  var subSystem; \n  switch (subSystemIds.length) {\n    case 0:\n      subSystem = new SubSystem();\n      this.subSystems.push(subSystem);\n      break;\n    case 1:\n      subSystem = this.subSystems[subSystemIds[0]];\n      break;\n    default:\n      subSystem = this.subSystems[subSystemIds[0]];\n      for (var i = 1; i < subSystemIds.length; i++) {\n        var toMerge = subSystemIds[i];\n        for (var j = 0; j < toMerge.constraints.length; j++) {\n          subSystem.push(toMerge.constraints[j]);\n        }\n      }\n    break;  \n  }\n  subSystem.constraints.push(constr);\n  return subSystem;\n};\n\nParametricManager.prototype.checkRedundancy = function (subSystem, constr) {\n  var solver = this.prepareForSubSystem([], subSystem.constraints);\n  if (solver.diagnose().conflict) {\n    alert(\"Most likely this \"+constr.NAME + \" constraint is CONFLICTING!\")\n  }\n};\n\nParametricManager.prototype.refresh = function() {\n  this.solve();\n  this.notify();\n  this.viewer.refresh();\n};\n\nParametricManager.prototype.add = function(constr) {\n  this.viewer.historyManager.checkpoint();\n  var subSystem = this._add(constr);\n  this.checkRedundancy(subSystem, constr);\n  this.refresh();\n};\n\nParametricManager.prototype.addAll = function(constrs) {\n  for (var i = 0; i < constrs.length; i++) {\n    var subSystem = this._add(constrs[i]);\n    this.checkRedundancy(subSystem, constrs[i]);\n  }\n  this.refresh();\n};\n\nParametricManager.prototype.remove = function(constr) {\n  this.viewer.historyManager.checkpoint();\n  for (var j = 0; j < this.subSystems.length; j++) {\n    var sub = this.subSystems[j];\n    for (var i = 0; i < sub.constraints.length; ++i) {\n      var p = sub.constraints[i];\n      if (p === constr) {\n        sub.constraints.splice(i, 1);\n        if (p.NAME === 'coi') {\n          this.unlinkObjects(p.a, p.b);\n        }\n        break;\n      }\n    }\n  }\n  this.refresh();\n};\n\nParametricManager.prototype.removeConstraintsByObj = function(obj) {\n  var ownedParams = [];\n  obj.collectParams(ownedParams);\n  this.removeConstraintsByParams(ownedParams);\n};\n\nParametricManager.prototype.removeConstraintsByParams = function(ownedParams) {\n  for (var s = 0; s < this.subSystems.length; s++) {\n    var toRemove = [];\n    var sub = this.subSystems[s];\n    var i;\n    for (i = 0; i < sub.constraints.length; ++i) {\n      var sdataArr = sub.constraints[i].getSolveData(this.constantResolver);\n      MAIN:\n      for (var j = 0; j < sdataArr.length; j++) {\n        var sdata = sdataArr[j];\n        var params = sdata[1];\n        for (var oi = 0; oi < ownedParams.length; ++oi) {\n          for (var k = 0; k < params.length; ++k) {\n            if (ownedParams[oi].id === params[k].id) {\n              toRemove.push(i);\n              break MAIN;\n            }\n          }\n        }\n      }\n    }\n    toRemove.sort();\n  \n    for (i = toRemove.length - 1; i >= 0 ; --i) {\n      sub.constraints.splice(  toRemove[i], 1);\n    }\n  }\n\n  this.notify();\n};\n\nParametricManager.prototype.lock = function(objs) {\n  var p = fetch.points(objs);\n  for (var i = 0; i < p.length; ++i) {\n    this._add(new Constraints.Lock(p[i], { x : p[i].x, y : p[i].y} ));\n  }\n  this.refresh();\n};\n\nParametricManager.prototype.vertical = function(objs) {\n  this.addAll(fetch.lines(objs).map(line => new Constraints.Vertical(line)));\n};\n\nParametricManager.prototype.horizontal = function(objs) {\n  this.addAll(fetch.lines(objs).map(line => new Constraints.Horizontal(line)));\n};\n\nParametricManager.prototype.parallel = function(objs) {\n  const lines = fetch.lines(objs);\n  const constraints = [];\n  for (let i = 1; i < lines.length; i++) {\n    constraints.push(new Constraints.Parallel(lines[i - 1], lines[i]));\n  }\n  this.addAll(constraints);\n};\n\nParametricManager.prototype.perpendicular = function(objs) {\n  var lines = fetch.twoLines(objs);\n  this.add(new Constraints.Perpendicular(lines[0], lines[1]));\n};\n\nParametricManager.prototype.lockConvex = function(objs, warnCallback) {\n  var lines = fetch.twoLines(objs);\n  var l1 = lines[0];\n  var l2 = lines[1];\n  var pts =[l1.a, l1.b, l2.a, l2.b]; \n  function isLinked(p1, p2) {\n    for (var i = 0; i < p1.linked.length; ++i) {\n      if (p1.linked[i].id === p2.id) {\n        return true;        \n      }\n    }\n    return false;\n  }  \n  \n  function swap(arr, i1, i2) {\n    var _ = arr[i1];\n    arr[i1] = arr[i2];\n    arr[i2] = _;\n  }\n  \n  if (isLinked(pts[0], pts[2])) {\n    swap(pts, 0, 1);\n  } else if (isLinked(pts[0], pts[3])) {\n    swap(pts, 0, 1);\n    swap(pts, 2, 3);\n  } else if (isLinked(pts[1], pts[3])) {\n    swap(pts, 2, 3);\n  } else if (isLinked(pts[1], pts[2])) {\n    //we are good\n  } else {\n    warnCallback(\"Lines must be connected\");\n    return;\n  }\n  \n  var c = pts[0];\n  var a = pts[1];\n  var t = pts[3];\n  \n  // ||ac x at|| > 0 \n  var crossNorma = (c.x - a.x) * (t.y - a.y) - (c.y - a.y) * (t.x - a.x); \n  \n  if (crossNorma < 0) {\n    var _ =  c;\n    c = t;\n    t = _;\n  }\n  \n  this.add(new Constraints.LockConvex(c, a, t));\n};\n\nParametricManager.prototype.tangent = function(objs) {\n  const ellipses = fetch.generic(objs, ['TCAD.TWO.Ellipse', 'TCAD.TWO.EllipticalArc'], 0);\n  const lines = fetch.generic(objs, ['TCAD.TWO.Segment'], 1);\n  if (ellipses.length > 0) {\n    this.add(new Constraints.EllipseTangent(lines[0], ellipses[0]));\n  } else {\n    const arcs = fetch.generic(objs, ['TCAD.TWO.Arc', 'TCAD.TWO.Circle'], 1);\n    this.add(new Constraints.Tangent(arcs[0], lines[0]));\n  }\n};\n\nParametricManager.prototype.rr = function(arcs) {\n  var prev = arcs[0];\n  for (var i = 1; i < arcs.length; ++i) {\n    this._add(new Constraints.RR(prev, arcs[i]));\n    prev = arcs[i];\n  }\n  this.refresh();\n};\n\nParametricManager.prototype.ll = function(lines) {\n  var prev = lines[0];\n  for (var i = 1; i < lines.length; ++i) {\n    this._add(new Constraints.LL(prev, lines[i]));\n    prev = lines[i];\n  }\n  this.refresh();\n\n};\n\nParametricManager.prototype.entityEquality = function(objs) {\n  var arcs = fetch.generic(objs, ['TCAD.TWO.Arc', 'TCAD.TWO.Circle'], 0);\n  var lines = fetch.generic(objs, ['TCAD.TWO.Segment'], 0);\n  if (arcs.length > 0) this.rr(arcs);\n  if (lines.length > 0) this.ll(lines);\n};\n\nParametricManager.prototype.p2lDistance = function(objs, promptCallback) {\n  var pl = fetch.pointAndLine(objs);\n\n  var target = pl[0];\n  var segment = pl[1];\n  \n  var ex = new Vector(-(segment.b.y - segment.a.y), segment.b.x - segment.a.x).normalize();\n  var distance = Math.abs(ex.dot(new Vector(segment.a.x - target.x, segment.a.y - target.y)));\n\n  var promptDistance = utils.askNumber(Constraints.P2LDistance.prototype.SettableFields.d, distance.toFixed(2), promptCallback, this.constantResolver);\n\n  if (promptDistance != null) {\n    this.add(new Constraints.P2LDistance(target, segment, promptDistance));\n  }\n};\n\nParametricManager.prototype.pointInMiddle = function(objs) {\n  var pl = fetch.pointAndLine(objs);\n  this.add(new Constraints.PointInMiddle(pl[0], pl[1]));\n};\n\nParametricManager.prototype.symmetry = function(objs) {\n  var pl = fetch.pointAndLine(objs);\n  this.add(new Constraints.Symmetry(pl[0], pl[1]));\n};\n\nParametricManager.prototype.pointOnArc = function(objs) {\n  const points = fetch.generic(objs, ['TCAD.TWO.EndPoint'], 1);\n  const arcs = fetch.generic(objs, ['TCAD.TWO.Arc', 'TCAD.TWO.Circle', 'TCAD.TWO.Ellipse', 'TCAD.TWO.EllipticalArc'], 1);\n  const arc = arcs[0];\n  if (arc._class == 'TCAD.TWO.Ellipse' || arc._class == 'TCAD.TWO.EllipticalArc') {\n    this.add(new Constraints.PointOnEllipse(points[0], arc));\n  } else {\n    this.add(new Constraints.PointOnArc(points[0], arc));\n  }\n};\n\nParametricManager.prototype.pointOnLine = function(objs) {\n  var pl = fetch.pointAndLine(objs);\n  var target = pl[0];\n  var segment = pl[1];\n  this.add(new Constraints.PointOnLine(target, segment));\n};\n\nParametricManager.prototype.llAngle = function(objs, promptCallback) {\n  var lines = fetch.generic(objs, 'TCAD.TWO.Segment', 2);\n  var l1 = lines[0];\n  var l2 = lines[1];\n\n  var points = [l1.a, l1.b, l2.a, l2.b];\n\n  if (l1.b.x < l1.a.x) {\n    points[0] = l1.b;\n    points[1] = l1.a;\n  }\n\n  if (l2.b.x < l2.a.x) {\n    points[2] = l2.b;\n    points[3] = l2.a;\n  }\n\n  var dx1 = points[1].x - points[0].x;\n  var dy1 = points[1].y - points[0].y;\n  var dx2 = points[3].x - points[2].x;\n  var dy2 = points[3].y - points[2].y;\n\n  var angle = Math.atan2(dy2,dx2) - Math.atan2(dy1,dx1);\n  angle *= 1 / Math.PI * 180;\n  angle = utils.askNumber(Constraints.Angle.prototype.SettableFields.angle, angle.toFixed(2), promptCallback, this.constantResolver);\n  if (angle === null) return;\n  this.add(new Constraints.Angle(points[0], points[1], points[2], points[3], angle));\n};\n\nParametricManager.prototype.p2pDistance = function(objs, promptCallback) {\n  var p = fetch.twoPoints(objs);\n  var distance = new Vector(p[1].x - p[0].x, p[1].y - p[0].y).length();\n  var promptDistance = utils.askNumber(Constraints.P2PDistance.prototype.SettableFields.d, distance.toFixed(2), promptCallback, this.constantResolver);\n\n  if (promptDistance != null) {\n    this.add(new Constraints.P2PDistance(p[0], p[1], promptDistance));\n  }\n};\n\nParametricManager.prototype.radius = function(objs, promptCallback) {\n  var arcs = fetch.arkCirc(objs, 1);\n  var radius = arcs[0].r.get();\n  var promptDistance = utils.askNumber(Constraints.Radius.prototype.SettableFields.d, radius.toFixed(2), promptCallback, this.constantResolver);\n  if (promptDistance != null) {\n    for (var i = 0; i < arcs.length; ++i) {\n      this._add(new Constraints.Radius(arcs[i], promptDistance));\n    }\n    this.refresh();\n  }\n};\n\nParametricManager.prototype.linkObjects = function(objs) {\n  var i;\n  var masterIdx = -1;\n  for (i = 0; i < objs.length; ++i) {\n    if (ParametricManager.isAux(objs[i])) {\n      if (masterIdx !== -1) {\n        throw \"not allowed to have a coincident constraint between two or more auxiliary objects\";\n      }\n      masterIdx = i;\n    }\n  }\n  if (masterIdx === -1) masterIdx = objs.length - 1;\n\n\n  for (i = 0; i < objs.length; ++i) {\n    if (i === masterIdx) continue;\n    objs[i].x = objs[masterIdx].x;\n    objs[i].y = objs[masterIdx].y;\n    var c = new Constraints.Coincident(objs[i], objs[masterIdx]);\n    this._add(c);\n  }\n  this.notify();\n};\n\nParametricManager.prototype.unlinkObjects = function(a, b) {\n  \n  function _unlink(a, b) {\n    for (var i = 0; i < a.linked.length; ++i) {\n      var obj = a.linked[i];\n      if (obj.id === b.id) {\n        a.linked.splice(i, 1);\n        break;\n      }\n    }\n  }\n  _unlink(a, b);\n  _unlink(b, a);\n};\n\nParametricManager.prototype.findCoincidentConstraint = function(point1, point2) {\n  for (let subSys of this.subSystems) {\n    for (let c of subSys.constraints) {\n      if (c.NAME === 'coi' &&\n        ((c.a.id === point1.id && c.b.id === point2.id) ||\n        (c.b.id === point1.id && c.a.id === point2.id)))   {\n        return c;\n      }\n    }\n  }\n  return null;\n};\n\nParametricManager.prototype.coincident = function(objs) {\n  if (objs.length == 0) return;\n  this.linkObjects(objs);\n  this.solve();\n  this.viewer.refresh();\n};\n\nParametricManager.prototype.getSolveData = function() {\n  var sdata = []; \n  for (var i = 0; i < this.subSystems.length; i++) {\n    this.__getSolveData(this.subSystems[i].constraints, sdata);\n  }\n  return sdata;\n};\n\nParametricManager.prototype.__getSolveData = function(constraints, out) {\n  for (var i = 0; i < constraints.length; ++i) {\n    var constraint = constraints[i];\n    var data = constraint.getSolveData(this.constantResolver);\n    for (var j = 0; j < data.length; ++j) {\n      data[j].push(constraint.reducible !== undefined);\n      out.push(data[j]);\n    }\n  }\n  return out;\n};\n\nParametricManager.prototype.solve = function() {\n  var solver = this.prepare([]);\n  solver.solve(false);\n  solver.sync();\n};\n\nParametricManager.prototype.solveWithLock = function(lock) {\n  var solver = this.prepare(lock);\n  solver.solve(false);\n  solver.sync();\n};\n\nParametricManager.prototype.prepare = function(locked, extraConstraints) {\n  return this._prepare(locked, this.subSystems, extraConstraints);\n};\n\nParametricManager.prototype._prepare = function(locked, subSystems, extraConstraints) {\n  var solvers = [];\n  for (var i = 0; i < subSystems.length; i++) {\n    solvers.push(this.prepareForSubSystem(locked, subSystems[i].constraints, extraConstraints));\n  }\n  if (subSystems.length == 0 && locked.length != 0) {\n    solvers.push(this.prepareForSubSystem(locked, [], extraConstraints));\n  }\n  return {\n    solvers : solvers,\n    \n    solve : function(rough) {\n      for (var i = 0; i < solvers.length; i++) {\n        var alg =  i < subSystems.length ? subSystems[i].alg : 1;\n        var res = solvers[i].solve(rough, alg);\n        if (res.returnCode !== 1) {\n          alg = alg == 1 ? 2 : 1;\n          //if (solvers[i].solve(rough, alg).returnCode == 1) {\n            //subSystems[i].alg = alg;\n          //}\n        }\n      }\n    },\n    \n    sync : function() {\n      for (var i = 0; i < solvers.length; i++) {\n        solvers[i].sync();\n      }\n    },\n\n    updateParameter : function(p) {\n      for (var i = 0; i < solvers.length; i++) {\n        solvers[i].updateParameter(p);\n      }\n    },\n\n    updateLock : function(values) {\n      for (var i = 0; i < solvers.length; i++) {\n        solvers[i].updateLock(values);\n      }\n    }\n  }\n};\n\nParametricManager.isAux = function(obj) {\n  while (!!obj) {\n    if (!!obj.aux) {\n      return true;\n    }\n    obj = obj.parent;\n  }\n  return false;\n};\n\nParametricManager.fetchAuxParams = function(system, auxParams, auxDict) {\n  for (var i = 0; i < system.length; ++i) {\n    for (var p = 0; p < system[i][1].length; ++p) {\n      var parameter = system[i][1][p];\n      if (parameter.obj !== undefined) {\n        if (ParametricManager.isAux(parameter.obj)) {\n          if (auxDict[parameter.id] === undefined) {\n            auxDict[parameter.id] = parameter;\n            auxParams.push(parameter);\n          }\n        }\n      }\n    }\n  }\n};\n\nParametricManager.__toId = function(v) {\n  return v.id;\n};\n\nParametricManager.reduceSystem = function(system, readOnlyParams) {\n\n  var info = {\n    idToParam : {},\n    linkedParams : [],\n    reducedConstraints : {},\n    reducedParams : {}\n  };\n  \n  var links = [];\n  function Link(a, b, constr) {\n    this.a = a;\n    this.b = b;\n    this.constr = constr;\n    this.invalid = false;\n    this.processed = false;\n  }\n\n  var c, pi, paramToConstraints = {};\n  for (i = 0; i < system.length; ++i) {\n    c = system[i];\n    if (c[3] !== true) {\n      for (pi = 0; pi < c[1].length; pi++) {\n        var param = c[1][pi];\n        var paramConstrs = paramToConstraints[param.id];\n        if (paramConstrs === undefined) {\n          paramConstrs = [];\n          paramToConstraints[param.id] = paramConstrs;\n        }\n        paramConstrs.push(i);\n      }\n    }\n  }\n\n  for (i = 0; i < system.length; ++i) {\n    c = system[i];\n    if (c[3] === true) { //Reduce flag\n      var cp1 = c[1][0];\n      var cp2 = c[1][1];\n      links.push(new Link(cp1, cp2, i));\n    }\n  }\n  function intersect(array1, array2) {\n    if (!array1 || !array2) return false;\n    return array1.filter(function(n) {\n        return array2.indexOf(n) != -1\n      }).length != 0;\n  }\n\n  function shared(param1, param2) {\n    if (param1 == param2) return false;\n    var assoc0 = paramToConstraints[param1];\n    var assoc1 = paramToConstraints[param2];\n    return intersect(assoc0, assoc1);\n  }\n\n  var linkTuples = [];\n\n  function mergeLinks(startIndex, into) {\n    var linkI = links[startIndex];\n    if (linkI.processed) return;\n    linkI.processed = true;\n    into.push(linkI);\n    for (var j = startIndex + 1; j < links.length; j++) {\n      var linkJ = links[j];\n      if (linkI.a.id == linkJ.a.id || linkI.a.id == linkJ.b.id || linkI.b.id == linkJ.a.id || linkI.b.id == linkJ.b.id) {\n        mergeLinks(j, into);\n      }\n    }\n  }\n  for (i = 0; i < links.length; i++) {\n    if (links[i].processed) continue;\n    var linkTuple = [];\n    linkTuples.push(linkTuple);\n    mergeLinks(i, linkTuple)\n  }\n\n  function resolveConflicts() {\n    for (var i = 0; i < linkTuples.length; i++) {\n      var tuple = linkTuples[i];\n\n      for (var j = 0; j < tuple.length; j++) {\n        var linkA = tuple[j];\n        if (linkA.invalid) continue;\n        if (shared(linkA.a.id, linkA.b.id)) {\n          linkA.invalid = true;\n          continue;\n        }\n        for (var k = j + 1; k < tuple.length; k++) {\n          var linkB = tuple[k];\n          if (shared(linkA.a.id, linkB.a.id) || shared(linkA.a.id, linkB.b.id) || shared(linkA.b.id, linkB.a.id) || shared(linkA.b.id, linkB.b.id)) {\n            linkB.invalid = true;\n          }\n        }\n      }\n    }\n  }\n  resolveConflicts();\n\n  function _merge(arr1, arr2) {\n    for (var i = 0; i < arr2.length; ++i) {\n      if (arr1.indexOf(arr2[i]) < 0) {\n        arr1.push(arr2[i]);\n      }\n    }\n  }\n\n  function linksToTuples(linkTuples) {\n    var tuples = [];\n    for (var i = 0; i < linkTuples.length; i++) {\n      var linkTuple = linkTuples[i];\n      var tuple = [];\n      tuples.push(tuple);\n      for (var j = 0; j < linkTuple.length; j++) {\n        var link = linkTuple[j];\n        if (!link.invalid) {\n          _merge(tuple, [link.a.id, link.b.id]);\n          info.reducedConstraints[link.constr] = true;\n          info.idToParam[link.a.id] = link.a;\n          info.idToParam[link.b.id] = link.b;\n        }\n      }\n    }\n    return tuples;\n  }\n  var tuples = linksToTuples(linkTuples);\n\n  for (var i = 0; i < tuples.length; ++i) {\n    var tuple = tuples[i];\n    info.linkedParams.push(tuple);\n    for (var mi = 0; mi < readOnlyParams.length; ++mi) {\n      var masterParam = readOnlyParams[mi];\n      var masterIdx = tuple.indexOf(masterParam.id);\n      if (masterIdx >= 0) {\n        var tmp = tuple[0];\n        tuple[0] = tuple[masterIdx];\n        tuple[masterIdx] = tmp;\n        break;\n      }\n    }\n  }\n\n  for (var ei = 0; ei < info.linkedParams.length; ++ei) {\n    var master = info.linkedParams[ei][0];\n    for (i = 1; i < info.linkedParams[ei].length; ++i) {\n      info.reducedParams[info.linkedParams[ei][i]] = master;\n    }\n  }\n  return info;\n};\n\nParametricManager.prototype.prepareForSubSystem = function(locked, subSystemConstraints, extraConstraints) {\n\n  var constrs = [];\n  var solverParamsDict = {};\n  var system = [];\n  var auxParams = [];\n  var auxDict = {};\n  \n  this.__getSolveData(subSystemConstraints, system);\n  if (!!extraConstraints) this.__getSolveData(extraConstraints, system);\n\n  ParametricManager.fetchAuxParams(system, auxParams, auxDict);\n  var readOnlyParams = auxParams.concat(locked);\n  var reduceInfo = ParametricManager.reduceSystem(system, readOnlyParams);\n  \n  function getSolverParam(p) {\n    var master = reduceInfo.reducedParams[p.id];\n    if (master !== undefined) {\n      p = reduceInfo.idToParam[master];\n    }\n    var _p = solverParamsDict[p.id];\n    if (_p === undefined) {\n      if (p.__cachedParam__ === undefined) {\n        _p = new Param(p.id, p.get());\n        p.__cachedParam__ = _p;\n      } else {\n        _p = p.__cachedParam__;\n        _p.reset(p.get());\n      }\n\n      _p._backingParam = p;\n      solverParamsDict[p.id] = _p;\n    }\n    return _p;\n  }\n\n  (function pickupAuxiliaryInfoFromSlaves() {\n    for (var i = 0; i < reduceInfo.linkedParams.length; ++i) {\n      var linkedParams = reduceInfo.linkedParams[i];\n      var master = linkedParams[0];\n      if (auxDict[master] !== undefined) continue;\n      for (var j = 1; j < linkedParams.length; j++) {\n        var slave = linkedParams[j];\n        if (auxDict[slave] !== undefined) {\n          auxDict[master] = true;\n          break;\n        }\n      }\n    }\n  })();\n  \n  var aux = [];\n  for (var i = 0; i < system.length; ++i) {\n    \n    var sdata = system[i];\n    var params = [];\n\n    for (var p = 0; p < sdata[1].length; ++p) {\n      var param = sdata[1][p];\n      var solverParam = getSolverParam(param);\n      params.push(solverParam);\n      if (auxDict[param.id] !== undefined) {\n        aux.push(solverParam);\n      }\n    }\n    if (reduceInfo.reducedConstraints[i] === true) continue;\n\n    var _constr = createByConstraintName(sdata[0], params, sdata[2]);\n    constrs.push(_constr);\n  }\n\n  var lockedSolverParams = [];\n  for (p = 0; p < locked.length; ++p) {\n    lockedSolverParams[p] = getSolverParam(locked[p]);\n  }\n  \n  var solver = prepare(constrs, lockedSolverParams, aux);\n  function solve(rough, alg) {\n    return solver.solveSystem(rough, alg);\n  }\n  \n  const viewer = this.viewer;\n  function sync() {\n    for (var paramId in solverParamsDict) {\n      var solverParam = solverParamsDict[paramId];\n      if (!!solverParam._backingParam.aux) continue;\n      solverParam._backingParam.set(solverParam.get());\n    }\n\n    //Make sure all coincident constraints are equal\n    for (var ei = 0; ei < reduceInfo.linkedParams.length; ++ei) {\n      var master = reduceInfo.idToParam[ reduceInfo.linkedParams[ei][0]];\n      for (var i = 1; i < reduceInfo.linkedParams[ei].length; ++i) {\n        var slave = reduceInfo.idToParam[reduceInfo.linkedParams[ei][i]];\n        slave.set(master.get());\n      }\n    }\n    viewer.equalizeLinkedEndpoints();\n  }\n\n  function updateParameter(p) {\n    getSolverParam(p).set(p.get());\n  }\n\n  solver.solve = solve;\n  solver.sync = sync;\n  solver.updateParameter = updateParameter;\n  return solver; \n};\n\nConstraints.ParentsCollector = function() {\n  this.parents = [];\n  var parents = this.parents;\n  var index = {};\n  function add(obj) {\n    if (index[obj.id] === undefined) {\n      index[obj.id] = obj;\n      parents.push(obj);\n    }\n  }\n  this.check = function(obj) {\n    if (obj.parent !== null) {\n      add(obj.parent);\n    } else {\n      add(obj);\n    }\n  };\n};\n\nConstraints.Factory = {};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Coincident = function(a, b) {\n  this.a = a;\n  this.b = b;\n  a.linked.push(b);\n  b.linked.push(a);\n};\n\nConstraints.Coincident.prototype.NAME = 'coi';\nConstraints.Coincident.prototype.UI_NAME = 'Coincident';\nConstraints.Coincident.prototype.reducible = true;\n\nConstraints.Coincident.prototype.getSolveData = function() {\n  return [\n    ['equal', [this.a._x, this.b._x], []],\n    ['equal', [this.a._y, this.b._y], []]\n  ];\n};\n\nConstraints.Coincident.prototype.serialize = function() {\n  return [this.NAME, [this.a.id, this.b.id]];\n};\n\nConstraints.Factory[Constraints.Coincident.prototype.NAME] = function(refs, data) {\n  return new Constraints.Coincident(refs(data[0]), refs(data[1]));  \n};\n\nConstraints.Coincident.prototype.getObjects = function() {\n  return [this.a, this.b];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Lock = function(p, c) {\n  this.p = p;\n  this.c = c;\n};\n\nConstraints.Lock.prototype.NAME = 'lock';\nConstraints.Lock.prototype.UI_NAME = 'Lock';\n\nConstraints.Lock.prototype.getSolveData = function() {\n  return [\n    ['equalsTo', [this.p._x], [this.c.x]],\n    ['equalsTo', [this.p._y], [this.c.y]]\n  ];\n};\n\nConstraints.Lock.prototype.serialize = function() {\n  return [this.NAME, [this.p.id, this.c]];\n};\n\nConstraints.Factory[Constraints.Lock.prototype.NAME] = function(refs, data) {\n  return new Constraints.Lock(refs(data[0]), data[1]);\n};\n\n\nConstraints.Lock.prototype.getObjects = function() {\n  return [this.p];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Parallel = function(l1, l2) {\n  this.l1 = l1;\n  this.l2 = l2;\n};\n\nConstraints.Parallel.prototype.NAME = 'parallel';\nConstraints.Parallel.prototype.UI_NAME = 'Parallel';\n\nConstraints.Parallel.prototype.getSolveData = function() {\n  var params = [];\n  this.l1.collectParams(params);\n  this.l2.collectParams(params);\n  return [[this.NAME, params, []]];\n};\n\nConstraints.Parallel.prototype.serialize = function() {\n  return [this.NAME, [this.l1.id, this.l2.id]];\n};\n\nConstraints.Factory[Constraints.Parallel.prototype.NAME] = function(refs, data) {\n  return new Constraints.Parallel(refs(data[0]), refs(data[1]));\n};\n\nConstraints.Parallel.prototype.getObjects = function() {\n  return [this.l1, this.l2];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Perpendicular = function(l1, l2) {\n  this.l1 = l1;\n  this.l2 = l2;\n};\n\nConstraints.Perpendicular.prototype.NAME = 'perpendicular';\nConstraints.Perpendicular.prototype.UI_NAME = 'Perpendicular';\n\nConstraints.Perpendicular.prototype.getSolveData = function() {\n  var params = [];\n  this.l1.collectParams(params);\n  this.l2.collectParams(params);\n  return [[this.NAME, params, []]];\n};\n\nConstraints.Perpendicular.prototype.serialize = function() {\n  return [this.NAME, [this.l1.id, this.l2.id]];\n};\n\nConstraints.Factory[Constraints.Perpendicular.prototype.NAME] = function(refs, data) {\n  return new Constraints.Perpendicular(refs(data[0]), refs(data[1]));\n};\n\nConstraints.Perpendicular.prototype.getObjects = function() {\n  return [this.l1, this.l2];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.P2LDistance = function(p, l, d) {\n  this.p = p;\n  this.l = l;\n  this.d = d;\n};\n\nConstraints.P2LDistance.prototype.NAME = 'P2LDistance';\nConstraints.P2LDistance.prototype.UI_NAME = 'Distance P & L';\n\nConstraints.P2LDistance.prototype.getSolveData = function(resolver) {\n  var params = [];\n  this.p.collectParams(params);\n  this.l.collectParams(params);\n  return [[this.NAME, params, [resolver(this.d)]]];\n};\n\nConstraints.P2LDistance.prototype.serialize = function() {\n  return [this.NAME, [this.p.id, this.l.id, this.d]];\n};\n\nConstraints.Factory[Constraints.P2LDistance.prototype.NAME] = function(refs, data) {\n  return new Constraints.P2LDistance(refs(data[0]), refs(data[1]), data[2]);\n};\n\nConstraints.P2LDistance.prototype.getObjects = function() {\n  return [this.p, this.l];\n};\n\nConstraints.P2LDistance.prototype.SettableFields = {'d' : \"Enter the distance\"};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.MinLength = function(a, b, min) {\n  this.a = a;\n  this.b = b;\n  this.min = min;\n};\n\nConstraints.MinLength.prototype.aux = true;\nConstraints.MinLength.prototype.NAME = 'MinLength';\nConstraints.MinLength.prototype.UI_NAME = 'MinLength';\n\nConstraints.MinLength.prototype.getSolveData = function() {\n  var params = [];\n  this.a.collectParams(params);\n  this.b.collectParams(params);\n  return [[this.NAME, params, [this.min]]];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.P2LDistanceV = function(p, l, d) {\n  this.p = p;\n  this.l = l;\n  this.d = d;\n};\n\nConstraints.P2LDistanceV.prototype.aux = true;\nConstraints.P2LDistanceV.prototype.NAME = 'P2LDistanceV';\nConstraints.P2LDistanceV.prototype.UI_NAME = 'Distance P & L';\n\nConstraints.P2LDistanceV.prototype.getSolveData = function() {\n  var params = [];\n  this.p.collectParams(params);\n  this.l.collectParams(params);\n  params.push(this.d);\n  return [[this.NAME, params]];\n};\n\n// We don't serialize auxiliary constraints\n//\n//Constraints.P2LDistanceV.prototype.serialize = function() {\n//  return [this.NAME, [this.p.id, this.l.id, this.d.id]];\n//};\n//\n//Constraints.Factory[Constraints.P2LDistanceV.prototype.NAME] = function(refs, data) {\n//  return new Constraints.P2LDistanceV(refs(data[0]), refs(data[1]), refs(data[2]));\n//};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.P2PDistance = function(p1, p2, d) {\n  this.p1 = p1;\n  this.p2 = p2;\n  this.d = d;\n};\n\nConstraints.P2PDistance.prototype.NAME = 'P2PDistance';\nConstraints.P2PDistance.prototype.UI_NAME = 'Distance Points';\n\nConstraints.P2PDistance.prototype.getSolveData = function(resolver) {\n  var params = [];\n  this.p1.collectParams(params);\n  this.p2.collectParams(params);\n  return [[this.NAME, params, [resolver(this.d)]]];\n};\n\nConstraints.P2PDistance.prototype.serialize = function() {\n  return [this.NAME, [this.p1.id, this.p2.id, this.d]];\n};\n\nConstraints.Factory[Constraints.P2PDistance.prototype.NAME] = function(refs, data) {\n  return new Constraints.P2PDistance(refs(data[0]), refs(data[1]), data[2]);\n};\n\nConstraints.P2PDistance.prototype.getObjects = function() {\n  return [this.p1, this.p2];\n};\n\nConstraints.P2PDistance.prototype.SettableFields = {'d' : \"Enter the distance\"};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.P2PDistanceV = function(p1, p2, d) {\n  this.p1 = p1;\n  this.p2 = p2;\n  this.d = d;\n};\n\nConstraints.P2PDistanceV.prototype.aux = true;\nConstraints.P2PDistanceV.prototype.NAME = 'P2PDistanceV';\nConstraints.P2PDistanceV.prototype.UI_NAME = 'Distance Points';\n\nConstraints.P2PDistanceV.prototype.getSolveData = function() {\n  var params = [];\n  this.p1.collectParams(params);\n  this.p2.collectParams(params);\n  params.push(this.d);\n  return [[this.NAME, params]];\n};\n\n// We don't serialize auxiliary constraints\n//\n//Constraints.P2PDistanceV.prototype.serialize = function() {\n//  return [this.NAME, [this.p1.id, this.p2.id, this.d.id]];\n//};\n//\n//Constraints.Factory[Constraints.P2PDistanceV.prototype.NAME] = function(refs, data) {\n//  return new Constraints.P2PDistanceV(refs(data[0]), refs(data[1]), refs(data[2]));\n//};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.GreaterThan = function(p, limit) {\n  this.p = p;\n  this.limit = limit;\n};\n\nConstraints.GreaterThan.prototype.aux = true;\nConstraints.GreaterThan.prototype.NAME = 'GreaterThan';\nConstraints.GreaterThan.prototype.UI_NAME = 'Greater Than';\n\nConstraints.GreaterThan.prototype.getSolveData = function() {\n  return [[this.NAME, [this.p], [this.limit]]];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Radius = function(arc, d) {\n  this.arc = arc;\n  this.d = d;\n};\n\nConstraints.Radius.prototype.NAME = 'Radius';\nConstraints.Radius.prototype.UI_NAME = 'Radius Value';\n\n\nConstraints.Radius.prototype.getSolveData = function(resolver) {\n  return [['equalsTo', [this.arc.r], [resolver(this.d)]]];\n};\n\nConstraints.Radius.prototype.serialize = function() {\n  return [this.NAME, [this.arc.id, this.d]];\n};\n\nConstraints.Factory[Constraints.Radius.prototype.NAME] = function(refs, data) {\n  return new Constraints.Radius(refs(data[0]), data[1]);\n};\n\nConstraints.Radius.prototype.getObjects = function() {\n  return [this.arc];\n};\n\nConstraints.Radius.prototype.SettableFields = {'d' : \"Enter the radius value\"};\n\n// ------------------------------------------------------------------------------------------------------------------ // \n\n/** @constructor */\nConstraints.RR = function(arc1, arc2) {\n  this.arc1 = arc1;\n  this.arc2 = arc2;\n};\n\nConstraints.RR.prototype.NAME = 'RR';\nConstraints.RR.prototype.UI_NAME = 'Radius Equality';\n//Constraints.RR.prototype.reducible = true;\n\n\nConstraints.RR.prototype.getSolveData = function() {\n  return [['equal', [this.arc1.r, this.arc2.r], []]];\n};\n\nConstraints.RR.prototype.serialize = function() {\n  return [this.NAME, [this.arc1.id, this.arc2.id]];\n};\n\nConstraints.Factory[Constraints.RR.prototype.NAME] = function(refs, data) {\n  return new Constraints.RR(refs(data[0]), refs(data[1]));\n};\n\nConstraints.RR.prototype.getObjects = function() {\n  return [this.arc1, this.arc2];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ // \n\n/** @constructor */\nConstraints.LL = function(line1, line2) {\n  this.line1 = line1;\n  this.line2 = line2;\n  this.length = new Ref(math.distanceAB(line1.a, line1.b));\n};\n\nConstraints.LL.prototype.NAME = 'LL';\nConstraints.LL.prototype.UI_NAME = 'Lines Equality';\n\nConstraints.LL.prototype.getSolveData = function() {\n  var params1 = [];\n  var params2 = [];\n  this.line1.collectParams(params1);\n  this.line2.collectParams(params2);\n  params1.push(this.length);\n  params2.push(this.length);\n  return [\n    ['P2PDistanceV', params1, []],\n    ['P2PDistanceV', params2, []]\n  ];\n};\n\nConstraints.LL.prototype.serialize = function() {\n  return [this.NAME, [this.line1.id, this.line2.id]];\n};\n\nConstraints.Factory[Constraints.LL.prototype.NAME] = function(refs, data) {\n  return new Constraints.LL(refs(data[0]), refs(data[1]));\n};\n\nConstraints.LL.prototype.getObjects = function() {\n  return [this.line1, this.line2];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Vertical = function(line) {\n  this.line = line;\n};\n\nConstraints.Vertical.prototype.NAME = 'Vertical';\nConstraints.Vertical.prototype.UI_NAME = 'Vertical';\n//Constraints.Vertical.prototype.reducible = true;\n\nConstraints.Vertical.prototype.getSolveData = function() {\n  return [['equal', [this.line.a._x, this.line.b._x], []]];\n};\n\nConstraints.Vertical.prototype.serialize = function() {\n  return [this.NAME, [this.line.id]];\n};\n\nConstraints.Factory[Constraints.Vertical.prototype.NAME] = function(refs, data) {\n  return new Constraints.Vertical(refs(data[0]));\n};\n\nConstraints.Vertical.prototype.getObjects = function() {\n  return [this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ // \n\n/** @constructor */\nConstraints.Horizontal = function(line) {\n  this.line = line;\n};\n\nConstraints.Horizontal.prototype.NAME = 'Horizontal';\nConstraints.Horizontal.prototype.UI_NAME = 'Horizontal';\n//Constraints.Horizontal.prototype.reducible = true;\n\nConstraints.Horizontal.prototype.getSolveData = function() {\n  return [['equal', [this.line.a._y, this.line.b._y], []]];\n};\n\nConstraints.Horizontal.prototype.serialize = function() {\n  return [this.NAME, [this.line.id]];\n};\n\nConstraints.Factory[Constraints.Horizontal.prototype.NAME] = function(refs, data) {\n  return new Constraints.Horizontal(refs(data[0]));\n};\n\nConstraints.Horizontal.prototype.getObjects = function() {\n  return [this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Tangent = function(arc, line) {\n  this.arc = arc;\n  this.line = line;\n};\n\nConstraints.Tangent.prototype.NAME = 'Tangent';\nConstraints.Tangent.prototype.UI_NAME = 'Tangent';\n\nConstraints.Tangent.prototype.getSolveData = function() {\n  var params = [];\n  this.arc.c.collectParams(params);\n  this.line.collectParams(params);\n  params.push(this.arc.r);\n  return [['P2LDistanceV', params, []]];\n};\n\nConstraints.Tangent.prototype.serialize = function() {\n  return [this.NAME, [this.arc.id, this.line.id]];\n};\n\nConstraints.Factory[Constraints.Tangent.prototype.NAME] = function(refs, data) {\n  return new Constraints.Tangent(refs(data[0]), refs(data[1]));\n};\n\nConstraints.Tangent.prototype.getObjects = function() {\n  return [this.arc, this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.PointOnLine = function(point, line) {\n  this.point = point;\n  this.line = line;\n};\n\nConstraints.PointOnLine.prototype.NAME = 'PointOnLine';\nConstraints.PointOnLine.prototype.UI_NAME = 'Point On Line';\n\nConstraints.PointOnLine.prototype.getSolveData = function() {\n  var params = [];\n  this.point.collectParams(params);\n  this.line.collectParams(params);\n  return [['P2LDistance', params, [0]]];\n};\n\nConstraints.PointOnLine.prototype.serialize = function() {\n  return [this.NAME, [this.point.id, this.line.id]];\n};\n\nConstraints.Factory[Constraints.PointOnLine.prototype.NAME] = function(refs, data) {\n  return new Constraints.PointOnLine(refs(data[0]), refs(data[1]));\n};\n\nConstraints.PointOnLine.prototype.getObjects = function() {\n  return [this.point, this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.PointOnArc = function(point, arc) {\n  this.point = point;\n  this.arc = arc;\n};\n\nConstraints.PointOnArc.prototype.NAME = 'PointOnArc';\nConstraints.PointOnArc.prototype.UI_NAME = 'Point On Arc';\n\nConstraints.PointOnArc.prototype.getSolveData = function() {\n  var params = [];\n  this.point.collectParams(params);\n  this.arc.c.collectParams(params);\n  params.push(this.arc.r);\n  return [['P2PDistanceV', params, []]];\n};\n\nConstraints.PointOnArc.prototype.serialize = function() {\n  return [this.NAME, [this.point.id, this.arc.id]];\n};\n\nConstraints.Factory[Constraints.PointOnArc.prototype.NAME] = function(refs, data) {\n  return new Constraints.PointOnArc(refs(data[0]), refs(data[1]));\n};\n\nConstraints.PointOnArc.prototype.getObjects = function() {\n  return [this.point, this.arc];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.PointOnEllipseInternal = function(point, ellipse) {\n  this.point = point;\n  this.ellipse= ellipse;\n};\n\nConstraints.PointOnEllipseInternal.prototype.NAME = 'PointOnEllipseI';\nConstraints.PointOnEllipseInternal.prototype.UI_NAME = 'Point On Ellipse';\nConstraints.PointOnEllipseInternal.prototype.aux = true;\n\nConstraints.PointOnEllipseInternal.prototype.getSolveData = function() {\n  var params = [];\n  this.point.collectParams(params);\n  this.ellipse.ep1.collectParams(params);\n  this.ellipse.ep2.collectParams(params);\n  params.push(this.ellipse.r);\n  return [['PointOnEllipse', params, []]];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.PointOnEllipse = function(point, ellipse) {\n  Constraints.PointOnEllipseInternal.call(this, point, ellipse);\n};\n\nConstraints.PointOnEllipse.prototype.NAME = 'PointOnEllipse';\nConstraints.PointOnEllipse.prototype.UI_NAME = 'Point On Ellipse';\n\nConstraints.PointOnEllipse.prototype.getSolveData = function() {\n  return Constraints.PointOnEllipseInternal.prototype.getSolveData.call(this);\n};\n\nConstraints.PointOnEllipse.prototype.serialize = function() {\n  return [this.NAME, [this.point.id, this.ellipse.id]];\n};\n\nConstraints.Factory[Constraints.PointOnEllipse.prototype.NAME] = function(refs, data) {\n  return new Constraints.PointOnEllipse(refs(data[0]), refs(data[1]));\n};\n\nConstraints.PointOnEllipse.prototype.getObjects = function() {\n  return [this.point, this.ellipse];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.EllipseTangent = function(line, ellipse) {\n  this.line = line;\n  this.ellipse = ellipse;\n};\n\nConstraints.EllipseTangent.prototype.NAME = 'EllipseTangent';\nConstraints.EllipseTangent.prototype.UI_NAME = 'Tangent Ellipse';\n\nConstraints.EllipseTangent.prototype.getSolveData = function() {\n  const params = [];\n  this.line.collectParams(params);\n  this.ellipse.ep1.collectParams(params);\n  this.ellipse.ep2.collectParams(params);\n  params.push(this.ellipse.r);\n  return [['EllipseTangent', params, []]];\n\n};\n\nConstraints.EllipseTangent.prototype.serialize = function() {\n  return [this.NAME, [this.line.id, this.ellipse.id]];\n};\n\nConstraints.Factory[Constraints.EllipseTangent.prototype.NAME] = function(refs, data) {\n  return new Constraints.EllipseTangent(refs(data[0]), refs(data[1]));\n};\n\nConstraints.EllipseTangent.prototype.getObjects = function() {\n  return [this.line, this.ellipse];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.PointInMiddle = function(point, line) {\n  this.point = point;\n  this.line = line;\n  this.length = new Ref(math.distanceAB(line.a, line.b) / 2);\n};\n\nConstraints.PointInMiddle.prototype.NAME = 'PointInMiddle';\nConstraints.PointInMiddle.prototype.UI_NAME = 'Point In the Middle';\n\nConstraints.PointInMiddle.prototype.getSolveData = function() {\n  var params1 = [];\n  var params2 = [];\n  \n  this.line.a.collectParams(params1);\n  this.point.collectParams(params1);\n  params1.push(this.length);\n\n  this.line.b.collectParams(params2);\n  this.point.collectParams(params2);\n  params2.push(this.length);\n\n  return [\n    ['P2PDistanceV', params1, []],\n    ['P2PDistanceV', params2, []]\n  ];\n};\n\nConstraints.PointInMiddle.prototype.serialize = function() {\n  return [this.NAME, [this.point.id, this.line.id]];\n};\n\nConstraints.Factory[Constraints.PointInMiddle.prototype.NAME] = function(refs, data) {\n  return new Constraints.PointInMiddle(refs(data[0]), refs(data[1]));\n};\n\nConstraints.PointInMiddle.prototype.getObjects = function() {\n  return [this.point, this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Symmetry = function(point, line) {\n  this.point = point;\n  this.line = line;\n  this.length = new Ref(math.distanceAB(line.a, line.b) / 2);\n};\n\nConstraints.Symmetry.prototype.NAME = 'Symmetry';\nConstraints.Symmetry.prototype.UI_NAME = 'Symmetry';\n\nConstraints.Symmetry.prototype.getSolveData = function(resolver) {\n  var pointInMiddleData = Constraints.PointInMiddle.prototype.getSolveData.call(this, [resolver]);\n  var pointOnLineData = Constraints.PointOnLine.prototype.getSolveData.call(this, [resolver]);\n  return pointInMiddleData.concat(pointOnLineData);\n};\n\nConstraints.Symmetry.prototype.serialize = function() {\n  return [this.NAME, [this.point.id, this.line.id]];\n};\n\nConstraints.Factory[Constraints.Symmetry.prototype.NAME] = function(refs, data) {\n  return new Constraints.Symmetry(refs(data[0]), refs(data[1]));\n};\n\nConstraints.Symmetry.prototype.getObjects = function() {\n  return [this.point, this.line];\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.Angle = function(p1, p2, p3, p4, angle) {\n  this.p1 = p1;\n  this.p2 = p2;\n  this.p3 = p3;\n  this.p4 = p4;\n  this._angle = new Ref(0);\n  this.angle = angle;\n};\n\nConstraints.Angle.prototype.NAME = 'Angle';\nConstraints.Angle.prototype.UI_NAME = 'Lines Angle';\n\nConstraints.Angle.prototype.getSolveData = function(resolver) {\n  this._angle.set(resolver(this.angle) / 180 * Math.PI);\n  var params = [];\n  this.p1.collectParams(params);\n  this.p2.collectParams(params);\n  this.p3.collectParams(params);\n  this.p4.collectParams(params);\n  params.push(this._angle);\n  return [['angleConst', params, []]];\n};\n\nConstraints.Angle.prototype.serialize = function() {\n  return [this.NAME, [this.p1.id, this.p2.id, this.p3.id, this.p4.id, this.angle]];\n};\n\nConstraints.Factory[Constraints.Angle.prototype.NAME] = function(refs, data) {\n  return new Constraints.Angle( refs(data[0]), refs(data[1]), refs(data[2]), refs(data[3]), data[4] );\n};\n\nConstraints.Angle.prototype.getObjects = function() {\n  var collector = new Constraints.ParentsCollector();\n  collector.check(this.p1);\n  collector.check(this.p2);\n  collector.check(this.p3);\n  collector.check(this.p4);\n  return collector.parents;\n};\n\nConstraints.Angle.prototype.SettableFields = {'angle' : \"Enter the angle value\"};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\n/** @constructor */\nConstraints.LockConvex = function(c, a, t) {\n  this.c = c;\n  this.a = a;\n  this.t = t;\n};\n\nConstraints.LockConvex.prototype.NAME = 'LockConvex';\nConstraints.LockConvex.prototype.UI_NAME = 'Lock Convexity';\n\nConstraints.LockConvex.prototype.getSolveData = function() {\n  var params = [];\n  this.c.collectParams(params);\n  this.a.collectParams(params);\n  this.t.collectParams(params);\n  return [['LockConvex', params, []]];\n};\n\nConstraints.LockConvex.prototype.serialize = function() {\n  return [this.NAME, [this.c.id, this.a.id, this.t.id]];\n};\n\nConstraints.Factory[Constraints.LockConvex.prototype.NAME] = function(refs, data) {\n  return new Constraints.LockConvex(refs(data[0]), refs(data[1]), refs(data[2]));\n};\n\nConstraints.LockConvex.prototype.getObjects = function() {\n  var collector = new Constraints.ParentsCollector();\n  collector.check(this.c);\n  collector.check(this.a);\n  collector.check(this.t);\n  return collector.parents;\n};\n\n// ------------------------------------------------------------------------------------------------------------------ //\n\nexport {Constraints, ParametricManager}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/parametric.js\n **/","\nexport function askNumber(promptText, initValue, promptCallback, resolver) {\n  var promptValueStr = promptCallback(promptText, initValue);\n  if (promptValueStr != null) {\n    var promptValue = Number(promptValueStr);\n    if (promptValue == promptValue) { // check for NaN\n      return promptValue;\n    } else {\n      if (!!resolver) {\n        promptValue = resolver(promptValueStr);\n        if (promptValue == promptValue) {\n          return promptValueStr;\n        }\n      }\n    }\n  }\n  return null;\n}\n\nexport const extend = function(func, parent) {\n  for(var prop in parent.prototype) {\n    if(parent.prototype.hasOwnProperty(prop))\n      func.prototype[prop] = parent.prototype[prop];\n  }\n};\n\nexport function fillArray(a, fromIndex, toIndex,val) {\n  for (var i = fromIndex; i < toIndex; i++)\n    a[i] = val;\n}\n\nexport function constRef(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport function swap(arr, i1, i2) {\n  const tmp = arr[i1];\n  arr[i1] = arr[i2];\n  arr[i2] = tmp;\n} \n\n\n/** WEBPACK FOOTER **\n ** ./web/app/utils/utils.js\n **/","import {Generator} from '../id-generator'\n\nexport function Ref(value) {\n  this.id = Generator.genID();\n  this.value = value;\n}\n\nRef.prototype.set = function(value) {\n  this.value = value;\n};\n\nRef.prototype.get = function() {\n  return this.value;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/ref.js\n **/","import * as utils from '../../utils/utils'\nimport * as math from '../../math/math'\nimport QR from '../../math/qr'\nimport LMOptimizer from '../../math/lm'\nimport {ConstantWrapper, EqualsTo} from './constraints'\nimport {dog_leg} from '../../math/optim'\n\n/** @constructor */\nfunction Param(id, value, readOnly) {\n  this.reset(value);\n}\n\nParam.prototype.reset = function(value) {\n  this.set(value);\n  this.j = -1;\n};\n\nParam.prototype.set = function(value) {\n  this.value = value;\n};\n\nParam.prototype.get = function() {\n  return this.value;\n};\n\nParam.prototype.nop = function() {};\n\n/** @constructor */\nfunction System(constraints) {\n  this.constraints = constraints;\n  this.params = [];\n  for (var ci = 0; ci < constraints.length; ++ci) {\n    var c = constraints[ci];\n    for (var pi = 0; pi < c.params.length; ++pi) {\n      var p = c.params[pi];\n      if (p.j == -1) {\n        p.j = this.params.length;\n        this.params.push(p);\n      }\n    }\n  }\n}\n\n\nSystem.prototype.makeJacobian = function() {\n  var jacobi = [];\n  var i;\n  var j;\n  for (i=0; i < this.constraints.length; i++) {\n    jacobi[i] = [];\n    for (j=0; j < this.params.length; j++) {\n      jacobi[i][j] = 0;\n    }\n  }\n  for (i=0; i < this.constraints.length; i++) {\n    var c = this.constraints[i];\n\n    var cParams = c.params;\n    var grad = [];\n    utils.fillArray(grad, 0, cParams.length, 0);\n    c.gradient(grad);\n\n    for (var p = 0; p < cParams.length; p++) {\n      var param = cParams[p];\n      j = param.j;\n      jacobi[i][j] = grad[p];\n    }\n  }\n  return jacobi;\n};\n\nSystem.prototype.fillJacobian = function(jacobi) {\n  for (var i=0; i < this.constraints.length; i++) {\n    var c = this.constraints[i];\n\n    var cParams = c.params;\n    var grad = [];\n    utils.fillArray(grad, 0, cParams.length, 0);\n    c.gradient(grad);\n\n    for (var p = 0; p < cParams.length; p++) {\n      var param = cParams[p];\n      var j = param.j;\n      jacobi[i][j] = grad[p];\n    }\n  }\n  return jacobi;\n};\n\nSystem.prototype.calcResidual = function(r) {\n\n  var i=0;\n  var err = 0.;\n\n  for (i=0; i < this.constraints.length; i++) {\n    var c = this.constraints[i];\n    r[i] = c.error();\n    err += r[i]*r[i];\n  }\n\n  err *= 0.5;\n  return err;\n};\n\nSystem.prototype.calcGrad_ = function(out) {\n  var i;\n  for (i = 0; i < out.length || i < this.params.length; ++i) {\n    out[i][0] = 0;\n  }\n\n  for (i=0; i < this.constraints.length; i++) {\n    var c = this.constraints[i];\n\n    var cParams = c.params;\n    var grad = [];\n    utils.fillArray(grad, 0, cParams.length, 0);\n    c.gradient(grad);\n\n    for (var p = 0; p < cParams.length; p++) {\n      var param = cParams[p];\n      var j = param.j;\n      out[j][0] += this.constraints[i].error() * grad[p]; // (10.4)\n    }\n  }\n};\n\nSystem.prototype.calcGrad = function(out) {\n  var i;\n  for (i = 0; i < out.length || i < this.params.length;  ++i) {\n    out[i] = 0;\n  }\n\n  for (i=0; i < this.constraints.length; i++) {\n    var c = this.constraints[i];\n\n    var cParams = c.params;\n    var grad = [];\n    utils.fillArray(grad, 0, cParams.length, 0);\n       for (var p = 0; p < cParams.length; p++) {\n      var param = cParams[p];\n      var j = param.j;\n      out[j] += this.constraints[i].error() * grad[p]; // (10.4) \n    }\n  }\n};\n\nSystem.prototype.fillParams = function(out) {\n  for (var p = 0; p < this.params.length; p++) {\n    out[p] = this.params[p].get();\n  }\n};\n\nSystem.prototype.getParams = function() {\n  var out = [];\n  this.fillParams(out);\n  return out;\n};\n\nSystem.prototype.setParams = function(point) {\n  for (var p = 0; p < this.params.length; p++) {\n    this.params[p].set(point[p]);\n  }\n};\n\nSystem.prototype.error = function() {\n  var error = 0;\n  for (var i=0; i < this.constraints.length; i++) {\n    error += Math.abs(this.constraints[i].error());\n  }\n  return error;\n};\n\nSystem.prototype.errorSquare = function() {\n  var error = 0;\n  for (var i=0; i < this.constraints.length; i++) {\n    var t = this.constraints[i].error();\n    error += t * t;\n  }\n  return error * 0.5;\n};\n\nSystem.prototype.getValues = function() {\n  var values = [];\n  for (var i=0; i < this.constraints.length; i++) {\n    values[i] = this.constraints[i].error();\n  }\n  return values;\n};\n\nvar wrapAux = function(constrs, locked) {\n\n  var i, lockedSet = {};\n  for (i = 0; i < locked.length; i++) {\n    lockedSet[locked[i].j] = true;\n  }\n\n  for (i = 0; i < constrs.length; i++) {\n    var c = constrs[i];\n    var mask = [];\n    var needWrap = false;\n    for (var j = 0; j < c.params.length; j++) {\n      var param = c.params[j];\n      mask[j] = lockedSet[param.j] === true;\n      needWrap = needWrap || mask[j];\n    }\n    if (needWrap) {\n      var wrapper = new ConstantWrapper(c, mask);\n      constrs[i] = wrapper;\n    }\n  }\n};\n\nvar lock2Equals2 = function(constrs, locked) {\n  var _locked = [];\n  for (var i = 0; i < locked.length; ++i) {\n    _locked.push(new EqualsTo([locked[i]], locked[i].get()));\n  }\n  return _locked;\n};\n\nvar diagnose = function(sys) {\n  if (sys.constraints.length == 0 || sys.params.length == 0) {\n    return {\n      conflict : false,\n      dof : 0\n    }\n  }\n  var jacobian = sys.makeJacobian();\n  var qr = new QR(jacobian);\n  return {\n    conflict : sys.constraints.length > qr.rank,\n    dof : sys.params.length - qr.rank\n  }\n};\n\nvar prepare = function(constrs, locked, aux, alg) {\n\n  var simpleMode = true;\n  if (!simpleMode) {\n    var lockingConstrs = lock2Equals2(constrs, locked);\n    Array.prototype.push.apply( constrs, lockingConstrs );\n  }\n            \n  var sys = new System(constrs);\n  \n  wrapAux(constrs, aux);\n\n  var model = function(point) {\n    sys.setParams(point);\n    return sys.getValues();\n  };\n\n  var jacobian = function(point) {\n    sys.setParams(point);\n    return sys.makeJacobian();\n  };\n  var nullResult = {\n    evalCount : 0,\n    error : 0,\n    returnCode : 1\n  };\n\n  function solve(rough, alg) {\n    //if (simpleMode) return nullResult;\n    if (constrs.length == 0) return nullResult;\n    if (sys.params.length == 0) return nullResult;\n    switch (alg) {\n      case 2:\n        return solve_lm(sys, model, jacobian, rough);\n      case 1:\n      default:    \n        return dog_leg(sys, rough);\n    }\n  }\n  var systemSolver = {\n    diagnose : function() {return diagnose(sys)},\n    error : function() {return sys.error()},\n    solveSystem : solve,\n    system : sys,\n    updateLock : function(values) {\n      for (var i = 0; i < values.length; ++i) {\n        if (simpleMode) {\n          locked[i].set(values[i]);\n        } else {\n          lockingConstrs[i].value = values[i];\n        }\n      }\n    }\n  };\n  return systemSolver;\n};\n\nvar solve_lm = function(sys, model, jacobian, rough) {\n  var opt = new LMOptimizer(sys.getParams(), math.vec(sys.constraints.length), model, jacobian);\n  opt.evalMaximalCount = 100 * sys.params.length;\n  var eps = rough ? 0.001 : 0.00000001;\n  opt.init0(eps, eps, eps);\n  var returnCode = 1;\n  try {\n    var res = opt.doOptimize();\n  } catch (e) {\n    returnCode = 2;\n  }\n  sys.setParams(res[0]);\n  return {\n    evalCount : opt.evalCount,\n    error : sys.error(),\n    returnCode : returnCode\n  };\n};\n\nexport {Param, prepare}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/constr/solver.js\n **/","import {fillArray} from '../utils/utils'\nimport * as math from './math'\n\n/** @constructor */\nfunction QR(matrix) {\n  var vec = math._vec;\n  this.matrix = matrix;\n  var nR = this.matrix.length;\n  var nC = nR == 0 ? 0 : this.matrix[0].length;\n\n  this.qrRankingThreshold = 1e-30; //??\n  this.solvedCols  = Math.min(nR, nC);\n  this.diagR     = vec(nC);\n  this.norm    = vec(nC);\n  this.beta    = vec(nC);\n  this.permutation = vec(nC);\n  this.rank = null;\n\n  var k;\n  var norm2;\n  var akk;\n  var j;\n  var i;\n  \n  // initializations\n  for (k = 0; k < nC; ++k) {\n    this.permutation[k] = k;\n    norm2 = 0;\n    for (i = 0; i < nR; ++i) {\n      akk = matrix[i][k];\n      norm2 += akk * akk;\n    }\n    this.norm[k] = Math.sqrt(norm2);\n  }\n\n  // transform the matrix column after column\n  for (k = 0; k < nC; ++k) {\n\n    // select the column with the greatest norm on active components\n    var nextColumn = -1;\n    var ak2 = Number.NEGATIVE_INFINITY;\n    for (i = k; i < nC; ++i) {\n      norm2 = 0;\n      for (j = k; j < nR; ++j) {\n        var aki = matrix[j][this.permutation[i]];\n        norm2 += aki * aki;\n      }\n      if (!isFinite(norm2)) {\n        throw \"UNABLE_TO_PERFORM_QR_DECOMPOSITION\";\n      }\n      if (norm2 > ak2) {\n        nextColumn = i;\n        ak2    = norm2;\n      }\n    }\n    if (ak2 <= this.qrRankingThreshold) {\n      this.rank = k;\n      return;\n    }\n    var pk          = this.permutation[nextColumn];\n    this.permutation[nextColumn] = this.permutation[k];\n    this.permutation[k]      = pk;\n\n    // choose alpha such that Hk.u = alpha ek\n    akk   = matrix[k][pk];\n    var alpha = (akk > 0) ? -Math.sqrt(ak2) : Math.sqrt(ak2);\n    var betak = 1.0 / (ak2 - akk * alpha);\n    this.beta[pk]   = betak;\n\n    // transform the current column\n    this.diagR[pk]    = alpha;\n    matrix[k][pk] -= alpha;\n\n    // transform the remaining columns\n    for (var dk = nC - 1 - k; dk > 0; --dk) {\n      var gamma = 0;\n      for (j = k; j < nR; ++j) {\n        gamma += matrix[j][pk] * matrix[j][this.permutation[k + dk]];\n      }\n      gamma *= betak;\n      for (j = k; j < nR; ++j) {\n        matrix[j][this.permutation[k + dk]] -= gamma * matrix[j][pk];\n      }\n    }\n  }\n  this.rank = this.solvedCols;\n}\n\nQR.prototype.qTy = function(y) {\n  var nR = this.matrix.length;\n  var nC = this.matrix[0].length;\n\n  for (var k = 0; k < nC; ++k) {\n    var pk = this.permutation[k];\n    var gamma = 0;\n    for (var i = k; i < nR; ++i) {\n      gamma += this.matrix[i][pk] * y[i];\n    }\n    gamma *= this.beta[pk];\n    for (var i = k; i < nR; ++i) {\n      y[i] -= gamma * this.matrix[i][pk];\n    }\n  }\n};\n\nQR.prototype.solve = function(qy) {\n\n  var nR = this.matrix.length;\n  var nC = this.matrix[0].length;\n\n  var vec = math._vec;\n  \n  var diag = vec(nC);\n  var lmDiag = vec(nC);\n  var work = vec(nC);\n  var out =  vec(nC);\n  \n  // copy R and Qty to preserve input and initialize s\n  //  in particular, save the diagonal elements of R in lmDir\n  for (var j = 0; j < this.solvedCols; ++j) {\n    var pj = this.permutation[j];\n    for (var i = j + 1; i < this.solvedCols; ++i) {\n      this.matrix[i][pj] = this.matrix[j][this.permutation[i]];\n    }\n    out[j] = this.diagR[pj];\n    work[j]  = qy[j];\n  }\n\n  // eliminate the diagonal matrix d using a Givens rotation\n  for (var j = 0; j < this.solvedCols; ++j) {\n\n    // prepare the row of d to be eliminated, locating the\n    // diagonal element using p from the Q.R. factorization\n    var pj = this.permutation[j];\n    var dpj = diag[pj];\n    if (dpj != 0) {\n      fillArray(lmDiag, j + 1, lmDiag.length, 0);\n    }\n    lmDiag[j] = dpj;\n\n    //  the transformations to eliminate the row of d\n    // modify only a single element of Qty\n    // beyond the first n, which is initially zero.\n    var qtbpj = 0;\n    for (var k = j; k < this.solvedCols; ++k) {\n      var pk = this.permutation[k];\n\n      // determine a Givens rotation which eliminates the\n      // appropriate element in the current row of d\n      if (lmDiag[k] != 0) {\n\n        var sin;\n        var cos;\n        var rkk = this.matrix[k][pk];\n        if (Math.abs(rkk) < Math.abs(lmDiag[k])) {\n          var cotan = rkk / lmDiag[k];\n          sin   = 1.0 / Math.sqrt(1.0 + cotan * cotan);\n          cos   = sin * cotan;\n        } else {\n          var tan = lmDiag[k] / rkk;\n          cos = 1.0 / Math.sqrt(1.0 + tan * tan);\n          sin = cos * tan;\n        }\n\n        // compute the modified diagonal element of R and\n        // the modified element of (Qty,0)\n        this.matrix[k][pk] = cos * rkk + sin * lmDiag[k];\n        var temp = cos * work[k] + sin * qtbpj;\n        qtbpj = -sin * work[k] + cos * qtbpj;\n        work[k] = temp;\n\n        // accumulate the tranformation in the row of s\n        for (var i = k + 1; i < this.solvedCols; ++i) {\n          var rik = this.matrix[i][pk];\n          var temp2 = cos * rik + sin * lmDiag[i];\n          lmDiag[i] = -sin * rik + cos * lmDiag[i];\n          this.matrix[i][pk] = temp2;\n        }\n      }\n    }\n\n    // store the diagonal element of s and restore\n    // the corresponding diagonal element of R\n    lmDiag[j] = this.matrix[j][this.permutation[j]];\n    this.matrix[j][this.permutation[j]] = out[j];\n  }\n\n  // solve the triangular system for z, if the system is\n  // singular, then obtain a least squares solution\n  var nSing = this.solvedCols;\n  for (var j = 0; j < this.solvedCols; ++j) {\n    if ((lmDiag[j] == 0) && (nSing == this.solvedCols)) {\n      nSing = j;\n    }\n    if (nSing < this.solvedCols) {\n      work[j] = 0;\n    }\n  }\n  if (nSing > 0) {\n    for (var j = nSing - 1; j >= 0; --j) {\n      var pj = this.permutation[j];\n      var sum = 0;\n      for (var i = j + 1; i < nSing; ++i) {\n        sum += this.matrix[i][pj] * work[i];\n      }\n      work[j] = (work[j] - sum) / lmDiag[j];\n    }\n  }\n\n  // permute the components of z back to components of lmDir\n  for (var j = 0; j < out.length; ++j) {\n    out[this.permutation[j]] = work[j];\n  }\n  return out;\n};\n\nexport default QR\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/qr.js\n **/","/**\n * This class solves a least-squares problem using the Levenberg-Marquardt algorithm.\n *\n * <p>This implementation <em>should</em> work even for over-determined systems\n * (i.e. systems having more point than equations). Over-determined systems\n * are solved by ignoring the point which have the smallest impact according\n * to their jacobian column norm. Only the rank of the matrix and some loop bounds\n * are changed to implement this.</p>\n *\n * <p>The resolution engine is a simple translation of the MINPACK <a\n * href=\"http://www.netlib.org/minpack/lmder.f\">lmder</a> routine with minor\n * changes. The changes include the over-determined resolution, the use of\n * inherited convergence checker and the Q.R. decomposition which has been\n * rewritten following the algorithm described in the\n * P. Lascaux and R. Theodor book <i>Analyse num&eacute;rique matricielle\n * appliqu&eacute;e &agrave; l'art de l'ing&eacute;nieur</i>, Masson 1986.</p>\n * <p>The authors of the original fortran version are:\n * <ul>\n * <li>Argonne National Laboratory. MINPACK project. March 1980</li>\n * <li>Burton S. Garbow</li>\n * <li>Kenneth E. Hillstrom</li>\n * <li>Jorge J. More</li>\n * </ul>\n * The redistribution policy for MINPACK is available <a\n * href=\"http://www.netlib.org/minpack/disclaimer\">here</a>, for convenience, it\n * is reproduced below.</p>\n *\n * <table border=\"0\" width=\"80%\" cellpadding=\"10\" align=\"center\" bgcolor=\"#E0E0E0\">\n * <tr><td>\n *    Minpack Copyright Notice (1999) University of Chicago.\n *    All rights reserved\n * </td></tr>\n * <tr><td>\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * <ol>\n *  <li>Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.</li>\n * <li>Redistributions in binary form must reproduce the above\n *     copyright notice, this list of conditions and the following\n *     disclaimer in the documentation and/or other materials provided\n *     with the distribution.</li>\n * <li>The end-user documentation included with the redistribution, if any,\n *     must include the following acknowledgment:\n *     <code>This product includes software developed by the University of\n *           Chicago, as Operator of Argonne National Laboratory.</code>\n *     Alternately, this acknowledgment may appear in the software itself,\n *     if and wherever such third-party acknowledgments normally appear.</li>\n * <li><strong>WARRANTY DISCLAIMER. THE SOFTWARE IS SUPPLIED \"AS IS\"\n *     WITHOUT WARRANTY OF ANY KIND. THE COPYRIGHT HOLDER, THE\n *     UNITED STATES, THE UNITED STATES DEPARTMENT OF ENERGY, AND\n *     THEIR EMPLOYEES: (1) DISCLAIM ANY WARRANTIES, EXPRESS OR\n *     IMPLIED, INCLUDING BUT NOT LIMITED TO ANY IMPLIED WARRANTIES\n *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE\n *     OR NON-INFRINGEMENT, (2) DO NOT ASSUME ANY LEGAL LIABILITY\n *     OR RESPONSIBILITY FOR THE ACCURACY, COMPLETENESS, OR\n *     USEFULNESS OF THE SOFTWARE, (3) DO NOT REPRESENT THAT USE OF\n *     THE SOFTWARE WOULD NOT INFRINGE PRIVATELY OWNED RIGHTS, (4)\n *     DO NOT WARRANT THAT THE SOFTWARE WILL FUNCTION\n *     UNINTERRUPTED, THAT IT IS ERROR-FREE OR THAT ANY ERRORS WILL\n *     BE CORRECTED.</strong></li>\n * <li><strong>LIMITATION OF LIABILITY. IN NO EVENT WILL THE COPYRIGHT\n *     HOLDER, THE UNITED STATES, THE UNITED STATES DEPARTMENT OF\n *     ENERGY, OR THEIR EMPLOYEES: BE LIABLE FOR ANY INDIRECT,\n *     INCIDENTAL, CONSEQUENTIAL, SPECIAL OR PUNITIVE DAMAGES OF\n *     ANY KIND OR NATURE, INCLUDING BUT NOT LIMITED TO LOSS OF\n *     PROFITS OR LOSS OF DATA, FOR ANY REASON WHATSOEVER, WHETHER\n *     SUCH LIABILITY IS ASSERTED ON THE BASIS OF CONTRACT, TORT\n *     (INCLUDING NEGLIGENCE OR STRICT LIABILITY), OR OTHERWISE,\n *     EVEN IF ANY OF SAID PARTIES HAS BEEN WARNED OF THE\n *     POSSIBILITY OF SUCH LOSS OR DAMAGES.</strong></li>\n * <ol></td></tr>\n * </table>\n *\n * @version $Id: LevenbergMarquardtOptimizer.java 1416643 2012-12-03 19:37:14Z tn $\n * @constructor\n */\nexport default function LMOptimizer(startPoint, target, model, jacobian) {\n\n\n    this.startPoint = startPoint;\n    this.target = target;\n    this.evalCount = 0;\n    this.evalMaximalCount = 100000;\n    this.model = model;\n    this.jacobian = jacobian;\n\n    this.identity = function(size) {\n      var out = [];\n      for (var row = 0; row < size; ++row) {\n          out.push([]);\n          for (var col = 0; col < size; ++col) {\n              out[row].push( row === col ? 1 : 0);\n          }\n      }\n      return out;\n    }\n\n\n\n    /** Square-root of the weight matrix. */\n    this.weightMatrixSqrt = this.identity(target.length);//TMath.identity(new TMath.Matrix(target.length, target.length)); //TODO:\n    this.weightMatrix = this.identity(target.length);\n    /** Cost value (square root of the sum of the residuals). */\n    this.cost = null;\n    /** Number of solved point. */\n    this.solvedCols = null;\n    /** Diagonal elements of the R matrix in the Q.R. decomposition. */\n    this.diagR = null;\n    /** Norms of the columns of the jacobian matrix. */\n    this.jacNorm = null;\n    /** Coefficients of the Householder transforms vectors. */\n    this.beta = null;\n    /** Columns permutation array. */\n    this.permutation = null;\n    /** Rank of the jacobian matrix. */\n    this.rank = null;\n    /** Levenberg-Marquardt parameter. */\n    this.lmPar = null;\n    /** Parameters evolution direction associated with lmPar. */\n    this.lmDir = null;\n    /** Positive input variable used in determining the initial step bound. */\n    this.initialStepBoundFactor = null;\n    /** Desired relative error in the sum of squares. */\n    this.costRelativeTolerance = null;\n    /**  Desired relative error in the approximate solution parameters. */\n    this.parRelativeTolerance = null;\n    /** Desired max cosine on the orthogonality between the function vector\n     * and the columns of the jacobian. */\n    this.orthoTolerance = null;\n    /** Threshold for QR ranking. */\n    this.qrRankingThreshold = null;\n    /** Weighted residuals. */\n    this.weightedResidual = null;\n    /** Weighted Jacobian. */\n    this.weightedJacobian = null;\n\n    this.checker = null;\n\n\n    function arr(size) {\n      var out = [];\n      out.length = size;\n      for (var i = 0; i < size; ++i) {\n          out[i] = 0;\n      }\n      return out;\n    }\n\n    function Arrays_fill(a, fromIndex, toIndex,val) {\n      for (var i = fromIndex; i < toIndex; i++)\n        a[i] = val;\n    }\n\n//    var SAFE_MIN = Number.MIN_VALUE; //FIXME!!!!\n    var SAFE_MIN = 1e-30; //FIXME!!!!\n\n    /**\n     * Build an optimizer for least squares problems with default values\n     * for all the tuning parameters (see the {@link\n     * #LevenbergMarquardtOptimizer(double,double,double,double,double)\n     * other contructor}.\n     * The default values for the algorithm settings are:\n     * <ul>\n     *  <li>Initial step bound factor: 100</li>\n     *  <li>Cost relative tolerance: 1e-10</li>\n     *  <li>Parameters relative tolerance: 1e-10</li>\n     *  <li>Orthogonality tolerance: 1e-10</li>\n     *  <li>QR ranking threshold: {@link Precision#SAFE_MIN}</li>\n     * </ul>\n     */\n    this.init = function() {\n        this.init1(100, 1e-10, 1e-10, 1e-10, SAFE_MIN);\n    }\n\n\n\n    /**\n     * Build an optimizer for least squares problems with default values\n     * for some of the tuning parameters (see the {@link\n     * #LevenbergMarquardtOptimizer(double,double,double,double,double)\n     * other contructor}.\n     * The default values for the algorithm settings are:\n     * <ul>\n     *  <li>Initial step bound factor}: 100</li>\n     *  <li>QR ranking threshold}: {@link Precision#SAFE_MIN}</li>\n     * </ul>\n     *\n     * @param costRelativeTolerance Desired relative error in the sum of\n     * squares.\n     * @param parRelativeTolerance Desired relative error in the approximate\n     * solution parameters.\n     * @param orthoTolerance Desired max cosine on the orthogonality between\n     * the function vector and the columns of the Jacobian.\n     */\n    this.init0 = function(costRelativeTolerance,\n                          parRelativeTolerance,\n                          orthoTolerance) {\n        this.init1(100, costRelativeTolerance, parRelativeTolerance, orthoTolerance,\n             SAFE_MIN);\n    }\n\n    /**\n     * The arguments control the behaviour of the default convergence checking\n     * procedure.\n     * Additional criteria can defined through the setting of a {@link\n     * ConvergenceChecker}.\n     *\n     * @param initialStepBoundFactor Positive input variable used in\n     * determining the initial step bound. This bound is set to the\n     * product of initialStepBoundFactor and the euclidean norm of\n     * {@code diag * x} if non-zero, or else to {@code initialStepBoundFactor}\n     * itself. In most cases factor should lie in the interval\n     * {@code (0.1, 100.0)}. {@code 100} is a generally recommended value.\n     * @param costRelativeTolerance Desired relative error in the sum of\n     * squares.\n     * @param parRelativeTolerance Desired relative error in the approximate\n     * solution parameters.\n     * @param orthoTolerance Desired max cosine on the orthogonality between\n     * the function vector and the columns of the Jacobian.\n     * @param threshold Desired threshold for QR ranking. If the squared norm\n     * of a column vector is smaller or equal to this threshold during QR\n     * decomposition, it is considered to be a zero vector and hence the rank\n     * of the matrix is reduced.\n     */\n    this.init1 = function(initialStepBoundFactor,\n                          costRelativeTolerance,\n                          parRelativeTolerance,\n                          orthoTolerance,\n                          threshold) {\n        this.initialStepBoundFactor = initialStepBoundFactor;\n        this.costRelativeTolerance = costRelativeTolerance;\n        this.parRelativeTolerance = parRelativeTolerance;\n        this.orthoTolerance = orthoTolerance;\n        this.qrRankingThreshold = threshold;\n    }\n\n    /** {@inheritDoc} */\n\n    this.doOptimize = function() {\n        var nR = this.target.length; // Number of observed data.\n        var currentPoint = this.startPoint;\n        var nC = currentPoint.length; // Number of parameters.\n\n        // arrays shared with the other private methods\n        this.solvedCols  = Math.min(nR, nC);\n        this.diagR       = arr(nC);\n        this.jacNorm     = arr(nC);\n        this.beta        = arr(nC);\n        this.permutation = arr(nC);\n        this.lmDir       = arr(nC);\n\n        // local point\n        var   delta   = 0;\n        var   xNorm   = 0;\n        var diag    = arr(nC);\n        var oldX    = arr(nC);\n        var oldRes  = arr(nR);\n        var oldObj  = arr(nR);\n        var qtf     = arr(nR);\n        var work1   = arr(nC);\n        var work2   = arr(nC);\n        var work3   = arr(nC);\n\n        var weightMatrixSqrt = this.getWeightSquareRoot();\n\n        // Evaluate the function at the starting point and calculate its norm.\n        var currentObjective = this.computeObjectiveValue(currentPoint);\n        var currentResiduals = this.computeResiduals(currentObjective);\n        var current = [currentPoint, currentObjective];\n        var currentCost = this.computeCost(currentResiduals);\n\n        // Outer loop.\n        this.lmPar = 0;\n        var firstIteration = true;\n        var iter = 0;\n\n        while (true) {\n            ++iter;\n            var previous = current;\n\n            // QR decomposition of the jacobian matrix\n            this.qrDecomposition(this.computeWeightedJacobian(currentPoint));\n\n            this.weightedResidual = this.operate(weightMatrixSqrt, currentResiduals);\n            for (var i = 0; i < nR; i++) {\n                qtf[i] = this.weightedResidual[i];\n            }\n\n            // compute Qt.res\n            this.qTy(qtf);\n\n            // now we don't need Q anymore,\n            // so let jacobian contain the R matrix with its diagonal elements\n            for (var k = 0; k < this.solvedCols; ++k) {\n                var pk = this.permutation[k];\n                this.weightedJacobian[k][pk] = this.diagR[pk];\n            }\n\n            if (firstIteration) {\n                // scale the point according to the norms of the columns\n                // of the initial jacobian\n                xNorm = 0;\n                for (var k = 0; k < nC; ++k) {\n                    var dk = this.jacNorm[k];\n                    if (dk == 0) {\n                        dk = 1.0;\n                    }\n                    var xk = dk * currentPoint[k];\n                    xNorm  += xk * xk;\n                    diag[k] = dk;\n                }\n                xNorm = Math.sqrt(xNorm);\n\n                // initialize the step bound delta\n                delta = (xNorm == 0) ? this.initialStepBoundFactor : (this.initialStepBoundFactor * xNorm);\n            }\n\n            // check orthogonality between function vector and jacobian columns\n            var maxCosine = 0;\n            if (currentCost != 0) {\n                for (var j = 0; j < this.solvedCols; ++j) {\n                    var    pj = this.permutation[j];\n                    var s  = this.jacNorm[pj];\n                    if (s != 0) {\n                        var sum = 0;\n                        for (var i = 0; i <= j; ++i) {\n                            sum += this.weightedJacobian[i][pj] * qtf[i];\n                        }\n                        maxCosine = Math.max(maxCosine, Math.abs(sum) / (s * currentCost));\n                    }\n                }\n            }\n            if (maxCosine <= this.orthoTolerance) {\n                // Convergence has been reached.\n                this.setCost(currentCost);\n                return current;\n            }\n\n            // rescale if necessary\n            for (var j = 0; j < nC; ++j) {\n                diag[j] = Math.max(diag[j], this.jacNorm[j]);\n            }\n\n            // Inner loop.\n            for (var ratio = 0; ratio < 1.0e-4;) {\n\n                // save the state\n                for (var j = 0; j < this.solvedCols; ++j) {\n                    var pj = this.permutation[j];\n                    oldX[pj] = currentPoint[pj];\n                }\n                var previousCost = currentCost;\n                var tmpVec = this.weightedResidual;\n                this.weightedResidual = oldRes;\n                oldRes    = tmpVec;\n                tmpVec    = currentObjective;\n                currentObjective = oldObj;\n                oldObj    = tmpVec;\n\n                // determine the Levenberg-Marquardt parameter\n                this.determineLMParameter(qtf, delta, diag, work1, work2, work3);\n\n                // compute the new point and the norm of the evolution direction\n                var lmNorm = 0;\n                for (var j = 0; j < this.solvedCols; ++j) {\n                    var pj = this.permutation[j];\n                    this.lmDir[pj] = -this.lmDir[pj];\n                    currentPoint[pj] = oldX[pj] + this.lmDir[pj];\n                    var s = diag[pj] * this.lmDir[pj];\n                    lmNorm  += s * s;\n                }\n                lmNorm = Math.sqrt(lmNorm);\n                // on the first iteration, adjust the initial step bound.\n                if (firstIteration) {\n                    delta = Math.min(delta, lmNorm);\n                }\n\n                // Evaluate the function at x + p and calculate its norm.\n                currentObjective = this.computeObjectiveValue(currentPoint);\n                currentResiduals = this.computeResiduals(currentObjective);\n                current = [currentPoint, currentObjective];\n                currentCost = this.computeCost(currentResiduals);\n\n                // compute the scaled actual reduction\n                var actRed = -1.0;\n                if (0.1 * currentCost < previousCost) {\n                    var r = currentCost / previousCost;\n                    actRed = 1.0 - r * r;\n                }\n\n                // compute the scaled predicted reduction\n                // and the scaled directional derivative\n                for (var j = 0; j < this.solvedCols; ++j) {\n                    var pj = this.permutation[j];\n                    var dirJ = this.lmDir[pj];\n                    work1[j] = 0;\n                    for (var i = 0; i <= j; ++i) {\n                        work1[i] += this.weightedJacobian[i][pj] * dirJ;\n                    }\n                }\n                var coeff1 = 0;\n                for (var j = 0; j < this.solvedCols; ++j) {\n                    coeff1 += work1[j] * work1[j];\n                }\n                var pc2 = previousCost * previousCost;\n                coeff1 = coeff1 / pc2;\n                var coeff2 = this.lmPar * lmNorm * lmNorm / pc2;\n                var preRed = coeff1 + 2 * coeff2;\n                var dirDer = -(coeff1 + coeff2);\n\n                // ratio of the actual to the predicted reduction\n                ratio = (preRed == 0) ? 0 : (actRed / preRed);\n\n                // update the step bound\n                if (ratio <= 0.25) {\n                    var tmp =\n                        (actRed < 0) ? (0.5 * dirDer / (dirDer + 0.5 * actRed)) : 0.5;\n                        if ((0.1 * currentCost >= previousCost) || (tmp < 0.1)) {\n                            tmp = 0.1;\n                        }\n                        delta = tmp * Math.min(delta, 10.0 * lmNorm);\n                        this.lmPar /= tmp;\n                } else if ((this.lmPar == 0) || (ratio >= 0.75)) {\n                    delta = 2 * lmNorm;\n                    this.lmPar *= 0.5;\n                }\n\n                // test for successful iteration.\n                if (ratio >= 1.0e-4) {\n                    // successful iteration, update the norm\n                    firstIteration = false;\n                    xNorm = 0;\n                    for (var k = 0; k < nC; ++k) {\n                        var xK = diag[k] * currentPoint[k];\n                        xNorm += xK * xK;\n                    }\n                    xNorm = Math.sqrt(xNorm);\n\n                    // tests for convergence.\n                    if (this.checker != null) {\n                        // we use the vectorial convergence checker\n                        if (this.checker.call(iter, previous, current)) {\n                            this.setCost(currentCost);\n                            return current;\n                        }\n                    }\n                } else {\n                    // failed iteration, reset the previous values\n                    currentCost = previousCost;\n                    for (var j = 0; j < this.solvedCols; ++j) {\n                        var pj = this.permutation[j];\n                        currentPoint[pj] = oldX[pj];\n                    }\n                    tmpVec    = this.weightedResidual;\n                    this.weightedResidual = oldRes;\n                    oldRes    = tmpVec;\n                    tmpVec    = currentObjective;\n                    currentObjective = oldObj;\n                    oldObj    = tmpVec;\n                    // Reset \"current\" to previous values.\n                    current = [currentPoint, currentObjective];\n                }\n\n                // Default convergence criteria.\n                if ((Math.abs(actRed) <= this.costRelativeTolerance &&\n                     preRed <= this.costRelativeTolerance &&\n                     ratio <= 2.0) ||\n                    delta <= this.parRelativeTolerance * xNorm) {\n                    this.setCost(currentCost);\n                    return current;\n                }\n\n                // tests for termination and stringent tolerances\n                // (2.2204e-16 is the machine epsilon for IEEE754)\n                if ((Math.abs(actRed) <= 2.2204e-16) && (preRed <= 2.2204e-16) && (ratio <= 2.0)) {\n                    throw \"TOO_SMALL_COST_RELATIVE_TOLERANCE: \" + this.costRelativeTolerance;\n                } else if (delta <= 2.2204e-16 * xNorm) {\n                    throw \"TOO_SMALL_PARAMETERS_RELATIVE_TOLERANCE: \" + this.parRelativeTolerance;\n                } else if (maxCosine <= 2.2204e-16)  {\n                    throw \"TOO_SMALL_ORTHOGONALITY_TOLERANCE: \" + this.orthoTolerance;\n                }\n            }\n        }\n    }\n\n    /**\n     * Determine the Levenberg-Marquardt parameter.\n     * <p>This implementation is a translation in Java of the MINPACK\n     * <a href=\"http://www.netlib.org/minpack/lmpar.f\">lmpar</a>\n     * routine.</p>\n     * <p>This method sets the lmPar and lmDir attributes.</p>\n     * <p>The authors of the original fortran function are:</p>\n     * <ul>\n     *   <li>Argonne National Laboratory. MINPACK project. March 1980</li>\n     *   <li>Burton  S. Garbow</li>\n     *   <li>Kenneth E. Hillstrom</li>\n     *   <li>Jorge   J. More</li>\n     * </ul>\n     * <p>Luc Maisonobe did the Java translation.</p>\n     *\n     * @param qy array containing qTy\n     * @param delta upper bound on the euclidean norm of diagR * lmDir\n     * @param diag diagonal matrix\n     * @param work1 work array\n     * @param work2 work array\n     * @param work3 work array\n     */\n    this.determineLMParameter = function(qy, delta, diag,\n                                         work1, work2, work3) {\n        var nC = this.weightedJacobian[0].length;\n\n        // compute and store in x the gauss-newton direction, if the\n        // jacobian is rank-deficient, obtain a least squares solution\n        for (var j = 0; j < this.rank; ++j) {\n            this.lmDir[this.permutation[j]] = qy[j];\n        }\n        for (var j = this.rank; j < nC; ++j) {\n            this.lmDir[this.permutation[j]] = 0;\n        }\n        for (var k = this.rank - 1; k >= 0; --k) {\n            var pk = this.permutation[k];\n            var ypk = this.lmDir[pk] / this.diagR[pk];\n            for (var i = 0; i < k; ++i) {\n                this.lmDir[this.permutation[i]] -= ypk * this.weightedJacobian[i][pk];\n            }\n            this.lmDir[pk] = ypk;\n        }\n\n        // evaluate the function at the origin, and test\n        // for acceptance of the Gauss-Newton direction\n        var dxNorm = 0;\n        for (var j = 0; j < this.solvedCols; ++j) {\n            var pj = this.permutation[j];\n            var s = diag[pj] * this.lmDir[pj];\n            work1[pj] = s;\n            dxNorm += s * s;\n        }\n        dxNorm = Math.sqrt(dxNorm);\n        var fp = dxNorm - delta;\n        if (fp <= 0.1 * delta) {\n            this.lmPar = 0;\n            return;\n        }\n\n        // if the jacobian is not rank deficient, the Newton step provides\n        // a lower bound, parl, for the zero of the function,\n        // otherwise set this bound to zero\n        var sum2;\n        var parl = 0;\n        if (this.rank == this.solvedCols) {\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                work1[pj] *= diag[pj] / dxNorm;\n            }\n            sum2 = 0;\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                var sum = 0;\n                for (var i = 0; i < j; ++i) {\n                    sum += this.weightedJacobian[i][pj] * work1[this.permutation[i]];\n                }\n                var s = (work1[pj] - sum) / this.diagR[pj];\n                work1[pj] = s;\n                sum2 += s * s;\n            }\n            parl = fp / (delta * sum2);\n        }\n\n        // calculate an upper bound, paru, for the zero of the function\n        sum2 = 0;\n        for (var j = 0; j < this.solvedCols; ++j) {\n            var pj = this.permutation[j];\n            var sum = 0;\n            for (var i = 0; i <= j; ++i) {\n                sum += this.weightedJacobian[i][pj] * qy[i];\n            }\n            sum /= diag[pj];\n            sum2 += sum * sum;\n        }\n        var gNorm = Math.sqrt(sum2);\n        var paru = gNorm / delta;\n        if (paru == 0) {\n            // 2.2251e-308 is the smallest positive real for IEE754\n            paru = 2.2251e-308 / Math.min(delta, 0.1);\n        }\n\n        // if the input par lies outside of the interval (parl,paru),\n        // set par to the closer endpoint\n        this.lmPar = Math.min(paru, Math.max(this.lmPar, parl));\n        if (this.lmPar == 0) {\n            this.lmPar = gNorm / dxNorm;\n        }\n\n        for (var countdown = 10; countdown >= 0; --countdown) {\n\n            // evaluate the function at the current value of lmPar\n            if (this.lmPar == 0) {\n                this.lmPar = Math.max(2.2251e-308, 0.001 * paru);\n            }\n            var sPar = Math.sqrt(this.lmPar);\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                work1[pj] = sPar * diag[pj];\n            }\n            this.determineLMDirection(qy, work1, work2, work3);\n\n            dxNorm = 0;\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                var s = diag[pj] * this.lmDir[pj];\n                work3[pj] = s;\n                dxNorm += s * s;\n            }\n            dxNorm = Math.sqrt(dxNorm);\n            var previousFP = fp;\n            fp = dxNorm - delta;\n\n            // if the function is small enough, accept the current value\n            // of lmPar, also test for the exceptional cases where parl is zero\n            if ((Math.abs(fp) <= 0.1 * delta) ||\n                    ((parl == 0) && (fp <= previousFP) && (previousFP < 0))) {\n                return;\n            }\n\n            // compute the Newton correction\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                work1[pj] = work3[pj] * diag[pj] / dxNorm;\n            }\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var pj = this.permutation[j];\n                work1[pj] /= work2[j];\n                var tmp = work1[pj];\n                for (var i = j + 1; i < this.solvedCols; ++i) {\n                    work1[this.permutation[i]] -= this.weightedJacobian[i][pj] * tmp;\n                }\n            }\n            sum2 = 0;\n            for (var j = 0; j < this.solvedCols; ++j) {\n                var s = work1[this.permutation[j]];\n                sum2 += s * s;\n            }\n            var correction = fp / (delta * sum2);\n\n            // depending on the sign of the function, update parl or paru.\n            if (fp > 0) {\n                parl = Math.max(parl, this.lmPar);\n            } else if (fp < 0) {\n                paru = Math.min(paru, this.lmPar);\n            }\n\n            // compute an improved estimate for lmPar\n            this.lmPar = Math.max(parl, this.lmPar + correction);\n\n        }\n    }\n\n    /**\n     * Solve a*x = b and d*x = 0 in the least squares sense.\n     * <p>This implementation is a translation in Java of the MINPACK\n     * <a href=\"http://www.netlib.org/minpack/qrsolv.f\">qrsolv</a>\n     * routine.</p>\n     * <p>This method sets the lmDir and lmDiag attributes.</p>\n     * <p>The authors of the original fortran function are:</p>\n     * <ul>\n     *   <li>Argonne National Laboratory. MINPACK project. March 1980</li>\n     *   <li>Burton  S. Garbow</li>\n     *   <li>Kenneth E. Hillstrom</li>\n     *   <li>Jorge   J. More</li>\n     * </ul>\n     * <p>Luc Maisonobe did the Java translation.</p>\n     *\n     * @param qy array containing qTy\n     * @param diag diagonal matrix\n     * @param lmDiag diagonal elements associated with lmDir\n     * @param work work array\n     */\n    this.determineLMDirection = function(qy, diag, lmDiag, work) {\n\n        // copy R and Qty to preserve input and initialize s\n        //  in particular, save the diagonal elements of R in lmDir\n        for (var j = 0; j < this.solvedCols; ++j) {\n            var pj = this.permutation[j];\n            for (var i = j + 1; i < this.solvedCols; ++i) {\n                this.weightedJacobian[i][pj] = this.weightedJacobian[j][this.permutation[i]];\n            }\n            this.lmDir[j] = this.diagR[pj];\n            work[j]  = qy[j];\n        }\n\n        // eliminate the diagonal matrix d using a Givens rotation\n        for (var j = 0; j < this.solvedCols; ++j) {\n\n            // prepare the row of d to be eliminated, locating the\n            // diagonal element using p from the Q.R. factorization\n            var pj = this.permutation[j];\n            var dpj = diag[pj];\n            if (dpj != 0) {\n                Arrays_fill(lmDiag, j + 1, lmDiag.length, 0);\n            }\n            lmDiag[j] = dpj;\n\n            //  the transformations to eliminate the row of d\n            // modify only a single element of Qty\n            // beyond the first n, which is initially zero.\n            var qtbpj = 0;\n            for (var k = j; k < this.solvedCols; ++k) {\n                var pk = this.permutation[k];\n\n                // determine a Givens rotation which eliminates the\n                // appropriate element in the current row of d\n                if (lmDiag[k] != 0) {\n\n                    var sin;\n                    var cos;\n                    var rkk = this.weightedJacobian[k][pk];\n                    if (Math.abs(rkk) < Math.abs(lmDiag[k])) {\n                        var cotan = rkk / lmDiag[k];\n                        sin   = 1.0 / Math.sqrt(1.0 + cotan * cotan);\n                        cos   = sin * cotan;\n                    } else {\n                        var tan = lmDiag[k] / rkk;\n                        cos = 1.0 / Math.sqrt(1.0 + tan * tan);\n                        sin = cos * tan;\n                    }\n\n                    // compute the modified diagonal element of R and\n                    // the modified element of (Qty,0)\n                    this.weightedJacobian[k][pk] = cos * rkk + sin * lmDiag[k];\n                    var temp = cos * work[k] + sin * qtbpj;\n                    qtbpj = -sin * work[k] + cos * qtbpj;\n                    work[k] = temp;\n\n                    // accumulate the tranformation in the row of s\n                    for (var i = k + 1; i < this.solvedCols; ++i) {\n                        var rik = this.weightedJacobian[i][pk];\n                        var temp2 = cos * rik + sin * lmDiag[i];\n                        lmDiag[i] = -sin * rik + cos * lmDiag[i];\n                        this.weightedJacobian[i][pk] = temp2;\n                    }\n                }\n            }\n\n            // store the diagonal element of s and restore\n            // the corresponding diagonal element of R\n            lmDiag[j] = this.weightedJacobian[j][this.permutation[j]];\n            this.weightedJacobian[j][this.permutation[j]] = this.lmDir[j];\n        }\n\n        // solve the triangular system for z, if the system is\n        // singular, then obtain a least squares solution\n        var nSing = this.solvedCols;\n        for (var j = 0; j < this.solvedCols; ++j) {\n            if ((lmDiag[j] == 0) && (nSing == this.solvedCols)) {\n                nSing = j;\n            }\n            if (nSing < this.solvedCols) {\n                work[j] = 0;\n            }\n        }\n        if (nSing > 0) {\n            for (var j = nSing - 1; j >= 0; --j) {\n                var pj = this.permutation[j];\n                var sum = 0;\n                for (var i = j + 1; i < nSing; ++i) {\n                    sum += this.weightedJacobian[i][pj] * work[i];\n                }\n                work[j] = (work[j] - sum) / lmDiag[j];\n            }\n        }\n\n        // permute the components of z back to components of lmDir\n        for (var j = 0; j < this.lmDir.length; ++j) {\n            this.lmDir[this.permutation[j]] = work[j];\n        }\n    }\n\n    /**\n     * Decompose a matrix A as A.P = Q.R using Householder transforms.\n     * <p>As suggested in the P. Lascaux and R. Theodor book\n     * <i>Analyse num&eacute;rique matricielle appliqu&eacute;e &agrave;\n     * l'art de l'ing&eacute;nieur</i> (Masson, 1986), instead of representing\n     * the Householder transforms with u<sub>k</sub> unit vectors such that:\n     * <pre>\n     * H<sub>k</sub> = I - 2u<sub>k</sub>.u<sub>k</sub><sup>t</sup>\n     * </pre>\n     * we use <sub>k</sub> non-unit vectors such that:\n     * <pre>\n     * H<sub>k</sub> = I - beta<sub>k</sub>v<sub>k</sub>.v<sub>k</sub><sup>t</sup>\n     * </pre>\n     * where v<sub>k</sub> = a<sub>k</sub> - alpha<sub>k</sub> e<sub>k</sub>.\n     * The beta<sub>k</sub> coefficients are provided upon exit as recomputing\n     * them from the v<sub>k</sub> vectors would be costly.</p>\n     * <p>This decomposition handles rank deficient cases since the tranformations\n     * are performed in non-increasing columns norms order thanks to columns\n     * pivoting. The diagonal elements of the R matrix are therefore also in\n     * non-increasing absolute values order.</p>\n     *\n     * @param jacobian Weighted Jacobian matrix at the current point.\n     * @exception ConvergenceException if the decomposition cannot be performed\n     */\n    this.qrDecomposition = function(jacobian) {\n        // Code in this class assumes that the weighted Jacobian is -(W^(1/2) J),\n        // hence the multiplication by -1.\n        this.weightedJacobian = this.scalarMultiply(jacobian, -1);\n\n        var nR = this.weightedJacobian.length;\n        var nC = this.weightedJacobian[0].length;\n\n        // initializations\n        for (var k = 0; k < nC; ++k) {\n            this.permutation[k] = k;\n            var norm2 = 0;\n            for (var i = 0; i < nR; ++i) {\n                var akk = this.weightedJacobian[i][k];\n                norm2 += akk * akk;\n            }\n            this.jacNorm[k] = Math.sqrt(norm2);\n        }\n\n        // transform the matrix column after column\n        for (var k = 0; k < nC; ++k) {\n\n            // select the column with the greatest norm on active components\n            var nextColumn = -1;\n            var ak2 = Number.NEGATIVE_INFINITY;\n            for (var i = k; i < nC; ++i) {\n                var norm2 = 0;\n                for (var j = k; j < nR; ++j) {\n                    var aki = this.weightedJacobian[j][this.permutation[i]];\n                    norm2 += aki * aki;\n                }\n                if (!isFinite(norm2)) {\n                    throw \"UNABLE_TO_PERFORM_QR_DECOMPOSITION_ON_JACOBIAN\";\n                }\n                if (norm2 > ak2) {\n                    nextColumn = i;\n                    ak2        = norm2;\n                }\n            }\n            if (ak2 <= this.qrRankingThreshold) {\n                this.rank = k;\n                return;\n            }\n            var pk                  = this.permutation[nextColumn];\n            this.permutation[nextColumn] = this.permutation[k];\n            this.permutation[k]          = pk;\n\n            // choose alpha such that Hk.u = alpha ek\n            var akk   = this.weightedJacobian[k][pk];\n            var alpha = (akk > 0) ? -Math.sqrt(ak2) : Math.sqrt(ak2);\n            var betak = 1.0 / (ak2 - akk * alpha);\n            this.beta[pk]     = betak;\n\n            // transform the current column\n            this.diagR[pk]        = alpha;\n            this.weightedJacobian[k][pk] -= alpha;\n\n            // transform the remaining columns\n            for (var dk = nC - 1 - k; dk > 0; --dk) {\n                var gamma = 0;\n                for (var j = k; j < nR; ++j) {\n                    gamma += this.weightedJacobian[j][pk] * this.weightedJacobian[j][this.permutation[k + dk]];\n                }\n                gamma *= betak;\n                for (var j = k; j < nR; ++j) {\n                    this.weightedJacobian[j][this.permutation[k + dk]] -= gamma * this.weightedJacobian[j][pk];\n                }\n            }\n        }\n        this.rank = this.solvedCols;\n    }\n\n    /**\n     * Compute the product Qt.y for some Q.R. decomposition.\n     *\n     * @param y vector to multiply (will be overwritten with the result)\n     */\n    this.qTy = function(y) {\n        var nR = this.weightedJacobian.length;\n        var nC = this.weightedJacobian[0].length;\n\n        for (var k = 0; k < nC; ++k) {\n            var pk = this.permutation[k];\n            var gamma = 0;\n            for (var i = k; i < nR; ++i) {\n                gamma += this.weightedJacobian[i][pk] * y[i];\n            }\n            gamma *= this.beta[pk];\n            for (var i = k; i < nR; ++i) {\n                y[i] -= gamma * this.weightedJacobian[i][pk];\n            }\n        }\n    }\n\n    /**\n     * Computes the weighted Jacobian matrix.\n     *\n     * @param params Model parameters at which to compute the Jacobian.\n     * @return the weighted Jacobian: W<sup>1/2</sup> J.\n     * @throws DimensionMismatchException if the Jacobian dimension does not\n     * match problem dimension.\n     */\n    this.computeWeightedJacobian = function(params) {\n//        return this.weightMatrixSqrt.multiply(this.jacobian(params));\n\n      //TODO: since weighted matrix is always identity return jacobian itself\n        return this.jacobian(params);\n    }\n\n    this.scalarMultiply = function(m, s) {\n        var rowCount    = m.length;\n        var columnCount = m[0].length;\n        var out = [];\n        for (var row = 0; row < rowCount; ++row) {\n            out.push([]);\n            for (var col = 0; col < columnCount; ++col) {\n                out[row].push(m[row][col] * s);\n            }\n        }\n\n        return out;\n    }\n\n    this.operate = function(m, v) {\n        var nRows = m.length;\n        var nCols = m[0].length;\n        if (v.length != nCols) {\n            throw \"DimensionMismatchException: \" + v.length + \"!=\" + nCols;\n        }\n        var out = [];\n        for (var row = 0; row < nRows; row++) {\n            var dataRow = m[row];\n            var sum = 0;\n            for (var i = 0; i < nCols; i++) {\n                sum += dataRow[i] * v[i];\n            }\n            out[row] = sum;\n        }\n        return out;\n    }\n\n    /**\n     * Computes the cost.\n     *\n     * @param residuals Residuals.\n     * @return the cost.\n     * @see #computeResiduals(double[])\n     */\n    this.computeCost = function(residuals) {\n        return Math.sqrt(this.dotProduct( residuals, this.operate(this.getWeight(), residuals)));\n    }\n\n\n    this.dotProduct = function(v1, v2) {\n      var dot = 0;\n      for (var i = 0; i < v1.length; i++) {\n          dot += v1[i] * v2[i];\n      }\n      return dot;\n    }\n\n    /**\n     * Gets the root-mean-square (RMS) value.\n     *\n     * The RMS the root of the arithmetic mean of the square of all weighted\n     * residuals.\n     * This is related to the criterion that is minimized by the optimizer\n     * as follows: If <em>c</em> if the criterion, and <em>n</em> is the\n     * number of measurements, then the RMS is <em>sqrt (c/n)</em>.\n     *\n     * @return the RMS value.\n     */\n    this.getRMS = function() {\n        return Math.sqrt(this.getChiSquare() / this.target.length);\n    }\n\n    /**\n     * Get a Chi-Square-like value assuming the N residuals follow N\n     * distinct normal distributions centered on 0 and whose variances are\n     * the reciprocal of the weights.\n     * @return chi-square value\n     */\n    this.getChiSquare = function() {\n        return this.cost * this.cost;\n    }\n\n    /**\n     * Gets the square-root of the weight matrix.\n     *\n     * @return the square-root of the weight matrix.\n     */\n    this.getWeightSquareRoot = function() {\n        return this.weightMatrixSqrt;//.copy(); FIXME for now it's always identity\n    }\n\n    this.getWeight = function() {\n        return this.weightMatrix;//.copy(); FIXME for now it's always identity\n    }\n\n    /**\n     * Sets the cost.\n     *\n     * @param cost Cost value.\n     */\n    this.setCost = function(cost) {\n        this.cost = cost;\n    }\n\n    /**\n     * Computes the residuals.\n     * The residual is the difference between the observed (target)\n     * values and the model (objective function) value.\n     * There is one residual for each element of the vector-valued\n     * function.\n     *\n     * @param objectiveValue Value of the the objective function. This is\n     * the value returned from a call to\n     * {@link #computeObjectiveValue(double[]) computeObjectiveValue}\n     * (whose array argument contains the model parameters).\n     * @return the residuals.\n     * @throws DimensionMismatchException if {@code params} has a wrong\n     * length.\n     */\n    this.computeResiduals = function(objectiveValue) {\n        var target = this.target;\n        if (objectiveValue.length != target.length) {\n            throw \"DimensionMismatchException: \" + target.length + \" != \" + objectiveValue.length;\n        }\n\n        var residuals = arr(target.length);\n        for (var i = 0; i < target.length; i++) {\n            residuals[i] = target[i] - objectiveValue[i];\n        }\n\n        return residuals;\n    }\n\n    this.computeObjectiveValue = function(params) {\n        if (++this.evalCount > this.evalMaximalCount) {\n            throw \"TOO MANY FUNCTION EVALUATION\"\n        }\n        return this.model(params);\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/lm.js\n **/","import {fillArray} from '../../utils/utils'\n\n/**\n * This intermediate layer should be eliminated since constraint server isn't used anymore\n */\nfunction createByConstraintName(name, params, values) {\n  switch (name) {\n    case \"equal\":\n      return new Equal(params);\n    case \"equalsTo\":\n      return new EqualsTo(params, values[0]);\n    case \"MinLength\":\n      return new MinLength(params, values[0]);\n    case \"perpendicular\":\n      return new Perpendicular(params);\n    case \"parallel\":\n      return new Parallel(params);\n    case \"P2LDistance\":\n      return new P2LDistance(params, values[0]);\n    case \"P2LDistanceV\":\n      return new P2LDistanceV(params);\n    case \"P2PDistance\":\n      return new P2PDistance(params, values[0]);\n    case \"P2PDistanceV\":\n      return new P2PDistanceV(params);\n    case \"PointOnEllipse\":\n      return new PointOnEllipse(params);\n    case \"EllipseTangent\":\n      return new EllipseTangent(params);\n    case \"angle\":\n      return new Angle(params);\n    case \"angleConst\":\n      var _ = true, x = false;\n      // Exclude angle value from parameters\n      return new ConstantWrapper(new Angle(params), [x,x,x,x,x,x,x,x,_]);\n    case 'LockConvex':\n      return new LockConvex(params);\n    case 'GreaterThan':\n      return new GreaterThan(params, values[0]);\n    \n  }\n}\n\n/** @constructor */\nfunction Equal(params) {\n\n  this.params = params;\n\n  this.error = function() {\n    return this.params[0].get() - this.params[1].get();\n  };\n\n  this.gradient = function(out) {\n    out[0] = 1;\n    out[1] = -1;\n  }\n}\n\n\nfunction MinLength(params, distance) {\n  \n  this.params = params;\n  this.distance = distance;\n\n  var p1x = 0;\n  var p1y = 1;\n  var p2x = 2;\n  var p2y = 3;\n\n  this.error = function() {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    return d < this.distance ? (d - this.distance) : 0;\n  };\n\n  this.gradient = function(out) {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d == 0) {\n      d = 0.000001;\n    }\n    if (d >= this.distance) {\n      out[p1x] = 0;\n      out[p1y] = 0;\n      out[p2x] = 0;\n      out[p2y] = 0;\n    }\n    out[p1x] = dx / d;\n    out[p1y] = dy / d;\n    out[p2x] = -dx / d;\n    out[p2y] = -dy / d;\n  }\n}\n\nfunction LockConvex(params) {\n  this.params = params;\n\n  var _pcx = 0;\n  var _pcy = 1;\n  var _pax = 2;\n  var _pay = 3;\n  var _ptx = 4;\n  var _pty = 5;\n\n  this.error = function() {\n    var cx = params[_pcx].get();\n    var cy = params[_pcy].get();\n    var ax = params[_pax].get();\n    var ay = params[_pay].get();\n    var tx = params[_ptx].get();\n    var ty = params[_pty].get();\n    \n    var crossProductNorm = (cx - ax) * (ty - ay) - (cy - ay) * (tx - ax);\n\n    var violate = crossProductNorm < 0;\n    return violate ? crossProductNorm : 0;\n  };\n\n  this.gradient = function(out) {\n    var cx = params[_pcx].get();\n    var cy = params[_pcy].get();\n    var ax = params[_pax].get();\n    var ay = params[_pay].get();\n    var tx = params[_ptx].get();\n    var ty = params[_pty].get();\n\n    out[_pcx] = ty-ay;\n    out[_pcy] = ax-tx;\n    out[_pax] = cy-ty;\n    out[_pay] = tx-cx;\n    out[_ptx] = ay-cy;\n    out[_pty] = cx-ax;\n  }\n}\n\n\n/** @constructor */\nfunction ConstantWrapper(constr, mask) {\n\n  this.params = [];\n  this.grad = [];\n  var j;\n  \n  for (j = 0; j < constr.params.length; j++) {\n    if (!mask[j]) {\n      this.params.push(constr.params[j]);\n    }\n    this.grad.push(0);\n  }\n\n  this.error = function() {\n    return constr.error();\n  };\n\n  this.gradient = function(out) {\n    fillArray(this.grad, 0, this.grad.length, 0);\n    constr.gradient(this.grad);\n    var jj = 0;\n    for (j = 0; j < mask.length; j++) {\n      if (!mask[j]) {\n        out[jj ++] = this.grad[j];\n      }\n    }\n  }\n}\n\n/** @constructor */\nfunction Weighted(constr, weight) {\n\n  this.weight = weight;\n  this.params = constr.params;\n  this.constr = constr;\n   \n  this.error = function() {\n    return constr.error() * this.weight;\n  };\n\n  this.gradient = function(out) {\n    constr.gradient(out);\n    for (var i = 0; i < out.length; i++) {\n      out[i] *= this.weight;\n    }\n  }\n}\n\n\n/** @constructor */\nfunction EqualsTo(params, value) {\n\n  this.params = params;\n  this.value = value;\n\n  this.error = function() {\n    return this.params[0].get() - this.value;\n  };\n\n  this.gradient = function(out) {\n    out[0] = 1;\n  };\n}\n\n/** @constructor */\nfunction P2LDistance(params, distance) {\n\n  this.params = params;\n  this.distance = distance;\n\n  var TX = 0;\n  var TY = 1;\n  var LP1X = 2;\n  var LP1Y = 3;\n  var LP2X = 4;\n  var LP2Y = 5;\n\n  this.error = function() {\n    var x0 = params[TX].get(), x1 = params[LP1X].get(), x2 = params[LP2X].get();\n    var y0 = params[TY].get(), y1 = params[LP1Y].get(), y2 = params[LP2Y].get();\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d == 0) {\n      return 0;\n    }\n    var A = -x0 * dy + y0 * dx + x1 * y2 - x2 * y1;\n    return Math.abs(A) / d -  this.distance;\n  };\n\n  this.gradient = function(out) {\n    var x0 = params[TX].get(), x1 = params[LP1X].get(), x2 = params[LP2X].get();\n    var y0 = params[TY].get(), y1 = params[LP1Y].get(), y2 = params[LP2Y].get();\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d2 = dx * dx + dy * dy;\n    var d = Math.sqrt(d2);\n    var d3 = d * d2;\n//    var AA = -x0 * (y2 - y1) + y0 * (x2 - x1) + x1 * y2 - x2 * y1;\n    var A = -x0 * dy + y0 * dx + x1 * y2 - x2 * y1;\n    var AM = Math.abs(A);\n    var j = A < 0 ? -1 : 1;\n\n    out[TX] = j * (y1 - y2) / d;\n    out[TY] = j * (x2 - x1) / d;\n\n    out[LP1X] = j * (y2 - y0) / d + AM * dx / d3;\n    out[LP1Y] = j * (x0 - x2) / d + AM * dy / d3;\n    out[LP2X] = j * (y0 - y1) / d - AM * dx / d3;\n    out[LP2Y] = j * (x1 - x0) / d - AM * dy / d3;\n\n    _fixNaN(out);\n  }\n}\n\n/** @constructor */\nfunction P2LDistanceV(params) {\n\n  this.params = params;//.slice(0, params.length -1);\n\n  var TX = 0;\n  var TY = 1;\n  var LP1X = 2;\n  var LP1Y = 3;\n  var LP2X = 4;\n  var LP2Y = 5;\n  var D = 6;\n\n  this.error = function() {\n    var x0 = params[TX].get(), x1 = params[LP1X].get(), x2 = params[LP2X].get();\n    var y0 = params[TY].get(), y1 = params[LP1Y].get(), y2 = params[LP2Y].get();\n    var dist = this.params[D].get();\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d == 0) {\n      return 0;\n    }\n    var A = -x0 * dy + y0 * dx + x1 * y2 - x2 * y1;\n    return Math.abs(A) / d - dist;\n  };\n\n  this.gradient = function(out) {\n    var x0 = params[TX].get(), x1 = params[LP1X].get(), x2 = params[LP2X].get();\n    var y0 = params[TY].get(), y1 = params[LP1Y].get(), y2 = params[LP2Y].get();\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d2 = dx * dx + dy * dy;\n    var d = Math.sqrt(d2);\n    var d3 = d * d2;\n//    var AA = -x0 * (y2 - y1) + y0 * (x2 - x1) + x1 * y2 - x2 * y1;\n    var A = -x0 * dy + y0 * dx + x1 * y2 - x2 * y1;\n    var AM = Math.abs(A);\n    var j = A < 0 ? -1 : 1;\n    \n    out[TX] = j * (y1 - y2) / d;\n    out[TY] = j * (x2 - x1) / d;\n    \n    out[LP1X] = j * (y2 - y0) / d + AM * dx / d3;\n    out[LP1Y] = j * (x0 - x2) / d + AM * dy / d3;\n    out[LP2X] = j * (y0 - y1) / d - AM * dx / d3;\n    out[LP2Y] = j * (x1 - x0) / d - AM * dy / d3;\n    out[D] = -1;\n\n    _fixNaN(out);\n  }\n\n}\n/** @constructor */\nfunction P2PDistance(params, distance) {\n\n  this.params = params;\n  this.distance = distance;\n\n  var p1x = 0;\n  var p1y = 1;\n  var p2x = 2;\n  var p2y = 3;\n\n  this.error = function() {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    return (d - this.distance);\n  };\n\n  this.gradient = function(out) {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d == 0) {\n      if (this.distance == 0) return;\n      d = 0.000001;\n    }\n    out[p1x] = dx / d;\n    out[p1y] = dy / d;\n    out[p2x] = -dx / d;\n    out[p2y] = -dy / d;\n    \n  }\n}\n\n\n/** @constructor */\nfunction P2PDistanceV(params) {\n\n  this.params = params;\n\n  var p1x = 0;\n  var p1y = 1;\n  var p2x = 2;\n  var p2y = 3;\n  var D = 4;\n\n  this.error = function() {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    return (d - params[D].get());\n  };\n\n  this.gradient = function(out) {\n    var dx = params[p1x].get() - params[p2x].get();\n    var dy = params[p1y].get() - params[p2y].get();\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d == 0) {\n      if (params[D].get() == 0) return;\n      d = 0.000001;\n    }\n    out[p1x] = dx / d;\n    out[p1y] = dy / d;\n    out[p2x] = -dx / d;\n    out[p2y] = -dy / d;\n    out[D] = -1;\n  }\n}\n\n/** @constructor */\nfunction Parallel(params) {\n\n  this.params = params;\n\n  var l1p1x = 0;\n  var l1p1y = 1;\n  var l1p2x = 2;\n  var l1p2y = 3;\n  var l2p1x = 4;\n  var l2p1y = 5;\n  var l2p2x = 6;\n  var l2p2y = 7;\n  \n  this.error = function() {\n    var dx1 = (params[l1p1x].get() - params[l1p2x].get());\n    var dy1 = (params[l1p1y].get() - params[l1p2y].get());\n    var dx2 = (params[l2p1x].get() - params[l2p2x].get());\n    var dy2 = (params[l2p1y].get() - params[l2p2y].get());\n    return (dx1*dy2 - dy1*dx2);\n  };\n\n  this.gradient = function(out) {\n    out[l1p1x] =  (params[l2p1y].get() - params[l2p2y].get());\n    out[l1p2x] = -(params[l2p1y].get() - params[l2p2y].get());\n    out[l1p1y] = -(params[l2p1x].get() - params[l2p2x].get());\n    out[l1p2y] =  (params[l2p1x].get() - params[l2p2x].get());\n    out[l2p1x] = -(params[l1p1y].get() - params[l1p2y].get());\n    out[l2p2x] =  (params[l1p1y].get() - params[l1p2y].get());\n    out[l2p1y] =  (params[l1p1x].get() - params[l1p2x].get());\n    out[l2p2y] = -(params[l1p1x].get() - params[l1p2x].get());\n  }\n}\n\n/** @constructor */\nfunction Perpendicular(params) {\n\n  this.params = params;\n\n  var l1p1x = 0;\n  var l1p1y = 1;\n  var l1p2x = 2;\n  var l1p2y = 3;\n  var l2p1x = 4;\n  var l2p1y = 5;\n  var l2p2x = 6;\n  var l2p2y = 7;\n\n  this.error = function() {\n    var dx1 = (params[l1p1x].get() - params[l1p2x].get());\n    var dy1 = (params[l1p1y].get() - params[l1p2y].get());\n    var dx2 = (params[l2p1x].get() - params[l2p2x].get());\n    var dy2 = (params[l2p1y].get() - params[l2p2y].get());\n    //dot product shows how the lines off to be perpendicular\n    return (dx1*dx2 + dy1*dy2);\n  };\n\n  this.gradient = function(out) {\n    out[l1p1x] =  (params[l2p1x].get() - params[l2p2x].get());\n    out[l1p2x] = -(params[l2p1x].get() - params[l2p2x].get());\n    out[l1p1y] =  (params[l2p1y].get() - params[l2p2y].get());\n    out[l1p2y] = -(params[l2p1y].get() - params[l2p2y].get());\n    out[l2p1x] =  (params[l1p1x].get() - params[l1p2x].get());\n    out[l2p2x] = -(params[l1p1x].get() - params[l1p2x].get());\n    out[l2p1y] =  (params[l1p1y].get() - params[l1p2y].get());\n    out[l2p2y] = -(params[l1p1y].get() - params[l1p2y].get());\n  }\n}\n\n/** @constructor */\nfunction Angle(params) {\n\n  this.params = params;\n\n  var l1p1x = 0;\n  var l1p1y = 1;\n  var l1p2x = 2;\n  var l1p2y = 3;\n  var l2p1x = 4;\n  var l2p1y = 5;\n  var l2p2x = 6;\n  var l2p2y = 7;\n  var angle = 8;\n  var scale = 1000; // we need scale to get same order of measure units(radians are to small)\n\n  function p(ref) {\n    return params[ref].get();\n  }\n\n  this.error = function() {\n    var dx1 = (p(l1p2x) - p(l1p1x));\n    var dy1 = (p(l1p2y) - p(l1p1y));\n    var dx2 = (p(l2p2x) - p(l2p1x));\n    var dy2 = (p(l2p2y) - p(l2p1y));\n    var a = Math.atan2(dy1,dx1) + p(angle);\n    var ca = Math.cos(a);\n    var sa = Math.sin(a);\n    var x2 = dx2*ca + dy2*sa;\n    var y2 = -dx2*sa + dy2*ca;\n    return Math.atan2(y2,x2) * scale;\n  };\n\n  this.gradient = function (out) {\n    var dx1 = (p(l1p2x) - p(l1p1x));\n    var dy1 = (p(l1p2y) - p(l1p1y));\n    var r2 = dx1 * dx1 + dy1 * dy1;\n    out[l1p1x] = -dy1 / r2;\n    out[l1p1y] = dx1 / r2;\n    out[l1p2x] = dy1 / r2;\n    out[l1p2y] = -dx1 / r2;\n    dx1 = (p(l1p2x) - p(l1p1x));\n    dy1 = (p(l1p2y) - p(l1p1y));\n    var dx2 = (p(l2p2x) - p(l2p1x));\n    var dy2 = (p(l2p2y) - p(l2p1y));\n    var a = Math.atan2(dy1, dx1) + p(angle);\n    var ca = Math.cos(a);\n    var sa = Math.sin(a);\n    var x2 = dx2 * ca + dy2 * sa;\n    var y2 = -dx2 * sa + dy2 * ca;\n    r2 = dx2 * dx2 + dy2 * dy2;\n    dx2 = -y2 / r2;\n    dy2 = x2 / r2;\n    out[l2p1x] = (-ca * dx2 + sa * dy2);\n    out[l2p1y] = (-sa * dx2 - ca * dy2);\n    out[l2p2x] = ( ca * dx2 - sa * dy2);\n    out[l2p2y] = ( sa * dx2 + ca * dy2);\n    out[angle] = -1;\n    rescale(out, scale);\n  }\n}\n\n/** @constructor */\nfunction PointOnEllipse(params) {\n\n  this.params = params;\n\n  const PX = 0;\n  const PY = 1;\n  const EP1X = 2;\n  const EP1Y = 3;\n  const EP2X = 4;\n  const EP2Y = 5;\n  const R = 6;\n\n  this.error = function() {\n    const px = params[PX].get();\n    const py = params[PY].get();\n    const ep1x = params[EP1X].get();\n    const ep1y = params[EP1Y].get();\n    const ep2x = params[EP2X].get();\n    const ep2y = params[EP2Y].get();\n    const radiusY = params[R].get();\n  \n    const centerX = ep1x + (ep2x - ep1x) * 0.5;\n    const centerY = ep1y + (ep2y - ep1y) * 0.5;\n    const rotation = Math.atan2(ep2y - ep1y, ep2x - ep1x);\n\n    let x = px - centerX;\n    let y = py - centerY;\n\n    const polarAngle = Math.atan2(y, x) - rotation;\n    const polarRadius = Math.sqrt(x*x + y*y);\n    const radiusX = Math.sqrt(sq(ep1x - ep2x) + sq(ep1y - ep2y)) * 0.5;\n    \n    const L = Math.sqrt(1/( sq(Math.cos(polarAngle)/radiusX) + sq(Math.sin(polarAngle)/radiusY)));\n    return L - polarRadius\n  };\n\n  this.gradient = NumericGradient;\n}\n\n/** @constructor */\nfunction EllipseTangent(params) {\n\n  this.params = params;\n\n  const P1X = 0;\n  const P1Y = 1;\n  const P2X = 2;\n  const P2Y = 3;\n  const EP1X = 4;\n  const EP1Y = 5;\n  const EP2X = 6;\n  const EP2Y = 7;\n  const R = 8;\n\n  this.error = function(gr) {\n    let p1x = params[P1X].get();\n    let p1y = params[P1Y].get();\n    let p2x = params[P2X].get();\n    let p2y = params[P2Y].get();\n\n    let ep1x = params[EP1X].get();\n    let ep1y = params[EP1Y].get();\n    let ep2x = params[EP2X].get();\n    let ep2y = params[EP2Y].get();\n    \n    const radiusY = params[R].get();\n\n    let axisX = ep2x - ep1x;\n    let axisY = ep2y - ep1y;\n    const radiusX = Math.sqrt(sq(axisX) + sq(axisY)) * 0.5;\n    const scaleToCircleSpace = radiusY / radiusX;\n    const rotation = - Math.atan2(axisY, axisX);\n    function tr(x, y) {\n      let xx =  x * Math.cos(rotation) - y * Math.sin(rotation)\n      let yy =  x * Math.sin(rotation) + y * Math.cos(rotation);\n      xx *= scaleToCircleSpace;\n      return {x: xx, y: yy};\n    }\n    \n    const axis = tr(axisX, axisY);\n    const p1 = tr(p1x, p1y);\n    const p2 = tr(p2x, p2y);\n    const ep1 = tr(ep1x, ep1y);\n\n    const centerX = ep1.x + axis.x * 0.5;\n    const centerY = ep1.y + axis.y * 0.5;\n    \n    \n    let normalX = -(p2.y - p1.y);\n    let normalY =   p2.x - p1.x;\n    \n    const normalD = Math.sqrt(sq(normalX) + sq(normalY));\n    normalX /= normalD;\n    normalY /= normalD;\n      \n      //this length of normal of line to center \n    let perpendicularLength = (centerX - p1.x) * normalX + (centerY - p1.y) * normalY;\n\n    if (perpendicularLength < 0) {\n      perpendicularLength *= -1;\n    } else {\n    }\n    \n    return (radiusY - perpendicularLength); //*1000;\n  };\n\n  this.gradient = NumericGradient;\n}\n\nfunction GreaterThan(params, limit) {\n\n  this.params = params;\n  \n  this.error = function() {\n    let value = this.params[0].get();\n    var error = value <= limit ? limit - value : 0;\n    console.log(\"GreaterThan: \" + error + \", value: \" +value);\n    return error;\n  };\n\n  this.gradient = function(out) {\n    out[0] = -1;\n  }\n}\n\n\nfunction NumericGradient(out) {\n  const h = 1;\n  const approx = (param) => {\n    const fx = this.error();\n    this.params[param].set(this.params[param].get() + h);\n    const fhx = this.error();\n    this.params[param].set(this.params[param].get() - h);\n    return (fhx - fx) / h;\n  };\n\n  for (var i = 0; i < out.length; i++) {\n    out[i] = approx(i);\n  }\n}\n\nfunction _fixNaN(grad) {\n  for (var i = 0; i < grad.length; i++) {\n    if (isNaN(grad[i])) {\n      grad[i] = 0;\n    }\n  }\n}\n\nfunction rescale(grad, factor) {\n  for (var i = 0; i < grad.length; i++) {\n    grad[i] *= factor;\n  }\n}\n\nconst sq = x => x * x;\n\nexport {createByConstraintName, EqualsTo, ConstantWrapper}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/constr/constraints.js\n **/","import numeric from 'numeric';\nimport {_vec, _matrix} from './math'\n\n//Added strong wolfe condition to numeric's uncmin\nvar bfgs_ = function(f,x0,tol,gradient,maxit,callback,options) {\n  var grad = numeric.gradient;\n  if(typeof options === \"undefined\") { options = {}; }\n  if(typeof tol === \"undefined\") { tol = 1e-8; }\n  if(typeof gradient === \"undefined\") { gradient = function(x) { return grad(f,x); }; }\n  if(typeof maxit === \"undefined\") maxit = 1000;\n  x0 = numeric.clone(x0);\n  var n = x0.length;\n  var f0 = f(x0),f1,df0;\n  if(isNaN(f0)) throw new Error('uncmin: f(x0) is a NaN!');\n  var max = Math.max, norm2 = numeric.norm2;\n  tol = max(tol,numeric.epsilon);\n  var step,g0,g1,H1 = options.Hinv || numeric.identity(n);\n  var dot = numeric.dot, inv = numeric.inv, sub = numeric.sub, add = numeric.add, ten = numeric.tensor, div = numeric.div, mul = numeric.mul;\n  var all = numeric.all, isfinite = numeric.isFinite, neg = numeric.neg;\n  var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;\n  var msg = \"\";\n  g0 = gradient(x0);\n  while(it<maxit) {\n    if(typeof callback === \"function\") { if(callback(it,x0,f0,g0,H1)) { msg = \"Callback returned true\"; break; } }\n    if(!all(isfinite(g0))) { msg = \"Gradient has Infinity or NaN\"; break; }\n    step = neg(dot(H1,g0));\n    if(!all(isfinite(step))) { msg = \"Search direction has Infinity or NaN\"; break; }\n    nstep = norm2(step);\n    if(nstep < tol) { msg=\"Newton step smaller than tol\"; break; }\n    t = 1;\n    df0 = dot(g0,step);\n    // line search\n    x1 = x0;\n    var tL = 0;\n    var tR = 100;\n    while(it < maxit) {\n      if(t*nstep < tol) { break; }\n      s = mul(step,t);\n      x1 = add(x0,s);\n      f1 = f(x1);\n      //Nocadel, 3.7(a,b)\n      if(f1-f0 >= 0.1*t*df0 || isNaN(f1)) {\n        tR = t;\n        t = (tL + tR) * 0.5;\n        ++it;\n      } else {\n        var slope = dot(gradient(x1), step);\n        if (slope <= 0.9 * Math.abs(df0)){\n          break;\n        }else if ( slope >= 0.9 * df0) {\n          tR = t;\n          t = (tL+ tR) * 0.5;\n        }else{\n          tL = t;\n          t = (tL+ tR)*0.5;\n        }\n      }\n    }\n    if(t*nstep < tol) { msg = \"Line search step size smaller than tol\"; break; }\n    if(it === maxit) { msg = \"maxit reached during line search\"; break; }\n    g1 = gradient(x1);\n    y = sub(g1,g0);\n    ys = dot(y,s);\n    Hy = dot(H1,y);\n\n    // BFGS update on H1\n    H1 = sub(add(H1,\n            mul(\n                    (ys+dot(y,Hy))/(ys*ys),\n                ten(s,s)    )),\n        div(add(ten(Hy,s),ten(s,Hy)),ys));\n    x0 = x1;\n    f0 = f1;\n    g0 = g1;\n    ++it;\n  }\n  return {solution: x0, f: f0, gradient: g0, invHessian: H1, iterations:it, message: msg};\n};\n\n\nvar bfgs = function(f,x0,tol,gradient,maxit,callback,options) {\n  var grad = numeric.gradient;\n  if(typeof options === \"undefined\") { options = {}; }\n  if(typeof tol === \"undefined\") { tol = 1e-8; }\n  if(typeof gradient === \"undefined\") { gradient = function(x) { return grad(f,x); }; }\n  if(typeof maxit === \"undefined\") maxit = 1000;\n  x0 = numeric.clone(x0);\n  var n = x0.length;\n  var f0 = f(x0),f1,df0;\n  if(isNaN(f0)) throw new Error('uncmin: f(x0) is a NaN!');\n  var max = Math.max, norm2 = numeric.norm2;\n  tol = max(tol,numeric.epsilon);\n  var step,g0,g1,H1 = options.Hinv || numeric.identity(n);\n  var dot = numeric.dot, inv = numeric.inv, sub = numeric.sub, add = numeric.add, ten = numeric.tensor, div = numeric.div, mul = numeric.mul;\n  var all = numeric.all, isfinite = numeric.isFinite, neg = numeric.neg;\n  var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;\n  var msg = \"\";\n  g0 = gradient(x0);\n  while(it<maxit) {\n    if(typeof callback === \"function\") { if(callback(it,x0,f0,g0,H1)) { msg = \"Callback returned true\"; break; } }\n    if(!all(isfinite(g0))) { msg = \"Gradient has Infinity or NaN\"; break; }\n    step = neg(dot(H1,g0));\n    if(!all(isfinite(step))) { msg = \"Search direction has Infinity or NaN\"; break; }\n    nstep = norm2(step);\n    if(nstep < tol) { msg=\"Newton step smaller than tol\"; break; }\n\n    df0 = dot(g0,step);\n    // line search\n    t1 = 0.0;\n    f1 = f0;\n\n    t2 = 1.0;\n    s = mul(step,t2);\n    x1 = add(x0,s);\n    var f2 = f(x1);\n\n    var t3 = 2.0;\n    s = mul(step,t3);\n    x1 = add(x0,s);\n    var f3 = f(x1);\n    var tMax = 1e23;\n\n    while( (f2 > f1 || f2 > f3) && it < maxit) {\n      if(t*nstep < tol) { break; }\n      if (f2 > f1) {\n        //If f2 is greater than f1 then we shorten alpha2 and alpha3 closer to f1\n        //Effectively both are shortened by a factor of two.\n        t3 = t2;\n        f3 = f2;\n        t2 = t2 / 2;\n\n        s = mul(step,t2);\n        x1 = add(x0,s);\n        f2 = f(x1);\n      }\n      else if (f2 > f3) {\n        if (t3 >= tMax)\n            break;\n        //If f2 is greater than f3 then we increase alpha2 and alpha3 away from f1\n        //Effectively both are lengthened by a factor of two.\n        t2 = t3;\n        f2 = f3;\n        t3 = t3 * 2;\n\n        s = mul(step,t3);\n        x1 = add(x0,s);\n        f3 = f(x1);\n      }\n      it ++;\n    }\n\n    //Get the alpha for the minimum f of the quadratic approximation\n    var ts = t2 + ((t2-t1)*(f1-f3))/(3*(f1-2*f2+f3));\n\n    //Guarantee that the new alphaStar is within the bracket\n    if (ts >= t3 || ts <= t1)\n        ts = t2;\n\n    if (ts > tMax)\n        ts = tMax;\n\n    if (ts != ts)\n        ts = 0.;\n\n    //Take a final step to alphaStar\n    s = mul(step,ts);\n    x1 = add(x0,s);\n    f1 = f(x1);\n\n\n    if(t*nstep < tol) { msg = \"Line search step size smaller than tol\"; break; }\n    if(it === maxit) { msg = \"maxit reached during line search\"; break; }\n    g1 = gradient(x1);\n    y = sub(g1,g0);\n    ys = dot(y,s);\n    Hy = dot(H1,y);\n\n    // BFGS update on H1\n    H1 = sub(add(H1,\n            mul(\n                    (ys+dot(y,Hy))/(ys*ys),\n                ten(s,s)    )),\n        div(add(ten(Hy,s),ten(s,Hy)),ys));\n    x0 = x1;\n    f0 = f1;\n    g0 = g1;\n    ++it;\n  }\n  return {solution: x0, f: f0, gradient: g0, invHessian: H1, iterations:it, message: msg};\n};\n\nvar bfgs_updater = function(gradient, x0) {\n  var n = x0.length;\n  var max = Math.max, norm2 = numeric.norm2;\n  var g0,g1,H1 = numeric.identity(n);\n  var dot = numeric.dot, inv = numeric.inv, sub = numeric.sub, add = numeric.add, ten = numeric.tensor, div = numeric.div, mul = numeric.mul;\n  var all = numeric.all, isfinite = numeric.isFinite, neg = numeric.neg;\n  var y,Hy,Hs,ys;\n  var msg = \"\";\n  g0 = gradient(x0);\n\n  function step() {\n    return neg(dot(H1,g0));\n  }\n\n  function update(x, real_step) {\n    var s = real_step;\n\n    g1 = gradient(x);\n    y = sub(g1,g0);\n    ys = dot(y,s);\n    Hy = dot(H1,y);\n\n    // BFGS update on H1\n    H1 = sub(add(H1,\n            mul(\n                    (ys+dot(y,Hy))/(ys*ys),\n                ten(s,s)    )),\n        div(add(ten(Hy,s),ten(s,Hy)),ys));\n    g0 = g1;\n  }\n  return {step:step, update:update};\n};\n\nvar inv = function inv(A) {\n    A = numeric.clone(A);\n    var s = numeric.dim(A), abs = Math.abs, m = s[0], n = s[1];\n    var Ai, Aj;\n    var I = numeric.identity(m), Ii, Ij;\n    var i,j,k,x;\n    for(j=0;j<n;++j) {\n        var i0 = -1;\n        var v0 = -1;\n        for(i=j;i!==m;++i) { k = abs(A[i][j]); if(k>v0) { i0 = i; v0 = k; } }\n        Aj = A[i0]; A[i0] = A[j]; A[j] = Aj;\n        Ij = I[i0]; I[i0] = I[j]; I[j] = Ij;\n        x = Aj[j];\n        if (x === 0) {\n          console.log(\"CAN' INVERSE MATRIX\");\n          x = 1e-32\n        }\n        for(k=j;k!==n;++k)    Aj[k] /= x;\n        for(k=n-1;k!==-1;--k) Ij[k] /= x;\n        for(i=m-1;i!==-1;--i) {\n            if(i!==j) {\n                Ai = A[i];\n                Ii = I[i];\n                x = Ai[j];\n                for(k=j+1;k!==n;++k)  Ai[k] -= Aj[k]*x;\n                for(k=n-1;k>0;--k) { Ii[k] -= Ij[k]*x; --k; Ii[k] -= Ij[k]*x; }\n                if(k===0) Ii[0] -= Ij[0]*x;\n            }\n        }\n    }\n    return I;\n};\n\nvar _result = function(evalCount, error, returnCode) {\n  this.evalCount = evalCount;\n  this.error = error;\n  this.returnCode = returnCode;\n};\n\nvar dog_leg = function (subsys, rough) {\n  //rough = true\n  //var tolg = rough ? 1e-3 : 1e-4;\n  var tolg, tolf;\n  if (rough) {\n    tolg = 1e-3;\n    tolf = 1e-3;\n  } else {\n    tolg = 1e-6;\n    tolf = 1e-6;\n  }\n\n  var tolx = 1e-80;\n\n  var xsize = subsys.params.length;\n  var csize = subsys.constraints.length;\n\n  if (xsize == 0) {\n    return new _result(0, 0, 1);\n  }\n\n  var vec = _vec;\n  var mx = _matrix;\n\n  var n = numeric;\n\n  var x = vec(xsize);\n  var x_new = vec(xsize);\n\n  var fx = vec(csize);\n  var fx_new = vec(csize);\n\n  var J = mx(csize, xsize);\n  var J_new = mx(csize, xsize);\n  var gn_step = vec(xsize);\n  var dl_step = vec(xsize);\n\n  subsys.fillParams(x);\n  var err = subsys.calcResidual(fx);\n  subsys.fillJacobian(J);\n\n  function lsolve_slow(A, b) {\n    var At = n.transpose(A);\n    var res = n.dot(n.dot(At, inv(n.dot(A, At))), b);\n    return res;\n  }\n\n  function lsolve(A, b) {\n    if (csize < xsize) {\n      var At = n.transpose(A);\n      var sol = n.solve(n.dot(A, At), b, true);\n      return n.dot(At, sol);\n    } else {\n      return n.solve(A, b, false);\n    }\n  }\n\n  var g = n.dot(n.transpose(J), fx);\n  var g_inf = n.norminf(g);\n  var fx_inf = n.norminf(fx);\n  \n  var iterLimit = 100;\n  var divergenceLimit = 1e6 * (err + 1e6);\n\n  var delta = 10;\n  var alpha = 0.;\n  var iter = 0, returnCode = 0;\n  //var log = [];\n\n  var SUCCESS = 1, ITER_LIMIT = 2, SMALL_DELTA = 3, SMALL_STEP = 4, DIVERGENCE = 5, INVALID_STATE = 6;\n  \n  while (returnCode === 0) {\n    optim.DEBUG_HANDLER(iter, err);\n\n    if (fx_inf <= tolf) {\n      returnCode = SUCCESS;\n    } else if (g_inf <= tolg) {\n      returnCode = SUCCESS;\n    } else if (iter >= iterLimit) {\n      returnCode = ITER_LIMIT;\n    } else if (delta <= tolx * (tolx + n.norm2(x))) {\n      returnCode = SMALL_DELTA;\n    } else if (err > divergenceLimit) {\n      returnCode = DIVERGENCE;\n    } else if (isNaN(err)) {\n      returnCode = INVALID_STATE;\n    }\n\n    if (returnCode != 0) {\n      break;\n    }\n\n    // get the gauss-newton step\n    //gn_step = n.solve(J, n.mul(fx, -1));\n    gn_step = lsolve(J, n.mul(fx, -1));\n\n    //LU-Decomposition\n    //gn_step = lusolve(J, n.mul(fx, -1));\n\n    //Conjugate gradient method\n    //gn_step = cg(J, gn_step, n.mul(fx, -1), 1e-8, iterLimit);\n\n    //solve linear problem using svd formula to get the gauss-newton step\n    //gn_step = lls(J, n.mul(fx, -1));\n\n    var hitBoundary = false;\n\n    var gnorm = n.norm2(g);\n    var gnNorm = n.norm2(gn_step);\n    if (gnNorm < delta) {\n      dl_step = gn_step;\n    } else {\n      var Jt = n.transpose(J);\n      var B = n.dot(Jt, J);\n      var gBg = n.dot(g, n.dot(B, g));\n      alpha = n.norm2Squared(g) / gBg;\n      if (alpha * gnorm >= delta) {\n        dl_step = n.mul(g, - delta / gnorm);\n        hitBoundary = true;\n      } else {\n        var sd_step = n.mul(g, - alpha);\n        if (isNaN(gnNorm)) { \n          dl_step = sd_step;\n        } else {\n\n          var d = n.sub(gn_step, sd_step);\n\n          var a = n.dot(d, d);\n          var b = 2 * n.dot(sd_step, d);\n          var c = n.dot(sd_step, sd_step) - delta * delta;\n\n          var sqrt_discriminant = Math.sqrt(b * b - 4 * a * c);\n\n          var beta = (-b + sqrt_discriminant) / (2 * a);\n\n          dl_step = n.add(sd_step, n.mul(beta, d));\n          hitBoundary = true;\n        } \n      }\n    }\n\n    var dl_norm = n.norm2(dl_step);\n\n//    if (dl_norm <= tolx) {\n//      returnCode = SMALL_STEP;\n//      break;\n//    }\n    \n    x_new = n.add(x, dl_step);\n    subsys.setParams(x_new);\n    var err_new = subsys.calcResidual(fx_new);\n    subsys.fillJacobian(J_new);\n\n    var fxNormSq = n.norm2Squared(fx);\n    var dF = fxNormSq - n.norm2Squared(fx_new);\n    var dL = fxNormSq - n.norm2Squared( n.add(fx,  n.dot(J, dl_step)) );\n\n    var acceptCandidate;\n\n    if (dF == 0 || dL == 0) {\n      acceptCandidate = true;\n    } else {\n      var rho = dF / dL;\n      if (rho < 0.25) {\n        // if the model is a poor predictor reduce the size of the trust region\n        delta = 0.25 * dl_norm;\n        //delta *= 0.5;\n      } else {\n        // only increase the size of the trust region if it is taking a step of maximum size\n        // otherwise just assume it's doing good enough job\n        if (rho > 0.75 && hitBoundary) {\n          //delta = Math.max(delta,3*dl_norm);\n          delta *= 2;\n        }\n      }\n      acceptCandidate = rho > 0; // could be 0 .. 0.25\n    }\n    //log.push([stepKind,err,  delta,rho]);\n\n    if (acceptCandidate) {\n      x = n.clone(x_new);\n      J = n.clone(J_new);\n      fx = n.clone(fx_new);\n      err = err_new;\n\n      g = n.dot(n.transpose(J), fx);\n\n      // get infinity norms\n      g_inf = n.norminf(g);\n      fx_inf = n.norminf(fx);\n    }\n\n    iter++;\n  }\n  //log.push(returnCode);\n  //window.___log(log);\n  return new _result(iter, err, returnCode);\n};\n\nvar cg = function(A, x, b, tol, maxIt) {\n\n  var _ = numeric;\n\n  var tr = _.transpose;\n  var At = tr(A);\n  if (A.length != A[0].length) {\n    A = _.dot(At, A);\n    b = _.dot(At, b);\n  }\n\n  var r = _.sub(_.dot(A, x), b);\n  var p = _.mul(r, -1);\n  var rr = _.dotVV(r, r);\n\n  var a;\n  var _rr;\n  var beta;\n\n  for (var i = 0; i < maxIt; ++i) {\n    if (_.norm2(r) <= tol) break;\n    var Axp =_.dot(A, p);\n    a = rr / _.dotVV(Axp, p);\n    x = _.add(x, _.mul(p, a));\n    r = _.add(r, _.mul(Axp, a));\n    _rr = rr;\n    rr = _.dotVV(r, r);\n    beta = rr / _rr;\n    p = _.add(_.mul(r, -1), _.mul(p, beta));\n  }\n//  console.log(\"liner problem solved in \" + i);\n  return x;\n};\n\nvar optim = {DEBUG_HANDLER : function() {}}; //backward compatibility\n\nexport {dog_leg, optim}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/optim.js\n **/","\"use strict\";\n\nvar numeric = (typeof exports === \"undefined\")?(function numeric() {}):(exports);\nif(typeof global !== \"undefined\") { global.numeric = numeric; }\n\nnumeric.version = \"1.2.6\";\n\n// 1. Utility functions\nnumeric.bench = function bench (f,interval) {\n    var t1,t2,n,i;\n    if(typeof interval === \"undefined\") { interval = 15; }\n    n = 0.5;\n    t1 = new Date();\n    while(1) {\n        n*=2;\n        for(i=n;i>3;i-=4) { f(); f(); f(); f(); }\n        while(i>0) { f(); i--; }\n        t2 = new Date();\n        if(t2-t1 > interval) break;\n    }\n    for(i=n;i>3;i-=4) { f(); f(); f(); f(); }\n    while(i>0) { f(); i--; }\n    t2 = new Date();\n    return 1000*(3*n-1)/(t2-t1);\n}\n\nnumeric._myIndexOf = (function _myIndexOf(w) {\n    var n = this.length,k;\n    for(k=0;k<n;++k) if(this[k]===w) return k;\n    return -1;\n});\nnumeric.myIndexOf = (Array.prototype.indexOf)?Array.prototype.indexOf:numeric._myIndexOf;\n\nnumeric.Function = Function;\nnumeric.precision = 4;\nnumeric.largeArray = 50;\n\nnumeric.prettyPrint = function prettyPrint(x) {\n    function fmtnum(x) {\n        if(x === 0) { return '0'; }\n        if(isNaN(x)) { return 'NaN'; }\n        if(x<0) { return '-'+fmtnum(-x); }\n        if(isFinite(x)) {\n            var scale = Math.floor(Math.log(x) / Math.log(10));\n            var normalized = x / Math.pow(10,scale);\n            var basic = normalized.toPrecision(numeric.precision);\n            if(parseFloat(basic) === 10) { scale++; normalized = 1; basic = normalized.toPrecision(numeric.precision); }\n            return parseFloat(basic).toString()+'e'+scale.toString();\n        }\n        return 'Infinity';\n    }\n    var ret = [];\n    function foo(x) {\n        var k;\n        if(typeof x === \"undefined\") { ret.push(Array(numeric.precision+8).join(' ')); return false; }\n        if(typeof x === \"string\") { ret.push('\"'+x+'\"'); return false; }\n        if(typeof x === \"boolean\") { ret.push(x.toString()); return false; }\n        if(typeof x === \"number\") {\n            var a = fmtnum(x);\n            var b = x.toPrecision(numeric.precision);\n            var c = parseFloat(x.toString()).toString();\n            var d = [a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];\n            for(k=1;k<d.length;k++) { if(d[k].length < a.length) a = d[k]; }\n            ret.push(Array(numeric.precision+8-a.length).join(' ')+a);\n            return false;\n        }\n        if(x === null) { ret.push(\"null\"); return false; }\n        if(typeof x === \"function\") { \n            ret.push(x.toString());\n            var flag = false;\n            for(k in x) { if(x.hasOwnProperty(k)) { \n                if(flag) ret.push(',\\n');\n                else ret.push('\\n{');\n                flag = true; \n                ret.push(k); \n                ret.push(': \\n'); \n                foo(x[k]); \n            } }\n            if(flag) ret.push('}\\n');\n            return true;\n        }\n        if(x instanceof Array) {\n            if(x.length > numeric.largeArray) { ret.push('...Large Array...'); return true; }\n            var flag = false;\n            ret.push('[');\n            for(k=0;k<x.length;k++) { if(k>0) { ret.push(','); if(flag) ret.push('\\n '); } flag = foo(x[k]); }\n            ret.push(']');\n            return true;\n        }\n        ret.push('{');\n        var flag = false;\n        for(k in x) { if(x.hasOwnProperty(k)) { if(flag) ret.push(',\\n'); flag = true; ret.push(k); ret.push(': \\n'); foo(x[k]); } }\n        ret.push('}');\n        return true;\n    }\n    foo(x);\n    return ret.join('');\n}\n\nnumeric.parseDate = function parseDate(d) {\n    function foo(d) {\n        if(typeof d === 'string') { return Date.parse(d.replace(/-/g,'/')); }\n        if(!(d instanceof Array)) { throw new Error(\"parseDate: parameter must be arrays of strings\"); }\n        var ret = [],k;\n        for(k=0;k<d.length;k++) { ret[k] = foo(d[k]); }\n        return ret;\n    }\n    return foo(d);\n}\n\nnumeric.parseFloat = function parseFloat_(d) {\n    function foo(d) {\n        if(typeof d === 'string') { return parseFloat(d); }\n        if(!(d instanceof Array)) { throw new Error(\"parseFloat: parameter must be arrays of strings\"); }\n        var ret = [],k;\n        for(k=0;k<d.length;k++) { ret[k] = foo(d[k]); }\n        return ret;\n    }\n    return foo(d);\n}\n\nnumeric.parseCSV = function parseCSV(t) {\n    var foo = t.split('\\n');\n    var j,k;\n    var ret = [];\n    var pat = /(([^'\",]*)|('[^']*')|(\"[^\"]*\")),/g;\n    var patnum = /^\\s*(([+-]?[0-9]+(\\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\\.[0-9]+)?(e[+-]?[0-9]+)?))\\s*$/;\n    var stripper = function(n) { return n.substr(0,n.length-1); }\n    var count = 0;\n    for(k=0;k<foo.length;k++) {\n      var bar = (foo[k]+\",\").match(pat),baz;\n      if(bar.length>0) {\n          ret[count] = [];\n          for(j=0;j<bar.length;j++) {\n              baz = stripper(bar[j]);\n              if(patnum.test(baz)) { ret[count][j] = parseFloat(baz); }\n              else ret[count][j] = baz;\n          }\n          count++;\n      }\n    }\n    return ret;\n}\n\nnumeric.toCSV = function toCSV(A) {\n    var s = numeric.dim(A);\n    var i,j,m,n,row,ret;\n    m = s[0];\n    n = s[1];\n    ret = [];\n    for(i=0;i<m;i++) {\n        row = [];\n        for(j=0;j<m;j++) { row[j] = A[i][j].toString(); }\n        ret[i] = row.join(', ');\n    }\n    return ret.join('\\n')+'\\n';\n}\n\nnumeric.getURL = function getURL(url) {\n    var client = new XMLHttpRequest();\n    client.open(\"GET\",url,false);\n    client.send();\n    return client;\n}\n\nnumeric.imageURL = function imageURL(img) {\n    function base64(A) {\n        var n = A.length, i,x,y,z,p,q,r,s;\n        var key = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        var ret = \"\";\n        for(i=0;i<n;i+=3) {\n            x = A[i];\n            y = A[i+1];\n            z = A[i+2];\n            p = x >> 2;\n            q = ((x & 3) << 4) + (y >> 4);\n            r = ((y & 15) << 2) + (z >> 6);\n            s = z & 63;\n            if(i+1>=n) { r = s = 64; }\n            else if(i+2>=n) { s = 64; }\n            ret += key.charAt(p) + key.charAt(q) + key.charAt(r) + key.charAt(s);\n            }\n        return ret;\n    }\n    function crc32Array (a,from,to) {\n        if(typeof from === \"undefined\") { from = 0; }\n        if(typeof to === \"undefined\") { to = a.length; }\n        var table = [0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,\n                     0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91, \n                     0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE, 0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,\n                     0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5, \n                     0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B, \n                     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59, \n                     0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,\n                     0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924, 0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,\n                     0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,\n                     0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01, \n                     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457, \n                     0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65, \n                     0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2, 0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, \n                     0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9, \n                     0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F, \n                     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, \n                     0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683, \n                     0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8, 0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, \n                     0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7, \n                     0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5, \n                     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B, \n                     0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79, \n                     0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236, 0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, \n                     0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D, \n                     0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713, \n                     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, \n                     0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777, \n                     0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C, 0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, \n                     0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB, \n                     0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9, \n                     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF, \n                     0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D];\n     \n        var crc = -1, y = 0, n = a.length,i;\n\n        for (i = from; i < to; i++) {\n            y = (crc ^ a[i]) & 0xFF;\n            crc = (crc >>> 8) ^ table[y];\n        }\n     \n        return crc ^ (-1);\n    }\n\n    var h = img[0].length, w = img[0][0].length, s1, s2, next,k,length,a,b,i,j,adler32,crc32;\n    var stream = [\n                  137, 80, 78, 71, 13, 10, 26, 10,                           //  0: PNG signature\n                  0,0,0,13,                                                  //  8: IHDR Chunk length\n                  73, 72, 68, 82,                                            // 12: \"IHDR\" \n                  (w >> 24) & 255, (w >> 16) & 255, (w >> 8) & 255, w&255,   // 16: Width\n                  (h >> 24) & 255, (h >> 16) & 255, (h >> 8) & 255, h&255,   // 20: Height\n                  8,                                                         // 24: bit depth\n                  2,                                                         // 25: RGB\n                  0,                                                         // 26: deflate\n                  0,                                                         // 27: no filter\n                  0,                                                         // 28: no interlace\n                  -1,-2,-3,-4,                                               // 29: CRC\n                  -5,-6,-7,-8,                                               // 33: IDAT Chunk length\n                  73, 68, 65, 84,                                            // 37: \"IDAT\"\n                  // RFC 1950 header starts here\n                  8,                                                         // 41: RFC1950 CMF\n                  29                                                         // 42: RFC1950 FLG\n                  ];\n    crc32 = crc32Array(stream,12,29);\n    stream[29] = (crc32>>24)&255;\n    stream[30] = (crc32>>16)&255;\n    stream[31] = (crc32>>8)&255;\n    stream[32] = (crc32)&255;\n    s1 = 1;\n    s2 = 0;\n    for(i=0;i<h;i++) {\n        if(i<h-1) { stream.push(0); }\n        else { stream.push(1); }\n        a = (3*w+1+(i===0))&255; b = ((3*w+1+(i===0))>>8)&255;\n        stream.push(a); stream.push(b);\n        stream.push((~a)&255); stream.push((~b)&255);\n        if(i===0) stream.push(0);\n        for(j=0;j<w;j++) {\n            for(k=0;k<3;k++) {\n                a = img[k][i][j];\n                if(a>255) a = 255;\n                else if(a<0) a=0;\n                else a = Math.round(a);\n                s1 = (s1 + a )%65521;\n                s2 = (s2 + s1)%65521;\n                stream.push(a);\n            }\n        }\n        stream.push(0);\n    }\n    adler32 = (s2<<16)+s1;\n    stream.push((adler32>>24)&255);\n    stream.push((adler32>>16)&255);\n    stream.push((adler32>>8)&255);\n    stream.push((adler32)&255);\n    length = stream.length - 41;\n    stream[33] = (length>>24)&255;\n    stream[34] = (length>>16)&255;\n    stream[35] = (length>>8)&255;\n    stream[36] = (length)&255;\n    crc32 = crc32Array(stream,37);\n    stream.push((crc32>>24)&255);\n    stream.push((crc32>>16)&255);\n    stream.push((crc32>>8)&255);\n    stream.push((crc32)&255);\n    stream.push(0);\n    stream.push(0);\n    stream.push(0);\n    stream.push(0);\n//    a = stream.length;\n    stream.push(73);  // I\n    stream.push(69);  // E\n    stream.push(78);  // N\n    stream.push(68);  // D\n    stream.push(174); // CRC1\n    stream.push(66);  // CRC2\n    stream.push(96);  // CRC3\n    stream.push(130); // CRC4\n    return 'data:image/png;base64,'+base64(stream);\n}\n\n// 2. Linear algebra with Arrays.\nnumeric._dim = function _dim(x) {\n    var ret = [];\n    while(typeof x === \"object\") { ret.push(x.length); x = x[0]; }\n    return ret;\n}\n\nnumeric.dim = function dim(x) {\n    var y,z;\n    if(typeof x === \"object\") {\n        y = x[0];\n        if(typeof y === \"object\") {\n            z = y[0];\n            if(typeof z === \"object\") {\n                return numeric._dim(x);\n            }\n            return [x.length,y.length];\n        }\n        return [x.length];\n    }\n    return [];\n}\n\nnumeric.mapreduce = function mapreduce(body,init) {\n    return Function('x','accum','_s','_k',\n            'if(typeof accum === \"undefined\") accum = '+init+';\\n'+\n            'if(typeof x === \"number\") { var xi = x; '+body+'; return accum; }\\n'+\n            'if(typeof _s === \"undefined\") _s = numeric.dim(x);\\n'+\n            'if(typeof _k === \"undefined\") _k = 0;\\n'+\n            'var _n = _s[_k];\\n'+\n            'var i,xi;\\n'+\n            'if(_k < _s.length-1) {\\n'+\n            '    for(i=_n-1;i>=0;i--) {\\n'+\n            '        accum = arguments.callee(x[i],accum,_s,_k+1);\\n'+\n            '    }'+\n            '    return accum;\\n'+\n            '}\\n'+\n            'for(i=_n-1;i>=1;i-=2) { \\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+';\\n'+\n            '    xi = x[i-1];\\n'+\n            '    '+body+';\\n'+\n            '}\\n'+\n            'if(i === 0) {\\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+'\\n'+\n            '}\\n'+\n            'return accum;'\n            );\n}\nnumeric.mapreduce2 = function mapreduce2(body,setup) {\n    return Function('x',\n            'var n = x.length;\\n'+\n            'var i,xi;\\n'+setup+';\\n'+\n            'for(i=n-1;i!==-1;--i) { \\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+';\\n'+\n            '}\\n'+\n            'return accum;'\n            );\n}\n\n\nnumeric.same = function same(x,y) {\n    var i,n;\n    if(!(x instanceof Array) || !(y instanceof Array)) { return false; }\n    n = x.length;\n    if(n !== y.length) { return false; }\n    for(i=0;i<n;i++) {\n        if(x[i] === y[i]) { continue; }\n        if(typeof x[i] === \"object\") { if(!same(x[i],y[i])) return false; }\n        else { return false; }\n    }\n    return true;\n}\n\nnumeric.rep = function rep(s,v,k) {\n    if(typeof k === \"undefined\") { k=0; }\n    var n = s[k], ret = Array(n), i;\n    if(k === s.length-1) {\n        for(i=n-2;i>=0;i-=2) { ret[i+1] = v; ret[i] = v; }\n        if(i===-1) { ret[0] = v; }\n        return ret;\n    }\n    for(i=n-1;i>=0;i--) { ret[i] = numeric.rep(s,v,k+1); }\n    return ret;\n}\n\n\nnumeric.dotMMsmall = function dotMMsmall(x,y) {\n    var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;\n    p = x.length; q = y.length; r = y[0].length;\n    ret = Array(p);\n    for(i=p-1;i>=0;i--) {\n        foo = Array(r);\n        bar = x[i];\n        for(k=r-1;k>=0;k--) {\n            woo = bar[q-1]*y[q-1][k];\n            for(j=q-2;j>=1;j-=2) {\n                i0 = j-1;\n                woo += bar[j]*y[j][k] + bar[i0]*y[i0][k];\n            }\n            if(j===0) { woo += bar[0]*y[0][k]; }\n            foo[k] = woo;\n        }\n        ret[i] = foo;\n    }\n    return ret;\n}\nnumeric._getCol = function _getCol(A,j,x) {\n    var n = A.length, i;\n    for(i=n-1;i>0;--i) {\n        x[i] = A[i][j];\n        --i;\n        x[i] = A[i][j];\n    }\n    if(i===0) x[0] = A[0][j];\n}\nnumeric.dotMMbig = function dotMMbig(x,y){\n    var gc = numeric._getCol, p = y.length, v = Array(p);\n    var m = x.length, n = y[0].length, A = new Array(m), xj;\n    var VV = numeric.dotVV;\n    var i,j,k,z;\n    --p;\n    --m;\n    for(i=m;i!==-1;--i) A[i] = Array(n);\n    --n;\n    for(i=n;i!==-1;--i) {\n        gc(y,i,v);\n        for(j=m;j!==-1;--j) {\n            z=0;\n            xj = x[j];\n            A[j][i] = VV(xj,v);\n        }\n    }\n    return A;\n}\n\nnumeric.dotMV = function dotMV(x,y) {\n    var p = x.length, q = y.length,i;\n    var ret = Array(p), dotVV = numeric.dotVV;\n    for(i=p-1;i>=0;i--) { ret[i] = dotVV(x[i],y); }\n    return ret;\n}\n\nnumeric.dotVM = function dotVM(x,y) {\n    var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;\n    p = x.length; q = y[0].length;\n    ret = Array(q);\n    for(k=q-1;k>=0;k--) {\n        woo = x[p-1]*y[p-1][k];\n        for(j=p-2;j>=1;j-=2) {\n            i0 = j-1;\n            woo += x[j]*y[j][k] + x[i0]*y[i0][k];\n        }\n        if(j===0) { woo += x[0]*y[0][k]; }\n        ret[k] = woo;\n    }\n    return ret;\n}\n\nnumeric.dotVV = function dotVV(x,y) {\n    var i,n=x.length,i1,ret = x[n-1]*y[n-1];\n    for(i=n-2;i>=1;i-=2) {\n        i1 = i-1;\n        ret += x[i]*y[i] + x[i1]*y[i1];\n    }\n    if(i===0) { ret += x[0]*y[0]; }\n    return ret;\n}\n\nnumeric.dot = function dot(x,y) {\n    var d = numeric.dim;\n    switch(d(x).length*1000+d(y).length) {\n    case 2002:\n        if(y.length < 10) return numeric.dotMMsmall(x,y);\n        else return numeric.dotMMbig(x,y);\n    case 2001: return numeric.dotMV(x,y);\n    case 1002: return numeric.dotVM(x,y);\n    case 1001: return numeric.dotVV(x,y);\n    case 1000: return numeric.mulVS(x,y);\n    case 1: return numeric.mulSV(x,y);\n    case 0: return x*y;\n    default: throw new Error('numeric.dot only works on vectors and matrices');\n    }\n}\n\nnumeric.diag = function diag(d) {\n    var i,i1,j,n = d.length, A = Array(n), Ai;\n    for(i=n-1;i>=0;i--) {\n        Ai = Array(n);\n        i1 = i+2;\n        for(j=n-1;j>=i1;j-=2) {\n            Ai[j] = 0;\n            Ai[j-1] = 0;\n        }\n        if(j>i) { Ai[j] = 0; }\n        Ai[i] = d[i];\n        for(j=i-1;j>=1;j-=2) {\n            Ai[j] = 0;\n            Ai[j-1] = 0;\n        }\n        if(j===0) { Ai[0] = 0; }\n        A[i] = Ai;\n    }\n    return A;\n}\nnumeric.getDiag = function(A) {\n    var n = Math.min(A.length,A[0].length),i,ret = Array(n);\n    for(i=n-1;i>=1;--i) {\n        ret[i] = A[i][i];\n        --i;\n        ret[i] = A[i][i];\n    }\n    if(i===0) {\n        ret[0] = A[0][0];\n    }\n    return ret;\n}\n\nnumeric.identity = function identity(n) { return numeric.diag(numeric.rep([n],1)); }\nnumeric.pointwise = function pointwise(params,body,setup) {\n    if(typeof setup === \"undefined\") { setup = \"\"; }\n    var fun = [];\n    var k;\n    var avec = /\\[i\\]$/,p,thevec = '';\n    var haveret = false;\n    for(k=0;k<params.length;k++) {\n        if(avec.test(params[k])) {\n            p = params[k].substring(0,params[k].length-3);\n            thevec = p;\n        } else { p = params[k]; }\n        if(p==='ret') haveret = true;\n        fun.push(p);\n    }\n    fun[params.length] = '_s';\n    fun[params.length+1] = '_k';\n    fun[params.length+2] = (\n            'if(typeof _s === \"undefined\") _s = numeric.dim('+thevec+');\\n'+\n            'if(typeof _k === \"undefined\") _k = 0;\\n'+\n            'var _n = _s[_k];\\n'+\n            'var i'+(haveret?'':', ret = Array(_n)')+';\\n'+\n            'if(_k < _s.length-1) {\\n'+\n            '    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee('+params.join(',')+',_s,_k+1);\\n'+\n            '    return ret;\\n'+\n            '}\\n'+\n            setup+'\\n'+\n            'for(i=_n-1;i!==-1;--i) {\\n'+\n            '    '+body+'\\n'+\n            '}\\n'+\n            'return ret;'\n            );\n    return Function.apply(null,fun);\n}\nnumeric.pointwise2 = function pointwise2(params,body,setup) {\n    if(typeof setup === \"undefined\") { setup = \"\"; }\n    var fun = [];\n    var k;\n    var avec = /\\[i\\]$/,p,thevec = '';\n    var haveret = false;\n    for(k=0;k<params.length;k++) {\n        if(avec.test(params[k])) {\n            p = params[k].substring(0,params[k].length-3);\n            thevec = p;\n        } else { p = params[k]; }\n        if(p==='ret') haveret = true;\n        fun.push(p);\n    }\n    fun[params.length] = (\n            'var _n = '+thevec+'.length;\\n'+\n            'var i'+(haveret?'':', ret = Array(_n)')+';\\n'+\n            setup+'\\n'+\n            'for(i=_n-1;i!==-1;--i) {\\n'+\n            body+'\\n'+\n            '}\\n'+\n            'return ret;'\n            );\n    return Function.apply(null,fun);\n}\nnumeric._biforeach = (function _biforeach(x,y,s,k,f) {\n    if(k === s.length-1) { f(x,y); return; }\n    var i,n=s[k];\n    for(i=n-1;i>=0;i--) { _biforeach(typeof x===\"object\"?x[i]:x,typeof y===\"object\"?y[i]:y,s,k+1,f); }\n});\nnumeric._biforeach2 = (function _biforeach2(x,y,s,k,f) {\n    if(k === s.length-1) { return f(x,y); }\n    var i,n=s[k],ret = Array(n);\n    for(i=n-1;i>=0;--i) { ret[i] = _biforeach2(typeof x===\"object\"?x[i]:x,typeof y===\"object\"?y[i]:y,s,k+1,f); }\n    return ret;\n});\nnumeric._foreach = (function _foreach(x,s,k,f) {\n    if(k === s.length-1) { f(x); return; }\n    var i,n=s[k];\n    for(i=n-1;i>=0;i--) { _foreach(x[i],s,k+1,f); }\n});\nnumeric._foreach2 = (function _foreach2(x,s,k,f) {\n    if(k === s.length-1) { return f(x); }\n    var i,n=s[k], ret = Array(n);\n    for(i=n-1;i>=0;i--) { ret[i] = _foreach2(x[i],s,k+1,f); }\n    return ret;\n});\n\n/*numeric.anyV = numeric.mapreduce('if(xi) return true;','false');\nnumeric.allV = numeric.mapreduce('if(!xi) return false;','true');\nnumeric.any = function(x) { if(typeof x.length === \"undefined\") return x; return numeric.anyV(x); }\nnumeric.all = function(x) { if(typeof x.length === \"undefined\") return x; return numeric.allV(x); }*/\n\nnumeric.ops2 = {\n        add: '+',\n        sub: '-',\n        mul: '*',\n        div: '/',\n        mod: '%',\n        and: '&&',\n        or:  '||',\n        eq:  '===',\n        neq: '!==',\n        lt:  '<',\n        gt:  '>',\n        leq: '<=',\n        geq: '>=',\n        band: '&',\n        bor: '|',\n        bxor: '^',\n        lshift: '<<',\n        rshift: '>>',\n        rrshift: '>>>'\n};\nnumeric.opseq = {\n        addeq: '+=',\n        subeq: '-=',\n        muleq: '*=',\n        diveq: '/=',\n        modeq: '%=',\n        lshifteq: '<<=',\n        rshifteq: '>>=',\n        rrshifteq: '>>>=',\n        bandeq: '&=',\n        boreq: '|=',\n        bxoreq: '^='\n};\nnumeric.mathfuns = ['abs','acos','asin','atan','ceil','cos',\n                    'exp','floor','log','round','sin','sqrt','tan',\n                    'isNaN','isFinite'];\nnumeric.mathfuns2 = ['atan2','pow','max','min'];\nnumeric.ops1 = {\n        neg: '-',\n        not: '!',\n        bnot: '~',\n        clone: ''\n};\nnumeric.mapreducers = {\n        any: ['if(xi) return true;','var accum = false;'],\n        all: ['if(!xi) return false;','var accum = true;'],\n        sum: ['accum += xi;','var accum = 0;'],\n        prod: ['accum *= xi;','var accum = 1;'],\n        norm2Squared: ['accum += xi*xi;','var accum = 0;'],\n        norminf: ['accum = max(accum,abs(xi));','var accum = 0, max = Math.max, abs = Math.abs;'],\n        norm1: ['accum += abs(xi)','var accum = 0, abs = Math.abs;'],\n        sup: ['accum = max(accum,xi);','var accum = -Infinity, max = Math.max;'],\n        inf: ['accum = min(accum,xi);','var accum = Infinity, min = Math.min;']\n};\n\n(function () {\n    var i,o;\n    for(i=0;i<numeric.mathfuns2.length;++i) {\n        o = numeric.mathfuns2[i];\n        numeric.ops2[o] = o;\n    }\n    for(i in numeric.ops2) {\n        if(numeric.ops2.hasOwnProperty(i)) {\n            o = numeric.ops2[i];\n            var code, codeeq, setup = '';\n            if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1) {\n                setup = 'var '+o+' = Math.'+o+';\\n';\n                code = function(r,x,y) { return r+' = '+o+'('+x+','+y+')'; };\n                codeeq = function(x,y) { return x+' = '+o+'('+x+','+y+')'; };\n            } else {\n                code = function(r,x,y) { return r+' = '+x+' '+o+' '+y; };\n                if(numeric.opseq.hasOwnProperty(i+'eq')) {\n                    codeeq = function(x,y) { return x+' '+o+'= '+y; };\n                } else {\n                    codeeq = function(x,y) { return x+' = '+x+' '+o+' '+y; };                    \n                }\n            }\n            numeric[i+'VV'] = numeric.pointwise2(['x[i]','y[i]'],code('ret[i]','x[i]','y[i]'),setup);\n            numeric[i+'SV'] = numeric.pointwise2(['x','y[i]'],code('ret[i]','x','y[i]'),setup);\n            numeric[i+'VS'] = numeric.pointwise2(['x[i]','y'],code('ret[i]','x[i]','y'),setup);\n            numeric[i] = Function(\n                    'var n = arguments.length, i, x = arguments[0], y;\\n'+\n                    'var VV = numeric.'+i+'VV, VS = numeric.'+i+'VS, SV = numeric.'+i+'SV;\\n'+\n                    'var dim = numeric.dim;\\n'+\n                    'for(i=1;i!==n;++i) { \\n'+\n                    '  y = arguments[i];\\n'+\n                    '  if(typeof x === \"object\") {\\n'+\n                    '      if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n'+\n                    '      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n'+\n                    '  } else if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n'+\n                    '  else '+codeeq('x','y')+'\\n'+\n                    '}\\nreturn x;\\n');\n            numeric[o] = numeric[i];\n            numeric[i+'eqV'] = numeric.pointwise2(['ret[i]','x[i]'], codeeq('ret[i]','x[i]'),setup);\n            numeric[i+'eqS'] = numeric.pointwise2(['ret[i]','x'], codeeq('ret[i]','x'),setup);\n            numeric[i+'eq'] = Function(\n                    'var n = arguments.length, i, x = arguments[0], y;\\n'+\n                    'var V = numeric.'+i+'eqV, S = numeric.'+i+'eqS\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'for(i=1;i!==n;++i) { \\n'+\n                    '  y = arguments[i];\\n'+\n                    '  if(typeof y === \"object\") numeric._biforeach(x,y,s,0,V);\\n'+\n                    '  else numeric._biforeach(x,y,s,0,S);\\n'+\n                    '}\\nreturn x;\\n');\n        }\n    }\n    for(i=0;i<numeric.mathfuns2.length;++i) {\n        o = numeric.mathfuns2[i];\n        delete numeric.ops2[o];\n    }\n    for(i=0;i<numeric.mathfuns.length;++i) {\n        o = numeric.mathfuns[i];\n        numeric.ops1[o] = o;\n    }\n    for(i in numeric.ops1) {\n        if(numeric.ops1.hasOwnProperty(i)) {\n            setup = '';\n            o = numeric.ops1[i];\n            if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1) {\n                if(Math.hasOwnProperty(o)) setup = 'var '+o+' = Math.'+o+';\\n';\n            }\n            numeric[i+'eqV'] = numeric.pointwise2(['ret[i]'],'ret[i] = '+o+'(ret[i]);',setup);\n            numeric[i+'eq'] = Function('x',\n                    'if(typeof x !== \"object\") return '+o+'x\\n'+\n                    'var i;\\n'+\n                    'var V = numeric.'+i+'eqV;\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'numeric._foreach(x,s,0,V);\\n'+\n                    'return x;\\n');\n            numeric[i+'V'] = numeric.pointwise2(['x[i]'],'ret[i] = '+o+'(x[i]);',setup);\n            numeric[i] = Function('x',\n                    'if(typeof x !== \"object\") return '+o+'(x)\\n'+\n                    'var i;\\n'+\n                    'var V = numeric.'+i+'V;\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'return numeric._foreach2(x,s,0,V);\\n');\n        }\n    }\n    for(i=0;i<numeric.mathfuns.length;++i) {\n        o = numeric.mathfuns[i];\n        delete numeric.ops1[o];\n    }\n    for(i in numeric.mapreducers) {\n        if(numeric.mapreducers.hasOwnProperty(i)) {\n            o = numeric.mapreducers[i];\n            numeric[i+'V'] = numeric.mapreduce2(o[0],o[1]);\n            numeric[i] = Function('x','s','k',\n                    o[1]+\n                    'if(typeof x !== \"object\") {'+\n                    '    xi = x;\\n'+\n                    o[0]+';\\n'+\n                    '    return accum;\\n'+\n                    '}'+\n                    'if(typeof s === \"undefined\") s = numeric.dim(x);\\n'+\n                    'if(typeof k === \"undefined\") k = 0;\\n'+\n                    'if(k === s.length-1) return numeric.'+i+'V(x);\\n'+\n                    'var xi;\\n'+\n                    'var n = x.length, i;\\n'+\n                    'for(i=n-1;i!==-1;--i) {\\n'+\n                    '   xi = arguments.callee(x[i]);\\n'+\n                    o[0]+';\\n'+\n                    '}\\n'+\n                    'return accum;\\n');\n        }\n    }\n}());\n\nnumeric.truncVV = numeric.pointwise(['x[i]','y[i]'],'ret[i] = round(x[i]/y[i])*y[i];','var round = Math.round;');\nnumeric.truncVS = numeric.pointwise(['x[i]','y'],'ret[i] = round(x[i]/y)*y;','var round = Math.round;');\nnumeric.truncSV = numeric.pointwise(['x','y[i]'],'ret[i] = round(x/y[i])*y[i];','var round = Math.round;');\nnumeric.trunc = function trunc(x,y) {\n    if(typeof x === \"object\") {\n        if(typeof y === \"object\") return numeric.truncVV(x,y);\n        return numeric.truncVS(x,y);\n    }\n    if (typeof y === \"object\") return numeric.truncSV(x,y);\n    return Math.round(x/y)*y;\n}\n\nnumeric.inv = function inv(x) {\n    var s = numeric.dim(x), abs = Math.abs, m = s[0], n = s[1];\n    var A = numeric.clone(x), Ai, Aj;\n    var I = numeric.identity(m), Ii, Ij;\n    var i,j,k,x;\n    for(j=0;j<n;++j) {\n        var i0 = -1;\n        var v0 = -1;\n        for(i=j;i!==m;++i) { k = abs(A[i][j]); if(k>v0) { i0 = i; v0 = k; } }\n        Aj = A[i0]; A[i0] = A[j]; A[j] = Aj;\n        Ij = I[i0]; I[i0] = I[j]; I[j] = Ij;\n        x = Aj[j];\n        for(k=j;k!==n;++k)    Aj[k] /= x; \n        for(k=n-1;k!==-1;--k) Ij[k] /= x;\n        for(i=m-1;i!==-1;--i) {\n            if(i!==j) {\n                Ai = A[i];\n                Ii = I[i];\n                x = Ai[j];\n                for(k=j+1;k!==n;++k)  Ai[k] -= Aj[k]*x;\n                for(k=n-1;k>0;--k) { Ii[k] -= Ij[k]*x; --k; Ii[k] -= Ij[k]*x; }\n                if(k===0) Ii[0] -= Ij[0]*x;\n            }\n        }\n    }\n    return I;\n}\n\nnumeric.det = function det(x) {\n    var s = numeric.dim(x);\n    if(s.length !== 2 || s[0] !== s[1]) { throw new Error('numeric: det() only works on square matrices'); }\n    var n = s[0], ret = 1,i,j,k,A = numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;\n    for(j=0;j<n-1;j++) {\n        k=j;\n        for(i=j+1;i<n;i++) { if(Math.abs(A[i][j]) > Math.abs(A[k][j])) { k = i; } }\n        if(k !== j) {\n            temp = A[k]; A[k] = A[j]; A[j] = temp;\n            ret *= -1;\n        }\n        Aj = A[j];\n        for(i=j+1;i<n;i++) {\n            Ai = A[i];\n            alpha = Ai[j]/Aj[j];\n            for(k=j+1;k<n-1;k+=2) {\n                k1 = k+1;\n                Ai[k] -= Aj[k]*alpha;\n                Ai[k1] -= Aj[k1]*alpha;\n            }\n            if(k!==n) { Ai[k] -= Aj[k]*alpha; }\n        }\n        if(Aj[j] === 0) { return 0; }\n        ret *= Aj[j];\n    }\n    return ret*A[j][j];\n}\n\nnumeric.transpose = function transpose(x) {\n    var i,j,m = x.length,n = x[0].length, ret=Array(n),A0,A1,Bj;\n    for(j=0;j<n;j++) ret[j] = Array(m);\n    for(i=m-1;i>=1;i-=2) {\n        A1 = x[i];\n        A0 = x[i-1];\n        for(j=n-1;j>=1;--j) {\n            Bj = ret[j]; Bj[i] = A1[j]; Bj[i-1] = A0[j];\n            --j;\n            Bj = ret[j]; Bj[i] = A1[j]; Bj[i-1] = A0[j];\n        }\n        if(j===0) {\n            Bj = ret[0]; Bj[i] = A1[0]; Bj[i-1] = A0[0];\n        }\n    }\n    if(i===0) {\n        A0 = x[0];\n        for(j=n-1;j>=1;--j) {\n            ret[j][0] = A0[j];\n            --j;\n            ret[j][0] = A0[j];\n        }\n        if(j===0) { ret[0][0] = A0[0]; }\n    }\n    return ret;\n}\nnumeric.negtranspose = function negtranspose(x) {\n    var i,j,m = x.length,n = x[0].length, ret=Array(n),A0,A1,Bj;\n    for(j=0;j<n;j++) ret[j] = Array(m);\n    for(i=m-1;i>=1;i-=2) {\n        A1 = x[i];\n        A0 = x[i-1];\n        for(j=n-1;j>=1;--j) {\n            Bj = ret[j]; Bj[i] = -A1[j]; Bj[i-1] = -A0[j];\n            --j;\n            Bj = ret[j]; Bj[i] = -A1[j]; Bj[i-1] = -A0[j];\n        }\n        if(j===0) {\n            Bj = ret[0]; Bj[i] = -A1[0]; Bj[i-1] = -A0[0];\n        }\n    }\n    if(i===0) {\n        A0 = x[0];\n        for(j=n-1;j>=1;--j) {\n            ret[j][0] = -A0[j];\n            --j;\n            ret[j][0] = -A0[j];\n        }\n        if(j===0) { ret[0][0] = -A0[0]; }\n    }\n    return ret;\n}\n\nnumeric._random = function _random(s,k) {\n    var i,n=s[k],ret=Array(n), rnd;\n    if(k === s.length-1) {\n        rnd = Math.random;\n        for(i=n-1;i>=1;i-=2) {\n            ret[i] = rnd();\n            ret[i-1] = rnd();\n        }\n        if(i===0) { ret[0] = rnd(); }\n        return ret;\n    }\n    for(i=n-1;i>=0;i--) ret[i] = _random(s,k+1);\n    return ret;\n}\nnumeric.random = function random(s) { return numeric._random(s,0); }\n\nnumeric.norm2 = function norm2(x) { return Math.sqrt(numeric.norm2Squared(x)); }\n\nnumeric.linspace = function linspace(a,b,n) {\n    if(typeof n === \"undefined\") n = Math.max(Math.round(b-a)+1,1);\n    if(n<2) { return n===1?[a]:[]; }\n    var i,ret = Array(n);\n    n--;\n    for(i=n;i>=0;i--) { ret[i] = (i*b+(n-i)*a)/n; }\n    return ret;\n}\n\nnumeric.getBlock = function getBlock(x,from,to) {\n    var s = numeric.dim(x);\n    function foo(x,k) {\n        var i,a = from[k], n = to[k]-a, ret = Array(n);\n        if(k === s.length-1) {\n            for(i=n;i>=0;i--) { ret[i] = x[i+a]; }\n            return ret;\n        }\n        for(i=n;i>=0;i--) { ret[i] = foo(x[i+a],k+1); }\n        return ret;\n    }\n    return foo(x,0);\n}\n\nnumeric.setBlock = function setBlock(x,from,to,B) {\n    var s = numeric.dim(x);\n    function foo(x,y,k) {\n        var i,a = from[k], n = to[k]-a;\n        if(k === s.length-1) { for(i=n;i>=0;i--) { x[i+a] = y[i]; } }\n        for(i=n;i>=0;i--) { foo(x[i+a],y[i],k+1); }\n    }\n    foo(x,B,0);\n    return x;\n}\n\nnumeric.getRange = function getRange(A,I,J) {\n    var m = I.length, n = J.length;\n    var i,j;\n    var B = Array(m), Bi, AI;\n    for(i=m-1;i!==-1;--i) {\n        B[i] = Array(n);\n        Bi = B[i];\n        AI = A[I[i]];\n        for(j=n-1;j!==-1;--j) Bi[j] = AI[J[j]];\n    }\n    return B;\n}\n\nnumeric.blockMatrix = function blockMatrix(X) {\n    var s = numeric.dim(X);\n    if(s.length<4) return numeric.blockMatrix([X]);\n    var m=s[0],n=s[1],M,N,i,j,Xij;\n    M = 0; N = 0;\n    for(i=0;i<m;++i) M+=X[i][0].length;\n    for(j=0;j<n;++j) N+=X[0][j][0].length;\n    var Z = Array(M);\n    for(i=0;i<M;++i) Z[i] = Array(N);\n    var I=0,J,ZI,k,l,Xijk;\n    for(i=0;i<m;++i) {\n        J=N;\n        for(j=n-1;j!==-1;--j) {\n            Xij = X[i][j];\n            J -= Xij[0].length;\n            for(k=Xij.length-1;k!==-1;--k) {\n                Xijk = Xij[k];\n                ZI = Z[I+k];\n                for(l = Xijk.length-1;l!==-1;--l) ZI[J+l] = Xijk[l];\n            }\n        }\n        I += X[i][0].length;\n    }\n    return Z;\n}\n\nnumeric.tensor = function tensor(x,y) {\n    if(typeof x === \"number\" || typeof y === \"number\") return numeric.mul(x,y);\n    var s1 = numeric.dim(x), s2 = numeric.dim(y);\n    if(s1.length !== 1 || s2.length !== 1) {\n        throw new Error('numeric: tensor product is only defined for vectors');\n    }\n    var m = s1[0], n = s2[0], A = Array(m), Ai, i,j,xi;\n    for(i=m-1;i>=0;i--) {\n        Ai = Array(n);\n        xi = x[i];\n        for(j=n-1;j>=3;--j) {\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n        }\n        while(j>=0) { Ai[j] = xi * y[j]; --j; }\n        A[i] = Ai;\n    }\n    return A;\n}\n\n// 3. The Tensor type T\nnumeric.T = function T(x,y) { this.x = x; this.y = y; }\nnumeric.t = function t(x,y) { return new numeric.T(x,y); }\n\nnumeric.Tbinop = function Tbinop(rr,rc,cr,cc,setup) {\n    var io = numeric.indexOf;\n    if(typeof setup !== \"string\") {\n        var k;\n        setup = '';\n        for(k in numeric) {\n            if(numeric.hasOwnProperty(k) && (rr.indexOf(k)>=0 || rc.indexOf(k)>=0 || cr.indexOf(k)>=0 || cc.indexOf(k)>=0) && k.length>1) {\n                setup += 'var '+k+' = numeric.'+k+';\\n';\n            }\n        }\n    }\n    return Function(['y'],\n            'var x = this;\\n'+\n            'if(!(y instanceof numeric.T)) { y = new numeric.T(y); }\\n'+\n            setup+'\\n'+\n            'if(x.y) {'+\n            '  if(y.y) {'+\n            '    return new numeric.T('+cc+');\\n'+\n            '  }\\n'+\n            '  return new numeric.T('+cr+');\\n'+\n            '}\\n'+\n            'if(y.y) {\\n'+\n            '  return new numeric.T('+rc+');\\n'+\n            '}\\n'+\n            'return new numeric.T('+rr+');\\n'\n    );\n}\n\nnumeric.T.prototype.add = numeric.Tbinop(\n        'add(x.x,y.x)',\n        'add(x.x,y.x),y.y',\n        'add(x.x,y.x),x.y',\n        'add(x.x,y.x),add(x.y,y.y)');\nnumeric.T.prototype.sub = numeric.Tbinop(\n        'sub(x.x,y.x)',\n        'sub(x.x,y.x),neg(y.y)',\n        'sub(x.x,y.x),x.y',\n        'sub(x.x,y.x),sub(x.y,y.y)');\nnumeric.T.prototype.mul = numeric.Tbinop(\n        'mul(x.x,y.x)',\n        'mul(x.x,y.x),mul(x.x,y.y)',\n        'mul(x.x,y.x),mul(x.y,y.x)',\n        'sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))');\n\nnumeric.T.prototype.reciprocal = function reciprocal() {\n    var mul = numeric.mul, div = numeric.div;\n    if(this.y) {\n        var d = numeric.add(mul(this.x,this.x),mul(this.y,this.y));\n        return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d));\n    }\n    return new T(div(1,this.x));\n}\nnumeric.T.prototype.div = function div(y) {\n    if(!(y instanceof numeric.T)) y = new numeric.T(y);\n    if(y.y) { return this.mul(y.reciprocal()); }\n    var div = numeric.div;\n    if(this.y) { return new numeric.T(div(this.x,y.x),div(this.y,y.x)); }\n    return new numeric.T(div(this.x,y.x));\n}\nnumeric.T.prototype.dot = numeric.Tbinop(\n        'dot(x.x,y.x)',\n        'dot(x.x,y.x),dot(x.x,y.y)',\n        'dot(x.x,y.x),dot(x.y,y.x)',\n        'sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))'\n        );\nnumeric.T.prototype.transpose = function transpose() {\n    var t = numeric.transpose, x = this.x, y = this.y;\n    if(y) { return new numeric.T(t(x),t(y)); }\n    return new numeric.T(t(x));\n}\nnumeric.T.prototype.transjugate = function transjugate() {\n    var t = numeric.transpose, x = this.x, y = this.y;\n    if(y) { return new numeric.T(t(x),numeric.negtranspose(y)); }\n    return new numeric.T(t(x));\n}\nnumeric.Tunop = function Tunop(r,c,s) {\n    if(typeof s !== \"string\") { s = ''; }\n    return Function(\n            'var x = this;\\n'+\n            s+'\\n'+\n            'if(x.y) {'+\n            '  '+c+';\\n'+\n            '}\\n'+\n            r+';\\n'\n    );\n}\n\nnumeric.T.prototype.exp = numeric.Tunop(\n        'return new numeric.T(ex)',\n        'return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))',\n        'var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;');\nnumeric.T.prototype.conj = numeric.Tunop(\n        'return new numeric.T(x.x);',\n        'return new numeric.T(x.x,numeric.neg(x.y));');\nnumeric.T.prototype.neg = numeric.Tunop(\n        'return new numeric.T(neg(x.x));',\n        'return new numeric.T(neg(x.x),neg(x.y));',\n        'var neg = numeric.neg;');\nnumeric.T.prototype.sin = numeric.Tunop(\n        'return new numeric.T(numeric.sin(x.x))',\n        'return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));');\nnumeric.T.prototype.cos = numeric.Tunop(\n        'return new numeric.T(numeric.cos(x.x))',\n        'return x.exp().add(x.neg().exp()).div(2);');\nnumeric.T.prototype.abs = numeric.Tunop(\n        'return new numeric.T(numeric.abs(x.x));',\n        'return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));',\n        'var mul = numeric.mul;');\nnumeric.T.prototype.log = numeric.Tunop(\n        'return new numeric.T(numeric.log(x.x));',\n        'var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\\n'+\n        'return new numeric.T(numeric.log(r.x),theta.x);');\nnumeric.T.prototype.norm2 = numeric.Tunop(\n        'return numeric.norm2(x.x);',\n        'var f = numeric.norm2Squared;\\n'+\n        'return Math.sqrt(f(x.x)+f(x.y));');\nnumeric.T.prototype.inv = function inv() {\n    var A = this;\n    if(typeof A.y === \"undefined\") { return new numeric.T(numeric.inv(A.x)); }\n    var n = A.x.length, i, j, k;\n    var Rx = numeric.identity(n),Ry = numeric.rep([n,n],0);\n    var Ax = numeric.clone(A.x), Ay = numeric.clone(A.y);\n    var Aix, Aiy, Ajx, Ajy, Rix, Riy, Rjx, Rjy;\n    var i,j,k,d,d1,ax,ay,bx,by,temp;\n    for(i=0;i<n;i++) {\n        ax = Ax[i][i]; ay = Ay[i][i];\n        d = ax*ax+ay*ay;\n        k = i;\n        for(j=i+1;j<n;j++) {\n            ax = Ax[j][i]; ay = Ay[j][i];\n            d1 = ax*ax+ay*ay;\n            if(d1 > d) { k=j; d = d1; }\n        }\n        if(k!==i) {\n            temp = Ax[i]; Ax[i] = Ax[k]; Ax[k] = temp;\n            temp = Ay[i]; Ay[i] = Ay[k]; Ay[k] = temp;\n            temp = Rx[i]; Rx[i] = Rx[k]; Rx[k] = temp;\n            temp = Ry[i]; Ry[i] = Ry[k]; Ry[k] = temp;\n        }\n        Aix = Ax[i]; Aiy = Ay[i];\n        Rix = Rx[i]; Riy = Ry[i];\n        ax = Aix[i]; ay = Aiy[i];\n        for(j=i+1;j<n;j++) {\n            bx = Aix[j]; by = Aiy[j];\n            Aix[j] = (bx*ax+by*ay)/d;\n            Aiy[j] = (by*ax-bx*ay)/d;\n        }\n        for(j=0;j<n;j++) {\n            bx = Rix[j]; by = Riy[j];\n            Rix[j] = (bx*ax+by*ay)/d;\n            Riy[j] = (by*ax-bx*ay)/d;\n        }\n        for(j=i+1;j<n;j++) {\n            Ajx = Ax[j]; Ajy = Ay[j];\n            Rjx = Rx[j]; Rjy = Ry[j];\n            ax = Ajx[i]; ay = Ajy[i];\n            for(k=i+1;k<n;k++) {\n                bx = Aix[k]; by = Aiy[k];\n                Ajx[k] -= bx*ax-by*ay;\n                Ajy[k] -= by*ax+bx*ay;\n            }\n            for(k=0;k<n;k++) {\n                bx = Rix[k]; by = Riy[k];\n                Rjx[k] -= bx*ax-by*ay;\n                Rjy[k] -= by*ax+bx*ay;\n            }\n        }\n    }\n    for(i=n-1;i>0;i--) {\n        Rix = Rx[i]; Riy = Ry[i];\n        for(j=i-1;j>=0;j--) {\n            Rjx = Rx[j]; Rjy = Ry[j];\n            ax = Ax[j][i]; ay = Ay[j][i];\n            for(k=n-1;k>=0;k--) {\n                bx = Rix[k]; by = Riy[k];\n                Rjx[k] -= ax*bx - ay*by;\n                Rjy[k] -= ax*by + ay*bx;\n            }\n        }\n    }\n    return new numeric.T(Rx,Ry);\n}\nnumeric.T.prototype.get = function get(i) {\n    var x = this.x, y = this.y, k = 0, ik, n = i.length;\n    if(y) {\n        while(k<n) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        return new numeric.T(x,y);\n    }\n    while(k<n) {\n        ik = i[k];\n        x = x[ik];\n        k++;\n    }\n    return new numeric.T(x);\n}\nnumeric.T.prototype.set = function set(i,v) {\n    var x = this.x, y = this.y, k = 0, ik, n = i.length, vx = v.x, vy = v.y;\n    if(n===0) {\n        if(vy) { this.y = vy; }\n        else if(y) { this.y = undefined; }\n        this.x = x;\n        return this;\n    }\n    if(vy) {\n        if(y) { /* ok */ }\n        else {\n            y = numeric.rep(numeric.dim(x),0);\n            this.y = y;\n        }\n        while(k<n-1) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        ik = i[k];\n        x[ik] = vx;\n        y[ik] = vy;\n        return this;\n    }\n    if(y) {\n        while(k<n-1) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        ik = i[k];\n        x[ik] = vx;\n        if(vx instanceof Array) y[ik] = numeric.rep(numeric.dim(vx),0);\n        else y[ik] = 0;\n        return this;\n    }\n    while(k<n-1) {\n        ik = i[k];\n        x = x[ik];\n        k++;\n    }\n    ik = i[k];\n    x[ik] = vx;\n    return this;\n}\nnumeric.T.prototype.getRows = function getRows(i0,i1) {\n    var n = i1-i0+1, j;\n    var rx = Array(n), ry, x = this.x, y = this.y;\n    for(j=i0;j<=i1;j++) { rx[j-i0] = x[j]; }\n    if(y) {\n        ry = Array(n);\n        for(j=i0;j<=i1;j++) { ry[j-i0] = y[j]; }\n        return new numeric.T(rx,ry);\n    }\n    return new numeric.T(rx);\n}\nnumeric.T.prototype.setRows = function setRows(i0,i1,A) {\n    var j;\n    var rx = this.x, ry = this.y, x = A.x, y = A.y;\n    for(j=i0;j<=i1;j++) { rx[j] = x[j-i0]; }\n    if(y) {\n        if(!ry) { ry = numeric.rep(numeric.dim(rx),0); this.y = ry; }\n        for(j=i0;j<=i1;j++) { ry[j] = y[j-i0]; }\n    } else if(ry) {\n        for(j=i0;j<=i1;j++) { ry[j] = numeric.rep([x[j-i0].length],0); }\n    }\n    return this;\n}\nnumeric.T.prototype.getRow = function getRow(k) {\n    var x = this.x, y = this.y;\n    if(y) { return new numeric.T(x[k],y[k]); }\n    return new numeric.T(x[k]);\n}\nnumeric.T.prototype.setRow = function setRow(i,v) {\n    var rx = this.x, ry = this.y, x = v.x, y = v.y;\n    rx[i] = x;\n    if(y) {\n        if(!ry) { ry = numeric.rep(numeric.dim(rx),0); this.y = ry; }\n        ry[i] = y;\n    } else if(ry) {\n        ry = numeric.rep([x.length],0);\n    }\n    return this;\n}\n\nnumeric.T.prototype.getBlock = function getBlock(from,to) {\n    var x = this.x, y = this.y, b = numeric.getBlock;\n    if(y) { return new numeric.T(b(x,from,to),b(y,from,to)); }\n    return new numeric.T(b(x,from,to));\n}\nnumeric.T.prototype.setBlock = function setBlock(from,to,A) {\n    if(!(A instanceof numeric.T)) A = new numeric.T(A);\n    var x = this.x, y = this.y, b = numeric.setBlock, Ax = A.x, Ay = A.y;\n    if(Ay) {\n        if(!y) { this.y = numeric.rep(numeric.dim(this),0); y = this.y; }\n        b(x,from,to,Ax);\n        b(y,from,to,Ay);\n        return this;\n    }\n    b(x,from,to,Ax);\n    if(y) b(y,from,to,numeric.rep(numeric.dim(Ax),0));\n}\nnumeric.T.rep = function rep(s,v) {\n    var T = numeric.T;\n    if(!(v instanceof T)) v = new T(v);\n    var x = v.x, y = v.y, r = numeric.rep;\n    if(y) return new T(r(s,x),r(s,y));\n    return new T(r(s,x));\n}\nnumeric.T.diag = function diag(d) {\n    if(!(d instanceof numeric.T)) d = new numeric.T(d);\n    var x = d.x, y = d.y, diag = numeric.diag;\n    if(y) return new numeric.T(diag(x),diag(y));\n    return new numeric.T(diag(x));\n}\nnumeric.T.eig = function eig() {\n    if(this.y) { throw new Error('eig: not implemented for complex matrices.'); }\n    return numeric.eig(this.x);\n}\nnumeric.T.identity = function identity(n) { return new numeric.T(numeric.identity(n)); }\nnumeric.T.prototype.getDiag = function getDiag() {\n    var n = numeric;\n    var x = this.x, y = this.y;\n    if(y) { return new n.T(n.getDiag(x),n.getDiag(y)); }\n    return new n.T(n.getDiag(x));\n}\n\n// 4. Eigenvalues of real matrices\n\nnumeric.house = function house(x) {\n    var v = numeric.clone(x);\n    var s = x[0] >= 0 ? 1 : -1;\n    var alpha = s*numeric.norm2(x);\n    v[0] += alpha;\n    var foo = numeric.norm2(v);\n    if(foo === 0) { /* this should not happen */ throw new Error('eig: internal error'); }\n    return numeric.div(v,foo);\n}\n\nnumeric.toUpperHessenberg = function toUpperHessenberg(me) {\n    var s = numeric.dim(me);\n    if(s.length !== 2 || s[0] !== s[1]) { throw new Error('numeric: toUpperHessenberg() only works on square matrices'); }\n    var m = s[0], i,j,k,x,v,A = numeric.clone(me),B,C,Ai,Ci,Q = numeric.identity(m),Qi;\n    for(j=0;j<m-2;j++) {\n        x = Array(m-j-1);\n        for(i=j+1;i<m;i++) { x[i-j-1] = A[i][j]; }\n        if(numeric.norm2(x)>0) {\n            v = numeric.house(x);\n            B = numeric.getBlock(A,[j+1,j],[m-1,m-1]);\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<m;i++) { Ai = A[i]; Ci = C[i-j-1]; for(k=j;k<m;k++) Ai[k] -= 2*Ci[k-j]; }\n            B = numeric.getBlock(A,[0,j+1],[m-1,m-1]);\n            C = numeric.tensor(numeric.dot(B,v),v);\n            for(i=0;i<m;i++) { Ai = A[i]; Ci = C[i]; for(k=j+1;k<m;k++) Ai[k] -= 2*Ci[k-j-1]; }\n            B = Array(m-j-1);\n            for(i=j+1;i<m;i++) B[i-j-1] = Q[i];\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<m;i++) { Qi = Q[i]; Ci = C[i-j-1]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        }\n    }\n    return {H:A, Q:Q};\n}\n\nnumeric.epsilon = 2.220446049250313e-16;\n\nnumeric.QRFrancis = function(H,maxiter) {\n    if(typeof maxiter === \"undefined\") { maxiter = 10000; }\n    H = numeric.clone(H);\n    var H0 = numeric.clone(H);\n    var s = numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr, Hloc, Q = numeric.identity(m), Qi, Hi, B, C, Ci,i,j,k,iter;\n    if(m<3) { return {Q:Q, B:[ [0,m-1] ]}; }\n    var epsilon = numeric.epsilon;\n    for(iter=0;iter<maxiter;iter++) {\n        for(j=0;j<m-1;j++) {\n            if(Math.abs(H[j+1][j]) < epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))) {\n                var QH1 = numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);\n                var QH2 = numeric.QRFrancis(numeric.getBlock(H,[j+1,j+1],[m-1,m-1]),maxiter);\n                B = Array(j+1);\n                for(i=0;i<=j;i++) { B[i] = Q[i]; }\n                C = numeric.dot(QH1.Q,B);\n                for(i=0;i<=j;i++) { Q[i] = C[i]; }\n                B = Array(m-j-1);\n                for(i=j+1;i<m;i++) { B[i-j-1] = Q[i]; }\n                C = numeric.dot(QH2.Q,B);\n                for(i=j+1;i<m;i++) { Q[i] = C[i-j-1]; }\n                return {Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))};\n            }\n        }\n        a = H[m-2][m-2]; b = H[m-2][m-1];\n        c = H[m-1][m-2]; d = H[m-1][m-1];\n        tr = a+d;\n        det = (a*d-b*c);\n        Hloc = numeric.getBlock(H, [0,0], [2,2]);\n        if(tr*tr>=4*det) {\n            var s1,s2;\n            s1 = 0.5*(tr+Math.sqrt(tr*tr-4*det));\n            s2 = 0.5*(tr-Math.sqrt(tr*tr-4*det));\n            Hloc = numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),\n                                           numeric.mul(Hloc,s1+s2)),\n                               numeric.diag(numeric.rep([3],s1*s2)));\n        } else {\n            Hloc = numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),\n                                           numeric.mul(Hloc,tr)),\n                               numeric.diag(numeric.rep([3],det)));\n        }\n        x = [Hloc[0][0],Hloc[1][0],Hloc[2][0]];\n        v = numeric.house(x);\n        B = [H[0],H[1],H[2]];\n        C = numeric.tensor(v,numeric.dot(v,B));\n        for(i=0;i<3;i++) { Hi = H[i]; Ci = C[i]; for(k=0;k<m;k++) Hi[k] -= 2*Ci[k]; }\n        B = numeric.getBlock(H, [0,0],[m-1,2]);\n        C = numeric.tensor(numeric.dot(B,v),v);\n        for(i=0;i<m;i++) { Hi = H[i]; Ci = C[i]; for(k=0;k<3;k++) Hi[k] -= 2*Ci[k]; }\n        B = [Q[0],Q[1],Q[2]];\n        C = numeric.tensor(v,numeric.dot(v,B));\n        for(i=0;i<3;i++) { Qi = Q[i]; Ci = C[i]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        var J;\n        for(j=0;j<m-2;j++) {\n            for(k=j;k<=j+1;k++) {\n                if(Math.abs(H[k+1][k]) < epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))) {\n                    var QH1 = numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);\n                    var QH2 = numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);\n                    B = Array(k+1);\n                    for(i=0;i<=k;i++) { B[i] = Q[i]; }\n                    C = numeric.dot(QH1.Q,B);\n                    for(i=0;i<=k;i++) { Q[i] = C[i]; }\n                    B = Array(m-k-1);\n                    for(i=k+1;i<m;i++) { B[i-k-1] = Q[i]; }\n                    C = numeric.dot(QH2.Q,B);\n                    for(i=k+1;i<m;i++) { Q[i] = C[i-k-1]; }\n                    return {Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))};\n                }\n            }\n            J = Math.min(m-1,j+3);\n            x = Array(J-j);\n            for(i=j+1;i<=J;i++) { x[i-j-1] = H[i][j]; }\n            v = numeric.house(x);\n            B = numeric.getBlock(H, [j+1,j],[J,m-1]);\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<=J;i++) { Hi = H[i]; Ci = C[i-j-1]; for(k=j;k<m;k++) Hi[k] -= 2*Ci[k-j]; }\n            B = numeric.getBlock(H, [0,j+1],[m-1,J]);\n            C = numeric.tensor(numeric.dot(B,v),v);\n            for(i=0;i<m;i++) { Hi = H[i]; Ci = C[i]; for(k=j+1;k<=J;k++) Hi[k] -= 2*Ci[k-j-1]; }\n            B = Array(J-j);\n            for(i=j+1;i<=J;i++) B[i-j-1] = Q[i];\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<=J;i++) { Qi = Q[i]; Ci = C[i-j-1]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        }\n    }\n    throw new Error('numeric: eigenvalue iteration does not converge -- increase maxiter?');\n}\n\nnumeric.eig = function eig(A,maxiter) {\n    var QH = numeric.toUpperHessenberg(A);\n    var QB = numeric.QRFrancis(QH.H,maxiter);\n    var T = numeric.T;\n    var n = A.length,i,k,flag = false,B = QB.B,H = numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));\n    var Q = new T(numeric.dot(QB.Q,QH.Q)),Q0;\n    var m = B.length,j;\n    var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;\n    var sqrt = Math.sqrt;\n    for(k=0;k<m;k++) {\n        i = B[k][0];\n        if(i === B[k][1]) {\n            // nothing\n        } else {\n            j = i+1;\n            a = H[i][i];\n            b = H[i][j];\n            c = H[j][i];\n            d = H[j][j];\n            if(b === 0 && c === 0) continue;\n            p1 = -a-d;\n            p2 = a*d-b*c;\n            disc = p1*p1-4*p2;\n            if(disc>=0) {\n                if(p1<0) x = -0.5*(p1-sqrt(disc));\n                else     x = -0.5*(p1+sqrt(disc));\n                n1 = (a-x)*(a-x)+b*b;\n                n2 = c*c+(d-x)*(d-x);\n                if(n1>n2) {\n                    n1 = sqrt(n1);\n                    p = (a-x)/n1;\n                    q = b/n1;\n                } else {\n                    n2 = sqrt(n2);\n                    p = c/n2;\n                    q = (d-x)/n2;\n                }\n                Q0 = new T([[q,-p],[p,q]]);\n                Q.setRows(i,j,Q0.dot(Q.getRows(i,j)));\n            } else {\n                x = -0.5*p1;\n                y = 0.5*sqrt(-disc);\n                n1 = (a-x)*(a-x)+b*b;\n                n2 = c*c+(d-x)*(d-x);\n                if(n1>n2) {\n                    n1 = sqrt(n1+y*y);\n                    p = (a-x)/n1;\n                    q = b/n1;\n                    x = 0;\n                    y /= n1;\n                } else {\n                    n2 = sqrt(n2+y*y);\n                    p = c/n2;\n                    q = (d-x)/n2;\n                    x = y/n2;\n                    y = 0;\n                }\n                Q0 = new T([[q,-p],[p,q]],[[x,y],[y,-x]]);\n                Q.setRows(i,j,Q0.dot(Q.getRows(i,j)));\n            }\n        }\n    }\n    var R = Q.dot(A).dot(Q.transjugate()), n = A.length, E = numeric.T.identity(n);\n    for(j=0;j<n;j++) {\n        if(j>0) {\n            for(k=j-1;k>=0;k--) {\n                var Rk = R.get([k,k]), Rj = R.get([j,j]);\n                if(numeric.neq(Rk.x,Rj.x) || numeric.neq(Rk.y,Rj.y)) {\n                    x = R.getRow(k).getBlock([k],[j-1]);\n                    y = E.getRow(j).getBlock([k],[j-1]);\n                    E.set([j,k],(R.get([k,j]).neg().sub(x.dot(y))).div(Rk.sub(Rj)));\n                } else {\n                    E.setRow(j,E.getRow(k));\n                    continue;\n                }\n            }\n        }\n    }\n    for(j=0;j<n;j++) {\n        x = E.getRow(j);\n        E.setRow(j,x.div(x.norm2()));\n    }\n    E = E.transpose();\n    E = Q.transjugate().dot(E);\n    return { lambda:R.getDiag(), E:E };\n};\n\n// 5. Compressed Column Storage matrices\nnumeric.ccsSparse = function ccsSparse(A) {\n    var m = A.length,n,foo, i,j, counts = [];\n    for(i=m-1;i!==-1;--i) {\n        foo = A[i];\n        for(j in foo) {\n            j = parseInt(j);\n            while(j>=counts.length) counts[counts.length] = 0;\n            if(foo[j]!==0) counts[j]++;\n        }\n    }\n    var n = counts.length;\n    var Ai = Array(n+1);\n    Ai[0] = 0;\n    for(i=0;i<n;++i) Ai[i+1] = Ai[i] + counts[i];\n    var Aj = Array(Ai[n]), Av = Array(Ai[n]);\n    for(i=m-1;i!==-1;--i) {\n        foo = A[i];\n        for(j in foo) {\n            if(foo[j]!==0) {\n                counts[j]--;\n                Aj[Ai[j]+counts[j]] = i;\n                Av[Ai[j]+counts[j]] = foo[j];\n            }\n        }\n    }\n    return [Ai,Aj,Av];\n}\nnumeric.ccsFull = function ccsFull(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2], s = numeric.ccsDim(A), m = s[0], n = s[1], i,j,j0,j1,k;\n    var B = numeric.rep([m,n],0);\n    for(i=0;i<n;i++) {\n        j0 = Ai[i];\n        j1 = Ai[i+1];\n        for(j=j0;j<j1;++j) { B[Aj[j]][i] = Av[j]; }\n    }\n    return B;\n}\nnumeric.ccsTSolve = function ccsTSolve(A,b,x,bj,xj) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, max = Math.max,n=0;\n    if(typeof bj === \"undefined\") x = numeric.rep([m],0);\n    if(typeof bj === \"undefined\") bj = numeric.linspace(0,x.length-1);\n    if(typeof xj === \"undefined\") xj = [];\n    function dfs(j) {\n        var k;\n        if(x[j] !== 0) return;\n        x[j] = 1;\n        for(k=Ai[j];k<Ai[j+1];++k) dfs(Aj[k]);\n        xj[n] = j;\n        ++n;\n    }\n    var i,j,j0,j1,k,l,l0,l1,a;\n    for(i=bj.length-1;i!==-1;--i) { dfs(bj[i]); }\n    xj.length = n;\n    for(i=xj.length-1;i!==-1;--i) { x[xj[i]] = 0; }\n    for(i=bj.length-1;i!==-1;--i) { j = bj[i]; x[j] = b[j]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        j0 = Ai[j];\n        j1 = max(Ai[j+1],j0);\n        for(k=j0;k!==j1;++k) { if(Aj[k] === j) { x[j] /= Av[k]; break; } }\n        a = x[j];\n        for(k=j0;k!==j1;++k) {\n            l = Aj[k];\n            if(l !== j) x[l] -= a*Av[k];\n        }\n    }\n    return x;\n}\nnumeric.ccsDFS = function ccsDFS(n) {\n    this.k = Array(n);\n    this.k1 = Array(n);\n    this.j = Array(n);\n}\nnumeric.ccsDFS.prototype.dfs = function dfs(J,Ai,Aj,x,xj,Pinv) {\n    var m = 0,foo,n=xj.length;\n    var k = this.k, k1 = this.k1, j = this.j,km,k11;\n    if(x[J]!==0) return;\n    x[J] = 1;\n    j[0] = J;\n    k[0] = km = Ai[J];\n    k1[0] = k11 = Ai[J+1];\n    while(1) {\n        if(km >= k11) {\n            xj[n] = j[m];\n            if(m===0) return;\n            ++n;\n            --m;\n            km = k[m];\n            k11 = k1[m];\n        } else {\n            foo = Pinv[Aj[km]];\n            if(x[foo] === 0) {\n                x[foo] = 1;\n                k[m] = km;\n                ++m;\n                j[m] = foo;\n                km = Ai[foo];\n                k1[m] = k11 = Ai[foo+1];\n            } else ++km;\n        }\n    }\n}\nnumeric.ccsLPSolve = function ccsLPSolve(A,B,x,xj,I,Pinv,dfs) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, n=0;\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    \n    var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;\n    i0 = Bi[I];\n    i1 = Bi[I+1];\n    xj.length = 0;\n    for(i=i0;i<i1;++i) { dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv); }\n    for(i=xj.length-1;i!==-1;--i) { x[xj[i]] = 0; }\n    for(i=i0;i!==i1;++i) { j = Pinv[Bj[i]]; x[j] = Bv[i]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        j0 = Ai[j];\n        j1 = Ai[j+1];\n        for(k=j0;k<j1;++k) { if(Pinv[Aj[k]] === j) { x[j] /= Av[k]; break; } }\n        a = x[j];\n        for(k=j0;k<j1;++k) {\n            l = Pinv[Aj[k]];\n            if(l !== j) x[l] -= a*Av[k];\n        }\n    }\n    return x;\n}\nnumeric.ccsLUP1 = function ccsLUP1(A,threshold) {\n    var m = A[0].length-1;\n    var L = [numeric.rep([m+1],0),[],[]], U = [numeric.rep([m+1], 0),[],[]];\n    var Li = L[0], Lj = L[1], Lv = L[2], Ui = U[0], Uj = U[1], Uv = U[2];\n    var x = numeric.rep([m],0), xj = numeric.rep([m],0);\n    var i,j,k,j0,j1,a,e,c,d,K;\n    var sol = numeric.ccsLPSolve, max = Math.max, abs = Math.abs;\n    var P = numeric.linspace(0,m-1),Pinv = numeric.linspace(0,m-1);\n    var dfs = new numeric.ccsDFS(m);\n    if(typeof threshold === \"undefined\") { threshold = 1; }\n    for(i=0;i<m;++i) {\n        sol(L,A,x,xj,i,Pinv,dfs);\n        a = -1;\n        e = -1;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            if(k <= i) continue;\n            c = abs(x[k]);\n            if(c > a) { e = k; a = c; }\n        }\n        if(abs(x[i])<threshold*a) {\n            j = P[i];\n            a = P[e];\n            P[i] = a; Pinv[a] = i;\n            P[e] = j; Pinv[j] = e;\n            a = x[i]; x[i] = x[e]; x[e] = a;\n        }\n        a = Li[i];\n        e = Ui[i];\n        d = x[i];\n        Lj[a] = P[i];\n        Lv[a] = 1;\n        ++a;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            c = x[k];\n            xj[j] = 0;\n            x[k] = 0;\n            if(k<=i) { Uj[e] = k; Uv[e] = c;   ++e; }\n            else     { Lj[a] = P[k]; Lv[a] = c/d; ++a; }\n        }\n        Li[i+1] = a;\n        Ui[i+1] = e;\n    }\n    for(j=Lj.length-1;j!==-1;--j) { Lj[j] = Pinv[Lj[j]]; }\n    return {L:L, U:U, P:P, Pinv:Pinv};\n}\nnumeric.ccsDFS0 = function ccsDFS0(n) {\n    this.k = Array(n);\n    this.k1 = Array(n);\n    this.j = Array(n);\n}\nnumeric.ccsDFS0.prototype.dfs = function dfs(J,Ai,Aj,x,xj,Pinv,P) {\n    var m = 0,foo,n=xj.length;\n    var k = this.k, k1 = this.k1, j = this.j,km,k11;\n    if(x[J]!==0) return;\n    x[J] = 1;\n    j[0] = J;\n    k[0] = km = Ai[Pinv[J]];\n    k1[0] = k11 = Ai[Pinv[J]+1];\n    while(1) {\n        if(isNaN(km)) throw new Error(\"Ow!\");\n        if(km >= k11) {\n            xj[n] = Pinv[j[m]];\n            if(m===0) return;\n            ++n;\n            --m;\n            km = k[m];\n            k11 = k1[m];\n        } else {\n            foo = Aj[km];\n            if(x[foo] === 0) {\n                x[foo] = 1;\n                k[m] = km;\n                ++m;\n                j[m] = foo;\n                foo = Pinv[foo];\n                km = Ai[foo];\n                k1[m] = k11 = Ai[foo+1];\n            } else ++km;\n        }\n    }\n}\nnumeric.ccsLPSolve0 = function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, n=0;\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    \n    var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;\n    i0 = Bi[I];\n    i1 = Bi[I+1];\n    xj.length = 0;\n    for(i=i0;i<i1;++i) { dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P); }\n    for(i=xj.length-1;i!==-1;--i) { j = xj[i]; y[P[j]] = 0; }\n    for(i=i0;i!==i1;++i) { j = Bj[i]; y[j] = Bv[i]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        l = P[j];\n        j0 = Ai[j];\n        j1 = Ai[j+1];\n        for(k=j0;k<j1;++k) { if(Aj[k] === l) { y[l] /= Av[k]; break; } }\n        a = y[l];\n        for(k=j0;k<j1;++k) y[Aj[k]] -= a*Av[k];\n        y[l] = a;\n    }\n}\nnumeric.ccsLUP0 = function ccsLUP0(A,threshold) {\n    var m = A[0].length-1;\n    var L = [numeric.rep([m+1],0),[],[]], U = [numeric.rep([m+1], 0),[],[]];\n    var Li = L[0], Lj = L[1], Lv = L[2], Ui = U[0], Uj = U[1], Uv = U[2];\n    var y = numeric.rep([m],0), xj = numeric.rep([m],0);\n    var i,j,k,j0,j1,a,e,c,d,K;\n    var sol = numeric.ccsLPSolve0, max = Math.max, abs = Math.abs;\n    var P = numeric.linspace(0,m-1),Pinv = numeric.linspace(0,m-1);\n    var dfs = new numeric.ccsDFS0(m);\n    if(typeof threshold === \"undefined\") { threshold = 1; }\n    for(i=0;i<m;++i) {\n        sol(L,A,y,xj,i,Pinv,P,dfs);\n        a = -1;\n        e = -1;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            if(k <= i) continue;\n            c = abs(y[P[k]]);\n            if(c > a) { e = k; a = c; }\n        }\n        if(abs(y[P[i]])<threshold*a) {\n            j = P[i];\n            a = P[e];\n            P[i] = a; Pinv[a] = i;\n            P[e] = j; Pinv[j] = e;\n        }\n        a = Li[i];\n        e = Ui[i];\n        d = y[P[i]];\n        Lj[a] = P[i];\n        Lv[a] = 1;\n        ++a;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            c = y[P[k]];\n            xj[j] = 0;\n            y[P[k]] = 0;\n            if(k<=i) { Uj[e] = k; Uv[e] = c;   ++e; }\n            else     { Lj[a] = P[k]; Lv[a] = c/d; ++a; }\n        }\n        Li[i+1] = a;\n        Ui[i+1] = e;\n    }\n    for(j=Lj.length-1;j!==-1;--j) { Lj[j] = Pinv[Lj[j]]; }\n    return {L:L, U:U, P:P, Pinv:Pinv};\n}\nnumeric.ccsLUP = numeric.ccsLUP0;\n\nnumeric.ccsDim = function ccsDim(A) { return [numeric.sup(A[1])+1,A[0].length-1]; }\nnumeric.ccsGetBlock = function ccsGetBlock(A,i,j) {\n    var s = numeric.ccsDim(A),m=s[0],n=s[1];\n    if(typeof i === \"undefined\") { i = numeric.linspace(0,m-1); }\n    else if(typeof i === \"number\") { i = [i]; }\n    if(typeof j === \"undefined\") { j = numeric.linspace(0,n-1); }\n    else if(typeof j === \"number\") { j = [j]; }\n    var p,p0,p1,P = i.length,q,Q = j.length,r,jq,ip;\n    var Bi = numeric.rep([n],0), Bj=[], Bv=[], B = [Bi,Bj,Bv];\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var x = numeric.rep([m],0),count=0,flags = numeric.rep([m],0);\n    for(q=0;q<Q;++q) {\n        jq = j[q];\n        var q0 = Ai[jq];\n        var q1 = Ai[jq+1];\n        for(p=q0;p<q1;++p) {\n            r = Aj[p];\n            flags[r] = 1;\n            x[r] = Av[p];\n        }\n        for(p=0;p<P;++p) {\n            ip = i[p];\n            if(flags[ip]) {\n                Bj[count] = p;\n                Bv[count] = x[i[p]];\n                ++count;\n            }\n        }\n        for(p=q0;p<q1;++p) {\n            r = Aj[p];\n            flags[r] = 0;\n        }\n        Bi[q+1] = count;\n    }\n    return B;\n}\n\nnumeric.ccsDot = function ccsDot(A,B) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    var sA = numeric.ccsDim(A), sB = numeric.ccsDim(B);\n    var m = sA[0], n = sA[1], o = sB[1];\n    var x = numeric.rep([m],0), flags = numeric.rep([m],0), xj = Array(m);\n    var Ci = numeric.rep([o],0), Cj = [], Cv = [], C = [Ci,Cj,Cv];\n    var i,j,k,j0,j1,i0,i1,l,p,a,b;\n    for(k=0;k!==o;++k) {\n        j0 = Bi[k];\n        j1 = Bi[k+1];\n        p = 0;\n        for(j=j0;j<j1;++j) {\n            a = Bj[j];\n            b = Bv[j];\n            i0 = Ai[a];\n            i1 = Ai[a+1];\n            for(i=i0;i<i1;++i) {\n                l = Aj[i];\n                if(flags[l]===0) {\n                    xj[p] = l;\n                    flags[l] = 1;\n                    p = p+1;\n                }\n                x[l] = x[l] + Av[i]*b;\n            }\n        }\n        j0 = Ci[k];\n        j1 = j0+p;\n        Ci[k+1] = j1;\n        for(j=p-1;j!==-1;--j) {\n            b = j0+j;\n            i = xj[j];\n            Cj[b] = i;\n            Cv[b] = x[i];\n            flags[i] = 0;\n            x[i] = 0;\n        }\n        Ci[k+1] = Ci[k]+p;\n    }\n    return C;\n}\n\nnumeric.ccsLUPSolve = function ccsLUPSolve(LUP,B) {\n    var L = LUP.L, U = LUP.U, P = LUP.P;\n    var Bi = B[0];\n    var flag = false;\n    if(typeof Bi !== \"object\") { B = [[0,B.length],numeric.linspace(0,B.length-1),B]; Bi = B[0]; flag = true; }\n    var Bj = B[1], Bv = B[2];\n    var n = L[0].length-1, m = Bi.length-1;\n    var x = numeric.rep([n],0), xj = Array(n);\n    var b = numeric.rep([n],0), bj = Array(n);\n    var Xi = numeric.rep([m+1],0), Xj = [], Xv = [];\n    var sol = numeric.ccsTSolve;\n    var i,j,j0,j1,k,J,N=0;\n    for(i=0;i<m;++i) {\n        k = 0;\n        j0 = Bi[i];\n        j1 = Bi[i+1];\n        for(j=j0;j<j1;++j) { \n            J = LUP.Pinv[Bj[j]];\n            bj[k] = J;\n            b[J] = Bv[j];\n            ++k;\n        }\n        bj.length = k;\n        sol(L,b,x,bj,xj);\n        for(j=bj.length-1;j!==-1;--j) b[bj[j]] = 0;\n        sol(U,x,b,xj,bj);\n        if(flag) return b;\n        for(j=xj.length-1;j!==-1;--j) x[xj[j]] = 0;\n        for(j=bj.length-1;j!==-1;--j) {\n            J = bj[j];\n            Xj[N] = J;\n            Xv[N] = b[J];\n            b[J] = 0;\n            ++N;\n        }\n        Xi[i+1] = N;\n    }\n    return [Xi,Xj,Xv];\n}\n\nnumeric.ccsbinop = function ccsbinop(body,setup) {\n    if(typeof setup === \"undefined\") setup='';\n    return Function('X','Y',\n            'var Xi = X[0], Xj = X[1], Xv = X[2];\\n'+\n            'var Yi = Y[0], Yj = Y[1], Yv = Y[2];\\n'+\n            'var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\\n'+\n            'var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\\n'+\n            'var x = numeric.rep([m],0),y = numeric.rep([m],0);\\n'+\n            'var xk,yk,zk;\\n'+\n            'var i,j,j0,j1,k,p=0;\\n'+\n            setup+\n            'for(i=0;i<n;++i) {\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Xj[j];\\n'+\n            '    x[k] = 1;\\n'+\n            '    Zj[p] = k;\\n'+\n            '    ++p;\\n'+\n            '  }\\n'+\n            '  j0 = Yi[i]; j1 = Yi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Yj[j];\\n'+\n            '    y[k] = Yv[j];\\n'+\n            '    if(x[k] === 0) {\\n'+\n            '      Zj[p] = k;\\n'+\n            '      ++p;\\n'+\n            '    }\\n'+\n            '  }\\n'+\n            '  Zi[i+1] = p;\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\\n'+\n            '  j0 = Zi[i]; j1 = Zi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Zj[j];\\n'+\n            '    xk = x[k];\\n'+\n            '    yk = y[k];\\n'+\n            body+'\\n'+\n            '    Zv[j] = zk;\\n'+\n            '  }\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\\n'+\n            '  j0 = Yi[i]; j1 = Yi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\\n'+\n            '}\\n'+\n            'return [Zi,Zj,Zv];'\n            );\n};\n\n(function() {\n    var k,A,B,C;\n    for(k in numeric.ops2) {\n        if(isFinite(eval('1'+numeric.ops2[k]+'0'))) A = '[Y[0],Y[1],numeric.'+k+'(X,Y[2])]';\n        else A = 'NaN';\n        if(isFinite(eval('0'+numeric.ops2[k]+'1'))) B = '[X[0],X[1],numeric.'+k+'(X[2],Y)]';\n        else B = 'NaN';\n        if(isFinite(eval('1'+numeric.ops2[k]+'0')) && isFinite(eval('0'+numeric.ops2[k]+'1'))) C = 'numeric.ccs'+k+'MM(X,Y)';\n        else C = 'NaN';\n        numeric['ccs'+k+'MM'] = numeric.ccsbinop('zk = xk '+numeric.ops2[k]+'yk;');\n        numeric['ccs'+k] = Function('X','Y',\n                'if(typeof X === \"number\") return '+A+';\\n'+\n                'if(typeof Y === \"number\") return '+B+';\\n'+\n                'return '+C+';\\n'\n                );\n    }\n}());\n\nnumeric.ccsScatter = function ccsScatter(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var n = numeric.sup(Aj)+1,m=Ai.length;\n    var Ri = numeric.rep([n],0),Rj=Array(m), Rv = Array(m);\n    var counts = numeric.rep([n],0),i;\n    for(i=0;i<m;++i) counts[Aj[i]]++;\n    for(i=0;i<n;++i) Ri[i+1] = Ri[i] + counts[i];\n    var ptr = Ri.slice(0),k,Aii;\n    for(i=0;i<m;++i) {\n        Aii = Aj[i];\n        k = ptr[Aii];\n        Rj[k] = Ai[i];\n        Rv[k] = Av[i];\n        ptr[Aii]=ptr[Aii]+1;\n    }\n    return [Ri,Rj,Rv];\n}\n\nnumeric.ccsGather = function ccsGather(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var n = Ai.length-1,m = Aj.length;\n    var Ri = Array(m), Rj = Array(m), Rv = Array(m);\n    var i,j,j0,j1,p;\n    p=0;\n    for(i=0;i<n;++i) {\n        j0 = Ai[i];\n        j1 = Ai[i+1];\n        for(j=j0;j!==j1;++j) {\n            Rj[p] = i;\n            Ri[p] = Aj[j];\n            Rv[p] = Av[j];\n            ++p;\n        }\n    }\n    return [Ri,Rj,Rv];\n}\n\n// The following sparse linear algebra routines are deprecated.\n\nnumeric.sdim = function dim(A,ret,k) {\n    if(typeof ret === \"undefined\") { ret = []; }\n    if(typeof A !== \"object\") return ret;\n    if(typeof k === \"undefined\") { k=0; }\n    if(!(k in ret)) { ret[k] = 0; }\n    if(A.length > ret[k]) ret[k] = A.length;\n    var i;\n    for(i in A) {\n        if(A.hasOwnProperty(i)) dim(A[i],ret,k+1);\n    }\n    return ret;\n};\n\nnumeric.sclone = function clone(A,k,n) {\n    if(typeof k === \"undefined\") { k=0; }\n    if(typeof n === \"undefined\") { n = numeric.sdim(A).length; }\n    var i,ret = Array(A.length);\n    if(k === n-1) {\n        for(i in A) { if(A.hasOwnProperty(i)) ret[i] = A[i]; }\n        return ret;\n    }\n    for(i in A) {\n        if(A.hasOwnProperty(i)) ret[i] = clone(A[i],k+1,n);\n    }\n    return ret;\n}\n\nnumeric.sdiag = function diag(d) {\n    var n = d.length,i,ret = Array(n),i1,i2,i3;\n    for(i=n-1;i>=1;i-=2) {\n        i1 = i-1;\n        ret[i] = []; ret[i][i] = d[i];\n        ret[i1] = []; ret[i1][i1] = d[i1];\n    }\n    if(i===0) { ret[0] = []; ret[0][0] = d[i]; }\n    return ret;\n}\n\nnumeric.sidentity = function identity(n) { return numeric.sdiag(numeric.rep([n],1)); }\n\nnumeric.stranspose = function transpose(A) {\n    var ret = [], n = A.length, i,j,Ai;\n    for(i in A) {\n        if(!(A.hasOwnProperty(i))) continue;\n        Ai = A[i];\n        for(j in Ai) {\n            if(!(Ai.hasOwnProperty(j))) continue;\n            if(typeof ret[j] !== \"object\") { ret[j] = []; }\n            ret[j][i] = Ai[j];\n        }\n    }\n    return ret;\n}\n\nnumeric.sLUP = function LUP(A,tol) {\n    throw new Error(\"The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.\");\n};\n\nnumeric.sdotMM = function dotMM(A,B) {\n    var p = A.length, q = B.length, BT = numeric.stranspose(B), r = BT.length, Ai, BTk;\n    var i,j,k,accum;\n    var ret = Array(p),reti;\n    for(i=p-1;i>=0;i--) {\n        reti = [];\n        Ai = A[i];\n        for(k=r-1;k>=0;k--) {\n            accum = 0;\n            BTk = BT[k];\n            for(j in Ai) {\n                if(!(Ai.hasOwnProperty(j))) continue;\n                if(j in BTk) { accum += Ai[j]*BTk[j]; }\n            }\n            if(accum) reti[k] = accum;\n        }\n        ret[i] = reti;\n    }\n    return ret;\n}\n\nnumeric.sdotMV = function dotMV(A,x) {\n    var p = A.length, Ai, i,j;\n    var ret = Array(p), accum;\n    for(i=p-1;i>=0;i--) {\n        Ai = A[i];\n        accum = 0;\n        for(j in Ai) {\n            if(!(Ai.hasOwnProperty(j))) continue;\n            if(x[j]) accum += Ai[j]*x[j];\n        }\n        if(accum) ret[i] = accum;\n    }\n    return ret;\n}\n\nnumeric.sdotVM = function dotMV(x,A) {\n    var i,j,Ai,alpha;\n    var ret = [], accum;\n    for(i in x) {\n        if(!x.hasOwnProperty(i)) continue;\n        Ai = A[i];\n        alpha = x[i];\n        for(j in Ai) {\n            if(!Ai.hasOwnProperty(j)) continue;\n            if(!ret[j]) { ret[j] = 0; }\n            ret[j] += alpha*Ai[j];\n        }\n    }\n    return ret;\n}\n\nnumeric.sdotVV = function dotVV(x,y) {\n    var i,ret=0;\n    for(i in x) { if(x[i] && y[i]) ret+= x[i]*y[i]; }\n    return ret;\n}\n\nnumeric.sdot = function dot(A,B) {\n    var m = numeric.sdim(A).length, n = numeric.sdim(B).length;\n    var k = m*1000+n;\n    switch(k) {\n    case 0: return A*B;\n    case 1001: return numeric.sdotVV(A,B);\n    case 2001: return numeric.sdotMV(A,B);\n    case 1002: return numeric.sdotVM(A,B);\n    case 2002: return numeric.sdotMM(A,B);\n    default: throw new Error('numeric.sdot not implemented for tensors of order '+m+' and '+n);\n    }\n}\n\nnumeric.sscatter = function scatter(V) {\n    var n = V[0].length, Vij, i, j, m = V.length, A = [], Aj;\n    for(i=n-1;i>=0;--i) {\n        if(!V[m-1][i]) continue;\n        Aj = A;\n        for(j=0;j<m-2;j++) {\n            Vij = V[j][i];\n            if(!Aj[Vij]) Aj[Vij] = [];\n            Aj = Aj[Vij];\n        }\n        Aj[V[j][i]] = V[j+1][i];\n    }\n    return A;\n}\n\nnumeric.sgather = function gather(A,ret,k) {\n    if(typeof ret === \"undefined\") ret = [];\n    if(typeof k === \"undefined\") k = [];\n    var n,i,Ai;\n    n = k.length;\n    for(i in A) {\n        if(A.hasOwnProperty(i)) {\n            k[n] = parseInt(i);\n            Ai = A[i];\n            if(typeof Ai === \"number\") {\n                if(Ai) {\n                    if(ret.length === 0) {\n                        for(i=n+1;i>=0;--i) ret[i] = [];\n                    }\n                    for(i=n;i>=0;--i) ret[i].push(k[i]);\n                    ret[n+1].push(Ai);\n                }\n            } else gather(Ai,ret,k);\n        }\n    }\n    if(k.length>n) k.pop();\n    return ret;\n}\n\n// 6. Coordinate matrices\nnumeric.cLU = function LU(A) {\n    var I = A[0], J = A[1], V = A[2];\n    var p = I.length, m=0, i,j,k,a,b,c;\n    for(i=0;i<p;i++) if(I[i]>m) m=I[i];\n    m++;\n    var L = Array(m), U = Array(m), left = numeric.rep([m],Infinity), right = numeric.rep([m],-Infinity);\n    var Ui, Uj,alpha;\n    for(k=0;k<p;k++) {\n        i = I[k];\n        j = J[k];\n        if(j<left[i]) left[i] = j;\n        if(j>right[i]) right[i] = j;\n    }\n    for(i=0;i<m-1;i++) { if(right[i] > right[i+1]) right[i+1] = right[i]; }\n    for(i=m-1;i>=1;i--) { if(left[i]<left[i-1]) left[i-1] = left[i]; }\n    var countL = 0, countU = 0;\n    for(i=0;i<m;i++) {\n        U[i] = numeric.rep([right[i]-left[i]+1],0);\n        L[i] = numeric.rep([i-left[i]],0);\n        countL += i-left[i]+1;\n        countU += right[i]-i+1;\n    }\n    for(k=0;k<p;k++) { i = I[k]; U[i][J[k]-left[i]] = V[k]; }\n    for(i=0;i<m-1;i++) {\n        a = i-left[i];\n        Ui = U[i];\n        for(j=i+1;left[j]<=i && j<m;j++) {\n            b = i-left[j];\n            c = right[i]-i;\n            Uj = U[j];\n            alpha = Uj[b]/Ui[a];\n            if(alpha) {\n                for(k=1;k<=c;k++) { Uj[k+b] -= alpha*Ui[k+a]; }\n                L[j][i-left[j]] = alpha;\n            }\n        }\n    }\n    var Ui = [], Uj = [], Uv = [], Li = [], Lj = [], Lv = [];\n    var p,q,foo;\n    p=0; q=0;\n    for(i=0;i<m;i++) {\n        a = left[i];\n        b = right[i];\n        foo = U[i];\n        for(j=i;j<=b;j++) {\n            if(foo[j-a]) {\n                Ui[p] = i;\n                Uj[p] = j;\n                Uv[p] = foo[j-a];\n                p++;\n            }\n        }\n        foo = L[i];\n        for(j=a;j<i;j++) {\n            if(foo[j-a]) {\n                Li[q] = i;\n                Lj[q] = j;\n                Lv[q] = foo[j-a];\n                q++;\n            }\n        }\n        Li[q] = i;\n        Lj[q] = i;\n        Lv[q] = 1;\n        q++;\n    }\n    return {U:[Ui,Uj,Uv], L:[Li,Lj,Lv]};\n};\n\nnumeric.cLUsolve = function LUsolve(lu,b) {\n    var L = lu.L, U = lu.U, ret = numeric.clone(b);\n    var Li = L[0], Lj = L[1], Lv = L[2];\n    var Ui = U[0], Uj = U[1], Uv = U[2];\n    var p = Ui.length, q = Li.length;\n    var m = ret.length,i,j,k;\n    k = 0;\n    for(i=0;i<m;i++) {\n        while(Lj[k] < i) {\n            ret[i] -= Lv[k]*ret[Lj[k]];\n            k++;\n        }\n        k++;\n    }\n    k = p-1;\n    for(i=m-1;i>=0;i--) {\n        while(Uj[k] > i) {\n            ret[i] -= Uv[k]*ret[Uj[k]];\n            k--;\n        }\n        ret[i] /= Uv[k];\n        k--;\n    }\n    return ret;\n};\n\nnumeric.cgrid = function grid(n,shape) {\n    if(typeof n === \"number\") n = [n,n];\n    var ret = numeric.rep(n,-1);\n    var i,j,count;\n    if(typeof shape !== \"function\") {\n        switch(shape) {\n        case 'L':\n            shape = function(i,j) { return (i>=n[0]/2 || j<n[1]/2); }\n            break;\n        default:\n            shape = function(i,j) { return true; };\n            break;\n        }\n    }\n    count=0;\n    for(i=1;i<n[0]-1;i++) for(j=1;j<n[1]-1;j++) \n        if(shape(i,j)) {\n            ret[i][j] = count;\n            count++;\n        }\n    return ret;\n}\n\nnumeric.cdelsq = function delsq(g) {\n    var dir = [[-1,0],[0,-1],[0,1],[1,0]];\n    var s = numeric.dim(g), m = s[0], n = s[1], i,j,k,p,q;\n    var Li = [], Lj = [], Lv = [];\n    for(i=1;i<m-1;i++) for(j=1;j<n-1;j++) {\n        if(g[i][j]<0) continue;\n        for(k=0;k<4;k++) {\n            p = i+dir[k][0];\n            q = j+dir[k][1];\n            if(g[p][q]<0) continue;\n            Li.push(g[i][j]);\n            Lj.push(g[p][q]);\n            Lv.push(-1);\n        }\n        Li.push(g[i][j]);\n        Lj.push(g[i][j]);\n        Lv.push(4);\n    }\n    return [Li,Lj,Lv];\n}\n\nnumeric.cdotMV = function dotMV(A,x) {\n    var ret, Ai = A[0], Aj = A[1], Av = A[2],k,p=Ai.length,N;\n    N=0;\n    for(k=0;k<p;k++) { if(Ai[k]>N) N = Ai[k]; }\n    N++;\n    ret = numeric.rep([N],0);\n    for(k=0;k<p;k++) { ret[Ai[k]]+=Av[k]*x[Aj[k]]; }\n    return ret;\n}\n\n// 7. Splines\n\nnumeric.Spline = function Spline(x,yl,yr,kl,kr) { this.x = x; this.yl = yl; this.yr = yr; this.kl = kl; this.kr = kr; }\nnumeric.Spline.prototype._at = function _at(x1,p) {\n    var x = this.x;\n    var yl = this.yl;\n    var yr = this.yr;\n    var kl = this.kl;\n    var kr = this.kr;\n    var x1,a,b,t;\n    var add = numeric.add, sub = numeric.sub, mul = numeric.mul;\n    a = sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));\n    b = add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));\n    t = (x1-x[p])/(x[p+1]-x[p]);\n    var s = t*(1-t);\n    return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t));\n}\nnumeric.Spline.prototype.at = function at(x0) {\n    if(typeof x0 === \"number\") {\n        var x = this.x;\n        var n = x.length;\n        var p,q,mid,floor = Math.floor,a,b,t;\n        p = 0;\n        q = n-1;\n        while(q-p>1) {\n            mid = floor((p+q)/2);\n            if(x[mid] <= x0) p = mid;\n            else q = mid;\n        }\n        return this._at(x0,p);\n    }\n    var n = x0.length, i, ret = Array(n);\n    for(i=n-1;i!==-1;--i) ret[i] = this.at(x0[i]);\n    return ret;\n}\nnumeric.Spline.prototype.diff = function diff() {\n    var x = this.x;\n    var yl = this.yl;\n    var yr = this.yr;\n    var kl = this.kl;\n    var kr = this.kr;\n    var n = yl.length;\n    var i,dx,dy;\n    var zl = kl, zr = kr, pl = Array(n), pr = Array(n);\n    var add = numeric.add, mul = numeric.mul, div = numeric.div, sub = numeric.sub;\n    for(i=n-1;i!==-1;--i) {\n        dx = x[i+1]-x[i];\n        dy = sub(yr[i+1],yl[i]);\n        pl[i] = div(add(mul(dy, 6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);\n        pr[i+1] = div(add(mul(dy,-6),mul(kl[i], 2*dx),mul(kr[i+1], 4*dx)),dx*dx);\n    }\n    return new numeric.Spline(x,zl,zr,pl,pr);\n}\nnumeric.Spline.prototype.roots = function roots() {\n    function sqr(x) { return x*x; }\n    function heval(y0,y1,k0,k1,x) {\n        var A = k0*2-(y1-y0);\n        var B = -k1*2+(y1-y0);\n        var t = (x+1)*0.5;\n        var s = t*(1-t);\n        return (1-t)*y0+t*y1+A*s*(1-t)+B*s*t;\n    }\n    var ret = [];\n    var x = this.x, yl = this.yl, yr = this.yr, kl = this.kl, kr = this.kr;\n    if(typeof yl[0] === \"number\") {\n        yl = [yl];\n        yr = [yr];\n        kl = [kl];\n        kr = [kr];\n    }\n    var m = yl.length,n=x.length-1,i,j,k,y,s,t;\n    var ai,bi,ci,di, ret = Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;\n    var sqrt = Math.sqrt;\n    for(i=0;i!==m;++i) {\n        ai = yl[i];\n        bi = yr[i];\n        ci = kl[i];\n        di = kr[i];\n        ri = [];\n        for(j=0;j!==n;j++) {\n            if(j>0 && bi[j]*ai[j]<0) ri.push(x[j]);\n            dx = (x[j+1]-x[j]);\n            cx = x[j];\n            y0 = ai[j];\n            y1 = bi[j+1];\n            k0 = ci[j]/dx;\n            k1 = di[j+1]/dx;\n            D = sqr(k0-k1+3*(y0-y1)) + 12*k1*y0;\n            A = k1+3*y0+2*k0-3*y1;\n            B = 3*(k1+k0+2*(y0-y1));\n            if(D<=0) {\n                z0 = A/B;\n                if(z0>x[j] && z0<x[j+1]) stops = [x[j],z0,x[j+1]];\n                else stops = [x[j],x[j+1]];\n            } else {\n                z0 = (A-sqrt(D))/B;\n                z1 = (A+sqrt(D))/B;\n                stops = [x[j]];\n                if(z0>x[j] && z0<x[j+1]) stops.push(z0);\n                if(z1>x[j] && z1<x[j+1]) stops.push(z1);\n                stops.push(x[j+1]);\n            }\n            t0 = stops[0];\n            z0 = this._at(t0,j);\n            for(k=0;k<stops.length-1;k++) {\n                t1 = stops[k+1];\n                z1 = this._at(t1,j);\n                if(z0 === 0) {\n                    ri.push(t0); \n                    t0 = t1;\n                    z0 = z1;\n                    continue;\n                }\n                if(z1 === 0 || z0*z1>0) {\n                    t0 = t1;\n                    z0 = z1;\n                    continue;\n                }\n                var side = 0;\n                while(1) {\n                    tm = (z0*t1-z1*t0)/(z0-z1);\n                    if(tm <= t0 || tm >= t1) { break; }\n                    zm = this._at(tm,j);\n                    if(zm*z1>0) {\n                        t1 = tm;\n                        z1 = zm;\n                        if(side === -1) z0*=0.5;\n                        side = -1;\n                    } else if(zm*z0>0) {\n                        t0 = tm;\n                        z0 = zm;\n                        if(side === 1) z1*=0.5;\n                        side = 1;\n                    } else break;\n                }\n                ri.push(tm);\n                t0 = stops[k+1];\n                z0 = this._at(t0, j);\n            }\n            if(z1 === 0) ri.push(t1);\n        }\n        ret[i] = ri;\n    }\n    if(typeof this.yl[0] === \"number\") return ret[0];\n    return ret;\n}\nnumeric.spline = function spline(x,y,k1,kn) {\n    var n = x.length, b = [], dx = [], dy = [];\n    var i;\n    var sub = numeric.sub,mul = numeric.mul,add = numeric.add;\n    for(i=n-2;i>=0;i--) { dx[i] = x[i+1]-x[i]; dy[i] = sub(y[i+1],y[i]); }\n    if(typeof k1 === \"string\" || typeof kn === \"string\") { \n        k1 = kn = \"periodic\";\n    }\n    // Build sparse tridiagonal system\n    var T = [[],[],[]];\n    switch(typeof k1) {\n    case \"undefined\":\n        b[0] = mul(3/(dx[0]*dx[0]),dy[0]);\n        T[0].push(0,0);\n        T[1].push(0,1);\n        T[2].push(2/dx[0],1/dx[0]);\n        break;\n    case \"string\":\n        b[0] = add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));\n        T[0].push(0,0,0);\n        T[1].push(n-2,0,1);\n        T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);\n        break;\n    default:\n        b[0] = k1;\n        T[0].push(0);\n        T[1].push(0);\n        T[2].push(1);\n        break;\n    }\n    for(i=1;i<n-1;i++) {\n        b[i] = add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));\n        T[0].push(i,i,i);\n        T[1].push(i-1,i,i+1);\n        T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i]);\n    }\n    switch(typeof kn) {\n    case \"undefined\":\n        b[n-1] = mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);\n        T[0].push(n-1,n-1);\n        T[1].push(n-2,n-1);\n        T[2].push(1/dx[n-2],2/dx[n-2]);\n        break;\n    case \"string\":\n        T[1][T[1].length-1] = 0;\n        break;\n    default:\n        b[n-1] = kn;\n        T[0].push(n-1);\n        T[1].push(n-1);\n        T[2].push(1);\n        break;\n    }\n    if(typeof b[0] !== \"number\") b = numeric.transpose(b);\n    else b = [b];\n    var k = Array(b.length);\n    if(typeof k1 === \"string\") {\n        for(i=k.length-1;i!==-1;--i) {\n            k[i] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);\n            k[i][n-1] = k[i][0];\n        }\n    } else {\n        for(i=k.length-1;i!==-1;--i) {\n            k[i] = numeric.cLUsolve(numeric.cLU(T),b[i]);\n        }\n    }\n    if(typeof y[0] === \"number\") k = k[0];\n    else k = numeric.transpose(k);\n    return new numeric.Spline(x,y,y,k,k);\n}\n\n// 8. FFT\nnumeric.fftpow2 = function fftpow2(x,y) {\n    var n = x.length;\n    if(n === 1) return;\n    var cos = Math.cos, sin = Math.sin, i,j;\n    var xe = Array(n/2), ye = Array(n/2), xo = Array(n/2), yo = Array(n/2);\n    j = n/2;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        xo[j] = x[i];\n        yo[j] = y[i];\n        --i;\n        xe[j] = x[i];\n        ye[j] = y[i];\n    }\n    fftpow2(xe,ye);\n    fftpow2(xo,yo);\n    j = n/2;\n    var t,k = (-6.2831853071795864769252867665590057683943387987502116419/n),ci,si;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        if(j === -1) j = n/2-1;\n        t = k*i;\n        ci = cos(t);\n        si = sin(t);\n        x[i] = xe[j] + ci*xo[j] - si*yo[j];\n        y[i] = ye[j] + ci*yo[j] + si*xo[j];\n    }\n}\nnumeric._ifftpow2 = function _ifftpow2(x,y) {\n    var n = x.length;\n    if(n === 1) return;\n    var cos = Math.cos, sin = Math.sin, i,j;\n    var xe = Array(n/2), ye = Array(n/2), xo = Array(n/2), yo = Array(n/2);\n    j = n/2;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        xo[j] = x[i];\n        yo[j] = y[i];\n        --i;\n        xe[j] = x[i];\n        ye[j] = y[i];\n    }\n    _ifftpow2(xe,ye);\n    _ifftpow2(xo,yo);\n    j = n/2;\n    var t,k = (6.2831853071795864769252867665590057683943387987502116419/n),ci,si;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        if(j === -1) j = n/2-1;\n        t = k*i;\n        ci = cos(t);\n        si = sin(t);\n        x[i] = xe[j] + ci*xo[j] - si*yo[j];\n        y[i] = ye[j] + ci*yo[j] + si*xo[j];\n    }\n}\nnumeric.ifftpow2 = function ifftpow2(x,y) {\n    numeric._ifftpow2(x,y);\n    numeric.diveq(x,x.length);\n    numeric.diveq(y,y.length);\n}\nnumeric.convpow2 = function convpow2(ax,ay,bx,by) {\n    numeric.fftpow2(ax,ay);\n    numeric.fftpow2(bx,by);\n    var i,n = ax.length,axi,bxi,ayi,byi;\n    for(i=n-1;i!==-1;--i) {\n        axi = ax[i]; ayi = ay[i]; bxi = bx[i]; byi = by[i];\n        ax[i] = axi*bxi-ayi*byi;\n        ay[i] = axi*byi+ayi*bxi;\n    }\n    numeric.ifftpow2(ax,ay);\n}\nnumeric.T.prototype.fft = function fft() {\n    var x = this.x, y = this.y;\n    var n = x.length, log = Math.log, log2 = log(2),\n        p = Math.ceil(log(2*n-1)/log2), m = Math.pow(2,p);\n    var cx = numeric.rep([m],0), cy = numeric.rep([m],0), cos = Math.cos, sin = Math.sin;\n    var k, c = (-3.141592653589793238462643383279502884197169399375105820/n),t;\n    var a = numeric.rep([m],0), b = numeric.rep([m],0),nhalf = Math.floor(n/2);\n    for(k=0;k<n;k++) a[k] = x[k];\n    if(typeof y !== \"undefined\") for(k=0;k<n;k++) b[k] = y[k];\n    cx[0] = 1;\n    for(k=1;k<=m/2;k++) {\n        t = c*k*k;\n        cx[k] = cos(t);\n        cy[k] = sin(t);\n        cx[m-k] = cos(t);\n        cy[m-k] = sin(t)\n    }\n    var X = new numeric.T(a,b), Y = new numeric.T(cx,cy);\n    X = X.mul(Y);\n    numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));\n    X = X.mul(Y);\n    X.x.length = n;\n    X.y.length = n;\n    return X;\n}\nnumeric.T.prototype.ifft = function ifft() {\n    var x = this.x, y = this.y;\n    var n = x.length, log = Math.log, log2 = log(2),\n        p = Math.ceil(log(2*n-1)/log2), m = Math.pow(2,p);\n    var cx = numeric.rep([m],0), cy = numeric.rep([m],0), cos = Math.cos, sin = Math.sin;\n    var k, c = (3.141592653589793238462643383279502884197169399375105820/n),t;\n    var a = numeric.rep([m],0), b = numeric.rep([m],0),nhalf = Math.floor(n/2);\n    for(k=0;k<n;k++) a[k] = x[k];\n    if(typeof y !== \"undefined\") for(k=0;k<n;k++) b[k] = y[k];\n    cx[0] = 1;\n    for(k=1;k<=m/2;k++) {\n        t = c*k*k;\n        cx[k] = cos(t);\n        cy[k] = sin(t);\n        cx[m-k] = cos(t);\n        cy[m-k] = sin(t)\n    }\n    var X = new numeric.T(a,b), Y = new numeric.T(cx,cy);\n    X = X.mul(Y);\n    numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));\n    X = X.mul(Y);\n    X.x.length = n;\n    X.y.length = n;\n    return X.div(n);\n}\n\n//9. Unconstrained optimization\nnumeric.gradient = function gradient(f,x) {\n    var n = x.length;\n    var f0 = f(x);\n    if(isNaN(f0)) throw new Error('gradient: f(x) is a NaN!');\n    var max = Math.max;\n    var i,x0 = numeric.clone(x),f1,f2, J = Array(n);\n    var div = numeric.div, sub = numeric.sub,errest,roundoff,max = Math.max,eps = 1e-3,abs = Math.abs, min = Math.min;\n    var t0,t1,t2,it=0,d1,d2,N;\n    for(i=0;i<n;i++) {\n        var h = max(1e-6*f0,1e-8);\n        while(1) {\n            ++it;\n            if(it>20) { throw new Error(\"Numerical gradient fails\"); }\n            x0[i] = x[i]+h;\n            f1 = f(x0);\n            x0[i] = x[i]-h;\n            f2 = f(x0);\n            x0[i] = x[i];\n            if(isNaN(f1) || isNaN(f2)) { h/=16; continue; }\n            J[i] = (f1-f2)/(2*h);\n            t0 = x[i]-h;\n            t1 = x[i];\n            t2 = x[i]+h;\n            d1 = (f1-f0)/h;\n            d2 = (f0-f2)/h;\n            N = max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1e-8);\n            errest = min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);\n            if(errest>eps) { h/=16; }\n            else break;\n            }\n    }\n    return J;\n}\n\nnumeric.uncmin = function uncmin(f,x0,tol,gradient,maxit,callback,options) {\n    var grad = numeric.gradient;\n    if(typeof options === \"undefined\") { options = {}; }\n    if(typeof tol === \"undefined\") { tol = 1e-8; }\n    if(typeof gradient === \"undefined\") { gradient = function(x) { return grad(f,x); }; }\n    if(typeof maxit === \"undefined\") maxit = 1000;\n    x0 = numeric.clone(x0);\n    var n = x0.length;\n    var f0 = f(x0),f1,df0;\n    if(isNaN(f0)) throw new Error('uncmin: f(x0) is a NaN!');\n    var max = Math.max, norm2 = numeric.norm2;\n    tol = max(tol,numeric.epsilon);\n    var step,g0,g1,H1 = options.Hinv || numeric.identity(n);\n    var dot = numeric.dot, inv = numeric.inv, sub = numeric.sub, add = numeric.add, ten = numeric.tensor, div = numeric.div, mul = numeric.mul;\n    var all = numeric.all, isfinite = numeric.isFinite, neg = numeric.neg;\n    var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;\n    var msg = \"\";\n    g0 = gradient(x0);\n    while(it<maxit) {\n        if(typeof callback === \"function\") { if(callback(it,x0,f0,g0,H1)) { msg = \"Callback returned true\"; break; } }\n        if(!all(isfinite(g0))) { msg = \"Gradient has Infinity or NaN\"; break; }\n        step = neg(dot(H1,g0));\n        if(!all(isfinite(step))) { msg = \"Search direction has Infinity or NaN\"; break; }\n        nstep = norm2(step);\n        if(nstep < tol) { msg=\"Newton step smaller than tol\"; break; }\n        t = 1;\n        df0 = dot(g0,step);\n        // line search\n        x1 = x0;\n        while(it < maxit) {\n            if(t*nstep < tol) { break; }\n            s = mul(step,t);\n            x1 = add(x0,s);\n            f1 = f(x1);\n            if(f1-f0 >= 0.1*t*df0 || isNaN(f1)) {\n                t *= 0.5;\n                ++it;\n                continue;\n            }\n            break;\n        }\n        if(t*nstep < tol) { msg = \"Line search step size smaller than tol\"; break; }\n        if(it === maxit) { msg = \"maxit reached during line search\"; break; }\n        g1 = gradient(x1);\n        y = sub(g1,g0);\n        ys = dot(y,s);\n        Hy = dot(H1,y);\n        H1 = sub(add(H1,\n                mul(\n                        (ys+dot(y,Hy))/(ys*ys),\n                        ten(s,s)    )),\n                div(add(ten(Hy,s),ten(s,Hy)),ys));\n        x0 = x1;\n        f0 = f1;\n        g0 = g1;\n        ++it;\n    }\n    return {solution: x0, f: f0, gradient: g0, invHessian: H1, iterations:it, message: msg};\n}\n\n// 10. Ode solver (Dormand-Prince)\nnumeric.Dopri = function Dopri(x,y,f,ymid,iterations,msg,events) {\n    this.x = x;\n    this.y = y;\n    this.f = f;\n    this.ymid = ymid;\n    this.iterations = iterations;\n    this.events = events;\n    this.message = msg;\n}\nnumeric.Dopri.prototype._at = function _at(xi,j) {\n    function sqr(x) { return x*x; }\n    var sol = this;\n    var xs = sol.x;\n    var ys = sol.y;\n    var k1 = sol.f;\n    var ymid = sol.ymid;\n    var n = xs.length;\n    var x0,x1,xh,y0,y1,yh,xi;\n    var floor = Math.floor,h;\n    var c = 0.5;\n    var add = numeric.add, mul = numeric.mul,sub = numeric.sub, p,q,w;\n    x0 = xs[j];\n    x1 = xs[j+1];\n    y0 = ys[j];\n    y1 = ys[j+1];\n    h  = x1-x0;\n    xh = x0+c*h;\n    yh = ymid[j];\n    p = sub(k1[j  ],mul(y0,1/(x0-xh)+2/(x0-x1)));\n    q = sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));\n    w = [sqr(xi - x1) * (xi - xh) / sqr(x0 - x1) / (x0 - xh),\n         sqr(xi - x0) * sqr(xi - x1) / sqr(x0 - xh) / sqr(x1 - xh),\n         sqr(xi - x0) * (xi - xh) / sqr(x1 - x0) / (x1 - xh),\n         (xi - x0) * sqr(xi - x1) * (xi - xh) / sqr(x0-x1) / (x0 - xh),\n         (xi - x1) * sqr(xi - x0) * (xi - xh) / sqr(x0-x1) / (x1 - xh)];\n    return add(add(add(add(mul(y0,w[0]),\n                           mul(yh,w[1])),\n                           mul(y1,w[2])),\n                           mul( p,w[3])),\n                           mul( q,w[4]));\n}\nnumeric.Dopri.prototype.at = function at(x) {\n    var i,j,k,floor = Math.floor;\n    if(typeof x !== \"number\") {\n        var n = x.length, ret = Array(n);\n        for(i=n-1;i!==-1;--i) {\n            ret[i] = this.at(x[i]);\n        }\n        return ret;\n    }\n    var x0 = this.x;\n    i = 0; j = x0.length-1;\n    while(j-i>1) {\n        k = floor(0.5*(i+j));\n        if(x0[k] <= x) i = k;\n        else j = k;\n    }\n    return this._at(x,i);\n}\n\nnumeric.dopri = function dopri(x0,x1,y0,f,tol,maxit,event) {\n    if(typeof tol === \"undefined\") { tol = 1e-6; }\n    if(typeof maxit === \"undefined\") { maxit = 1000; }\n    var xs = [x0], ys = [y0], k1 = [f(x0,y0)], k2,k3,k4,k5,k6,k7, ymid = [];\n    var A2 = 1/5;\n    var A3 = [3/40,9/40];\n    var A4 = [44/45,-56/15,32/9];\n    var A5 = [19372/6561,-25360/2187,64448/6561,-212/729];\n    var A6 = [9017/3168,-355/33,46732/5247,49/176,-5103/18656];\n    var b = [35/384,0,500/1113,125/192,-2187/6784,11/84];\n    var bm = [0.5*6025192743/30085553152,\n              0,\n              0.5*51252292925/65400821598,\n              0.5*-2691868925/45128329728,\n              0.5*187940372067/1594534317056,\n              0.5*-1776094331/19743644256,\n              0.5*11237099/235043384];\n    var c = [1/5,3/10,4/5,8/9,1,1];\n    var e = [-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];\n    var i = 0,er,j;\n    var h = (x1-x0)/10;\n    var it = 0;\n    var add = numeric.add, mul = numeric.mul, y1,erinf;\n    var max = Math.max, min = Math.min, abs = Math.abs, norminf = numeric.norminf,pow = Math.pow;\n    var any = numeric.any, lt = numeric.lt, and = numeric.and, sub = numeric.sub;\n    var e0, e1, ev;\n    var ret = new numeric.Dopri(xs,ys,k1,ymid,-1,\"\");\n    if(typeof event === \"function\") e0 = event(x0,y0);\n    while(x0<x1 && it<maxit) {\n        ++it;\n        if(x0+h>x1) h = x1-x0;\n        k2 = f(x0+c[0]*h,                add(y0,mul(   A2*h,k1[i])));\n        k3 = f(x0+c[1]*h,            add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));\n        k4 = f(x0+c[2]*h,        add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));\n        k5 = f(x0+c[3]*h,    add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));\n        k6 = f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));\n        y1 = add(add(add(add(add(y0,mul(k1[i],h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));\n        k7 = f(x0+h,y1);\n        er = add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));\n        if(typeof er === \"number\") erinf = abs(er);\n        else erinf = norminf(er);\n        if(erinf > tol) { // reject\n            h = 0.2*h*pow(tol/erinf,0.25);\n            if(x0+h === x0) {\n                ret.msg = \"Step size became too small\";\n                break;\n            }\n            continue;\n        }\n        ymid[i] = add(add(add(add(add(add(y0,\n                mul(k1[i],h*bm[0])),\n                mul(k3   ,h*bm[2])),\n                mul(k4   ,h*bm[3])),\n                mul(k5   ,h*bm[4])),\n                mul(k6   ,h*bm[5])),\n                mul(k7   ,h*bm[6]));\n        ++i;\n        xs[i] = x0+h;\n        ys[i] = y1;\n        k1[i] = k7;\n        if(typeof event === \"function\") {\n            var yi,xl = x0,xr = x0+0.5*h,xi;\n            e1 = event(xr,ymid[i-1]);\n            ev = and(lt(e0,0),lt(0,e1));\n            if(!any(ev)) { xl = xr; xr = x0+h; e0 = e1; e1 = event(xr,y1); ev = and(lt(e0,0),lt(0,e1)); }\n            if(any(ev)) {\n                var xc, yc, en,ei;\n                var side=0, sl = 1.0, sr = 1.0;\n                while(1) {\n                    if(typeof e0 === \"number\") xi = (sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);\n                    else {\n                        xi = xr;\n                        for(j=e0.length-1;j!==-1;--j) {\n                            if(e0[j]<0 && e1[j]>0) xi = min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]));\n                        }\n                    }\n                    if(xi <= xl || xi >= xr) break;\n                    yi = ret._at(xi, i-1);\n                    ei = event(xi,yi);\n                    en = and(lt(e0,0),lt(0,ei));\n                    if(any(en)) {\n                        xr = xi;\n                        e1 = ei;\n                        ev = en;\n                        sr = 1.0;\n                        if(side === -1) sl *= 0.5;\n                        else sl = 1.0;\n                        side = -1;\n                    } else {\n                        xl = xi;\n                        e0 = ei;\n                        sl = 1.0;\n                        if(side === 1) sr *= 0.5;\n                        else sr = 1.0;\n                        side = 1;\n                    }\n                }\n                y1 = ret._at(0.5*(x0+xi),i-1);\n                ret.f[i] = f(xi,yi);\n                ret.x[i] = xi;\n                ret.y[i] = yi;\n                ret.ymid[i-1] = y1;\n                ret.events = ev;\n                ret.iterations = it;\n                return ret;\n            }\n        }\n        x0 += h;\n        y0 = y1;\n        e0 = e1;\n        h = min(0.8*h*pow(tol/erinf,0.25),4*h);\n    }\n    ret.iterations = it;\n    return ret;\n}\n\n// 11. Ax = b\nnumeric.LU = function(A, fast) {\n  fast = fast || false;\n\n  var abs = Math.abs;\n  var i, j, k, absAjk, Akk, Ak, Pk, Ai;\n  var max;\n  var n = A.length, n1 = n-1;\n  var P = new Array(n);\n  if(!fast) A = numeric.clone(A);\n\n  for (k = 0; k < n; ++k) {\n    Pk = k;\n    Ak = A[k];\n    max = abs(Ak[k]);\n    for (j = k + 1; j < n; ++j) {\n      absAjk = abs(A[j][k]);\n      if (max < absAjk) {\n        max = absAjk;\n        Pk = j;\n      }\n    }\n    P[k] = Pk;\n\n    if (Pk != k) {\n      A[k] = A[Pk];\n      A[Pk] = Ak;\n      Ak = A[k];\n    }\n\n    Akk = Ak[k];\n\n    for (i = k + 1; i < n; ++i) {\n      A[i][k] /= Akk;\n    }\n\n    for (i = k + 1; i < n; ++i) {\n      Ai = A[i];\n      for (j = k + 1; j < n1; ++j) {\n        Ai[j] -= Ai[k] * Ak[j];\n        ++j;\n        Ai[j] -= Ai[k] * Ak[j];\n      }\n      if(j===n1) Ai[j] -= Ai[k] * Ak[j];\n    }\n  }\n\n  return {\n    LU: A,\n    P:  P\n  };\n}\n\nnumeric.LUsolve = function LUsolve(LUP, b) {\n  var i, j;\n  var LU = LUP.LU;\n  var n   = LU.length;\n  var x = numeric.clone(b);\n  var P   = LUP.P;\n  var Pi, LUi, LUii, tmp;\n\n  for (i=n-1;i!==-1;--i) x[i] = b[i];\n  for (i = 0; i < n; ++i) {\n    Pi = P[i];\n    if (P[i] !== i) {\n      tmp = x[i];\n      x[i] = x[Pi];\n      x[Pi] = tmp;\n    }\n\n    LUi = LU[i];\n    for (j = 0; j < i; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n  }\n\n  for (i = n - 1; i >= 0; --i) {\n    LUi = LU[i];\n    for (j = i + 1; j < n; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n\n    x[i] /= LUi[i];\n  }\n\n  return x;\n}\n\nnumeric.solve = function solve(A,b,fast) { return numeric.LUsolve(numeric.LU(A,fast), b); }\n\n// 12. Linear programming\nnumeric.echelonize = function echelonize(A) {\n    var s = numeric.dim(A), m = s[0], n = s[1];\n    var I = numeric.identity(m);\n    var P = Array(m);\n    var i,j,k,l,Ai,Ii,Z,a;\n    var abs = Math.abs;\n    var diveq = numeric.diveq;\n    A = numeric.clone(A);\n    for(i=0;i<m;++i) {\n        k = 0;\n        Ai = A[i];\n        Ii = I[i];\n        for(j=1;j<n;++j) if(abs(Ai[k])<abs(Ai[j])) k=j;\n        P[i] = k;\n        diveq(Ii,Ai[k]);\n        diveq(Ai,Ai[k]);\n        for(j=0;j<m;++j) if(j!==i) {\n            Z = A[j]; a = Z[k];\n            for(l=n-1;l!==-1;--l) Z[l] -= Ai[l]*a;\n            Z = I[j];\n            for(l=m-1;l!==-1;--l) Z[l] -= Ii[l]*a;\n        }\n    }\n    return {I:I, A:A, P:P};\n}\n\nnumeric.__solveLP = function __solveLP(c,A,b,tol,maxit,x,flag) {\n    var sum = numeric.sum, log = numeric.log, mul = numeric.mul, sub = numeric.sub, dot = numeric.dot, div = numeric.div, add = numeric.add;\n    var m = c.length, n = b.length,y;\n    var unbounded = false, cb,i0=0;\n    var alpha = 1.0;\n    var f0,df0,AT = numeric.transpose(A), svd = numeric.svd,transpose = numeric.transpose,leq = numeric.leq, sqrt = Math.sqrt, abs = Math.abs;\n    var muleq = numeric.muleq;\n    var norm = numeric.norminf, any = numeric.any,min = Math.min;\n    var all = numeric.all, gt = numeric.gt;\n    var p = Array(m), A0 = Array(n),e=numeric.rep([n],1), H;\n    var solve = numeric.solve, z = sub(b,dot(A,x)),count;\n    var dotcc = dot(c,c);\n    var g;\n    for(count=i0;count<maxit;++count) {\n        var i,j,d;\n        for(i=n-1;i!==-1;--i) A0[i] = div(A[i],z[i]);\n        var A1 = transpose(A0);\n        for(i=m-1;i!==-1;--i) p[i] = (/*x[i]+*/sum(A1[i]));\n        alpha = 0.25*abs(dotcc/dot(c,p));\n        var a1 = 100*sqrt(dotcc/dot(p,p));\n        if(!isFinite(alpha) || alpha>a1) alpha = a1;\n        g = add(c,mul(alpha,p));\n        H = dot(A1,A0);\n        for(i=m-1;i!==-1;--i) H[i][i] += 1;\n        d = solve(H,div(g,alpha),true);\n        var t0 = div(z,dot(A,d));\n        var t = 1.0;\n        for(i=n-1;i!==-1;--i) if(t0[i]<0) t = min(t,-0.999*t0[i]);\n        y = sub(x,mul(d,t));\n        z = sub(b,dot(A,y));\n        if(!all(gt(z,0))) return { solution: x, message: \"\", iterations: count };\n        x = y;\n        if(alpha<tol) return { solution: y, message: \"\", iterations: count };\n        if(flag) {\n            var s = dot(c,g), Ag = dot(A,g);\n            unbounded = true;\n            for(i=n-1;i!==-1;--i) if(s*Ag[i]<0) { unbounded = false; break; }\n        } else {\n            if(x[m-1]>=0) unbounded = false;\n            else unbounded = true;\n        }\n        if(unbounded) return { solution: y, message: \"Unbounded\", iterations: count };\n    }\n    return { solution: x, message: \"maximum iteration count exceeded\", iterations:count };\n}\n\nnumeric._solveLP = function _solveLP(c,A,b,tol,maxit) {\n    var m = c.length, n = b.length,y;\n    var sum = numeric.sum, log = numeric.log, mul = numeric.mul, sub = numeric.sub, dot = numeric.dot, div = numeric.div, add = numeric.add;\n    var c0 = numeric.rep([m],0).concat([1]);\n    var J = numeric.rep([n,1],-1);\n    var A0 = numeric.blockMatrix([[A                   ,   J  ]]);\n    var b0 = b;\n    var y = numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);\n    var x0 = numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);\n    var x = numeric.clone(x0.solution);\n    x.length = m;\n    var foo = numeric.inf(sub(b,dot(A,x)));\n    if(foo<0) { return { solution: NaN, message: \"Infeasible\", iterations: x0.iterations }; }\n    var ret = numeric.__solveLP(c, A, b, tol, maxit-x0.iterations, x, true);\n    ret.iterations += x0.iterations;\n    return ret;\n};\n\nnumeric.solveLP = function solveLP(c,A,b,Aeq,beq,tol,maxit) {\n    if(typeof maxit === \"undefined\") maxit = 1000;\n    if(typeof tol === \"undefined\") tol = numeric.epsilon;\n    if(typeof Aeq === \"undefined\") return numeric._solveLP(c,A,b,tol,maxit);\n    var m = Aeq.length, n = Aeq[0].length, o = A.length;\n    var B = numeric.echelonize(Aeq);\n    var flags = numeric.rep([n],0);\n    var P = B.P;\n    var Q = [];\n    var i;\n    for(i=P.length-1;i!==-1;--i) flags[P[i]] = 1;\n    for(i=n-1;i!==-1;--i) if(flags[i]===0) Q.push(i);\n    var g = numeric.getRange;\n    var I = numeric.linspace(0,m-1), J = numeric.linspace(0,o-1);\n    var Aeq2 = g(Aeq,I,Q), A1 = g(A,J,P), A2 = g(A,J,Q), dot = numeric.dot, sub = numeric.sub;\n    var A3 = dot(A1,B.I);\n    var A4 = sub(A2,dot(A3,Aeq2)), b4 = sub(b,dot(A3,beq));\n    var c1 = Array(P.length), c2 = Array(Q.length);\n    for(i=P.length-1;i!==-1;--i) c1[i] = c[P[i]];\n    for(i=Q.length-1;i!==-1;--i) c2[i] = c[Q[i]];\n    var c4 = sub(c2,dot(c1,dot(B.I,Aeq2)));\n    var S = numeric._solveLP(c4,A4,b4,tol,maxit);\n    var x2 = S.solution;\n    if(x2!==x2) return S;\n    var x1 = dot(B.I,sub(beq,dot(Aeq2,x2)));\n    var x = Array(c.length);\n    for(i=P.length-1;i!==-1;--i) x[P[i]] = x1[i];\n    for(i=Q.length-1;i!==-1;--i) x[Q[i]] = x2[i];\n    return { solution: x, message:S.message, iterations: S.iterations };\n}\n\nnumeric.MPStoLP = function MPStoLP(MPS) {\n    if(MPS instanceof String) { MPS.split('\\n'); }\n    var state = 0;\n    var states = ['Initial state','NAME','ROWS','COLUMNS','RHS','BOUNDS','ENDATA'];\n    var n = MPS.length;\n    var i,j,z,N=0,rows = {}, sign = [], rl = 0, vars = {}, nv = 0;\n    var name;\n    var c = [], A = [], b = [];\n    function err(e) { throw new Error('MPStoLP: '+e+'\\nLine '+i+': '+MPS[i]+'\\nCurrent state: '+states[state]+'\\n'); }\n    for(i=0;i<n;++i) {\n        z = MPS[i];\n        var w0 = z.match(/\\S*/g);\n        var w = [];\n        for(j=0;j<w0.length;++j) if(w0[j]!==\"\") w.push(w0[j]);\n        if(w.length === 0) continue;\n        for(j=0;j<states.length;++j) if(z.substr(0,states[j].length) === states[j]) break;\n        if(j<states.length) {\n            state = j;\n            if(j===1) { name = w[1]; }\n            if(j===6) return { name:name, c:c, A:numeric.transpose(A), b:b, rows:rows, vars:vars };\n            continue;\n        }\n        switch(state) {\n        case 0: case 1: err('Unexpected line');\n        case 2: \n            switch(w[0]) {\n            case 'N': if(N===0) N = w[1]; else err('Two or more N rows'); break;\n            case 'L': rows[w[1]] = rl; sign[rl] = 1; b[rl] = 0; ++rl; break;\n            case 'G': rows[w[1]] = rl; sign[rl] = -1;b[rl] = 0; ++rl; break;\n            case 'E': rows[w[1]] = rl; sign[rl] = 0;b[rl] = 0; ++rl; break;\n            default: err('Parse error '+numeric.prettyPrint(w));\n            }\n            break;\n        case 3:\n            if(!vars.hasOwnProperty(w[0])) { vars[w[0]] = nv; c[nv] = 0; A[nv] = numeric.rep([rl],0); ++nv; }\n            var p = vars[w[0]];\n            for(j=1;j<w.length;j+=2) {\n                if(w[j] === N) { c[p] = parseFloat(w[j+1]); continue; }\n                var q = rows[w[j]];\n                A[p][q] = (sign[q]<0?-1:1)*parseFloat(w[j+1]);\n            }\n            break;\n        case 4:\n            for(j=1;j<w.length;j+=2) b[rows[w[j]]] = (sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);\n            break;\n        case 5: /*FIXME*/ break;\n        case 6: err('Internal error');\n        }\n    }\n    err('Reached end of file without ENDATA');\n}\n// seedrandom.js version 2.0.\n// Author: David Bau 4/2/2011\n//\n// Defines a method Math.seedrandom() that, when called, substitutes\n// an explicitly seeded RC4-based algorithm for Math.random().  Also\n// supports automatic seeding from local or network sources of entropy.\n//\n// Usage:\n//\n//   <script src=http://davidbau.com/encode/seedrandom-min.js></script>\n//\n//   Math.seedrandom('yipee'); Sets Math.random to a function that is\n//                             initialized using the given explicit seed.\n//\n//   Math.seedrandom();        Sets Math.random to a function that is\n//                             seeded using the current time, dom state,\n//                             and other accumulated local entropy.\n//                             The generated seed string is returned.\n//\n//   Math.seedrandom('yowza', true);\n//                             Seeds using the given explicit seed mixed\n//                             together with accumulated entropy.\n//\n//   <script src=\"http://bit.ly/srandom-512\"></script>\n//                             Seeds using physical random bits downloaded\n//                             from random.org.\n//\n//   <script src=\"https://jsonlib.appspot.com/urandom?callback=Math.seedrandom\">\n//   </script>                 Seeds using urandom bits from call.jsonlib.com,\n//                             which is faster than random.org.\n//\n// Examples:\n//\n//   Math.seedrandom(\"hello\");            // Use \"hello\" as the seed.\n//   document.write(Math.random());       // Always 0.5463663768140734\n//   document.write(Math.random());       // Always 0.43973793770592234\n//   var rng1 = Math.random;              // Remember the current prng.\n//\n//   var autoseed = Math.seedrandom();    // New prng with an automatic seed.\n//   document.write(Math.random());       // Pretty much unpredictable.\n//\n//   Math.random = rng1;                  // Continue \"hello\" prng sequence.\n//   document.write(Math.random());       // Always 0.554769432473455\n//\n//   Math.seedrandom(autoseed);           // Restart at the previous seed.\n//   document.write(Math.random());       // Repeat the 'unpredictable' value.\n//\n// Notes:\n//\n// Each time seedrandom('arg') is called, entropy from the passed seed\n// is accumulated in a pool to help generate future seeds for the\n// zero-argument form of Math.seedrandom, so entropy can be injected over\n// time by calling seedrandom with explicit data repeatedly.\n//\n// On speed - This javascript implementation of Math.random() is about\n// 3-10x slower than the built-in Math.random() because it is not native\n// code, but this is typically fast enough anyway.  Seeding is more expensive,\n// especially if you use auto-seeding.  Some details (timings on Chrome 4):\n//\n// Our Math.random()            - avg less than 0.002 milliseconds per call\n// seedrandom('explicit')       - avg less than 0.5 milliseconds per call\n// seedrandom('explicit', true) - avg less than 2 milliseconds per call\n// seedrandom()                 - avg about 38 milliseconds per call\n//\n// LICENSE (BSD):\n//\n// Copyright 2010 David Bau, all rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n// \n//   1. Redistributions of source code must retain the above copyright\n//      notice, this list of conditions and the following disclaimer.\n//\n//   2. Redistributions in binary form must reproduce the above copyright\n//      notice, this list of conditions and the following disclaimer in the\n//      documentation and/or other materials provided with the distribution.\n// \n//   3. Neither the name of this module nor the names of its contributors may\n//      be used to endorse or promote products derived from this software\n//      without specific prior written permission.\n// \n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n/**\n * All code is in an anonymous closure to keep the global namespace clean.\n *\n * @param {number=} overflow \n * @param {number=} startdenom\n */\n\n// Patched by Seb so that seedrandom.js does not pollute the Math object.\n// My tests suggest that doing Math.trouble = 1 makes Math lookups about 5%\n// slower.\nnumeric.seedrandom = { pow:Math.pow, random:Math.random };\n\n(function (pool, math, width, chunks, significance, overflow, startdenom) {\n\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nmath['seedrandom'] = function seedrandom(seed, use_entropy) {\n  var key = [];\n  var arc4;\n\n  // Flatten the seed string or build one from local entropy if needed.\n  seed = mixkey(flatten(\n    use_entropy ? [seed, pool] :\n    arguments.length ? seed :\n    [new Date().getTime(), pool, window], 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  arc4 = new ARC4(key);\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(arc4.S, pool);\n\n  // Override Math.random\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n\n  math['random'] = function random() {  // Closure to return a random double:\n    var n = arc4.g(chunks);             // Start with a numerator n < 2 ^ 48\n    var d = startdenom;                 //   and denominator d = 2 ^ 48.\n    var x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  // Return the seed that was used\n  return seed;\n};\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\n/** @constructor */\nfunction ARC4(key) {\n  var t, u, me = this, keylen = key.length;\n  var i = 0, j = me.i = me.j = me.m = 0;\n  me.S = [];\n  me.c = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) { me.S[i] = i++; }\n  for (i = 0; i < width; i++) {\n    t = me.S[i];\n    j = lowbits(j + t + key[i % keylen]);\n    u = me.S[j];\n    me.S[i] = u;\n    me.S[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  me.g = function getnext(count) {\n    var s = me.S;\n    var i = lowbits(me.i + 1); var t = s[i];\n    var j = lowbits(me.j + t); var u = s[j];\n    s[i] = u;\n    s[j] = t;\n    var r = s[lowbits(t + u)];\n    while (--count) {\n      i = lowbits(i + 1); t = s[i];\n      j = lowbits(j + t); u = s[j];\n      s[i] = u;\n      s[j] = t;\n      r = r * width + s[lowbits(t + u)];\n    }\n    me.i = i;\n    me.j = j;\n    return r;\n  };\n  // For robust unpredictability discard an initial batch of values.\n  // See http://www.rsa.com/rsalabs/node.asp?id=2009\n  me.g(width);\n}\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\n/** @param {Object=} result \n  * @param {string=} prop\n  * @param {string=} typ */\nfunction flatten(obj, depth, result, prop, typ) {\n  result = [];\n  typ = typeof(obj);\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      if (prop.indexOf('S') < 5) {    // Avoid FF3 bug (local/sessionStorage)\n        try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n      }\n    }\n  }\n  return (result.length ? result : obj + (typ != 'string' ? '\\0' : ''));\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\n/** @param {number=} smear \n  * @param {number=} j */\nfunction mixkey(seed, key, smear, j) {\n  seed += '';                         // Ensure the seed is a string\n  smear = 0;\n  for (j = 0; j < seed.length; j++) {\n    key[lowbits(j)] =\n      lowbits((smear ^= key[lowbits(j)] * 19) + seed.charCodeAt(j));\n  }\n  seed = '';\n  for (j in key) { seed += String.fromCharCode(key[j]); }\n  return seed;\n}\n\n//\n// lowbits()\n// A quick \"n mod width\" for width a power of 2.\n//\nfunction lowbits(n) { return n & (width - 1); }\n\n//\n// The following constants are related to IEEE 754 limits.\n//\nstartdenom = math.pow(width, chunks);\nsignificance = math.pow(2, significance);\noverflow = significance * 2;\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to intefere with determinstic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n// End anonymous scope, and pass initial values.\n}(\n  [],   // pool: entropy pool starts empty\n  numeric.seedrandom, // math: package containing random, pow, and seedrandom\n  256,  // width: each RC4 output is 0 <= x < 256\n  6,    // chunks: at least six RC4 outputs for each double\n  52    // significance: there are 52 significant digits in a double\n  ));\n/* This file is a slightly modified version of quadprog.js from Alberto Santini.\n * It has been slightly modified by Sébastien Loisel to make sure that it handles\n * 0-based Arrays instead of 1-based Arrays.\n * License is in resources/LICENSE.quadprog */\n(function(exports) {\n\nfunction base0to1(A) {\n    if(typeof A !== \"object\") { return A; }\n    var ret = [], i,n=A.length;\n    for(i=0;i<n;i++) ret[i+1] = base0to1(A[i]);\n    return ret;\n}\nfunction base1to0(A) {\n    if(typeof A !== \"object\") { return A; }\n    var ret = [], i,n=A.length;\n    for(i=1;i<n;i++) ret[i-1] = base1to0(A[i]);\n    return ret;\n}\n\nfunction dpori(a, lda, n) {\n    var i, j, k, kp1, t;\n\n    for (k = 1; k <= n; k = k + 1) {\n        a[k][k] = 1 / a[k][k];\n        t = -a[k][k];\n        //~ dscal(k - 1, t, a[1][k], 1);\n        for (i = 1; i < k; i = i + 1) {\n            a[i][k] = t * a[i][k];\n        }\n\n        kp1 = k + 1;\n        if (n < kp1) {\n            break;\n        }\n        for (j = kp1; j <= n; j = j + 1) {\n            t = a[k][j];\n            a[k][j] = 0;\n            //~ daxpy(k, t, a[1][k], 1, a[1][j], 1);\n            for (i = 1; i <= k; i = i + 1) {\n                a[i][j] = a[i][j] + (t * a[i][k]);\n            }\n        }\n    }\n\n}\n\nfunction dposl(a, lda, n, b) {\n    var i, k, kb, t;\n\n    for (k = 1; k <= n; k = k + 1) {\n        //~ t = ddot(k - 1, a[1][k], 1, b[1], 1);\n        t = 0;\n        for (i = 1; i < k; i = i + 1) {\n            t = t + (a[i][k] * b[i]);\n        }\n\n        b[k] = (b[k] - t) / a[k][k];\n    }\n\n    for (kb = 1; kb <= n; kb = kb + 1) {\n        k = n + 1 - kb;\n        b[k] = b[k] / a[k][k];\n        t = -b[k];\n        //~ daxpy(k - 1, t, a[1][k], 1, b[1], 1);\n        for (i = 1; i < k; i = i + 1) {\n            b[i] = b[i] + (t * a[i][k]);\n        }\n    }\n}\n\nfunction dpofa(a, lda, n, info) {\n    var i, j, jm1, k, t, s;\n\n    for (j = 1; j <= n; j = j + 1) {\n        info[1] = j;\n        s = 0;\n        jm1 = j - 1;\n        if (jm1 < 1) {\n            s = a[j][j] - s;\n            if (s <= 0) {\n                break;\n            }\n            a[j][j] = Math.sqrt(s);\n        } else {\n            for (k = 1; k <= jm1; k = k + 1) {\n                //~ t = a[k][j] - ddot(k - 1, a[1][k], 1, a[1][j], 1);\n                t = a[k][j];\n                for (i = 1; i < k; i = i + 1) {\n                    t = t - (a[i][j] * a[i][k]);\n                }\n                t = t / a[k][k];\n                a[k][j] = t;\n                s = s + t * t;\n            }\n            s = a[j][j] - s;\n            if (s <= 0) {\n                break;\n            }\n            a[j][j] = Math.sqrt(s);\n        }\n        info[1] = 0;\n    }\n}\n\nfunction qpgen2(dmat, dvec, fddmat, n, sol, crval, amat,\n    bvec, fdamat, q, meq, iact, nact, iter, work, ierr) {\n\n    var i, j, l, l1, info, it1, iwzv, iwrv, iwrm, iwsv, iwuv, nvl, r, iwnbv,\n        temp, sum, t1, tt, gc, gs, nu,\n        t1inf, t2min,\n        vsmall, tmpa, tmpb,\n        go;\n\n    r = Math.min(n, q);\n    l = 2 * n + (r * (r + 5)) / 2 + 2 * q + 1;\n\n    vsmall = 1.0e-60;\n    do {\n        vsmall = vsmall + vsmall;\n        tmpa = 1 + 0.1 * vsmall;\n        tmpb = 1 + 0.2 * vsmall;\n    } while (tmpa <= 1 || tmpb <= 1);\n\n    for (i = 1; i <= n; i = i + 1) {\n        work[i] = dvec[i];\n    }\n    for (i = n + 1; i <= l; i = i + 1) {\n        work[i] = 0;\n    }\n    for (i = 1; i <= q; i = i + 1) {\n        iact[i] = 0;\n    }\n\n    info = [];\n\n    if (ierr[1] === 0) {\n        dpofa(dmat, fddmat, n, info);\n        if (info[1] !== 0) {\n            ierr[1] = 2;\n            return;\n        }\n        dposl(dmat, fddmat, n, dvec);\n        dpori(dmat, fddmat, n);\n    } else {\n        for (j = 1; j <= n; j = j + 1) {\n            sol[j] = 0;\n            for (i = 1; i <= j; i = i + 1) {\n                sol[j] = sol[j] + dmat[i][j] * dvec[i];\n            }\n        }\n        for (j = 1; j <= n; j = j + 1) {\n            dvec[j] = 0;\n            for (i = j; i <= n; i = i + 1) {\n                dvec[j] = dvec[j] + dmat[j][i] * sol[i];\n            }\n        }\n    }\n\n    crval[1] = 0;\n    for (j = 1; j <= n; j = j + 1) {\n        sol[j] = dvec[j];\n        crval[1] = crval[1] + work[j] * sol[j];\n        work[j] = 0;\n        for (i = j + 1; i <= n; i = i + 1) {\n            dmat[i][j] = 0;\n        }\n    }\n    crval[1] = -crval[1] / 2;\n    ierr[1] = 0;\n\n    iwzv = n;\n    iwrv = iwzv + n;\n    iwuv = iwrv + r;\n    iwrm = iwuv + r + 1;\n    iwsv = iwrm + (r * (r + 1)) / 2;\n    iwnbv = iwsv + q;\n\n    for (i = 1; i <= q; i = i + 1) {\n        sum = 0;\n        for (j = 1; j <= n; j = j + 1) {\n            sum = sum + amat[j][i] * amat[j][i];\n        }\n        work[iwnbv + i] = Math.sqrt(sum);\n    }\n    nact = 0;\n    iter[1] = 0;\n    iter[2] = 0;\n\n    function fn_goto_50() {\n        iter[1] = iter[1] + 1;\n\n        l = iwsv;\n        for (i = 1; i <= q; i = i + 1) {\n            l = l + 1;\n            sum = -bvec[i];\n            for (j = 1; j <= n; j = j + 1) {\n                sum = sum + amat[j][i] * sol[j];\n            }\n            if (Math.abs(sum) < vsmall) {\n                sum = 0;\n            }\n            if (i > meq) {\n                work[l] = sum;\n            } else {\n                work[l] = -Math.abs(sum);\n                if (sum > 0) {\n                    for (j = 1; j <= n; j = j + 1) {\n                        amat[j][i] = -amat[j][i];\n                    }\n                    bvec[i] = -bvec[i];\n                }\n            }\n        }\n\n        for (i = 1; i <= nact; i = i + 1) {\n            work[iwsv + iact[i]] = 0;\n        }\n\n        nvl = 0;\n        temp = 0;\n        for (i = 1; i <= q; i = i + 1) {\n            if (work[iwsv + i] < temp * work[iwnbv + i]) {\n                nvl = i;\n                temp = work[iwsv + i] / work[iwnbv + i];\n            }\n        }\n        if (nvl === 0) {\n            return 999;\n        }\n\n        return 0;\n    }\n\n    function fn_goto_55() {\n        for (i = 1; i <= n; i = i + 1) {\n            sum = 0;\n            for (j = 1; j <= n; j = j + 1) {\n                sum = sum + dmat[j][i] * amat[j][nvl];\n            }\n            work[i] = sum;\n        }\n\n        l1 = iwzv;\n        for (i = 1; i <= n; i = i + 1) {\n            work[l1 + i] = 0;\n        }\n        for (j = nact + 1; j <= n; j = j + 1) {\n            for (i = 1; i <= n; i = i + 1) {\n                work[l1 + i] = work[l1 + i] + dmat[i][j] * work[j];\n            }\n        }\n\n        t1inf = true;\n        for (i = nact; i >= 1; i = i - 1) {\n            sum = work[i];\n            l = iwrm + (i * (i + 3)) / 2;\n            l1 = l - i;\n            for (j = i + 1; j <= nact; j = j + 1) {\n                sum = sum - work[l] * work[iwrv + j];\n                l = l + j;\n            }\n            sum = sum / work[l1];\n            work[iwrv + i] = sum;\n            if (iact[i] < meq) {\n                // continue;\n                break;\n            }\n            if (sum < 0) {\n                // continue;\n                break;\n            }\n            t1inf = false;\n            it1 = i;\n        }\n\n        if (!t1inf) {\n            t1 = work[iwuv + it1] / work[iwrv + it1];\n            for (i = 1; i <= nact; i = i + 1) {\n                if (iact[i] < meq) {\n                    // continue;\n                    break;\n                }\n                if (work[iwrv + i] < 0) {\n                    // continue;\n                    break;\n                }\n                temp = work[iwuv + i] / work[iwrv + i];\n                if (temp < t1) {\n                    t1 = temp;\n                    it1 = i;\n                }\n            }\n        }\n\n        sum = 0;\n        for (i = iwzv + 1; i <= iwzv + n; i = i + 1) {\n            sum = sum + work[i] * work[i];\n        }\n        if (Math.abs(sum) <= vsmall) {\n            if (t1inf) {\n                ierr[1] = 1;\n                // GOTO 999\n                return 999;\n            } else {\n                for (i = 1; i <= nact; i = i + 1) {\n                    work[iwuv + i] = work[iwuv + i] - t1 * work[iwrv + i];\n                }\n                work[iwuv + nact + 1] = work[iwuv + nact + 1] + t1;\n                // GOTO 700\n                return 700;\n            }\n        } else {\n            sum = 0;\n            for (i = 1; i <= n; i = i + 1) {\n                sum = sum + work[iwzv + i] * amat[i][nvl];\n            }\n            tt = -work[iwsv + nvl] / sum;\n            t2min = true;\n            if (!t1inf) {\n                if (t1 < tt) {\n                    tt = t1;\n                    t2min = false;\n                }\n            }\n\n            for (i = 1; i <= n; i = i + 1) {\n                sol[i] = sol[i] + tt * work[iwzv + i];\n                if (Math.abs(sol[i]) < vsmall) {\n                    sol[i] = 0;\n                }\n            }\n\n            crval[1] = crval[1] + tt * sum * (tt / 2 + work[iwuv + nact + 1]);\n            for (i = 1; i <= nact; i = i + 1) {\n                work[iwuv + i] = work[iwuv + i] - tt * work[iwrv + i];\n            }\n            work[iwuv + nact + 1] = work[iwuv + nact + 1] + tt;\n\n            if (t2min) {\n                nact = nact + 1;\n                iact[nact] = nvl;\n\n                l = iwrm + ((nact - 1) * nact) / 2 + 1;\n                for (i = 1; i <= nact - 1; i = i + 1) {\n                    work[l] = work[i];\n                    l = l + 1;\n                }\n\n                if (nact === n) {\n                    work[l] = work[n];\n                } else {\n                    for (i = n; i >= nact + 1; i = i - 1) {\n                        if (work[i] === 0) {\n                            // continue;\n                            break;\n                        }\n                        gc = Math.max(Math.abs(work[i - 1]), Math.abs(work[i]));\n                        gs = Math.min(Math.abs(work[i - 1]), Math.abs(work[i]));\n                        if (work[i - 1] >= 0) {\n                            temp = Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n                        } else {\n                            temp = -Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n                        }\n                        gc = work[i - 1] / temp;\n                        gs = work[i] / temp;\n\n                        if (gc === 1) {\n                            // continue;\n                            break;\n                        }\n                        if (gc === 0) {\n                            work[i - 1] = gs * temp;\n                            for (j = 1; j <= n; j = j + 1) {\n                                temp = dmat[j][i - 1];\n                                dmat[j][i - 1] = dmat[j][i];\n                                dmat[j][i] = temp;\n                            }\n                        } else {\n                            work[i - 1] = temp;\n                            nu = gs / (1 + gc);\n                            for (j = 1; j <= n; j = j + 1) {\n                                temp = gc * dmat[j][i - 1] + gs * dmat[j][i];\n                                dmat[j][i] = nu * (dmat[j][i - 1] + temp) - dmat[j][i];\n                                dmat[j][i - 1] = temp;\n\n                            }\n                        }\n                    }\n                    work[l] = work[nact];\n                }\n            } else {\n                sum = -bvec[nvl];\n                for (j = 1; j <= n; j = j + 1) {\n                    sum = sum + sol[j] * amat[j][nvl];\n                }\n                if (nvl > meq) {\n                    work[iwsv + nvl] = sum;\n                } else {\n                    work[iwsv + nvl] = -Math.abs(sum);\n                    if (sum > 0) {\n                        for (j = 1; j <= n; j = j + 1) {\n                            amat[j][nvl] = -amat[j][nvl];\n                        }\n                        bvec[nvl] = -bvec[nvl];\n                    }\n                }\n                // GOTO 700\n                return 700;\n            }\n        }\n\n        return 0;\n    }\n\n    function fn_goto_797() {\n        l = iwrm + (it1 * (it1 + 1)) / 2 + 1;\n        l1 = l + it1;\n        if (work[l1] === 0) {\n            // GOTO 798\n            return 798;\n        }\n        gc = Math.max(Math.abs(work[l1 - 1]), Math.abs(work[l1]));\n        gs = Math.min(Math.abs(work[l1 - 1]), Math.abs(work[l1]));\n        if (work[l1 - 1] >= 0) {\n            temp = Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n        } else {\n            temp = -Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n        }\n        gc = work[l1 - 1] / temp;\n        gs = work[l1] / temp;\n\n        if (gc === 1) {\n            // GOTO 798\n            return 798;\n        }\n        if (gc === 0) {\n            for (i = it1 + 1; i <= nact; i = i + 1) {\n                temp = work[l1 - 1];\n                work[l1 - 1] = work[l1];\n                work[l1] = temp;\n                l1 = l1 + i;\n            }\n            for (i = 1; i <= n; i = i + 1) {\n                temp = dmat[i][it1];\n                dmat[i][it1] = dmat[i][it1 + 1];\n                dmat[i][it1 + 1] = temp;\n            }\n        } else {\n            nu = gs / (1 + gc);\n            for (i = it1 + 1; i <= nact; i = i + 1) {\n                temp = gc * work[l1 - 1] + gs * work[l1];\n                work[l1] = nu * (work[l1 - 1] + temp) - work[l1];\n                work[l1 - 1] = temp;\n                l1 = l1 + i;\n            }\n            for (i = 1; i <= n; i = i + 1) {\n                temp = gc * dmat[i][it1] + gs * dmat[i][it1 + 1];\n                dmat[i][it1 + 1] = nu * (dmat[i][it1] + temp) - dmat[i][it1 + 1];\n                dmat[i][it1] = temp;\n            }\n        }\n\n        return 0;\n    }\n\n    function fn_goto_798() {\n        l1 = l - it1;\n        for (i = 1; i <= it1; i = i + 1) {\n            work[l1] = work[l];\n            l = l + 1;\n            l1 = l1 + 1;\n        }\n\n        work[iwuv + it1] = work[iwuv + it1 + 1];\n        iact[it1] = iact[it1 + 1];\n        it1 = it1 + 1;\n        if (it1 < nact) {\n            // GOTO 797\n            return 797;\n        }\n\n        return 0;\n    }\n\n    function fn_goto_799() {\n        work[iwuv + nact] = work[iwuv + nact + 1];\n        work[iwuv + nact + 1] = 0;\n        iact[nact] = 0;\n        nact = nact - 1;\n        iter[2] = iter[2] + 1;\n\n        return 0;\n    }\n\n    go = 0;\n    while (true) {\n        go = fn_goto_50();\n        if (go === 999) {\n            return;\n        }\n        while (true) {\n            go = fn_goto_55();\n            if (go === 0) {\n                break;\n            }\n            if (go === 999) {\n                return;\n            }\n            if (go === 700) {\n                if (it1 === nact) {\n                    fn_goto_799();\n                } else {\n                    while (true) {\n                        fn_goto_797();\n                        go = fn_goto_798();\n                        if (go !== 797) {\n                            break;\n                        }\n                    }\n                    fn_goto_799();\n                }\n            }\n        }\n    }\n\n}\n\nfunction solveQP(Dmat, dvec, Amat, bvec, meq, factorized) {\n    Dmat = base0to1(Dmat);\n    dvec = base0to1(dvec);\n    Amat = base0to1(Amat);\n    var i, n, q,\n        nact, r,\n        crval = [], iact = [], sol = [], work = [], iter = [],\n        message;\n\n    meq = meq || 0;\n    factorized = factorized ? base0to1(factorized) : [undefined, 0];\n    bvec = bvec ? base0to1(bvec) : [];\n\n    // In Fortran the array index starts from 1\n    n = Dmat.length - 1;\n    q = Amat[1].length - 1;\n\n    if (!bvec) {\n        for (i = 1; i <= q; i = i + 1) {\n            bvec[i] = 0;\n        }\n    }\n    for (i = 1; i <= q; i = i + 1) {\n        iact[i] = 0;\n    }\n    nact = 0;\n    r = Math.min(n, q);\n    for (i = 1; i <= n; i = i + 1) {\n        sol[i] = 0;\n    }\n    crval[1] = 0;\n    for (i = 1; i <= (2 * n + (r * (r + 5)) / 2 + 2 * q + 1); i = i + 1) {\n        work[i] = 0;\n    }\n    for (i = 1; i <= 2; i = i + 1) {\n        iter[i] = 0;\n    }\n\n    qpgen2(Dmat, dvec, n, n, sol, crval, Amat,\n        bvec, n, q, meq, iact, nact, iter, work, factorized);\n\n    message = \"\";\n    if (factorized[1] === 1) {\n        message = \"constraints are inconsistent, no solution!\";\n    }\n    if (factorized[1] === 2) {\n        message = \"matrix D in quadratic function is not positive definite!\";\n    }\n\n    return {\n        solution: base1to0(sol),\n        value: base1to0(crval),\n        unconstrained_solution: base1to0(dvec),\n        iterations: base1to0(iter),\n        iact: base1to0(iact),\n        message: message\n    };\n}\nexports.solveQP = solveQP;\n}(numeric));\n/*\r\nShanti Rao sent me this routine by private email. I had to modify it\r\nslightly to work on Arrays instead of using a Matrix object.\r\nIt is apparently translated from http://stitchpanorama.sourceforge.net/Python/svd.py\r\n*/\r\n\r\nnumeric.svd= function svd(A) {\r\n    var temp;\r\n//Compute the thin SVD from G. H. Golub and C. Reinsch, Numer. Math. 14, 403-420 (1970)\r\n\tvar prec= numeric.epsilon; //Math.pow(2,-52) // assumes double prec\r\n\tvar tolerance= 1.e-64/prec;\r\n\tvar itmax= 50;\r\n\tvar c=0;\r\n\tvar i=0;\r\n\tvar j=0;\r\n\tvar k=0;\r\n\tvar l=0;\r\n\t\r\n\tvar u= numeric.clone(A);\r\n\tvar m= u.length;\r\n\t\r\n\tvar n= u[0].length;\r\n\t\r\n\tif (m < n) throw \"Need more rows than columns\"\r\n\t\r\n\tvar e = new Array(n);\r\n\tvar q = new Array(n);\r\n\tfor (i=0; i<n; i++) e[i] = q[i] = 0.0;\r\n\tvar v = numeric.rep([n,n],0);\r\n//\tv.zero();\r\n\t\r\n \tfunction pythag(a,b)\r\n \t{\r\n\t\ta = Math.abs(a)\r\n\t\tb = Math.abs(b)\r\n\t\tif (a > b)\r\n\t\t\treturn a*Math.sqrt(1.0+(b*b/a/a))\r\n\t\telse if (b == 0.0) \r\n\t\t\treturn a\r\n\t\treturn b*Math.sqrt(1.0+(a*a/b/b))\r\n\t}\r\n\r\n\t//Householder's reduction to bidiagonal form\r\n\r\n\tvar f= 0.0;\r\n\tvar g= 0.0;\r\n\tvar h= 0.0;\r\n\tvar x= 0.0;\r\n\tvar y= 0.0;\r\n\tvar z= 0.0;\r\n\tvar s= 0.0;\r\n\t\r\n\tfor (i=0; i < n; i++)\r\n\t{\t\r\n\t\te[i]= g;\r\n\t\ts= 0.0;\r\n\t\tl= i+1;\r\n\t\tfor (j=i; j < m; j++) \r\n\t\t\ts += (u[j][i]*u[j][i]);\r\n\t\tif (s <= tolerance)\r\n\t\t\tg= 0.0;\r\n\t\telse\r\n\t\t{\t\r\n\t\t\tf= u[i][i];\r\n\t\t\tg= Math.sqrt(s);\r\n\t\t\tif (f >= 0.0) g= -g;\r\n\t\t\th= f*g-s\r\n\t\t\tu[i][i]=f-g;\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\r\n\t\t\t\ts= 0.0\r\n\t\t\t\tfor (k=i; k < m; k++) \r\n\t\t\t\t\ts += u[k][i]*u[k][j]\r\n\t\t\t\tf= s/h\r\n\t\t\t\tfor (k=i; k < m; k++) \r\n\t\t\t\t\tu[k][j]+=f*u[k][i]\r\n\t\t\t}\r\n\t\t}\r\n\t\tq[i]= g\r\n\t\ts= 0.0\r\n\t\tfor (j=l; j < n; j++) \r\n\t\t\ts= s + u[i][j]*u[i][j]\r\n\t\tif (s <= tolerance)\r\n\t\t\tg= 0.0\r\n\t\telse\r\n\t\t{\t\r\n\t\t\tf= u[i][i+1]\r\n\t\t\tg= Math.sqrt(s)\r\n\t\t\tif (f >= 0.0) g= -g\r\n\t\t\th= f*g - s\r\n\t\t\tu[i][i+1] = f-g;\r\n\t\t\tfor (j=l; j < n; j++) e[j]= u[i][j]/h\r\n\t\t\tfor (j=l; j < m; j++)\r\n\t\t\t{\t\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\ts += (u[j][k]*u[i][k])\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\tu[j][k]+=s*e[k]\r\n\t\t\t}\t\r\n\t\t}\r\n\t\ty= Math.abs(q[i])+Math.abs(e[i])\r\n\t\tif (y>x) \r\n\t\t\tx=y\r\n\t}\r\n\t\r\n\t// accumulation of right hand gtransformations\r\n\tfor (i=n-1; i != -1; i+= -1)\r\n\t{\t\r\n\t\tif (g != 0.0)\r\n\t\t{\r\n\t\t \th= g*u[i][i+1]\r\n\t\t\tfor (j=l; j < n; j++) \r\n\t\t\t\tv[j][i]=u[i][j]/h\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\t\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\ts += u[i][k]*v[k][j]\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\tv[k][j]+=(s*v[k][i])\r\n\t\t\t}\t\r\n\t\t}\r\n\t\tfor (j=l; j < n; j++)\r\n\t\t{\r\n\t\t\tv[i][j] = 0;\r\n\t\t\tv[j][i] = 0;\r\n\t\t}\r\n\t\tv[i][i] = 1;\r\n\t\tg= e[i]\r\n\t\tl= i\r\n\t}\r\n\t\r\n\t// accumulation of left hand transformations\r\n\tfor (i=n-1; i != -1; i+= -1)\r\n\t{\t\r\n\t\tl= i+1\r\n\t\tg= q[i]\r\n\t\tfor (j=l; j < n; j++) \r\n\t\t\tu[i][j] = 0;\r\n\t\tif (g != 0.0)\r\n\t\t{\r\n\t\t\th= u[i][i]*g\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < m; k++) s += u[k][i]*u[k][j];\r\n\t\t\t\tf= s/h\r\n\t\t\t\tfor (k=i; k < m; k++) u[k][j]+=f*u[k][i];\r\n\t\t\t}\r\n\t\t\tfor (j=i; j < m; j++) u[j][i] = u[j][i]/g;\r\n\t\t}\r\n\t\telse\r\n\t\t\tfor (j=i; j < m; j++) u[j][i] = 0;\r\n\t\tu[i][i] += 1;\r\n\t}\r\n\t\r\n\t// diagonalization of the bidiagonal form\r\n\tprec= prec*x\r\n\tfor (k=n-1; k != -1; k+= -1)\r\n\t{\r\n\t\tfor (var iteration=0; iteration < itmax; iteration++)\r\n\t\t{\t// test f splitting\r\n\t\t\tvar test_convergence = false\r\n\t\t\tfor (l=k; l != -1; l+= -1)\r\n\t\t\t{\t\r\n\t\t\t\tif (Math.abs(e[l]) <= prec)\r\n\t\t\t\t{\ttest_convergence= true\r\n\t\t\t\t\tbreak \r\n\t\t\t\t}\r\n\t\t\t\tif (Math.abs(q[l-1]) <= prec)\r\n\t\t\t\t\tbreak \r\n\t\t\t}\r\n\t\t\tif (!test_convergence)\r\n\t\t\t{\t// cancellation of e[l] if l>0\r\n\t\t\t\tc= 0.0\r\n\t\t\t\ts= 1.0\r\n\t\t\t\tvar l1= l-1\r\n\t\t\t\tfor (i =l; i<k+1; i++)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tf= s*e[i]\r\n\t\t\t\t\te[i]= c*e[i]\r\n\t\t\t\t\tif (Math.abs(f) <= prec)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tg= q[i]\r\n\t\t\t\t\th= pythag(f,g)\r\n\t\t\t\t\tq[i]= h\r\n\t\t\t\t\tc= g/h\r\n\t\t\t\t\ts= -f/h\r\n\t\t\t\t\tfor (j=0; j < m; j++)\r\n\t\t\t\t\t{\t\r\n\t\t\t\t\t\ty= u[j][l1]\r\n\t\t\t\t\t\tz= u[j][i]\r\n\t\t\t\t\t\tu[j][l1] =  y*c+(z*s)\r\n\t\t\t\t\t\tu[j][i] = -y*s+(z*c)\r\n\t\t\t\t\t} \r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\t// test f convergence\r\n\t\t\tz= q[k]\r\n\t\t\tif (l== k)\r\n\t\t\t{\t//convergence\r\n\t\t\t\tif (z<0.0)\r\n\t\t\t\t{\t//q[k] is made non-negative\r\n\t\t\t\t\tq[k]= -z\r\n\t\t\t\t\tfor (j=0; j < n; j++)\r\n\t\t\t\t\t\tv[j][k] = -v[j][k]\r\n\t\t\t\t}\r\n\t\t\t\tbreak  //break out of iteration loop and move on to next k value\r\n\t\t\t}\r\n\t\t\tif (iteration >= itmax-1)\r\n\t\t\t\tthrow 'Error: no convergence.'\r\n\t\t\t// shift from bottom 2x2 minor\r\n\t\t\tx= q[l]\r\n\t\t\ty= q[k-1]\r\n\t\t\tg= e[k-1]\r\n\t\t\th= e[k]\r\n\t\t\tf= ((y-z)*(y+z)+(g-h)*(g+h))/(2.0*h*y)\r\n\t\t\tg= pythag(f,1.0)\r\n\t\t\tif (f < 0.0)\r\n\t\t\t\tf= ((x-z)*(x+z)+h*(y/(f-g)-h))/x\r\n\t\t\telse\r\n\t\t\t\tf= ((x-z)*(x+z)+h*(y/(f+g)-h))/x\r\n\t\t\t// next QR transformation\r\n\t\t\tc= 1.0\r\n\t\t\ts= 1.0\r\n\t\t\tfor (i=l+1; i< k+1; i++)\r\n\t\t\t{\t\r\n\t\t\t\tg= e[i]\r\n\t\t\t\ty= q[i]\r\n\t\t\t\th= s*g\r\n\t\t\t\tg= c*g\r\n\t\t\t\tz= pythag(f,h)\r\n\t\t\t\te[i-1]= z\r\n\t\t\t\tc= f/z\r\n\t\t\t\ts= h/z\r\n\t\t\t\tf= x*c+g*s\r\n\t\t\t\tg= -x*s+g*c\r\n\t\t\t\th= y*s\r\n\t\t\t\ty= y*c\r\n\t\t\t\tfor (j=0; j < n; j++)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tx= v[j][i-1]\r\n\t\t\t\t\tz= v[j][i]\r\n\t\t\t\t\tv[j][i-1] = x*c+z*s\r\n\t\t\t\t\tv[j][i] = -x*s+z*c\r\n\t\t\t\t}\r\n\t\t\t\tz= pythag(f,h)\r\n\t\t\t\tq[i-1]= z\r\n\t\t\t\tc= f/z\r\n\t\t\t\ts= h/z\r\n\t\t\t\tf= c*g+s*y\r\n\t\t\t\tx= -s*g+c*y\r\n\t\t\t\tfor (j=0; j < m; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\ty= u[j][i-1]\r\n\t\t\t\t\tz= u[j][i]\r\n\t\t\t\t\tu[j][i-1] = y*c+z*s\r\n\t\t\t\t\tu[j][i] = -y*s+z*c\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\te[l]= 0.0\r\n\t\t\te[k]= f\r\n\t\t\tq[k]= x\r\n\t\t} \r\n\t}\r\n\t\t\r\n\t//vt= transpose(v)\r\n\t//return (u,q,vt)\r\n\tfor (i=0;i<q.length; i++) \r\n\t  if (q[i] < prec) q[i] = 0\r\n\t  \r\n\t//sort eigenvalues\t\r\n\tfor (i=0; i< n; i++)\r\n\t{\t \r\n\t//writeln(q)\r\n\t for (j=i-1; j >= 0; j--)\r\n\t {\r\n\t  if (q[j] < q[i])\r\n\t  {\r\n\t//  writeln(i,'-',j)\r\n\t   c = q[j]\r\n\t   q[j] = q[i]\r\n\t   q[i] = c\r\n\t   for(k=0;k<u.length;k++) { temp = u[k][i]; u[k][i] = u[k][j]; u[k][j] = temp; }\r\n\t   for(k=0;k<v.length;k++) { temp = v[k][i]; v[k][i] = v[k][j]; v[k][j] = temp; }\r\n//\t   u.swapCols(i,j)\r\n//\t   v.swapCols(i,j)\r\n\t   i = j\t   \r\n\t  }\r\n\t }\t\r\n\t}\r\n\t\r\n\treturn {U:u,S:q,V:v}\r\n};\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/numeric/numeric-1.2.6.js\n ** module id = 95\n ** module chunks = 0 1\n **/","export function twoPoints(objs) {\n  var points = [];\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class == 'TCAD.TWO.EndPoint') {\n      points.push(objs[i]);\n    } else if (objs[i]._class == 'TCAD.TWO.Segment') {\n      points.push(objs[i].a);\n      points.push(objs[i].b);\n    }\n  }\n  if (points.length < 2) {\n    throw \"Illegal Argument. Constraint requires 2 points or 1 line.\"\n  }\n  return points;\n}\n\nexport function points(objs) {\n  var points = [];\n  for (var i = 0; i < objs.length; ++i) {\n    objs[i].accept(function(o) {\n      if (o._class === 'TCAD.TWO.EndPoint')  {\n        points.push(o);\n      }\n      return true;\n    });\n  }\n  if (points.length == 0) {\n    throw \"Illegal Argument. Constraint requires at least 1 point/line/arc/circle.\"\n  }\n  return points;\n}\n\nexport function arkCirc(objs, min) {\n  var arcs = [];\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class === 'TCAD.TWO.Arc' || objs[i]._class === 'TCAD.TWO.Circle') {\n      arcs.push(objs[i]);\n    }\n  }\n  if (arcs.length < min) {\n    throw \"Illegal Argument. Constraint requires at least \" + min + \" arcs/circles.\"\n  }\n  return arcs;\n}\n\nexport function generic(objs, types, min) {\n  var result = [];\n  for (var i = 0; i < objs.length; ++i) {\n    if (types.indexOf(objs[i]._class)  > -1 ) {\n      result.push(objs[i]);\n    }\n  }\n  if (result.length < min) {\n    throw \"Illegal Argument. Constraint requires at least \" + min + \" of \" + types;\n  }\n  return result;\n}\n\nexport function pointAndLine(objs) {\n\n  var point = null;\n  var line = null;\n\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class == 'TCAD.TWO.EndPoint') {\n      point = objs[i];\n    } else if (objs[i]._class == 'TCAD.TWO.Segment') {\n      line = objs[i];\n    }\n  }\n  if (point == null || line == null) {\n    throw \"Illegal Argument. Constraint requires point and line.\"\n  }\n\n  return [point, line];\n}\n\nexport function line(objs) {\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class == 'TCAD.TWO.Segment') {\n      return objs[i];\n    }\n  }\n  throw \"Illegal Argument. Constraint requires a line.\"\n}\n\nexport function lines(objs) {\n  return objs.filter(o => o._class == 'TCAD.TWO.Segment')\n}\n\nexport function arcCircAndLine(objs) {\n\n  var arc = null;\n  var line = null;\n\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class === 'TCAD.TWO.Arc' || objs[i]._class === 'TCAD.TWO.Circle') {\n      arc = objs[i];\n    } else if (objs[i]._class == 'TCAD.TWO.Segment') {\n      line = objs[i];\n    }\n  }\n  if (arc == null || line == null) {\n    throw \"Illegal Argument. Constraint requires arc and line.\"\n  }\n\n  return [arc, line];\n}\n\nexport function twoLines(objs) {\n  var lines = [];\n  for (var i = 0; i < objs.length; ++i) {\n    if (objs[i]._class == 'TCAD.TWO.Segment') {\n      lines.push(objs[i]);\n    }\n  }\n  if (lines.length < 2) {\n    throw \"Illegal Argument. Constraint requires 2 lines.\"\n  }\n  return lines;\n}\n\nexport function sketchObjects(objs, silent, matching) {\n  var fetched = [];\n  for (var i = 0; i < objs.length; ++i) {\n    for (var j = 0; j < matching.length; j++) {\n      if (objs[i]._class ==  matching[j]) {\n        fetched[j] = objs[i]; \n        matching[j] = null;\n      }\n    }\n  }\n  if (fetched.length != matching.length) {\n    if (silent) {\n      return null;\n    } else {\n      throw \"Illegal Argument. \" + matching + \" required\";\n    }\n  }\n  return fetched;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/fetchers.js\n **/","import diff_match_patch from 'diff-match-patch';\n\n/** @constructor */\nfunction HistoryManager(viewer) {\n  this.viewer = viewer;\n  this.dmp = new diff_match_patch();\n  this.init(this.viewer.io.serializeSketch());\n}\n\nHistoryManager.prototype.init = function(sketchData) {\n  this.lastCheckpoint = sketchData;\n  this.diffs = [];\n  this.historyPointer = -1;\n};\n\nHistoryManager.prototype.undo = function () {\n  var currentState = this.viewer.io.serializeSketch();\n  if (currentState == this.lastCheckpoint) {\n    if (this.historyPointer != -1) {\n      var diff = this.diffs[this.historyPointer];\n      this.lastCheckpoint = this.applyDiff(this.lastCheckpoint, diff);\n      this.viewer.io.loadSketch(this.lastCheckpoint);\n      this.viewer.fullHeavyUIRefresh();\n      this.historyPointer --;\n    }\n  } else {\n    var diffToCurr = this.getDiff(currentState, this.lastCheckpoint);\n    if (this.historyPointer != this.diffs.length - 1) {\n      this.diffs.splice(this.historyPointer + 1, this.diffs.length - this.historyPointer + 1)\n    }\n    this.diffs.push(diffToCurr);\n    this.viewer.io.loadSketch(this.lastCheckpoint);\n    this.viewer.fullHeavyUIRefresh();\n  }\n};\n\nHistoryManager.prototype.lightCheckpoint = function (weight) {\n  this._counter += weight;\n  if (this._counter >= 100) {\n    this.checkpoint();\n  }\n};\n\nHistoryManager.prototype.checkpoint = function () {\n  try {\n    this._checkpoint();\n  } catch(e) {\n    console.log(e);\n  }\n};\n\nHistoryManager.prototype._checkpoint = function () {\n  this._counter = 0;\n  var currentState = this.viewer.io.serializeSketch();\n  if (currentState == this.lastCheckpoint) {\n    return;\n  }\n  var diffToCurr = this.getDiff(currentState, this.lastCheckpoint);\n  if (this.historyPointer != this.diffs.length - 1) {\n    this.diffs.splice(this.historyPointer + 1, this.diffs.length - this.historyPointer + 1)\n  }\n  this.diffs.push(diffToCurr);\n  this.historyPointer = this.diffs.length - 1;\n  this.lastCheckpoint = currentState;\n};\n\nHistoryManager.prototype.redo = function () {\n  var currentState = this.viewer.io.serializeSketch();\n  if (currentState != this.lastCheckpoint) {\n    return;\n  }\n  if (this.historyPointer != this.diffs.length - 1 && this.diffs.length != 0) {\n    this.historyPointer ++;\n    var diff = this.diffs[this.historyPointer];\n    this.lastCheckpoint = this.applyDiffInv(this.lastCheckpoint, diff);\n    this.viewer.io.loadSketch(this.lastCheckpoint);\n    this.viewer.fullHeavyUIRefresh();\n  }\n};\n\nHistoryManager.prototype.applyDiff = function (text1, diff) {\n  var dmp = this.dmp;\n  var results = dmp.patch_apply(diff, text1);\n  return results[0];\n};\n\nHistoryManager.prototype.applyDiffInv = function (text1, diff) {\n  this.reversePatch(diff);\n  var result = this.applyDiff(text1, diff);\n  this.reversePatch(diff);\n  return result;\n};\n\nHistoryManager.prototype.reversePatch = function (plist) {\n  for (var i = 0; i < plist.length; i++) {\n    var patch = plist[i];\n    for (var j = 0; j < patch.diffs.length; j++) {\n      var diff = patch.diffs[j];\n      diff[0] *= -1;\n    }\n  }\n};\n\nHistoryManager.prototype.getDiff = function (text1, text2) {\n  var dmp = this.dmp;\n  var diff = dmp.diff_main(text1, text2, true);\n\n  if (diff.length > 2) {\n    dmp.diff_cleanupSemantic(diff);\n  }\n\n  var patch_list = dmp.patch_make(text1, text2, diff);\n  //var patch_text = dmp.patch_toText(patch_list);\n  //console.log(patch_list);\n  return patch_list;\n};\n\nexport {HistoryManager}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/history.js\n **/","'use strict'\r\n\r\n/**\r\n * Diff Match and Patch\r\n *\r\n * Copyright 2006 Google Inc.\r\n * http://code.google.com/p/google-diff-match-patch/\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * @fileoverview Computes the difference between two texts to create a patch.\r\n * Applies the patch onto another text, allowing for errors.\r\n * @author fraser@google.com (Neil Fraser)\r\n */\r\n\r\n/**\r\n * Class containing the diff, match and patch methods.\r\n * @constructor\r\n */\r\nfunction diff_match_patch() {\r\n\r\n  // Defaults.\r\n  // Redefine these in your program to override the defaults.\r\n\r\n  // Number of seconds to map a diff before giving up (0 for infinity).\r\n  this.Diff_Timeout = 1.0;\r\n  // Cost of an empty edit operation in terms of edit characters.\r\n  this.Diff_EditCost = 4;\r\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\r\n  this.Match_Threshold = 0.5;\r\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\r\n  // A match this many characters away from the expected location will add\r\n  // 1.0 to the score (0.0 is a perfect match).\r\n  this.Match_Distance = 1000;\r\n  // When deleting a large block of text (over ~64 characters), how close do\r\n  // the contents have to be to match the expected contents. (0.0 = perfection,\r\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\r\n  // end points of a delete need to match.\r\n  this.Patch_DeleteThreshold = 0.5;\r\n  // Chunk size for context length.\r\n  this.Patch_Margin = 4;\r\n\r\n  // The number of bits in an int.\r\n  this.Match_MaxBits = 32;\r\n}\r\n\r\n\r\n//  DIFF FUNCTIONS\r\n\r\n\r\n/**\r\n * The data structure representing a diff is an array of tuples:\r\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\r\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\r\n */\r\nvar DIFF_DELETE = -1;\r\nvar DIFF_INSERT = 1;\r\nvar DIFF_EQUAL = 0;\r\n\r\n/** @typedef {{0: number, 1: string}} */\r\ndiff_match_patch.Diff;\r\n\r\n\r\n/**\r\n * Find the differences between two texts.  Simplifies the problem by stripping\r\n * any common prefix or suffix off the texts before diffing.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\r\n *     then don't run a line-level diff first to identify the changed areas.\r\n *     Defaults to true, which does a faster, slightly less optimal diff.\r\n * @param {number} opt_deadline Optional time when the diff should be complete\r\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\r\n *     instead.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\r\n    opt_deadline) {\r\n  // Set a deadline by which time the diff must be complete.\r\n  if (typeof opt_deadline == 'undefined') {\r\n    if (this.Diff_Timeout <= 0) {\r\n      opt_deadline = Number.MAX_VALUE;\r\n    } else {\r\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\r\n    }\r\n  }\r\n  var deadline = opt_deadline;\r\n\r\n  // Check for null inputs.\r\n  if (text1 == null || text2 == null) {\r\n    throw new Error('Null input. (diff_main)');\r\n  }\r\n\r\n  // Check for equality (speedup).\r\n  if (text1 == text2) {\r\n    if (text1) {\r\n      return [[DIFF_EQUAL, text1]];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  if (typeof opt_checklines == 'undefined') {\r\n    opt_checklines = true;\r\n  }\r\n  var checklines = opt_checklines;\r\n\r\n  // Trim off common prefix (speedup).\r\n  var commonlength = this.diff_commonPrefix(text1, text2);\r\n  var commonprefix = text1.substring(0, commonlength);\r\n  text1 = text1.substring(commonlength);\r\n  text2 = text2.substring(commonlength);\r\n\r\n  // Trim off common suffix (speedup).\r\n  commonlength = this.diff_commonSuffix(text1, text2);\r\n  var commonsuffix = text1.substring(text1.length - commonlength);\r\n  text1 = text1.substring(0, text1.length - commonlength);\r\n  text2 = text2.substring(0, text2.length - commonlength);\r\n\r\n  // Compute the diff on the middle block.\r\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\r\n\r\n  // Restore the prefix and suffix.\r\n  if (commonprefix) {\r\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\r\n  }\r\n  if (commonsuffix) {\r\n    diffs.push([DIFF_EQUAL, commonsuffix]);\r\n  }\r\n  this.diff_cleanupMerge(diffs);\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the differences between two texts.  Assumes that the texts do not\r\n * have any common prefix or suffix.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\r\n *     line-level diff first to identify the changed areas.\r\n *     If true, then run a faster, slightly less optimal diff.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\r\n    deadline) {\r\n  var diffs;\r\n\r\n  if (!text1) {\r\n    // Just add some text (speedup).\r\n    return [[DIFF_INSERT, text2]];\r\n  }\r\n\r\n  if (!text2) {\r\n    // Just delete some text (speedup).\r\n    return [[DIFF_DELETE, text1]];\r\n  }\r\n\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  var i = longtext.indexOf(shorttext);\r\n  if (i != -1) {\r\n    // Shorter text is inside the longer text (speedup).\r\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\r\n             [DIFF_EQUAL, shorttext],\r\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\r\n    // Swap insertions for deletions if diff is reversed.\r\n    if (text1.length > text2.length) {\r\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\r\n    }\r\n    return diffs;\r\n  }\r\n\r\n  if (shorttext.length == 1) {\r\n    // Single character string.\r\n    // After the previous speedup, the character can't be an equality.\r\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n  }\r\n\r\n  // Check to see if the problem can be split in two.\r\n  var hm = this.diff_halfMatch_(text1, text2);\r\n  if (hm) {\r\n    // A half-match was found, sort out the return data.\r\n    var text1_a = hm[0];\r\n    var text1_b = hm[1];\r\n    var text2_a = hm[2];\r\n    var text2_b = hm[3];\r\n    var mid_common = hm[4];\r\n    // Send both pairs off for separate processing.\r\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\r\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\r\n    // Merge the results.\r\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\r\n  }\r\n\r\n  if (checklines && text1.length > 100 && text2.length > 100) {\r\n    return this.diff_lineMode_(text1, text2, deadline);\r\n  }\r\n\r\n  return this.diff_bisect_(text1, text2, deadline);\r\n};\r\n\r\n\r\n/**\r\n * Do a quick line-level diff on both strings, then rediff the parts for\r\n * greater accuracy.\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\r\n  // Scan the text on a line-by-line basis first.\r\n  var a = this.diff_linesToChars_(text1, text2);\r\n  text1 = a.chars1;\r\n  text2 = a.chars2;\r\n  var linearray = a.lineArray;\r\n\r\n  var diffs = this.diff_main(text1, text2, false, deadline);\r\n\r\n  // Convert the diff back to original text.\r\n  this.diff_charsToLines_(diffs, linearray);\r\n  // Eliminate freak matches (e.g. blank lines)\r\n  this.diff_cleanupSemantic(diffs);\r\n\r\n  // Rediff any replacement blocks, this time character-by-character.\r\n  // Add a dummy entry at the end.\r\n  diffs.push([DIFF_EQUAL, '']);\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete >= 1 && count_insert >= 1) {\r\n          // Delete the offending records and add the merged ones.\r\n          diffs.splice(pointer - count_delete - count_insert,\r\n                       count_delete + count_insert);\r\n          pointer = pointer - count_delete - count_insert;\r\n          var a = this.diff_main(text_delete, text_insert, false, deadline);\r\n          for (var j = a.length - 1; j >= 0; j--) {\r\n            diffs.splice(pointer, 0, a[j]);\r\n          }\r\n          pointer = pointer + a.length;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n    pointer++;\r\n  }\r\n  diffs.pop();  // Remove the dummy entry at the end.\r\n\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the 'middle snake' of a diff, split the problem in two\r\n * and return the recursively constructed diff.\r\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\r\n  var v_offset = max_d;\r\n  var v_length = 2 * max_d;\r\n  var v1 = new Array(v_length);\r\n  var v2 = new Array(v_length);\r\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\r\n  // integers and undefined.\r\n  for (var x = 0; x < v_length; x++) {\r\n    v1[x] = -1;\r\n    v2[x] = -1;\r\n  }\r\n  v1[v_offset + 1] = 0;\r\n  v2[v_offset + 1] = 0;\r\n  var delta = text1_length - text2_length;\r\n  // If the total number of characters is odd, then the front path will collide\r\n  // with the reverse path.\r\n  var front = (delta % 2 != 0);\r\n  // Offsets for start and end of k loop.\r\n  // Prevents mapping of space beyond the grid.\r\n  var k1start = 0;\r\n  var k1end = 0;\r\n  var k2start = 0;\r\n  var k2end = 0;\r\n  for (var d = 0; d < max_d; d++) {\r\n    // Bail out if deadline is reached.\r\n    if ((new Date()).getTime() > deadline) {\r\n      break;\r\n    }\r\n\r\n    // Walk the front path one step.\r\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\r\n      var k1_offset = v_offset + k1;\r\n      var x1;\r\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\r\n        x1 = v1[k1_offset + 1];\r\n      } else {\r\n        x1 = v1[k1_offset - 1] + 1;\r\n      }\r\n      var y1 = x1 - k1;\r\n      while (x1 < text1_length && y1 < text2_length &&\r\n             text1.charAt(x1) == text2.charAt(y1)) {\r\n        x1++;\r\n        y1++;\r\n      }\r\n      v1[k1_offset] = x1;\r\n      if (x1 > text1_length) {\r\n        // Ran off the right of the graph.\r\n        k1end += 2;\r\n      } else if (y1 > text2_length) {\r\n        // Ran off the bottom of the graph.\r\n        k1start += 2;\r\n      } else if (front) {\r\n        var k2_offset = v_offset + delta - k1;\r\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\r\n          // Mirror x2 onto top-left coordinate system.\r\n          var x2 = text1_length - v2[k2_offset];\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Walk the reverse path one step.\r\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\r\n      var k2_offset = v_offset + k2;\r\n      var x2;\r\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\r\n        x2 = v2[k2_offset + 1];\r\n      } else {\r\n        x2 = v2[k2_offset - 1] + 1;\r\n      }\r\n      var y2 = x2 - k2;\r\n      while (x2 < text1_length && y2 < text2_length &&\r\n             text1.charAt(text1_length - x2 - 1) ==\r\n             text2.charAt(text2_length - y2 - 1)) {\r\n        x2++;\r\n        y2++;\r\n      }\r\n      v2[k2_offset] = x2;\r\n      if (x2 > text1_length) {\r\n        // Ran off the left of the graph.\r\n        k2end += 2;\r\n      } else if (y2 > text2_length) {\r\n        // Ran off the top of the graph.\r\n        k2start += 2;\r\n      } else if (!front) {\r\n        var k1_offset = v_offset + delta - k2;\r\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\r\n          var x1 = v1[k1_offset];\r\n          var y1 = v_offset + x1 - k1_offset;\r\n          // Mirror x2 onto top-left coordinate system.\r\n          x2 = text1_length - x2;\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Diff took too long and hit the deadline or\r\n  // number of diffs equals number of characters, no commonality at all.\r\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n};\r\n\r\n\r\n/**\r\n * Given the location of the 'middle snake', split the diff in two parts\r\n * and recurse.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} x Index of split point in text1.\r\n * @param {number} y Index of split point in text2.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\r\n    deadline) {\r\n  var text1a = text1.substring(0, x);\r\n  var text2a = text2.substring(0, y);\r\n  var text1b = text1.substring(x);\r\n  var text2b = text2.substring(y);\r\n\r\n  // Compute both diffs serially.\r\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\r\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\r\n\r\n  return diffs.concat(diffsb);\r\n};\r\n\r\n\r\n/**\r\n * Split two texts into an array of strings.  Reduce the texts to a string of\r\n * hashes where each Unicode character represents one line.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\r\n *     An object containing the encoded text1, the encoded text2 and\r\n *     the array of unique strings.\r\n *     The zeroth element of the array of unique strings is intentionally blank.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\r\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\r\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\r\n\r\n  // '\\x00' is a valid character, but various debuggers don't like it.\r\n  // So we'll insert a junk entry to avoid generating a null character.\r\n  lineArray[0] = '';\r\n\r\n  /**\r\n   * Split a text into an array of strings.  Reduce the texts to a string of\r\n   * hashes where each Unicode character represents one line.\r\n   * Modifies linearray and linehash through being a closure.\r\n   * @param {string} text String to encode.\r\n   * @return {string} Encoded string.\r\n   * @private\r\n   */\r\n  function diff_linesToCharsMunge_(text) {\r\n    var chars = '';\r\n    // Walk the text, pulling out a substring for each line.\r\n    // text.split('\\n') would would temporarily double our memory footprint.\r\n    // Modifying text would create many large strings to garbage collect.\r\n    var lineStart = 0;\r\n    var lineEnd = -1;\r\n    // Keeping our own length variable is faster than looking it up.\r\n    var lineArrayLength = lineArray.length;\r\n    while (lineEnd < text.length - 1) {\r\n      lineEnd = text.indexOf('\\n', lineStart);\r\n      if (lineEnd == -1) {\r\n        lineEnd = text.length - 1;\r\n      }\r\n      var line = text.substring(lineStart, lineEnd + 1);\r\n      lineStart = lineEnd + 1;\r\n\r\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\r\n          (lineHash[line] !== undefined)) {\r\n        chars += String.fromCharCode(lineHash[line]);\r\n      } else {\r\n        chars += String.fromCharCode(lineArrayLength);\r\n        lineHash[line] = lineArrayLength;\r\n        lineArray[lineArrayLength++] = line;\r\n      }\r\n    }\r\n    return chars;\r\n  }\r\n\r\n  var chars1 = diff_linesToCharsMunge_(text1);\r\n  var chars2 = diff_linesToCharsMunge_(text2);\r\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\r\n};\r\n\r\n\r\n/**\r\n * Rehydrate the text in a diff from a string of line hashes to real lines of\r\n * text.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {!Array.<string>} lineArray Array of unique strings.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var chars = diffs[x][1];\r\n    var text = [];\r\n    for (var y = 0; y < chars.length; y++) {\r\n      text[y] = lineArray[chars.charCodeAt(y)];\r\n    }\r\n    diffs[x][1] = text.join('');\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Determine the common prefix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the start of each\r\n *     string.\r\n */\r\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerstart = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(pointerstart, pointermid) ==\r\n        text2.substring(pointerstart, pointermid)) {\r\n      pointermin = pointermid;\r\n      pointerstart = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine the common suffix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of each string.\r\n */\r\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 ||\r\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerend = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\r\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\r\n      pointermin = pointermid;\r\n      pointerend = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine if the suffix of one string is the prefix of another.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of the first\r\n *     string and the start of the second string.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  // Eliminate the null case.\r\n  if (text1_length == 0 || text2_length == 0) {\r\n    return 0;\r\n  }\r\n  // Truncate the longer string.\r\n  if (text1_length > text2_length) {\r\n    text1 = text1.substring(text1_length - text2_length);\r\n  } else if (text1_length < text2_length) {\r\n    text2 = text2.substring(0, text1_length);\r\n  }\r\n  var text_length = Math.min(text1_length, text2_length);\r\n  // Quick check for the worst case.\r\n  if (text1 == text2) {\r\n    return text_length;\r\n  }\r\n\r\n  // Start by looking for a single character match\r\n  // and increase length until no match is found.\r\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\r\n  var best = 0;\r\n  var length = 1;\r\n  while (true) {\r\n    var pattern = text1.substring(text_length - length);\r\n    var found = text2.indexOf(pattern);\r\n    if (found == -1) {\r\n      return best;\r\n    }\r\n    length += found;\r\n    if (found == 0 || text1.substring(text_length - length) ==\r\n        text2.substring(0, length)) {\r\n      best = length;\r\n      length++;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Do the two texts share a substring which is at least half the length of the\r\n * longer text?\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {Array.<string>} Five element Array, containing the prefix of\r\n *     text1, the suffix of text1, the prefix of text2, the suffix of\r\n *     text2 and the common middle.  Or null if there was no match.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\r\n  if (this.Diff_Timeout <= 0) {\r\n    // Don't risk returning a non-optimal diff if we have unlimited time.\r\n    return null;\r\n  }\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\r\n    return null;  // Pointless.\r\n  }\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Does a substring of shorttext exist within longtext such that the substring\r\n   * is at least half the length of longtext?\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} longtext Longer string.\r\n   * @param {string} shorttext Shorter string.\r\n   * @param {number} i Start index of quarter length substring within longtext.\r\n   * @return {Array.<string>} Five element Array, containing the prefix of\r\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\r\n   *     of shorttext and the common middle.  Or null if there was no match.\r\n   * @private\r\n   */\r\n  function diff_halfMatchI_(longtext, shorttext, i) {\r\n    // Start with a 1/4 length substring at position i as a seed.\r\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\r\n    var j = -1;\r\n    var best_common = '';\r\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\r\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\r\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\r\n                                               shorttext.substring(j));\r\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\r\n                                               shorttext.substring(0, j));\r\n      if (best_common.length < suffixLength + prefixLength) {\r\n        best_common = shorttext.substring(j - suffixLength, j) +\r\n            shorttext.substring(j, j + prefixLength);\r\n        best_longtext_a = longtext.substring(0, i - suffixLength);\r\n        best_longtext_b = longtext.substring(i + prefixLength);\r\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\r\n        best_shorttext_b = shorttext.substring(j + prefixLength);\r\n      }\r\n    }\r\n    if (best_common.length * 2 >= longtext.length) {\r\n      return [best_longtext_a, best_longtext_b,\r\n              best_shorttext_a, best_shorttext_b, best_common];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // First check if the second quarter is the seed for a half-match.\r\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 4));\r\n  // Check again based on the third quarter.\r\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 2));\r\n  var hm;\r\n  if (!hm1 && !hm2) {\r\n    return null;\r\n  } else if (!hm2) {\r\n    hm = hm1;\r\n  } else if (!hm1) {\r\n    hm = hm2;\r\n  } else {\r\n    // Both matched.  Select the longest.\r\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\r\n  }\r\n\r\n  // A half-match was found, sort out the return data.\r\n  var text1_a, text1_b, text2_a, text2_b;\r\n  if (text1.length > text2.length) {\r\n    text1_a = hm[0];\r\n    text1_b = hm[1];\r\n    text2_a = hm[2];\r\n    text2_b = hm[3];\r\n  } else {\r\n    text2_a = hm[0];\r\n    text2_b = hm[1];\r\n    text1_a = hm[2];\r\n    text1_b = hm[3];\r\n  }\r\n  var mid_common = hm[4];\r\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\r\n};\r\n\r\n\r\n/**\r\n * Reduce the number of edits by eliminating semantically trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Number of characters that changed prior to the equality.\r\n  var length_insertions1 = 0;\r\n  var length_deletions1 = 0;\r\n  // Number of characters that changed after the equality.\r\n  var length_insertions2 = 0;\r\n  var length_deletions2 = 0;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      equalities[equalitiesLength++] = pointer;\r\n      length_insertions1 = length_insertions2;\r\n      length_deletions1 = length_deletions2;\r\n      length_insertions2 = 0;\r\n      length_deletions2 = 0;\r\n      lastequality = diffs[pointer][1];\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_INSERT) {\r\n        length_insertions2 += diffs[pointer][1].length;\r\n      } else {\r\n        length_deletions2 += diffs[pointer][1].length;\r\n      }\r\n      // Eliminate an equality that is smaller or equal to the edits on both\r\n      // sides of it.\r\n      if (lastequality && (lastequality.length <=\r\n          Math.max(length_insertions1, length_deletions1)) &&\r\n          (lastequality.length <= Math.max(length_insertions2,\r\n                                           length_deletions2))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        // Throw away the equality we just deleted.\r\n        equalitiesLength--;\r\n        // Throw away the previous equality (it needs to be reevaluated).\r\n        equalitiesLength--;\r\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\r\n        length_insertions1 = 0;  // Reset the counters.\r\n        length_deletions1 = 0;\r\n        length_insertions2 = 0;\r\n        length_deletions2 = 0;\r\n        lastequality = null;\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  // Normalize the diff.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n  this.diff_cleanupSemanticLossless(diffs);\r\n\r\n  // Find any overlaps between deletions and insertions.\r\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\r\n  //   -> <del>abc</del>xxx<ins>def</ins>\r\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\r\n  //   -> <ins>def</ins>xxx<del>abc</del>\r\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\r\n  pointer = 1;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\r\n        diffs[pointer][0] == DIFF_INSERT) {\r\n      var deletion = diffs[pointer - 1][1];\r\n      var insertion = diffs[pointer][1];\r\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\r\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\r\n      if (overlap_length1 >= overlap_length2) {\r\n        if (overlap_length1 >= deletion.length / 2 ||\r\n            overlap_length1 >= insertion.length / 2) {\r\n          // Overlap found.  Insert an equality and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, insertion.substring(0, overlap_length1)]);\r\n          diffs[pointer - 1][1] =\r\n              deletion.substring(0, deletion.length - overlap_length1);\r\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\r\n          pointer++;\r\n        }\r\n      } else {\r\n        if (overlap_length2 >= deletion.length / 2 ||\r\n            overlap_length2 >= insertion.length / 2) {\r\n          // Reverse overlap found.\r\n          // Insert an equality and swap and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, deletion.substring(0, overlap_length2)]);\r\n          diffs[pointer - 1][0] = DIFF_INSERT;\r\n          diffs[pointer - 1][1] =\r\n              insertion.substring(0, insertion.length - overlap_length2);\r\n          diffs[pointer + 1][0] = DIFF_DELETE;\r\n          diffs[pointer + 1][1] =\r\n              deletion.substring(overlap_length2);\r\n          pointer++;\r\n        }\r\n      }\r\n      pointer++;\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Look for single edits surrounded on both sides by equalities\r\n * which can be shifted sideways to align the edit to a word boundary.\r\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\r\n  /**\r\n   * Given two strings, compute a score representing whether the internal\r\n   * boundary falls on logical boundaries.\r\n   * Scores range from 6 (best) to 0 (worst).\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} one First string.\r\n   * @param {string} two Second string.\r\n   * @return {number} The score.\r\n   * @private\r\n   */\r\n  function diff_cleanupSemanticScore_(one, two) {\r\n    if (!one || !two) {\r\n      // Edges are the best.\r\n      return 6;\r\n    }\r\n\r\n    // Each port of this function behaves slightly differently due to\r\n    // subtle differences in each language's definition of things like\r\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\r\n    // the choice has been made to use each language's native features\r\n    // rather than force total conformity.\r\n    var char1 = one.charAt(one.length - 1);\r\n    var char2 = two.charAt(0);\r\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var whitespace1 = nonAlphaNumeric1 &&\r\n        char1.match(diff_match_patch.whitespaceRegex_);\r\n    var whitespace2 = nonAlphaNumeric2 &&\r\n        char2.match(diff_match_patch.whitespaceRegex_);\r\n    var lineBreak1 = whitespace1 &&\r\n        char1.match(diff_match_patch.linebreakRegex_);\r\n    var lineBreak2 = whitespace2 &&\r\n        char2.match(diff_match_patch.linebreakRegex_);\r\n    var blankLine1 = lineBreak1 &&\r\n        one.match(diff_match_patch.blanklineEndRegex_);\r\n    var blankLine2 = lineBreak2 &&\r\n        two.match(diff_match_patch.blanklineStartRegex_);\r\n\r\n    if (blankLine1 || blankLine2) {\r\n      // Five points for blank lines.\r\n      return 5;\r\n    } else if (lineBreak1 || lineBreak2) {\r\n      // Four points for line breaks.\r\n      return 4;\r\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\r\n      // Three points for end of sentences.\r\n      return 3;\r\n    } else if (whitespace1 || whitespace2) {\r\n      // Two points for whitespace.\r\n      return 2;\r\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\r\n      // One point for non-alphanumeric.\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  var pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      var equality1 = diffs[pointer - 1][1];\r\n      var edit = diffs[pointer][1];\r\n      var equality2 = diffs[pointer + 1][1];\r\n\r\n      // First, shift the edit as far left as possible.\r\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\r\n      if (commonOffset) {\r\n        var commonString = edit.substring(edit.length - commonOffset);\r\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\r\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\r\n        equality2 = commonString + equality2;\r\n      }\r\n\r\n      // Second, step character by character right, looking for the best fit.\r\n      var bestEquality1 = equality1;\r\n      var bestEdit = edit;\r\n      var bestEquality2 = equality2;\r\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\r\n          diff_cleanupSemanticScore_(edit, equality2);\r\n      while (edit.charAt(0) === equality2.charAt(0)) {\r\n        equality1 += edit.charAt(0);\r\n        edit = edit.substring(1) + equality2.charAt(0);\r\n        equality2 = equality2.substring(1);\r\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\r\n            diff_cleanupSemanticScore_(edit, equality2);\r\n        // The >= encourages trailing rather than leading whitespace on edits.\r\n        if (score >= bestScore) {\r\n          bestScore = score;\r\n          bestEquality1 = equality1;\r\n          bestEdit = edit;\r\n          bestEquality2 = equality2;\r\n        }\r\n      }\r\n\r\n      if (diffs[pointer - 1][1] != bestEquality1) {\r\n        // We have an improvement, save it back to the diff.\r\n        if (bestEquality1) {\r\n          diffs[pointer - 1][1] = bestEquality1;\r\n        } else {\r\n          diffs.splice(pointer - 1, 1);\r\n          pointer--;\r\n        }\r\n        diffs[pointer][1] = bestEdit;\r\n        if (bestEquality2) {\r\n          diffs[pointer + 1][1] = bestEquality2;\r\n        } else {\r\n          diffs.splice(pointer + 1, 1);\r\n          pointer--;\r\n        }\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n// Define some regex patterns for matching boundaries.\r\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\r\ndiff_match_patch.whitespaceRegex_ = /\\s/;\r\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\r\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\r\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\r\n\r\n/**\r\n * Reduce the number of edits by eliminating operationally trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Is there an insertion operation before the last equality.\r\n  var pre_ins = false;\r\n  // Is there a deletion operation before the last equality.\r\n  var pre_del = false;\r\n  // Is there an insertion operation after the last equality.\r\n  var post_ins = false;\r\n  // Is there a deletion operation after the last equality.\r\n  var post_del = false;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\r\n          (post_ins || post_del)) {\r\n        // Candidate found.\r\n        equalities[equalitiesLength++] = pointer;\r\n        pre_ins = post_ins;\r\n        pre_del = post_del;\r\n        lastequality = diffs[pointer][1];\r\n      } else {\r\n        // Not a candidate, and can never become one.\r\n        equalitiesLength = 0;\r\n        lastequality = null;\r\n      }\r\n      post_ins = post_del = false;\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_DELETE) {\r\n        post_del = true;\r\n      } else {\r\n        post_ins = true;\r\n      }\r\n      /*\r\n       * Five types to be split:\r\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\r\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\r\n       * <ins>A</del>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<del>C</del>\r\n       */\r\n      if (lastequality && ((pre_ins && pre_del && post_ins && post_del) ||\r\n                           ((lastequality.length < this.Diff_EditCost / 2) &&\r\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        equalitiesLength--;  // Throw away the equality we just deleted;\r\n        lastequality = null;\r\n        if (pre_ins && pre_del) {\r\n          // No changes made which could affect previous entry, keep going.\r\n          post_ins = post_del = true;\r\n          equalitiesLength = 0;\r\n        } else {\r\n          equalitiesLength--;  // Throw away the previous equality.\r\n          pointer = equalitiesLength > 0 ?\r\n              equalities[equalitiesLength - 1] : -1;\r\n          post_ins = post_del = false;\r\n        }\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Reorder and merge like edit sections.  Merge equalities.\r\n * Any edit section can move as long as it doesn't cross an equality.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\r\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  var commonlength;\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete + count_insert > 1) {\r\n          if (count_delete !== 0 && count_insert !== 0) {\r\n            // Factor out any common prefixies.\r\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              if ((pointer - count_delete - count_insert) > 0 &&\r\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\r\n                  DIFF_EQUAL) {\r\n                diffs[pointer - count_delete - count_insert - 1][1] +=\r\n                    text_insert.substring(0, commonlength);\r\n              } else {\r\n                diffs.splice(0, 0, [DIFF_EQUAL,\r\n                                    text_insert.substring(0, commonlength)]);\r\n                pointer++;\r\n              }\r\n              text_insert = text_insert.substring(commonlength);\r\n              text_delete = text_delete.substring(commonlength);\r\n            }\r\n            // Factor out any common suffixies.\r\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\r\n                  commonlength) + diffs[pointer][1];\r\n              text_insert = text_insert.substring(0, text_insert.length -\r\n                  commonlength);\r\n              text_delete = text_delete.substring(0, text_delete.length -\r\n                  commonlength);\r\n            }\r\n          }\r\n          // Delete the offending records and add the merged ones.\r\n          if (count_delete === 0) {\r\n            diffs.splice(pointer - count_insert,\r\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\r\n          } else if (count_insert === 0) {\r\n            diffs.splice(pointer - count_delete,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\r\n          } else {\r\n            diffs.splice(pointer - count_delete - count_insert,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\r\n                [DIFF_INSERT, text_insert]);\r\n          }\r\n          pointer = pointer - count_delete - count_insert +\r\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\r\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\r\n          // Merge this equality with the previous one.\r\n          diffs[pointer - 1][1] += diffs[pointer][1];\r\n          diffs.splice(pointer, 1);\r\n        } else {\r\n          pointer++;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n  }\r\n  if (diffs[diffs.length - 1][1] === '') {\r\n    diffs.pop();  // Remove the dummy entry at the end.\r\n  }\r\n\r\n  // Second pass: look for single edits surrounded on both sides by equalities\r\n  // which can be shifted sideways to eliminate an equality.\r\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\r\n  var changes = false;\r\n  pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\r\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\r\n        // Shift the edit over the previous equality.\r\n        diffs[pointer][1] = diffs[pointer - 1][1] +\r\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\r\n                                        diffs[pointer - 1][1].length);\r\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\r\n        diffs.splice(pointer - 1, 1);\r\n        changes = true;\r\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\r\n          diffs[pointer + 1][1]) {\r\n        // Shift the edit over the next equality.\r\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\r\n        diffs[pointer][1] =\r\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\r\n            diffs[pointer + 1][1];\r\n        diffs.splice(pointer + 1, 1);\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n  // If shifts were made, the diff needs reordering and another shift sweep.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * loc is a location in text1, compute and return the equivalent location in\r\n * text2.\r\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {number} loc Location within text1.\r\n * @return {number} Location within text2.\r\n */\r\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\r\n  var chars1 = 0;\r\n  var chars2 = 0;\r\n  var last_chars1 = 0;\r\n  var last_chars2 = 0;\r\n  var x;\r\n  for (x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\r\n      chars1 += diffs[x][1].length;\r\n    }\r\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\r\n      chars2 += diffs[x][1].length;\r\n    }\r\n    if (chars1 > loc) {  // Overshot the location.\r\n      break;\r\n    }\r\n    last_chars1 = chars1;\r\n    last_chars2 = chars2;\r\n  }\r\n  // Was the location was deleted?\r\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\r\n    return last_chars2;\r\n  }\r\n  // Add the remaining character length.\r\n  return last_chars2 + (loc - last_chars1);\r\n};\r\n\r\n\r\n/**\r\n * Convert a diff array into a pretty HTML report.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} HTML representation.\r\n */\r\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\r\n  var html = [];\r\n  var pattern_amp = /&/g;\r\n  var pattern_lt = /</g;\r\n  var pattern_gt = />/g;\r\n  var pattern_para = /\\n/g;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\r\n    var data = diffs[x][1];  // Text of change.\r\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\r\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\r\n        break;\r\n      case DIFF_DELETE:\r\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        html[x] = '<span>' + text + '</span>';\r\n        break;\r\n    }\r\n  }\r\n  return html.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the source text (all equalities and deletions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Source text.\r\n */\r\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the destination text (all equalities and insertions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Destination text.\r\n */\r\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_DELETE) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute the Levenshtein distance; the number of inserted, deleted or\r\n * substituted characters.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {number} Number of changes.\r\n */\r\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\r\n  var levenshtein = 0;\r\n  var insertions = 0;\r\n  var deletions = 0;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];\r\n    var data = diffs[x][1];\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        insertions += data.length;\r\n        break;\r\n      case DIFF_DELETE:\r\n        deletions += data.length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // A deletion and an insertion is one substitution.\r\n        levenshtein += Math.max(insertions, deletions);\r\n        insertions = 0;\r\n        deletions = 0;\r\n        break;\r\n    }\r\n  }\r\n  levenshtein += Math.max(insertions, deletions);\r\n  return levenshtein;\r\n};\r\n\r\n\r\n/**\r\n * Crush the diff into an encoded string which describes the operations\r\n * required to transform text1 into text2.\r\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\r\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Delta text.\r\n */\r\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    switch (diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        text[x] = '+' + encodeURI(diffs[x][1]);\r\n        break;\r\n      case DIFF_DELETE:\r\n        text[x] = '-' + diffs[x][1].length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        text[x] = '=' + diffs[x][1].length;\r\n        break;\r\n    }\r\n  }\r\n  return text.join('\\t').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n/**\r\n * Given the original text1, and an encoded string which describes the\r\n * operations required to transform text1 into text2, compute the full diff.\r\n * @param {string} text1 Source string for the diff.\r\n * @param {string} delta Delta text.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\r\n  var diffs = [];\r\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\r\n  var pointer = 0;  // Cursor in text1\r\n  var tokens = delta.split(/\\t/g);\r\n  for (var x = 0; x < tokens.length; x++) {\r\n    // Each token begins with a one character parameter which specifies the\r\n    // operation of this token (delete, insert, equality).\r\n    var param = tokens[x].substring(1);\r\n    switch (tokens[x].charAt(0)) {\r\n      case '+':\r\n        try {\r\n          diffs[diffsLength++] = [DIFF_INSERT, decodeURI(param)];\r\n        } catch (ex) {\r\n          // Malformed URI sequence.\r\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\r\n        }\r\n        break;\r\n      case '-':\r\n        // Fall through.\r\n      case '=':\r\n        var n = parseInt(param, 10);\r\n        if (isNaN(n) || n < 0) {\r\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\r\n        }\r\n        var text = text1.substring(pointer, pointer += n);\r\n        if (tokens[x].charAt(0) == '=') {\r\n          diffs[diffsLength++] = [DIFF_EQUAL, text];\r\n        } else {\r\n          diffs[diffsLength++] = [DIFF_DELETE, text];\r\n        }\r\n        break;\r\n      default:\r\n        // Blank tokens are ok (from a trailing \\t).\r\n        // Anything else is an error.\r\n        if (tokens[x]) {\r\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\r\n                          tokens[x]);\r\n        }\r\n    }\r\n  }\r\n  if (pointer != text1.length) {\r\n    throw new Error('Delta length (' + pointer +\r\n        ') does not equal source text length (' + text1.length + ').');\r\n  }\r\n  return diffs;\r\n};\r\n\r\n\r\n//  MATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n */\r\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\r\n  // Check for null inputs.\r\n  if (text == null || pattern == null || loc == null) {\r\n    throw new Error('Null input. (match_main)');\r\n  }\r\n\r\n  loc = Math.max(0, Math.min(loc, text.length));\r\n  if (text == pattern) {\r\n    // Shortcut (potentially not guaranteed by the algorithm)\r\n    return 0;\r\n  } else if (!text.length) {\r\n    // Nothing to match.\r\n    return -1;\r\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\r\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\r\n    return loc;\r\n  } else {\r\n    // Do a fuzzy compare.\r\n    return this.match_bitap_(text, pattern, loc);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\r\n * Bitap algorithm.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\r\n  if (pattern.length > this.Match_MaxBits) {\r\n    throw new Error('Pattern too long for this browser.');\r\n  }\r\n\r\n  // Initialise the alphabet.\r\n  var s = this.match_alphabet_(pattern);\r\n\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Compute and return the score for a match with e errors and x location.\r\n   * Accesses loc and pattern through being a closure.\r\n   * @param {number} e Number of errors in match.\r\n   * @param {number} x Location of match.\r\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\r\n   * @private\r\n   */\r\n  function match_bitapScore_(e, x) {\r\n    var accuracy = e / pattern.length;\r\n    var proximity = Math.abs(loc - x);\r\n    if (!dmp.Match_Distance) {\r\n      // Dodge divide by zero error.\r\n      return proximity ? 1.0 : accuracy;\r\n    }\r\n    return accuracy + (proximity / dmp.Match_Distance);\r\n  }\r\n\r\n  // Highest score beyond which we give up.\r\n  var score_threshold = this.Match_Threshold;\r\n  // Is there a nearby exact match? (speedup)\r\n  var best_loc = text.indexOf(pattern, loc);\r\n  if (best_loc != -1) {\r\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    // What about in the other direction? (speedup)\r\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\r\n    if (best_loc != -1) {\r\n      score_threshold =\r\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    }\r\n  }\r\n\r\n  // Initialise the bit arrays.\r\n  var matchmask = 1 << (pattern.length - 1);\r\n  best_loc = -1;\r\n\r\n  var bin_min, bin_mid;\r\n  var bin_max = pattern.length + text.length;\r\n  var last_rd;\r\n  for (var d = 0; d < pattern.length; d++) {\r\n    // Scan for the best match; each iteration allows for one more error.\r\n    // Run a binary search to determine how far from 'loc' we can stray at this\r\n    // error level.\r\n    bin_min = 0;\r\n    bin_mid = bin_max;\r\n    while (bin_min < bin_mid) {\r\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\r\n        bin_min = bin_mid;\r\n      } else {\r\n        bin_max = bin_mid;\r\n      }\r\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\r\n    }\r\n    // Use the result from this iteration as the maximum for the next.\r\n    bin_max = bin_mid;\r\n    var start = Math.max(1, loc - bin_mid + 1);\r\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\r\n\r\n    var rd = Array(finish + 2);\r\n    rd[finish + 1] = (1 << d) - 1;\r\n    for (var j = finish; j >= start; j--) {\r\n      // The alphabet (s) is a sparse hash, so the following line generates\r\n      // warnings.\r\n      var charMatch = s[text.charAt(j - 1)];\r\n      if (d === 0) {  // First pass: exact match.\r\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\r\n      } else {  // Subsequent passes: fuzzy match.\r\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\r\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\r\n                last_rd[j + 1];\r\n      }\r\n      if (rd[j] & matchmask) {\r\n        var score = match_bitapScore_(d, j - 1);\r\n        // This match will almost certainly be better than any existing match.\r\n        // But check anyway.\r\n        if (score <= score_threshold) {\r\n          // Told you so.\r\n          score_threshold = score;\r\n          best_loc = j - 1;\r\n          if (best_loc > loc) {\r\n            // When passing loc, don't exceed our current distance from loc.\r\n            start = Math.max(1, 2 * loc - best_loc);\r\n          } else {\r\n            // Already passed loc, downhill from here on in.\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // No hope for a (better) match at greater error levels.\r\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\r\n      break;\r\n    }\r\n    last_rd = rd;\r\n  }\r\n  return best_loc;\r\n};\r\n\r\n\r\n/**\r\n * Initialise the alphabet for the Bitap algorithm.\r\n * @param {string} pattern The text to encode.\r\n * @return {!Object} Hash of character locations.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\r\n  var s = {};\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] = 0;\r\n  }\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\r\n  }\r\n  return s;\r\n};\r\n\r\n\r\n//  PATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Increase the context until it is unique,\r\n * but don't let the pattern expand beyond Match_MaxBits.\r\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\r\n * @param {string} text Source text.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\r\n  if (text.length == 0) {\r\n    return;\r\n  }\r\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\r\n  var padding = 0;\r\n\r\n  // Look for the first and last matches of pattern in text.  If two different\r\n  // matches are found, increase the pattern length.\r\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\r\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\r\n         this.Patch_Margin) {\r\n    padding += this.Patch_Margin;\r\n    pattern = text.substring(patch.start2 - padding,\r\n                             patch.start2 + patch.length1 + padding);\r\n  }\r\n  // Add one chunk for good luck.\r\n  padding += this.Patch_Margin;\r\n\r\n  // Add the prefix.\r\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\r\n  if (prefix) {\r\n    patch.diffs.unshift([DIFF_EQUAL, prefix]);\r\n  }\r\n  // Add the suffix.\r\n  var suffix = text.substring(patch.start2 + patch.length1,\r\n                              patch.start2 + patch.length1 + padding);\r\n  if (suffix) {\r\n    patch.diffs.push([DIFF_EQUAL, suffix]);\r\n  }\r\n\r\n  // Roll back the start points.\r\n  patch.start1 -= prefix.length;\r\n  patch.start2 -= prefix.length;\r\n  // Extend the lengths.\r\n  patch.length1 += prefix.length + suffix.length;\r\n  patch.length2 += prefix.length + suffix.length;\r\n};\r\n\r\n\r\n/**\r\n * Compute a list of patches to turn text1 into text2.\r\n * Use diffs if provided, otherwise compute it ourselves.\r\n * There are four ways to call this function, depending on what data is\r\n * available to the caller:\r\n * Method 1:\r\n * a = text1, b = text2\r\n * Method 2:\r\n * a = diffs\r\n * Method 3 (optimal):\r\n * a = text1, b = diffs\r\n * Method 4 (deprecated, use method 3):\r\n * a = text1, b = text2, c = diffs\r\n *\r\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\r\n * Array of diff tuples for text1 to text2 (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_b text2 (methods 1,4) or\r\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_c Array of diff tuples\r\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\r\n  var text1, diffs;\r\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 1: text1, text2\r\n    // Compute diffs from text1 and text2.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\r\n    if (diffs.length > 2) {\r\n      this.diff_cleanupSemantic(diffs);\r\n      this.diff_cleanupEfficiency(diffs);\r\n    }\r\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 2: diffs\r\n    // Compute text1 from diffs.\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\r\n    text1 = this.diff_text1(diffs);\r\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 3: text1, diffs\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\r\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      opt_c && typeof opt_c == 'object') {\r\n    // Method 4: text1, text2, diffs\r\n    // text2 is not used.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\r\n  } else {\r\n    throw new Error('Unknown call format to patch_make.');\r\n  }\r\n\r\n  if (diffs.length === 0) {\r\n    return [];  // Get rid of the null case.\r\n  }\r\n  var patches = [];\r\n  var patch = new diff_match_patch.patch_obj();\r\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\r\n  var char_count1 = 0;  // Number of characters into the text1 string.\r\n  var char_count2 = 0;  // Number of characters into the text2 string.\r\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\r\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\r\n  // context info.\r\n  var prepatch_text = text1;\r\n  var postpatch_text = text1;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var diff_type = diffs[x][0];\r\n    var diff_text = diffs[x][1];\r\n\r\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\r\n      // A new patch starts here.\r\n      patch.start1 = char_count1;\r\n      patch.start2 = char_count2;\r\n    }\r\n\r\n    switch (diff_type) {\r\n      case DIFF_INSERT:\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        patch.length2 += diff_text.length;\r\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\r\n                         postpatch_text.substring(char_count2);\r\n        break;\r\n      case DIFF_DELETE:\r\n        patch.length1 += diff_text.length;\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        postpatch_text = postpatch_text.substring(0, char_count2) +\r\n                         postpatch_text.substring(char_count2 +\r\n                             diff_text.length);\r\n        break;\r\n      case DIFF_EQUAL:\r\n        if (diff_text.length <= 2 * this.Patch_Margin &&\r\n            patchDiffLength && diffs.length != x + 1) {\r\n          // Small equality inside a patch.\r\n          patch.diffs[patchDiffLength++] = diffs[x];\r\n          patch.length1 += diff_text.length;\r\n          patch.length2 += diff_text.length;\r\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\r\n          // Time for a new patch.\r\n          if (patchDiffLength) {\r\n            this.patch_addContext_(patch, prepatch_text);\r\n            patches.push(patch);\r\n            patch = new diff_match_patch.patch_obj();\r\n            patchDiffLength = 0;\r\n            // Unlike Unidiff, our patch lists have a rolling context.\r\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\r\n            // Update prepatch text & pos to reflect the application of the\r\n            // just completed patch.\r\n            prepatch_text = postpatch_text;\r\n            char_count1 = char_count2;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n\r\n    // Update the current character count.\r\n    if (diff_type !== DIFF_INSERT) {\r\n      char_count1 += diff_text.length;\r\n    }\r\n    if (diff_type !== DIFF_DELETE) {\r\n      char_count2 += diff_text.length;\r\n    }\r\n  }\r\n  // Pick up the leftover patch if not empty.\r\n  if (patchDiffLength) {\r\n    this.patch_addContext_(patch, prepatch_text);\r\n    patches.push(patch);\r\n  }\r\n\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Given an array of patches, return another array that is identical.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\r\n  // Making deep copies is hard in JavaScript.\r\n  var patchesCopy = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var patch = patches[x];\r\n    var patchCopy = new diff_match_patch.patch_obj();\r\n    patchCopy.diffs = [];\r\n    for (var y = 0; y < patch.diffs.length; y++) {\r\n      patchCopy.diffs[y] = patch.diffs[y].slice();\r\n    }\r\n    patchCopy.start1 = patch.start1;\r\n    patchCopy.start2 = patch.start2;\r\n    patchCopy.length1 = patch.length1;\r\n    patchCopy.length2 = patch.length2;\r\n    patchesCopy[x] = patchCopy;\r\n  }\r\n  return patchesCopy;\r\n};\r\n\r\n\r\n/**\r\n * Merge a set of patches onto the text.  Return a patched text, as well\r\n * as a list of true/false values indicating which patches were applied.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @param {string} text Old text.\r\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\r\n *      new text and an array of boolean values.\r\n */\r\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\r\n  if (patches.length == 0) {\r\n    return [text, []];\r\n  }\r\n\r\n  // Deep copy the patches so that no changes are made to originals.\r\n  patches = this.patch_deepCopy(patches);\r\n\r\n  var nullPadding = this.patch_addPadding(patches);\r\n  text = nullPadding + text + nullPadding;\r\n\r\n  this.patch_splitMax(patches);\r\n  // delta keeps track of the offset between the expected and actual location\r\n  // of the previous patch.  If there are patches expected at positions 10 and\r\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\r\n  // has an effective expected position of 22.\r\n  var delta = 0;\r\n  var results = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var expected_loc = patches[x].start2 + delta;\r\n    var text1 = this.diff_text1(patches[x].diffs);\r\n    var start_loc;\r\n    var end_loc = -1;\r\n    if (text1.length > this.Match_MaxBits) {\r\n      // patch_splitMax will only provide an oversized pattern in the case of\r\n      // a monster delete.\r\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\r\n                                  expected_loc);\r\n      if (start_loc != -1) {\r\n        end_loc = this.match_main(text,\r\n            text1.substring(text1.length - this.Match_MaxBits),\r\n            expected_loc + text1.length - this.Match_MaxBits);\r\n        if (end_loc == -1 || start_loc >= end_loc) {\r\n          // Can't find valid trailing context.  Drop this patch.\r\n          start_loc = -1;\r\n        }\r\n      }\r\n    } else {\r\n      start_loc = this.match_main(text, text1, expected_loc);\r\n    }\r\n    if (start_loc == -1) {\r\n      // No match found.  :(\r\n      results[x] = false;\r\n      // Subtract the delta for this failed patch from subsequent patches.\r\n      delta -= patches[x].length2 - patches[x].length1;\r\n    } else {\r\n      // Found a match.  :)\r\n      results[x] = true;\r\n      delta = start_loc - expected_loc;\r\n      var text2;\r\n      if (end_loc == -1) {\r\n        text2 = text.substring(start_loc, start_loc + text1.length);\r\n      } else {\r\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\r\n      }\r\n      if (text1 == text2) {\r\n        // Perfect match, just shove the replacement text in.\r\n        text = text.substring(0, start_loc) +\r\n               this.diff_text2(patches[x].diffs) +\r\n               text.substring(start_loc + text1.length);\r\n      } else {\r\n        // Imperfect match.  Run a diff to get a framework of equivalent\r\n        // indices.\r\n        var diffs = this.diff_main(text1, text2, false);\r\n        if (text1.length > this.Match_MaxBits &&\r\n            this.diff_levenshtein(diffs) / text1.length >\r\n            this.Patch_DeleteThreshold) {\r\n          // The end points match, but the content is unacceptably bad.\r\n          results[x] = false;\r\n        } else {\r\n          this.diff_cleanupSemanticLossless(diffs);\r\n          var index1 = 0;\r\n          var index2;\r\n          for (var y = 0; y < patches[x].diffs.length; y++) {\r\n            var mod = patches[x].diffs[y];\r\n            if (mod[0] !== DIFF_EQUAL) {\r\n              index2 = this.diff_xIndex(diffs, index1);\r\n            }\r\n            if (mod[0] === DIFF_INSERT) {  // Insertion\r\n              text = text.substring(0, start_loc + index2) + mod[1] +\r\n                     text.substring(start_loc + index2);\r\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\r\n              text = text.substring(0, start_loc + index2) +\r\n                     text.substring(start_loc + this.diff_xIndex(diffs,\r\n                         index1 + mod[1].length));\r\n            }\r\n            if (mod[0] !== DIFF_DELETE) {\r\n              index1 += mod[1].length;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Strip the padding off.\r\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\r\n  return [text, results];\r\n};\r\n\r\n\r\n/**\r\n * Add some padding on text start and end so that edges can match something.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} The padding string added to each side.\r\n */\r\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\r\n  var paddingLength = this.Patch_Margin;\r\n  var nullPadding = '';\r\n  for (var x = 1; x <= paddingLength; x++) {\r\n    nullPadding += String.fromCharCode(x);\r\n  }\r\n\r\n  // Bump all the patches forward.\r\n  for (var x = 0; x < patches.length; x++) {\r\n    patches[x].start1 += paddingLength;\r\n    patches[x].start2 += paddingLength;\r\n  }\r\n\r\n  // Add some padding on start of first diff.\r\n  var patch = patches[0];\r\n  var diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.unshift([DIFF_EQUAL, nullPadding]);\r\n    patch.start1 -= paddingLength;  // Should be 0.\r\n    patch.start2 -= paddingLength;  // Should be 0.\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[0][1].length) {\r\n    // Grow first equality.\r\n    var extraLength = paddingLength - diffs[0][1].length;\r\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\r\n    patch.start1 -= extraLength;\r\n    patch.start2 -= extraLength;\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  // Add some padding on end of last diff.\r\n  patch = patches[patches.length - 1];\r\n  diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.push([DIFF_EQUAL, nullPadding]);\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\r\n    // Grow last equality.\r\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\r\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  return nullPadding;\r\n};\r\n\r\n\r\n/**\r\n * Look through the patches and break up any which are longer than the maximum\r\n * limit of the match algorithm.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\r\n  var patch_size = this.Match_MaxBits;\r\n  for (var x = 0; x < patches.length; x++) {\r\n    if (patches[x].length1 <= patch_size) {\r\n      continue;\r\n    }\r\n    var bigpatch = patches[x];\r\n    // Remove the big old patch.\r\n    patches.splice(x--, 1);\r\n    var start1 = bigpatch.start1;\r\n    var start2 = bigpatch.start2;\r\n    var precontext = '';\r\n    while (bigpatch.diffs.length !== 0) {\r\n      // Create one of several smaller patches.\r\n      var patch = new diff_match_patch.patch_obj();\r\n      var empty = true;\r\n      patch.start1 = start1 - precontext.length;\r\n      patch.start2 = start2 - precontext.length;\r\n      if (precontext !== '') {\r\n        patch.length1 = patch.length2 = precontext.length;\r\n        patch.diffs.push([DIFF_EQUAL, precontext]);\r\n      }\r\n      while (bigpatch.diffs.length !== 0 &&\r\n             patch.length1 < patch_size - this.Patch_Margin) {\r\n        var diff_type = bigpatch.diffs[0][0];\r\n        var diff_text = bigpatch.diffs[0][1];\r\n        if (diff_type === DIFF_INSERT) {\r\n          // Insertions are harmless.\r\n          patch.length2 += diff_text.length;\r\n          start2 += diff_text.length;\r\n          patch.diffs.push(bigpatch.diffs.shift());\r\n          empty = false;\r\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\r\n                   patch.diffs[0][0] == DIFF_EQUAL &&\r\n                   diff_text.length > 2 * patch_size) {\r\n          // This is a large deletion.  Let it pass in one chunk.\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          empty = false;\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          bigpatch.diffs.shift();\r\n        } else {\r\n          // Deletion or equality.  Only take as much as we can stomach.\r\n          diff_text = diff_text.substring(0,\r\n              patch_size - patch.length1 - this.Patch_Margin);\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          if (diff_type === DIFF_EQUAL) {\r\n            patch.length2 += diff_text.length;\r\n            start2 += diff_text.length;\r\n          } else {\r\n            empty = false;\r\n          }\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          if (diff_text == bigpatch.diffs[0][1]) {\r\n            bigpatch.diffs.shift();\r\n          } else {\r\n            bigpatch.diffs[0][1] =\r\n                bigpatch.diffs[0][1].substring(diff_text.length);\r\n          }\r\n        }\r\n      }\r\n      // Compute the head context for the next patch.\r\n      precontext = this.diff_text2(patch.diffs);\r\n      precontext =\r\n          precontext.substring(precontext.length - this.Patch_Margin);\r\n      // Append the end context for this patch.\r\n      var postcontext = this.diff_text1(bigpatch.diffs)\r\n                            .substring(0, this.Patch_Margin);\r\n      if (postcontext !== '') {\r\n        patch.length1 += postcontext.length;\r\n        patch.length2 += postcontext.length;\r\n        if (patch.diffs.length !== 0 &&\r\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\r\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\r\n        } else {\r\n          patch.diffs.push([DIFF_EQUAL, postcontext]);\r\n        }\r\n      }\r\n      if (!empty) {\r\n        patches.splice(++x, 0, patch);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Take a list of patches and return a textual representation.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} Text representation of patches.\r\n */\r\ndiff_match_patch.prototype.patch_toText = function(patches) {\r\n  var text = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    text[x] = patches[x];\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Parse a textual representation of patches and return a list of Patch objects.\r\n * @param {string} textline Text representation of patches.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.patch_fromText = function(textline) {\r\n  var patches = [];\r\n  if (!textline) {\r\n    return patches;\r\n  }\r\n  var text = textline.split('\\n');\r\n  var textPointer = 0;\r\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\r\n  while (textPointer < text.length) {\r\n    var m = text[textPointer].match(patchHeader);\r\n    if (!m) {\r\n      throw new Error('Invalid patch string: ' + text[textPointer]);\r\n    }\r\n    var patch = new diff_match_patch.patch_obj();\r\n    patches.push(patch);\r\n    patch.start1 = parseInt(m[1], 10);\r\n    if (m[2] === '') {\r\n      patch.start1--;\r\n      patch.length1 = 1;\r\n    } else if (m[2] == '0') {\r\n      patch.length1 = 0;\r\n    } else {\r\n      patch.start1--;\r\n      patch.length1 = parseInt(m[2], 10);\r\n    }\r\n\r\n    patch.start2 = parseInt(m[3], 10);\r\n    if (m[4] === '') {\r\n      patch.start2--;\r\n      patch.length2 = 1;\r\n    } else if (m[4] == '0') {\r\n      patch.length2 = 0;\r\n    } else {\r\n      patch.start2--;\r\n      patch.length2 = parseInt(m[4], 10);\r\n    }\r\n    textPointer++;\r\n\r\n    while (textPointer < text.length) {\r\n      var sign = text[textPointer].charAt(0);\r\n      try {\r\n        var line = decodeURI(text[textPointer].substring(1));\r\n      } catch (ex) {\r\n        // Malformed URI sequence.\r\n        throw new Error('Illegal escape in patch_fromText: ' + line);\r\n      }\r\n      if (sign == '-') {\r\n        // Deletion.\r\n        patch.diffs.push([DIFF_DELETE, line]);\r\n      } else if (sign == '+') {\r\n        // Insertion.\r\n        patch.diffs.push([DIFF_INSERT, line]);\r\n      } else if (sign == ' ') {\r\n        // Minor equality.\r\n        patch.diffs.push([DIFF_EQUAL, line]);\r\n      } else if (sign == '@') {\r\n        // Start of next patch.\r\n        break;\r\n      } else if (sign === '') {\r\n        // Blank line?  Whatever.\r\n      } else {\r\n        // WTF?\r\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\r\n      }\r\n      textPointer++;\r\n    }\r\n  }\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Class representing one patch operation.\r\n * @constructor\r\n */\r\ndiff_match_patch.patch_obj = function() {\r\n  /** @type {!Array.<!diff_match_patch.Diff>} */\r\n  this.diffs = [];\r\n  /** @type {?number} */\r\n  this.start1 = null;\r\n  /** @type {?number} */\r\n  this.start2 = null;\r\n  /** @type {number} */\r\n  this.length1 = 0;\r\n  /** @type {number} */\r\n  this.length2 = 0;\r\n};\r\n\r\n\r\n/**\r\n * Emmulate GNU diff's format.\r\n * Header: @@ -382,8 +481,9 @@\r\n * Indicies are printed as 1-based, not 0-based.\r\n * @return {string} The GNU diff string.\r\n */\r\ndiff_match_patch.patch_obj.prototype.toString = function() {\r\n  var coords1, coords2;\r\n  if (this.length1 === 0) {\r\n    coords1 = this.start1 + ',0';\r\n  } else if (this.length1 == 1) {\r\n    coords1 = this.start1 + 1;\r\n  } else {\r\n    coords1 = (this.start1 + 1) + ',' + this.length1;\r\n  }\r\n  if (this.length2 === 0) {\r\n    coords2 = this.start2 + ',0';\r\n  } else if (this.length2 == 1) {\r\n    coords2 = this.start2 + 1;\r\n  } else {\r\n    coords2 = (this.start2 + 1) + ',' + this.length2;\r\n  }\r\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\r\n  var op;\r\n  // Escape the body of the patch with %xx notation.\r\n  for (var x = 0; x < this.diffs.length; x++) {\r\n    switch (this.diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        op = '+';\r\n        break;\r\n      case DIFF_DELETE:\r\n        op = '-';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        op = ' ';\r\n        break;\r\n    }\r\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\r\n  }\r\n  return text.join('').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n// The following export code was added by @ForbesLindesay\r\nmodule.exports = diff_match_patch;\r\nmodule.exports['diff_match_patch'] = diff_match_patch;\r\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\r\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\r\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/diff-match-patch/index.js\n ** module id = 98\n ** module chunks = 0 1\n **/","export class ToolManager {\n  \n  constructor(viewer, defaultTool) {\n    this.defaultTool = defaultTool;\n    this.tool = defaultTool;\n    this.viewer = viewer;\n    const canvas = viewer.canvas;\n    canvas.addEventListener('mousemove', (e) => {\n      e.preventDefault();\n      //e.stopPropagation(); // allow propagation for move in sake of dynamic layout \n      this.tool.mousemove(e);\n    }, false);\n    canvas.addEventListener('mousedown', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.tool.mousedown(e);\n    }, false);\n    canvas.addEventListener('mouseup', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.tool.mouseup(e);\n    }, false);\n    canvas.addEventListener('mousewheel', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      let tool = this.tool;\n      if (tool.mousewheel === undefined) {\n        tool = this.defaultTool;\n      }\n      if (tool.mousewheel !== undefined) {\n        tool.mousewheel(e)\n      }\n    }, false);\n    canvas.addEventListener('dblclick', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.tool.dblclick(e);\n    }, false);\n\n    window.addEventListener(\"keydown\", (e) => {\n      this.tool.keydown(e);\n      if (e.keyCode == 27) {\n        this.releaseControl();\n      } else if (e.keyCode == 46 || e.keyCode == 8) {\n        var selection = viewer.selected.slice();\n        viewer.deselectAll();\n        for (var i = 0; i < selection.length; i++) {\n          viewer.remove(selection[i]);\n        }\n        viewer.refresh();\n      }\n    }, false);\n    window.addEventListener(\"keypress\", (e) => {\n      this.tool.keydown(e);\n    }, false);\n    window.addEventListener(\"keyup\", (e) => {\n      this.tool.keydown(e);\n    }, false);\n  }\n\n  takeControl(tool) {\n    this.switchTool(tool);\n    this.tool.restart();\n  }\n\n  switchTool(tool) {\n    this.tool = tool;\n    this.viewer.bus.notify(\"tool-change\");\n  }\n\n  releaseControl() {\n    this.tool.cleanup();\n    this.takeControl(this.defaultTool);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/manager.js\n **/","import {Tool} from './tool'\nimport {GetShapeEditTool} from './edit-tools-map'\n\nexport class PanTool extends Tool {\n  constructor(viewer) {\n    super('pan', viewer);\n    this.dragging = false;\n    this.x = 0.0;\n    this.y = 0.0;\n  }\n\n  mousemove(e) {\n    if (!this.dragging) {\n      return;\n    }\n    var dx = e.pageX - this.x;\n    var dy = e.pageY - this.y;\n    dy *= -1;\n\n    this.viewer.translate.x += dx * this.viewer.retinaPxielRatio;\n    this.viewer.translate.y += dy * this.viewer.retinaPxielRatio;\n\n    this.x = e.pageX;\n    this.y = e.pageY;\n    this.deselectOnUp = false;\n    this.viewer.refresh();\n  }\n\n  mousedown(e) {\n    if (e.button == 0) {\n      var picked = this.viewer.pick(e);\n      var i;\n      if (picked.length > 0) {\n        var toSelect;\n        if (e.shiftKey) {\n          toSelect = picked[0];\n          var ids = this.viewer.selected.map(function (s) {\n            return s.id\n          });\n          for (i = 0; i < picked.length; i++) {\n            if (ids.indexOf(picked[i].id) != -1) {\n              this.viewer.deselect(picked[i]);\n            } else {\n              toSelect = picked[i];\n            }\n          }\n          this.viewer.select([toSelect], false);\n          this.deselectOnUp = false;\n        } else {\n          toSelect = picked[0];\n          if (this.viewer.selected.length === 1) {\n            for (i = 0; i < picked.length - 1; i++) {\n              if (picked[i].id == this.viewer.selected[0].id) {\n                toSelect = picked[i + 1];\n                break;\n              }\n            }\n          }\n          this.viewer.select([toSelect], true);\n          if (!toSelect.isAuxOrLinkedTo()) {\n            const tool = GetShapeEditTool(this.viewer, toSelect, e.altKey);\n            tool.mousedown(e);\n            this.viewer.toolManager.switchTool(tool);\n          }\n        }\n        this.viewer.refresh();\n        return;\n      }\n    }\n\n    this.dragging = true;\n    this.deselectOnUp = true;\n    this.x = e.pageX;\n    this.y = e.pageY;\n  }\n\n  mouseup(e) {\n    this.dragging = false;\n    if (this.deselectOnUp) {\n      this.viewer.deselectAll();\n      this.viewer.refresh();\n    }\n    this.deselectOnUp = false;\n  }\n\n  mousewheel(e) {\n\n    var delta = 0;\n\n    if (e.wheelDelta) { // WebKit / Opera / Explorer 9\n      delta = e.wheelDelta;\n    } else if (e.detail) { // Firefox\n      delta = -e.detail;\n    }\n\n    var before = this.viewer.screenToModel(e);\n\n    var step = 0.05;\n    delta = delta < 0 ? 1 - step : 1 + step;\n    this.viewer.scale *= delta;\n\n    var after = this.viewer.screenToModel(e);\n\n    var dx = after.x - before.x;\n    var dy = after.y - before.y;\n\n    this.viewer.translate.x += dx * this.viewer.scale;\n    this.viewer.translate.y += dy * this.viewer.scale;\n\n    this.viewer.refresh();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/pan.js\n **/","import {EndPoint} from '../shapes/point'\n\nexport class Tool {\n  \n  constructor(name, viewer) {\n    this.name = name;\n    this.viewer = viewer;\n  }\n\n  restart() {};\n\n  cleanup() {};\n\n  mousemove(e) {};\n  \n  mousedown(e) {};\n  \n  mouseup(e) {};\n  \n  dblclick(e) {};\n  \n  keydown(e) {};\n  \n  keypress(e) {};\n  \n  keyup(e) {};\n\n  sendMessage(text) {\n    this.viewer.bus.notify('tool-message', text);\n  };\n  \n  sendHint(hint) {\n    this.viewer.bus.notify('tool-hint', hint);\n  };\n\n  sendSpecifyPointHint() {\n    this.sendHint('specify point');\n  };\n\n  pointPicked(x, y) {\n    this.sendMessage('picked: ' + this.viewer.roundToPrecision(x) + \" : \" + this.viewer.roundToPrecision(y));\n    this.viewer.referencePoint.x = x;\n    this.viewer.referencePoint.y = y;\n  };\n\n  snapIfNeed(p) {\n    if (this.viewer.snapped != null) {\n      const snapWith = this.viewer.snapped;\n      this.viewer.cleanSnap();\n      p.setFromPoint(snapWith);\n      this.viewer.parametricManager.linkObjects([p, snapWith]);\n      this.viewer.parametricManager.refresh();\n    }\n  }\n\n  endpoint(e) {\n    const ep = new EndPoint(0, 0);\n    if (this.viewer.snapped != null) {\n      this.snapIfNeed(ep);\n    } else {\n      ep.setFromPoint(this.viewer.screenToModel(e))\n    }\n    return ep;\n  }\n\n  static dumbMode(e) {\n    return e.ctrlKey || e.metaKey;\n  }\n}\n\nTool.ParseNumber = function(str) {\n  let val;\n  try {\n    val = eval(str);\n  } catch(e) {\n    return e.toString();\n  }\n  let valNumber = parseFloat(val);\n  if (isNaN(valNumber)) return \"wrong input for number: \"  + str;\n  return valNumber;\n};\n\n\nTool.ParseNumberWithRef = function(str, ref) {\n  const rel = str.startsWith('@');\n  if (rel) {\n    str = str.substring(1);\n  }\n  let val = Tool.ParseNumber(str);\n  if(typeof val === 'string') return val;\n  if (rel) {\n    val += ref;\n  }\n  return val;\n};\n\nconst VECTOR_PATTERN = /^(@)?(.+)(,|<)(.+)$/;\n\nTool.ParseVector = function(referencePoint, command) {\n  command = command.replace(/\\s+/g, '');\n\n  const match = command.match(VECTOR_PATTERN);\n  if (match) {\n    const ref = match[1] !== undefined;\n    let x = Tool.ParseNumber(match[2]);\n    if(typeof x === 'string') return x;\n    const polar = match[3] == '<';\n    let y = Tool.ParseNumber(match[4]);\n    if(typeof y === 'string') return y;\n    if (polar) {\n      const angle = y / 180 * Math.PI;\n      const radius = x;\n      x = radius * Math.cos(angle);\n      y = radius * Math.sin(angle);\n    }\n    if (ref) {\n      x += referencePoint.x;\n      y += referencePoint.y;\n    }\n    return {x, y};\n  }\n\n  return \"wrong input, point is expected: x,y | @x,y | r<polar | @r<polar \";\n};\n\nTool.ParseNumberSequence = function(command, refs, length) {\n  command = command.replace(/\\s+/g, '');\n  const parts = command.split(',');\n  const result = [];\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    let val = refs && refs[i] ? Tool.ParseNumberWithRef(part, refs[i]) : Tool.ParseNumberWithRef(part);\n    result.push(val);\n  }\n  if (length !== undefined && result.length != length) {\n    return \"wrong input, sequence of length \" + length + \" is expected: x1,x2...\";\n  }\n  return result;\n};\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/tool.js\n **/","import {SketchObject} from './sketch-object'\nimport {DrawPoint} from './draw-utils'\nimport {Generator} from '../id-generator'\nimport Vector from '../../math/vector'\n\nexport class EndPoint extends SketchObject {\n\n  constructor(x, y) {\n    super();\n    this.x = x;\n    this.y = y;\n    this.parent = null;\n    this._x = new Param(this, 'x');\n    this._y = new Param(this, 'y');\n  }\n  \n  collectParams(params) {\n    params.push(this._x);\n    params.push(this._y);\n  }\n  \n  normalDistance(aim) {\n    return aim.minus(new Vector(this.x, this.y)).length();\n  }\n  \n  getReferencePoint() {\n    return this;\n  }\n  \n  translateImpl(dx, dy) {\n    this.x += dx;\n    this.y += dy;\n  }\n  \n  drawImpl(ctx, scale) {\n    DrawPoint(ctx, this.x, this.y, 3, scale)\n  }\n\n  setXY(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  setFromPoint(p) {\n    this.setXY(p.x, p.y);\n  }\n\n  setFromArray(arr) {\n    this.setXY(arr[0], arr[1]);\n  }\n  \n  toVector() {\n    return new Vector(this.x, this.y);\n  }\n  \n  copy() {\n    return new EndPoint(this.x, this.y);\n  }\n}\nEndPoint.prototype._class = 'TCAD.TWO.EndPoint';\n\nexport class Param {\n  constructor(obj, prop) {\n    this.id = Generator.genID();\n    this.obj = obj;\n    this.prop = prop;\n  }\n\n  set(value) {\n    this.obj[this.prop] = value;\n  }\n\n  get() {\n    return this.obj[this.prop];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/point.js\n **/","import {Generator} from '../id-generator'\nimport {Shape} from './shape'\n\nexport class SketchObject extends Shape {\n  constructor() {\n    super();\n    this.id = Generator.genID();\n    this.aux = false;\n    this.marked = null;\n    this.children = [];\n    this.linked = [];\n    this.layer = null;\n  }\n\n  normalDistance(aim, scale) {\n    return -1;\n  }\n  \n  addChild(child) {\n    this.children.push(child);\n    child.parent = this;\n  }\n  \n  accept(visitor) {\n    for (let child of this.children) {\n      if (!child.accept(visitor)) {\n        return false;\n      }\n    }\n    return visitor(this);\n  }\n\n  stabilize(viewer) {\n  }\n\n  recoverIfNecessary() {\n    return false;\n  }\n  \n  isAuxOrLinkedTo() {\n    if (!!this.aux) {\n      return true;\n    }\n    for (var i = 0; i < this.linked.length; ++i) {\n      if (!!this.linked[i].aux) {\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  _translate(dx, dy, translated) {\n    translated[this.id] = 'x';\n    for (var i = 0; i < this.linked.length; ++i) {\n      if (translated[this.linked[i].id] != 'x') {\n        this.linked[i]._translate(dx, dy, translated);\n      }\n    }\n    this.translateImpl(dx, dy);\n  };\n  \n  translate(dx, dy) {\n  //  this.translateImpl(dx, dy);\n    if (this.isAuxOrLinkedTo()) {\n      return;\n    }\n    this._translate(dx, dy, {});\n  }\n\n  translateImpl(dx, dy) {\n    this.accept(function (obj) {\n      if (obj._class === 'TCAD.TWO.EndPoint') {\n        obj.translate(dx, dy);\n      }\n      return true;\n    });\n  }\n  \n  draw(ctx, scale, viewer) {\n    if (!this.visible) return;\n    if (this.marked != null) {\n      ctx.save();\n      viewer.setStyle(this.marked, ctx);\n    }\n    this.drawImpl(ctx, scale, viewer);\n    if (this.marked != null) ctx.restore();\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/sketch-object.js\n **/","\nexport class Shape {\n\n  constructor() {\n    this.visible = true;\n    this.style = null;\n    this.role = null;\n  }\n\n  accept(visitor) {\n    return visitor(this);\n  }\n\n  draw(ctx, scale) {\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/shape.js\n **/","\nexport function DrawPoint(ctx, x, y, rad, scale) {\n  ctx.beginPath();\n  ctx.arc(x, y, rad / scale, 0, 2 * Math.PI, false);\n  ctx.fill();\n}\n\nexport function SetStyle(style, ctx, scale) {\n  ctx.lineWidth  = style.lineWidth / scale;\n  ctx.strokeStyle  = style.strokeStyle;\n  ctx.fillStyle  = style.fillStyle;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/draw-utils.js\n **/","import {Ellipse} from '../shapes/ellipse'\nimport {EllipticalArc} from '../shapes/elliptical-arc'\nimport {Circle} from '../shapes/circle'\nimport {EditCircleTool} from './circle'\nimport {DragTool} from './drag'\nimport {EllipseTool, STATE_RADIUS} from './ellipse'\n\nexport function GetShapeEditTool(viewer, obj, alternative) {\n  if (obj instanceof Circle && !alternative) {\n    const tool = new EditCircleTool(viewer);\n    tool.circle = obj;\n    return tool;\n  } else if (obj instanceof Ellipse && !alternative) {\n    // even for an ell-arc we should act as it would be an ellipse to \n    // avoid stabilize constraints added and demoing B point on move\n    // so second arg must be FALSE!\n    const tool = new EllipseTool(viewer, false);  \n    tool.ellipse = obj;\n    tool.state = STATE_RADIUS;\n    return tool;\n  } else {\n    return new DragTool(obj, viewer);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/edit-tools-map.js\n **/","import {Ref} from './ref'\nimport {SketchObject} from './sketch-object'\nimport {Constraints} from '../parametric'\n\nimport * as math from '../../math/math';\n\nexport class Ellipse extends SketchObject {\n\n  constructor(ep1, ep2) {\n    super();\n    this.ep1 = ep1;\n    this.ep2 = ep2;\n    this.addChild(this.ep1);\n    this.addChild(this.ep2);\n    this.r = new Ref(0);\n    this.r.set(this.radiusX * 0.5);\n    this.r.obj = this;\n  }\n\n  recoverIfNecessary() {\n    let recovered = false;\n    if (math.distanceAB(this.ep1, this.ep2) <= math.TOLERANCE) {\n      this.ep1.translate(-RECOVER_LENGTH, -RECOVER_LENGTH);\n      this.ep2.translate(RECOVER_LENGTH, RECOVER_LENGTH);\n      recovered = true;\n    }\n    if (this.radiusY <= 0.1) {\n      this.r.set(RECOVER_LENGTH);\n      recovered = true;\n    }\n    return recovered;\n  }\n  \n  collectParams(params) {\n    this.ep1.collectParams(params);\n    this.ep2.collectParams(params);\n    params.push(this.r);\n  }\n\n\n  get rotation() {\n    return Math.atan2(this.ep2.y - this.ep1.y, this.ep2.x - this.ep1.x);\n  }\n\n  get radiusX() {\n    return math.distance(this.ep1.x, this.ep1.y, this.ep2.x, this.ep2.y) * 0.5;\n  }\n\n  get radiusY() {\n    return this.r.get();\n  }\n\n  get centerX() {\n    return this.ep1.x + (this.ep2.x - this.ep1.x) * 0.5; \n  }\n\n  get centerY() {\n    return this.ep1.y + (this.ep2.y - this.ep1.y) * 0.5;\n  }\n\n  drawImpl(ctx, scale) {\n    ctx.beginPath();\n    const radiusX = Math.max(this.radiusX, 1e-8);\n    const radiusY = Math.max(this.radiusY, 1e-8);\n    ctx.ellipse(this.centerX, this.centerY, radiusX, radiusY, this.rotation, 0, 2 * Math.PI);\n    ctx.stroke();\n  }\n  \n  toEllipseCoordinateSystem(point) {\n    let x = point.x - this.centerX;\n    let y = point.y - this.centerY;\n    const angle = Math.atan2(y, x) - this.rotation;\n    const radius = math.distance(0, 0, x, y);\n    x = radius * Math.cos(angle);\n    y = radius * Math.sin(angle);\n    return {x, y, angle, radius};\n  }\n\n  radiusAtAngle(angle) {\n    return Math.sqrt(1/( sq(Math.cos(angle)/this.radiusX) + sq(Math.sin(angle)/this.radiusY)));\n  }\n\n  normalDistance(aim) {\n    const polarPoint = this.toEllipseCoordinateSystem(aim);\n    const L = this.radiusAtAngle(polarPoint.angle);\n    return Math.abs(polarPoint.radius - L);\n  }\n  \n  static findMinorRadius(majorRadius, pntRadius, pntAngle) {\n    return Math.abs( Math.sin(pntAngle) /  Math.sqrt(1 / sq(pntRadius) - sq(Math.cos(pntAngle) / majorRadius)) );\n  }\n}\nEllipse.prototype._class = 'TCAD.TWO.Ellipse';\n\nconst sq = (a) => a * a;\nconst RECOVER_LENGTH = 100;\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/ellipse.js\n **/","import {Ellipse} from './ellipse'\nimport {Constraints} from '../parametric'\n\nimport * as math from '../../math/math';\nimport {swap} from '../../utils/utils'\n\nexport class EllipticalArc extends Ellipse {\n\n  constructor(ep1, ep2, a, b) {\n    super(ep1, ep2);\n    this.a = a;\n    this.b = b;\n    this.addChild(a);\n    this.addChild(b);\n    \n    //we'd like to have angles points have higher selection order \n    swap(this.children, 0, this.children.length - 2);\n    swap(this.children, 1, this.children.length - 1);\n  }\n\n  stabilize(viewer) {\n    viewer.parametricManager._add(new Constraints.PointOnEllipseInternal(this.b, this));\n    viewer.parametricManager._add(new Constraints.PointOnEllipseInternal(this.a, this));\n  }\n\n  drawImpl(ctx, scale) {\n    ctx.beginPath();\n    const radiusX = Math.max(this.radiusX, 1e-8);\n    const radiusY = Math.max(this.radiusY, 1e-8);\n    let aAngle = this.drawAngle(this.a);\n    let bAngle;\n    if (math.areEqual(this.a.x, this.b.x, math.TOLERANCE) &&\n      math.areEqual(this.a.y, this.b.y, math.TOLERANCE)) {\n      bAngle = aAngle + 2 * Math.PI;\n    } else {\n      bAngle = this.drawAngle(this.b)\n    }\n    ctx.ellipse(this.centerX, this.centerY, radiusX, radiusY, this.rotation, aAngle, bAngle );\n    ctx.stroke();\n  }\n  \n  drawAngle(point) {\n    let deformScale =  this.radiusY / this.radiusX;\n    let x = point.x - this.centerX;\n    let y = point.y - this.centerY;\n    const rotation =  - this.rotation;\n    let xx =  x * Math.cos(rotation) - y * Math.sin(rotation);\n    let yy =  x * Math.sin(rotation) + y * Math.cos(rotation);\n    xx *= deformScale;\n    return Math.atan2(yy, xx);\n  }\n}\n\nEllipticalArc.prototype._class = 'TCAD.TWO.EllipticalArc';\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/elliptical-arc.js\n **/","import * as utils from '../../utils/utils';\nimport * as math from '../../math/math';\nimport {EditCircleTool} from '../tools/circle'\n\nimport {EndPoint} from './point'\nimport {Ref} from './ref'\nimport {SketchObject} from './sketch-object'\n\nexport class Circle extends SketchObject {\n  \n  constructor(c) {\n    super();\n    this.c = c;\n    c.parent = this;\n    this.children.push(c);\n    this.r = new Ref(0);\n    this.r.obj = this;\n  }\n    \n  collectParams(params) {\n    this.c.collectParams(params);\n    params.push(this.r);\n  }\n  \n  getReferencePoint() {\n    return this.c;\n  }\n  \n  translateImpl(dx, dy) {\n    this.c.translate(dx, dy);\n  }\n  \n  drawImpl(ctx, scale) {\n    ctx.beginPath();\n    ctx.arc(this.c.x, this.c.y, this.r.get(), 0, 2 * Math.PI);\n    ctx.stroke();\n  }\n  \n  normalDistance(aim) {\n    return Math.abs(math.distance(aim.x, aim.y, this.c.x, this.c.y) - this.r.get());\n  }\n}\n\nCircle.prototype._class = 'TCAD.TWO.Circle';\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/circle.js\n **/","import {Tool} from './tool'\nimport * as math from '../../math/math';\nimport {EndPoint} from '../shapes/point'\nimport {Circle} from '../shapes/circle'\n\nexport class EditCircleTool extends Tool {\n  constructor(viewer) {\n    super('circle', viewer);\n    this.circle = null;\n  }\n\n  restart() {\n    this.sendMessage('specify center');\n  }\n\n  cleanup(e) {\n    this.viewer.cleanSnap();\n  }\n\n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    if (this.circle != null) {\n      var r = math.distance(p.x, p.y, this.circle.c.x, this.circle.c.y);\n      this.circle.r.set(r);\n      if (!Tool.dumbMode(e)) {\n        this.solveRequest(true);\n      }\n    } else {\n      this.viewer.snap(p.x, p.y, []);\n    }\n    this.viewer.refresh();\n  }\n\n  solveRequest(rough) {\n    this.solver = this.viewer.parametricManager.prepare([this.circle.r]);\n    this.solver.solve(rough, 1);\n    this.solver.sync();\n  }\n\n  mouseup(e) {\n    if (this.circle == null) {\n      this.stepCreateCircle(this.viewer.screenToModel(e), true);\n    } else {\n      this.stepFinish();\n    }\n  }\n\n  stepCreateCircle(center, tryToSnap) {\n    this.viewer.historyManager.checkpoint();\n    const needSnap = tryToSnap && this.viewer.snapped != null;\n    const p = needSnap ? this.viewer.snapped : center;\n    this.circle = new Circle(\n      new EndPoint(p.x, p.y)\n    );\n    if (needSnap) this.viewer.parametricManager.linkObjects([this.circle.c, p]);\n    this.pointPicked(this.circle.c.x, this.circle.c.y);\n    this.sendHint('specify radius');\n    this.viewer.activeLayer.add(this.circle);\n    this.viewer.refresh();\n  }\n\n  stepFinish() {\n    this.solveRequest(false);\n    this.sendMessage(\"radius: \" + this.viewer.roundToPrecision(this.circle.r.get()));\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n  }\n\n  processCommand(command) {\n    if (this.circle == null) {\n      const result = Tool.ParseVector(this.viewer.referencePoint, command);\n      if(typeof result === 'string') return result;\n      this.stepCreateCircle(result, false)\n    } else {\n      const result = Tool.ParseNumber(command);\n      if(typeof result === 'string') return result;\n      this.circle.r.set(result);\n      this.stepFinish();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/circle.js\n **/","import {Tool} from './tool'\nimport {optim} from '../../math/optim'\nimport * as math from '../../math/math'\n\nexport class DragTool extends Tool {\n  \n  constructor(obj, viewer) {\n    super('drag', viewer);\n    this.obj = obj;\n    this._point = {x: 0, y: 0};\n    this.origin = {x: 0, y: 0};\n    this.solver = null;\n  }\n  \n  mousemove(e) {\n    var x = this._point.x;\n    var y = this._point.y;\n    this.viewer.screenToModel2(e.offsetX, e.offsetY, this._point);\n    var dx = this._point.x - x;\n    var dy = this._point.y - y;\n    for (var i = 0; i < this.lockedShifts.length; i += 2) {\n      this.lockedValues[i] = this._point.x - this.lockedShifts[i];\n      this.lockedValues[i + 1] = this._point.y - this.lockedShifts[i + 1];\n    }\n    this.solver.updateLock(this.lockedValues);\n    if (!Tool.dumbMode(e)) {\n      this.solveRequest(true);\n    } else {\n      this.obj.translate(dx, dy);\n    }\n\n    this.viewer.refresh();\n  }\n\n  mousedown(e) {\n    this.origin.x = e.offsetX;\n    this.origin.y = e.offsetY;\n    this.viewer.screenToModel2(e.offsetX, e.offsetY, this._point);\n    this.prepareSolver([]);\n  }\n\n  mouseup(e) {\n    this.solveRequest(false);\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n    var traveled = math.distance(this.origin.x, this.origin.y, e.offsetX, e.offsetY);\n    if (traveled >= 10) {\n      this.viewer.historyManager.lightCheckpoint(10);\n    }\n    //this.animateSolution();\n  }\n\n  mousewheel(e) {\n  }\n\n  solveRequest(rough) {\n    this.solver.solve(rough, 1);\n    this.solver.sync();\n\n    var paramsToUpdate = [];\n    this.viewer.accept(function (obj) {\n      if (obj.aux !== true) {\n        if (obj.recoverIfNecessary()){\n          obj.collectParams(paramsToUpdate);\n        }\n      }\n      return true;\n    });\n\n    if (paramsToUpdate.length != 0) {\n      for (var i = 0; i < paramsToUpdate.length; i++) {\n        this.solver.updateParameter(paramsToUpdate[i]);\n      }\n      this.solver.solve(rough, 1);\n      this.solver.sync();\n    }\n  }\n\n  getParamsToLock() {\n    var params = [];\n    this.obj.accept(function (obj) {\n      if (obj._class === 'TCAD.TWO.EndPoint' && !obj.isAuxOrLinkedTo()) {\n        params.push(obj._x);\n        params.push(obj._y);\n      }\n      return true;\n    });\n    return params;\n  }\n\n  prepareSolver(extraConstraints) {\n    var locked = this.getParamsToLock();\n    this.lockedShifts = [];\n    this.lockedValues = [];\n    for (var i = 0; i < locked.length; i += 2) {\n      this.lockedShifts[i] = this._point.x - locked[i].get();\n      this.lockedShifts[i + 1] = this._point.y - locked[i + 1].get();\n    }\n    this.solver = this.viewer.parametricManager.prepare(locked, extraConstraints);\n    //this.enableRecording();\n  }\n\n  enableRecording() {\n    var solver = this.solver;\n    DragTool.snapshots = [];\n    optim.DEBUG_HANDLER = () => {\n      DragTool.snapshots.push([]);\n      for (var i = 0; i < solver.solvers.length; i++) {\n        var sys = solver.solvers[i].system;\n        DragTool.snapshots[i].push(sys.params.map(function (p) {\n          return p.get()\n        }))\n      }\n    }\n  }\n\n  animateSolution() {\n    if (DragTool.snapshots.length === 0) return;\n    var stepNum = 0;\n    var scope = this;\n    var then = Date.now();\n    var speed = 500;\n\n    function step() {\n      var now = Date.now();\n      var elapsed = now - then;\n\n      if (elapsed > speed) {\n        for (var i = 0; i < scope.solver.solvers.length; i++) {\n          var sys = scope.solver.solvers[i].system;\n          if (stepNum >= DragTool.snapshots[i].length) continue;\n          var values = DragTool.snapshots[i][stepNum];\n          for (var k = 0; k < values.length; k++) {\n            sys.params[k]._backingParam.set(values[k]);\n          }\n        }\n        stepNum++;\n\n        then = now;\n        scope.viewer.repaint();\n      }\n\n      if (DragTool.snapshots.length != 0 && stepNum < DragTool.snapshots[0].length) {\n        window.requestAnimationFrame(step);\n      }\n    }\n\n    window.requestAnimationFrame(step);\n  }\n}\n\nDragTool.snapshots = [];\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/drag.js\n **/","import {Tool} from './tool'\nimport {EndPoint} from '../shapes/point'\nimport {Ellipse} from '../shapes/ellipse'\nimport {EllipticalArc} from '../shapes/elliptical-arc'\nimport Vector from '../../math/vector'\n\nexport const STATE_POINT1 = 0;\nexport const STATE_POINT2 = 1;\nexport const STATE_RADIUS = 2;\n\nexport class EllipseTool extends Tool {\n\n  constructor(viewer, arc) {\n    super(arc ? 'ellipse' : 'elliptical arc', viewer);\n    this.arc = arc;\n    this.ellipse = null;\n    this.state = STATE_POINT1;\n  }\n  \n  restart() {\n    this.ellipse = null;\n    this.state = STATE_POINT1;\n    this.sendHint('specify first major axis point')\n  }\n\n  cleanup(e) {\n    this.viewer.cleanSnap();\n  }\n  \n  point(e) {\n    return this.viewer.snapped ? this.viewer.snapped : this.viewer.screenToModel(e);\n  }\n  \n  newEllipse(p) {\n    const ep = () => new EndPoint(p.x, p.y);\n    return this.arc ? new EllipticalArc(ep(), ep(), ep(), ep()) : new Ellipse(ep(), ep());\n  }\n  \n  demoBPoint() {\n    const arc = this.ellipse;\n    let ang = Math.atan2(arc.a.y - arc.centerY, arc.a.x - arc.centerX) + (2 * Math.PI - 0.3);\n    ang %= 2 * Math.PI;\n    const r = arc.radiusAtAngle(ang - arc.rotation);\n    arc.b.x = arc.centerX + r * Math.cos(ang);\n    arc.b.y = arc.centerY + r * Math.sin(ang);\n  }\n  \n  mouseup(e) {\n    switch (this.state) {\n      case STATE_POINT1: {\n        const p = this.point(e);\n        this.ellipse = this.newEllipse(p);\n        this.snapIfNeed(this.ellipse.ep1);\n        this.viewer.activeLayer.add(this.ellipse);\n        this.viewer.refresh();\n        this.state = STATE_POINT2;\n        this.sendHint('specify second major axis point');\n        break;\n      }\n      case STATE_POINT2: {\n        const p = this.point(e);\n        this.ellipse.ep2.setFromPoint(p);\n        this.snapIfNeed(this.ellipse.ep2);\n        this.viewer.refresh();\n        this.state = STATE_RADIUS;\n        this.sendHint('specify minor axis radius');\n        break;\n      }\n      case STATE_RADIUS:\n        if (this.arc) {\n          this.ellipse.stabilize(this.viewer);\n        }\n        this.viewer.toolManager.releaseControl();\n    }\n  }\n\n  mousemove(e) {\n    const p = this.viewer.screenToModel(e);\n    switch (this.state) {\n      case STATE_POINT1:\n        this.viewer.snap(p.x, p.y, []);\n        break;\n      case STATE_POINT2:\n        this.ellipse.ep2.setFromPoint(this.viewer.screenToModel(e));\n        this.ellipse.r.value = this.ellipse.radiusX * 0.5;\n        this.viewer.snap(p.x, p.y, this.ellipse.children);\n        if (this.arc) {\n          this.ellipse.a.setFromPoint(this.ellipse.ep2);\n          this.demoBPoint();\n        }\n        break;\n      case STATE_RADIUS:\n        const polarPoint = this.ellipse.toEllipseCoordinateSystem(p);\n        let minorRadius = Ellipse.findMinorRadius(this.ellipse.radiusX, polarPoint.radius, polarPoint.angle);\n        if (isNaN(minorRadius)) {\n          const projAxis = new Vector(-(this.ellipse.ep2.y - this.ellipse.ep1.y), this.ellipse.ep2.x - this.ellipse.ep1.x);\n          projAxis._normalize();\n          const v = new Vector(this.ellipse.ep2.x - p.x, this.ellipse.ep2.y - p.y);\n          minorRadius = Math.abs(projAxis.dot(v));\n        }\n        this.ellipse.r.set(minorRadius);\n        if (!Tool.dumbMode(e)) {\n          this.solveRequest(true);\n        }\n        if (this.arc) {\n          this.demoBPoint();\n        }\n        break;\n    } \n    this.viewer.refresh();\n  }\n\n  solveRequest(rough) {\n    this.solver = this.viewer.parametricManager.prepare([this.ellipse.r]);\n    this.solver.solve(rough, 1);\n    this.solver.sync();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/ellipse.js\n **/","import {SketchObject} from './sketch-object'\nimport Vector from '../../math/vector'\nimport {Constraints} from '../parametric'\nimport * as math from '../../math/math'\n\nexport class Segment extends SketchObject {\n\n  constructor(a, b) {\n    super();\n    this.a = a;\n    this.b = b;\n    a.parent = this;\n    b.parent = this;\n    this.children.push(a, b);\n  }\n  \n  recoverIfNecessary() {\n    if (math.distanceAB(this.a, this.b) > math.TOLERANCE) {\n      return false;\n    } else {\n      const recoverLength = 100;\n      this.a.translate(-recoverLength, -recoverLength);\n      this.b.translate( recoverLength,  recoverLength);\n      return true;\n    }\n  }\n  \n  collectParams(params) {\n    this.a.collectParams(params);\n    this.b.collectParams(params);\n  }\n\n  normalDistance(aim) {\n    return Segment.calcNormalDistance(aim, this.a, this.b);\n  }\n\n  static calcNormalDistance(aim, segmentA, segmentB) {\n    const ab = new Vector(segmentB.x - segmentA.x, segmentB.y - segmentA.y)\n    const e = ab.normalize();\n    const a = new Vector(aim.x - segmentA.x, aim.y - segmentA.y);\n    const b = e.multiply(a.dot(e));\n    const n = a.minus(b);\n  \n    //Check if vector b lays on the vector ab\n    if (b.length() > ab.length()) {\n      return -1;\n    }\n  \n    if (b.dot(ab) < 0) {\n      return -1;\n    }\n  \n    return n.length();\n  }\n  \n  getReferencePoint() {\n    return this.a;\n  }\n  \n  translateImpl(dx, dy) {\n    this.a.translate(dx, dy);\n    this.b.translate(dx, dy);\n  }\n  \n  drawImpl(ctx, scale) {\n    ctx.beginPath();\n    ctx.moveTo(this.a.x, this.a.y);\n    ctx.lineTo(this.b.x, this.b.y);\n  //  ctx.save();\n  //  ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.stroke();\n  //  ctx.restore();\n  }\n}\n\nSegment.prototype._class = 'TCAD.TWO.Segment';\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/segment.js\n **/","import * as draw_utils from './draw-utils'\nimport {Shape} from './shape'\n\nexport class Point extends Shape {\n  \n  constructor(x, y, rad) {\n    super();\n    this.x = x;\n    this.y = y;\n    this.rad = rad;\n    this.style = null;\n  }\n\n  draw(ctx, scale) {\n    draw_utils.DrawPoint(ctx, this.x, this.y, this.rad, scale);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/primitives.js\n **/","import {Shape} from './shape'\n\nexport class ReferencePoint extends Shape {\n  constructor() {\n    super();\n    this.x = 0;\n    this.y = 0;\n  }\n  \n  draw(ctx, scale) {\n    if (!this.visible) return;\n    ctx.strokeStyle  = 'salmon';\n    ctx.fillStyle  = 'salmon';\n    ctx.lineWidth = 1 / scale;\n  \n    ctx.beginPath();\n    ctx.arc(this.x, this.y, 1 / scale, 0, 2 * Math.PI, false);\n    ctx.fill();\n  \n    ctx.beginPath();\n    ctx.arc(this.x, this.y, 7 / scale, 0, 2 * Math.PI, false);\n    ctx.stroke();\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/reference-point.js\n **/","import {Shape} from './shape'\n\nexport class BasisOrigin extends Shape {\n  constructor (basis, viewer) {\n    super();\n    this.viewer = viewer;\n    this.inverseX = false;\n    this.inverseY = false;\n    this.lineWidth = 100;\n    this.xColor = '#FF0000';\n    this.yColor = '#00FF00';\n  }\n  \n  draw(ctx, scale) {\n    ctx.save();\n    if (this.inverseX) {\n      this.xScale = -1;\n      this.xShift = this.lineWidth + 10;\n    } else {\n      this.xScale = 1;\n      this.xShift = 10;\n    }\n    if (this.inverseY) {\n      this.yScale = -1;\n      this.yShift = this.viewer.canvas.height - this.lineWidth - 10;\n    } else {\n      this.yScale = 1;\n      this.yShift = this.viewer.canvas.height - 10;\n    }\n  \n    ctx.setTransform( this.xScale, 0, 0, this.yScale, this.xShift, this.yShift);\n    ctx.beginPath();\n  \n    ctx.lineWidth  = 1;\n    ctx.strokeStyle  = this.yColor;\n  \n    var headA = 1;\n    var headB = 10;\n  \n    ctx.moveTo(0.5, 0);\n    ctx.lineTo(0.5, - this.lineWidth);\n  \n    ctx.moveTo(0, - this.lineWidth);\n    ctx.lineTo(headA, 0 - this.lineWidth + headB);\n  \n    ctx.moveTo(0, - this.lineWidth);\n    ctx.lineTo(- headA, - this.lineWidth + headB);\n    ctx.closePath();\n    ctx.stroke();\n  \n    ctx.beginPath();\n    ctx.strokeStyle  = this.xColor;\n    ctx.moveTo(0, 0.5);\n    ctx.lineTo(this.lineWidth, 0.5);\n  \n    ctx.moveTo(this.lineWidth, 0);\n    ctx.lineTo(this.lineWidth - headB, headA);\n  \n    ctx.moveTo(this.lineWidth, 0);\n    ctx.lineTo(this.lineWidth - headB, - headA);\n    ctx.closePath();\n    ctx.stroke();\n  \n    ctx.restore();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/basis-origin.js\n **/","import * as utils from '../../utils/utils';\nimport * as math from '../../math/math';\nimport Vector from '../../math/vector'\nimport {Ref} from './ref'\nimport {Constraints} from '../parametric'\nimport {SketchObject} from './sketch-object'\n\nexport class Arc extends SketchObject {\n  \n  constructor(a, b, c) {\n    super();\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    a.parent = this;\n    b.parent = this;\n    c.parent = this;\n    this.children.push(a, b, c);\n    this.r = new Ref(0);\n    this.r.value = this.distanceA();\n    this.r.obj = this;\n  }\n    \n  collectParams(params) {\n    this.a.collectParams(params);\n    this.b.collectParams(params);\n    this.c.collectParams(params);\n    params.push(this.r);\n  }\n  \n  getReferencePoint() {\n    return this.c;\n  }\n  \n  translateImpl(dx, dy) {\n    this.a.translate(dx, dy);\n    this.b.translate(dx, dy);\n    this.c.translate(dx, dy);\n  }\n  \n  \n  radiusForDrawing() {\n    return this.distanceA();\n  }\n  \n  distanceA() {\n    return math.distance(this.a.x, this.a.y, this.c.x, this.c.y);\n  }\n  \n  distanceB() {\n    return math.distance(this.b.x, this.b.y, this.c.x, this.c.y);\n  }\n  \n  getStartAngle() {\n    return Math.atan2(this.a.y - this.c.y, this.a.x - this.c.x);\n  }\n  \n  getEndAngle() {\n    return Math.atan2(this.b.y - this.c.y, this.b.x - this.c.x);\n  }\n  \n  drawImpl(ctx, scale) {\n    ctx.beginPath();\n    var r = this.radiusForDrawing();\n    var startAngle = this.getStartAngle();\n    var endAngle;\n    if (math.areEqual(this.a.x, this.b.x, math.TOLERANCE) &&\n        math.areEqual(this.a.y, this.b.y, math.TOLERANCE)) {\n      endAngle = startAngle + 2 * Math.PI;\n    } else {\n      endAngle = this.getEndAngle();\n    }\n    ctx.arc(this.c.x, this.c.y, r, startAngle, endAngle);\n    var distanceB = this.distanceB();\n    if (Math.abs(r - distanceB) * scale > 1) {\n      var adj = r / distanceB;\n      ctx.save();\n      ctx.setLineDash([7 / scale]);\n      ctx.lineTo(this.b.x, this.b.y);\n      ctx.moveTo(this.b.x + (this.b.x - this.c.x) / adj, this.b.y + (this.b.y - this.c.y) / adj);\n      ctx.stroke();\n      ctx.restore();\n    } else {\n      ctx.stroke();\n    }\n  }\n  \n  isPointInsideSector(x, y) {\n    var ca = new Vector(this.a.x - this.c.x, this.a.y - this.c.y);\n    var cb = new Vector(this.b.x - this.c.x, this.b.y - this.c.y);\n    var ct = new Vector(x - this.c.x, y - this.c.y);\n  \n    ca._normalize();\n    cb._normalize();\n    ct._normalize();\n    var cosAB = ca.dot(cb);\n    var cosAT = ca.dot(ct);\n  \n    var isInside = cosAT >= cosAB;\n    var abInverse = ca.cross(cb).z < 0;\n    var atInverse = ca.cross(ct).z < 0;\n  \n    var result;\n    if (abInverse) {\n      result = !atInverse || !isInside;\n    } else {\n      result = !atInverse && isInside;\n    }\n    return result;\n  }\n  \n  normalDistance(aim) {\n  \n    var isInsideSector = this.isPointInsideSector(aim.x, aim.y);\n    if (isInsideSector) {\n      return Math.abs(math.distance(aim.x, aim.y, this.c.x, this.c.y) - this.radiusForDrawing());\n    } else {\n      return Math.min(\n        math.distance(aim.x, aim.y, this.a.x, this.a.y),\n        math.distance(aim.x, aim.y, this.b.x, this.b.y)\n      );\n    }\n  }\n  \n  stabilize(viewer) {\n    this.r.set(this.distanceA());\n    viewer.parametricManager._add(new Constraints.P2PDistanceV(this.b, this.c, this.r));\n    viewer.parametricManager._add(new Constraints.P2PDistanceV(this.a, this.c, this.r));\n  }\n}\n\nArc.prototype._class = 'TCAD.TWO.Arc';\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/arc.js\n **/","import {Ref} from './ref'\nimport {SketchObject} from './sketch-object'\nimport {Segment} from './segment'\nimport {LUT} from '../../math/bezier-cubic'\nimport {ConvexHull2D} from '../../math/convex-hull'\n\nimport * as draw_utils from '../shapes/draw-utils'\nimport * as math from '../../math/math';\n\n\nexport class BezierCurve extends SketchObject {\n\n  constructor(a, b, cp1, cp2) {\n    super();\n    this.a = a;\n    this.b = b;\n    this.cp1 = cp1;\n    this.cp2 = cp2;\n    \n    this.addChild(new Segment(a, cp1));\n    this.addChild(new Segment(b, cp2));\n    for (let c of this.children) {\n      c.role = 'construction';\n    }\n  }\n\n  collectParams(params) {\n    this.a.collectParams(params);\n    this.b.collectParams(params);\n    this.cp1.collectParams(params);\n    this.cp2.collectParams(params);\n  }\n\n  normalDistance(aim, scale) {\n    this.hull = ConvexHull2D([this.a, this.b, this.cp1, this.cp2]);\n    this.hull = math.polygonOffset(this.hull, 1 + (0.3 / scale));\n    if (math.isPointInsidePolygon(aim, this.hull)) {\n      this.lut = LUT(this.a, this.b, this.cp1, this.cp2, scale);\n      return this.closestNormalDistance(aim, this.lut)\n    }\n    return -1;\n  }\n  \n  closestNormalDistance(aim, segments) {\n    let hero = -1;\n    for (let p = segments.length - 1, q = 0; q < segments.length; p = q ++) {\n      const dist = Math.min(Segment.calcNormalDistance(aim, segments[p], segments[q]));\n      if (dist != -1) {\n        hero = hero == -1 ? dist : Math.min(dist, hero);\n      }\n    }\n    return hero;\n  }\n  \n  drawImpl(ctx, scale, viewer) {\n    ctx.beginPath();\n    ctx.moveTo(this.a.x, this.a.y);\n    ctx.bezierCurveTo(this.cp1.x, this.cp1.y, this.cp2.x, this.cp2.y, this.b.x, this.b.y);\n    ctx.stroke();\n\n    //debug lut and hull\n    //this.drawLUTAndHull();\n  }\n\n  drawLUTAndHull() {\n    if (this.lut) {\n      for (let p of this.lut) {\n        draw_utils.DrawPoint(ctx, p.x, p.y, 3, scale);\n      }\n\n      ctx.moveTo(this.hull[0].x, this.hull[0].y);\n      for (let p of this.hull) {\n        ctx.lineTo(p.x, p.y);\n      }\n      ctx.stroke();\n    }\n  }\n}\nBezierCurve.prototype._class = 'TCAD.TWO.BezierCurve';\n\nconst RECOVER_LENGTH = 100;\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/bezier-curve.js\n **/","export function ConvexHull2D(points) {\n  points.sort(function (a, b) {\n    return a.x != b.x ? a.x - b.x : a.y - b.y;\n  });\n\n  const n = points.length;\n  const hull = [];\n\n  for (let i = 0; i < 2 * n; i++) {\n    const j = i < n ? i : 2 * n - 1 - i;\n    while (hull.length >= 2 && removeMiddle(hull[hull.length - 2], hull[hull.length - 1], points[j])) {\n      hull.pop();\n    }\n    hull.push(points[j]);\n  }\n  hull.pop();\n  return hull;\n}\n\nfunction removeMiddle(a, b, c) {\n  var cross = (a.x - b.x) * (c.y - b.y) - (a.y - b.y) * (c.x - b.x);\n  var dot = (a.x - b.x) * (c.x - b.x) + (a.y - b.y) * (c.y - b.y);\n  return cross < 0 || cross == 0 && dot <= 0;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/math/convex-hull.js\n **/","import * as utils from '../../utils/utils'\nimport * as math from '../../math/math'\nimport Vector from '../../math/vector'\nimport {SketchObject} from './sketch-object'\n\nclass LinearDimension extends SketchObject {\n  \n  constructor(a, b) {\n    super();\n    this.a = a;\n    this.b = b;\n    this.flip = false;\n  }\n  \n  collectParams(params) {\n  }\n  \n  getReferencePoint() {\n    return this.a;\n  }\n  \n  translateImpl(dx, dy) {\n  }\n  \n  getA() { return this.a }\n  getB() { return this.b }\n  \n  drawImpl(ctx, scale, viewer) {\n  \n    var off = 30 * viewer.dimScale;\n    var textOff = getTextOff(viewer.dimScale);\n  \n    var a, b, startA, startB;\n    if (this.flip) {\n      a = this.getB();\n      b = this.getA();\n      startA = this.b;\n      startB = this.a;\n    } else {\n      a = this.getA();\n      b = this.getB();\n      startA = this.a;\n      startB = this.b;\n    }\n    \n    var d = math.distanceAB(a, b);\n  \n    var _vx = - (b.y - a.y);\n    var _vy = b.x - a.x;\n  \n    //normalize\n    var _vxn = _vx / d;\n    var _vyn = _vy / d;\n  \n    _vx = _vxn * off;\n    _vy = _vyn * off;\n  \n    ctx.beginPath();\n  \n    var _ax = a.x + _vx;\n    var _ay = a.y + _vy;\n    var _bx = b.x + _vx;\n    var _by = b.y + _vy;\n  \n    ctx.moveTo(_ax, _ay);\n    ctx.lineTo(_bx, _by);\n  \n  \n    function drawRef(start, x, y) {\n      var vec = new Vector(x - start.x, y - start.y);\n      vec._normalize();\n      vec._multiply(7 * viewer.dimScale);\n      \n      ctx.moveTo(start.x, start.y );\n      ctx.lineTo(x, y);\n      ctx.lineTo(x + vec.x, y + vec.y);\n    }\n  \n    drawRef(startA, _ax, _ay);\n    drawRef(startB, _bx, _by);\n  \n    ctx.closePath();\n    ctx.stroke();\n  \n    function drawArrow(x, y) {\n      var s1 = 50;\n      var s2 = 20;\n      ctx.lineCap = 'round';\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.lineTo(x - s1, y - s2);\n      ctx.closePath();\n      ctx.stroke();\n    }\n  \n  //  drawArrow(_ax, _ay);\n  //  drawArrow(_bx, _by);\n  \n    ctx.font= (12 * viewer.dimScale) + \"px Arial\";\n    var txt = d.toFixed(2);\n    var h = d / 2 - ctx.measureText(txt).width / 2;\n  \n    if (h > 0) {\n      var tx = (_ax + _vxn * textOff) - (- _vyn) * h;\n      var ty = (_ay + _vyn * textOff) - (  _vxn) * h;\n      ctx.save();\n      ctx.translate(tx, ty);\n      ctx.rotate(\t- Math.atan2(_vxn, _vyn));\n      ctx.scale(1, -1);\n      ctx.fillText(txt, 0, 0);\n      ctx.restore();\n    }\n  }\n  \n  normalDistance(aim) {\n    return -1;\n  }\n}\n\nexport class Dimension extends LinearDimension {\n  constructor(a, b) {\n    super(a, b);\n  }\n}\nDimension.prototype._class = 'TCAD.TWO.Dimension';\n\n\nexport class HDimension extends LinearDimension {\n  constructor(a, b) {\n    super(a, b);\n  }\n\n  getA() {\n    return this.a;\n  }\n  \n  getB() {\n    return {x: this.b.x, y: this.a.y};\n  }\n}\nHDimension.prototype._class = 'TCAD.TWO.HDimension';\n\nexport class VDimension extends LinearDimension {\n  \n  constructor(a, b) {\n    super(a, b);\n  }\n\n  getA() {\n    return this.a;\n  }\n\n  getB() {\n    return {x: this.a.x, y: this.b.y};\n  }\n}\nVDimension.prototype._class = 'TCAD.TWO.VDimension';\n\n\nexport class DiameterDimension extends SketchObject {\n  \n  constructor(obj) {\n    super();\n    this.obj = obj;\n    this.angle = Math.PI / 4;\n  }\n     \n  collectParams(params) {\n  }\n  \n  getReferencePoint() {\n  }\n  \n  translateImpl(dx, dy) {\n  }\n  \n  drawImpl(ctx, scale, viewer) {\n    if (this.obj == null) return;\n    if (this.obj._class === 'TCAD.TWO.Circle') {\n      this.drawForCircle(ctx, scale, viewer);  \n    } else if (this.obj._class === 'TCAD.TWO.Arc') { \n      this.drawForArc(ctx, scale, viewer);\n    }\n  }\n  \n  drawForCircle(ctx, scale, viewer) {\n    var c = new Vector().setV(this.obj.c);\n    var r = this.obj.r.get();\n    var angled = new Vector(r * Math.cos(this.angle), r * Math.sin(this.angle), 0);\n    var a = c.minus(angled);\n    var b = c.plus(angled);\n    var textOff = getTextOff(viewer.dimScale);\n  \n    var d = 2 * r;\n  \n    ctx.beginPath();\n    ctx.moveTo(a.x, a.y);\n    ctx.lineTo(b.x, b.y);\n    ctx.closePath();\n    ctx.stroke();\n  \n    var fontSize = 12 * viewer.dimScale;\n    ctx.font = (fontSize) + \"px Arial\";\n    var txt = String.fromCharCode(216) + ' ' + d.toFixed(2);\n    var textWidth = ctx.measureText(txt).width;\n    var h = d / 2 - textWidth / 2; \n    \n    var _vx = - (b.y - a.y);\n    var _vy = b.x - a.x;\n  \n    //normalize\n    var _vxn = _vx / d;\n    var _vyn = _vy / d;\n  \n    function drawText(tx, ty) {\n      ctx.save();\n      ctx.translate(tx, ty);\n      ctx.rotate(-Math.atan2(_vxn, _vyn));\n      ctx.scale(1, -1);\n      ctx.fillText(txt, 0, 0);\n      ctx.restore();\n    }\n    \n    var tx, ty; \n    if (h - fontSize * .3 > 0) { // take into account font size to not have circle overlap symbols\n      tx = (a.x + _vxn * textOff) - (-_vyn) * h;\n      ty = (a.y + _vyn * textOff) - (  _vxn) * h;\n      drawText(tx, ty);\n    } else {\n      var off = 2 * viewer.dimScale;\n      angled._normalize();\n      var extraLine = angled.multiply(textWidth + off * 2);\n      ctx.beginPath();\n      ctx.moveTo(b.x, b.y);\n      ctx.lineTo(b.x + extraLine.x, b.y + extraLine.y);\n      ctx.closePath();\n      ctx.stroke();\n      angled._multiply(off);\n      \n      tx = (b.x + _vxn * textOff) + angled.x;\n      ty = (b.y + _vyn * textOff) + angled.y;\n      drawText(tx, ty);\n    }\n  }\n  \n  drawForArc(ctx, scale, viewer) {\n  \n    var r = this.obj.distanceA();\n  \n    var hxn = Math.cos(this.angle);\n    var hyn = Math.sin(this.angle);\n  \n    var vxn = - hyn;\n    var vyn = hxn;\n  \n    //fix angle if needed\n    if (!this.obj.isPointInsideSector(this.obj.c.x + hxn, this.obj.c.y + hyn)) {\n      var cosA = hxn * (this.obj.a.x - this.obj.c.x) + hyn * (this.obj.a.y - this.obj.c.y);\n      var cosB = hxn * (this.obj.b.x - this.obj.c.x) + hyn * (this.obj.b.y - this.obj.c.y);\n      if (cosA - hxn > cosB - hxn) {\n        this.angle = this.obj.getStartAngle();\n      } else {\n        this.angle = this.obj.getEndAngle();\n      }\n    }\n  \n    var vertOff = getTextOff(viewer.dimScale);\n    var horOff = 5 * viewer.dimScale;\n  \n    var fontSize = 12 * viewer.dimScale;\n    ctx.font = (fontSize) + \"px Arial\";\n    var txt = 'R ' + r.toFixed(2);\n    var textWidth = ctx.measureText(txt).width;\n  \n    var startX = this.obj.c.x + hxn * r;\n    var startY = this.obj.c.y + hyn * r;\n    var lineLength = textWidth + horOff * 2;\n  \n    ctx.beginPath();\n    ctx.moveTo(startX, startY);\n    ctx.lineTo(startX + hxn * lineLength, startY + hyn * lineLength);\n    ctx.closePath();\n    ctx.stroke();\n  \n    var tx = startX + vxn * vertOff + hxn * horOff;\n    var ty = startY + vyn * vertOff + hyn * horOff;\n    ctx.save();\n    ctx.translate(tx, ty);\n    ctx.rotate(-Math.atan2(vxn, vyn));\n    ctx.scale(1, -1);\n    ctx.fillText(txt, 0, 0);\n    ctx.restore();\n  }\n  \n  normalDistance(aim) {\n    return -1;\n  }\n}\nDiameterDimension.prototype._class = 'TCAD.TWO.DiameterDimension';\n\n\nfunction getTextOff(scale) {\n  return 3 * scale;\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/shapes/dim.js\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 125\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 126\n ** module chunks = 0 1\n **/","import App2D from './sketcher/sketcher-app';\nimport {Styles} from './sketcher/styles'\nimport {Layer} from './sketcher/viewer2d';\nimport * as ui from './ui/ui.js';\nimport * as toolkit from './ui/toolkit';\nimport {askNumber} from './utils/utils';\nimport {Constraints} from './sketcher/parametric'\nimport './utils/jqueryfy'\nimport '../css/app.less'\n\nfunction initializeSketcherApplication() {\n  var app = new App2D();\n  window._TCAD_APP = app;\n  var sketchId = app.getSketchId();\n  if (sketchId == App2D.STORAGE_PREFIX + '__sample2D__') {\n    var sample = '{\"layers\":[{\"name\":\"_dim\",\"style\":{\"lineWidth\":1,\"strokeStyle\":\"#bcffc1\",\"fillStyle\":\"#00FF00\"},\"data\":[{\"id\":0,\"_class\":\"TCAD.TWO.DiameterDimension\",\"obj\":90},{\"id\":1,\"_class\":\"TCAD.TWO.DiameterDimension\",\"obj\":95},{\"id\":2,\"_class\":\"TCAD.TWO.DiameterDimension\",\"obj\":42},{\"id\":3,\"_class\":\"TCAD.TWO.Dimension\",\"a\":5,\"b\":8,\"flip\":false},{\"id\":4,\"_class\":\"TCAD.TWO.DiameterDimension\",\"obj\":105}]},{\"name\":\"sketch\",\"style\":{\"lineWidth\":2,\"strokeStyle\":\"#ffffff\",\"fillStyle\":\"#000000\"},\"data\":[{\"id\":11,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[5,[6,110.1295615870824],[7,313.66509156975803]],[8,[9,419.44198895058975],[10,516.7065215258621]]]},{\"id\":18,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[12,[13,489.1218947877601],[14,477.98601743930897]],[15,[16,481.90945628911174],[17,182.9391540301952]]]},{\"id\":25,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[19,[20,427.6872468325118],[21,163.96220645927505]],[22,[23,349.9023145352797],[24,256.7344291384989]]]},{\"id\":32,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[26,[27,306.81261277555075],[28,273.1404656521002]],[29,[30,135.09050734792822],[31,247.98348666778958]]]},{\"id\":42,\"_class\":\"TCAD.TWO.Arc\",\"points\":[[33,[34,489.1218947877601],[35,477.98601743930897]],[36,[37,419.44198895058975],[38,516.7065215258621]],[39,[40,444.1353623657045],[41,479.08688157090376]]]},{\"id\":53,\"_class\":\"TCAD.TWO.Arc\",\"points\":[[44,[45,427.6872468325118],[46,163.96220645927505]],[47,[48,481.90945628911174],[49,182.9391540301952]],[50,[51,451.2148840882273],[52,183.68960424767275]]]},{\"id\":64,\"_class\":\"TCAD.TWO.Arc\",\"points\":[[55,[56,349.9023145352797],[57,256.7344291384989]],[58,[59,306.81261277555075],[60,273.1404656521002]],[61,[62,313.6665992835383],[63,226.35256652594512]]]},{\"id\":75,\"_class\":\"TCAD.TWO.Arc\",\"points\":[[66,[67,110.1295615870824],[68,313.66509156975803]],[69,[70,135.09050734792822],[71,247.98348666778958]],[72,[73,129.8749213918784],[74,283.58516027516237]]]},{\"id\":80,\"_class\":\"TCAD.TWO.Circle\",\"c\":[77,[78,444.1353623657045],[79,479.08688157090376]],\"r\":17},{\"id\":85,\"_class\":\"TCAD.TWO.Circle\",\"c\":[82,[83,451.2148840882273],[84,183.68960424767275]],\"r\":17},{\"id\":90,\"_class\":\"TCAD.TWO.Circle\",\"c\":[87,[88,129.8749213918784],[89,283.58516027516237]],\"r\":17},{\"id\":95,\"_class\":\"TCAD.TWO.Circle\",\"c\":[92,[93,364.7627927122075],[94,358.27520724354514]],\"r\":50},{\"id\":100,\"_class\":\"TCAD.TWO.Circle\",\"c\":[97,[98,450.6425914465028],[99,356.1758703461729]],\"r\":13},{\"id\":105,\"_class\":\"TCAD.TWO.Circle\",\"c\":[102,[103,281.1241663120215],[104,360.3197585470608]],\"r\":13}]},{\"name\":\"_construction_\",\"style\":{\"lineWidth\":1,\"strokeStyle\":\"#aaaaaa\",\"fillStyle\":\"#000000\"},\"data\":[{\"id\":113,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[107,[108,366.96497096679207],[109,448.36204633886825]],[110,[111,362.6842565514955],[112,273.2463262825022]]]},{\"id\":120,\"_class\":\"TCAD.TWO.Segment\",\"points\":[[114,[115,254.60331148100178],[116,360.9680624545806]],[117,[118,474.9222739434132],[119,355.5823520325097]]]}]}],\"constraints\":[[\"Tangent\",[42,18]],[\"Tangent\",[42,11]],[\"coi\",[33,12]],[\"coi\",[36,8]],[\"Tangent\",[53,25]],[\"Tangent\",[53,18]],[\"coi\",[44,19]],[\"coi\",[47,15]],[\"Tangent\",[64,25]],[\"Tangent\",[64,32]],[\"coi\",[55,22]],[\"coi\",[58,26]],[\"Tangent\",[75,11]],[\"Tangent\",[75,32]],[\"coi\",[66,5]],[\"coi\",[69,29]],[\"coi\",[77,39]],[\"coi\",[82,50]],[\"coi\",[87,72]],[\"RR\",[80,85]],[\"RR\",[85,90]],[\"parallel\",[113,18]],[\"perpendicular\",[120,113]],[\"Symmetry\",[92,120]],[\"PointOnLine\",[92,113]],[\"PointOnLine\",[102,120]],[\"PointOnLine\",[97,120]],[\"RR\",[105,100]]]}';\n    localStorage.setItem(sketchId, sample);\n  }\n  app.loadFromLocalStorage();\n  app.fit();\n\n  function addLayer(name, style) {\n    if (app.viewer.findLayerByName(name) === null) {\n      app.viewer.layers.push(new Layer(name, style));\n    }\n  }\n\n  addLayer(\"sketch\", Styles.DEFAULT);\n  addLayer(\"_construction_\", Styles.CONSTRUCTION);\n\n  var actionsWin = new ui.Window($('#actions'), app.winManager);\n\n  ui.bindOpening( $('#showActions'), actionsWin );\n  var addAction = ui.createActionsWinBuilder(actionsWin);\n\n  for (var p = 0; p < app._actionsOrder.length; ++p) {\n    var act = app.actions[app._actionsOrder[p]];\n    addAction(act.desc, act.action);\n    $('.act-' + act.id).click(act.action).attr('title', act.desc);\n  }\n\n  function infoStr(c) {\n    if (c.SettableFields === undefined) return \"\";\n    var info = Object.keys(c.SettableFields).map(function(f) {\n      var val = c[f];\n      var num = Number(val);\n      if (isNaN(num)) {\n        num = Number(app.viewer.parametricManager.constantResolver(val));\n        return val + \"(\" + (isNaN(num) ? \"?\" : num.toFixed(2)) + \")\" ;\n      }\n      return num.toFixed(2);\n    }).join(\", \");\n    if (info.length != 0) {\n      info = \" <span style='font-size: 8px;'>[\" + info + \"]</span>\";\n    }\n    return info;\n  }\n\n  var pm = app.viewer.parametricManager;\n  var constrList = new ui.List('constrs', {\n    items : function() {\n      var theItems = [];\n      for (var j = 0; j < pm.subSystems.length; j++) {\n        var sub = pm.subSystems[j];\n        for (var i = 0; i < sub.constraints.length; ++i) {\n          var constr = sub.constraints[i];\n          if (constr.aux !== true && app.constraintFilter[constr.NAME] != true) {\n            theItems.push({name : constr.UI_NAME + infoStr(constr), constr : constr});\n          }\n        }\n      }\n      theItems.sort(function (a, b) {\n        if (a.constr.NAME == 'coi') {\n          return b.constr.NAME == 'coi' ? 0 : 1;\n        }\n        return a.constr.NAME.localeCompare(b.constr.NAME)\n      });\n      return theItems;\n    },\n\n    remove : function(item) {\n      pm.remove(item.constr);\n    },\n\n    mouseleave : function(item) {\n      app.viewer.deselectAll();\n      app.viewer.refresh();\n    },\n\n    hover : function(item) {\n      app.viewer.select(item.constr.getObjects(), true);\n      app.viewer.refresh();\n    },\n\n    click : function(item) {\n      var c = item.constr;\n      if (c.SettableFields === undefined) return;\n      for (var f in c.SettableFields) {\n        var value = c[f];\n        var intro = c.SettableFields[f];\n\n\n        value = askNumber(intro, typeof(value) == \"number\" ? value.toFixed(4) : value, prompt, pm.constantResolver);\n        if (value != null) {\n          c[f] = value;\n        }\n      }\n      app.viewer.parametricManager.refresh();\n    }\n  });\n  var constraintsView = app.dock.views['Constraints'];\n\n  function configureConstraintsFilter() {\n    var constraintsCaption = constraintsView.node.find('.tool-caption');\n    var constraintsFilterBtn = ui.faBtn(\"filter\");\n    constraintsFilterBtn.css({'float': 'right', 'margin-right': '10px', cursor: 'pointer'});\n    constraintsCaption.append(constraintsFilterBtn);\n    var constraintsFilterWin = new ui.Window($('#constrFilter'), app.winManager);\n    ui.bindOpening(constraintsFilterBtn, constraintsFilterWin);\n    var content = constraintsFilterWin.root.find('.content');\n\n    var constrTypes = [], constrType;\n    for (var cname in Constraints) {\n      c = Constraints[cname];\n      if (c.prototype !== undefined && c.prototype.UI_NAME !== undefined && !c.prototype.aux) {\n        constrTypes.push(c);\n      }\n    }\n    constrTypes.sort(function (a, b) {\n      if (a.prototype.NAME == 'coi') {\n        return b.prototype.NAME == 'coi' ? 0 : -1;\n      }\n      return a.prototype.UI_NAME.localeCompare(b.prototype.UI_NAME)\n    });\n    for (var i = 0; i < constrTypes.length; i++) {\n      var c = constrTypes[i];\n      if (c.prototype !== undefined && c.prototype.UI_NAME !== undefined && !c.prototype.aux) {\n        var checkbox = $('<input>', {type : 'checkbox', checked : 'checked', value : c.prototype.NAME});\n        content.append(\n          $('<label>', { css : {display : 'block', 'white-space' : 'nowrap'}})\n            .append(checkbox)\n            .append(c.prototype.UI_NAME)\n        );\n        checkbox.change(function(){\n          var checkbox = $(this);\n          app.constraintFilter[checkbox.val()] = checkbox.is(':checked') != true;\n          constrList.refresh();\n        });\n      }\n    }\n  }\n  configureConstraintsFilter();\n  constraintsView.node.append(constrList.ul);\n  app.viewer.parametricManager.listeners.push(function() {constrList.refresh()});\n  constrList.refresh();\n\n  var layerSelection = new toolkit.Combo('layerSelection', 'Layer');\n  app.dock.views['Properties'].node.append(layerSelection.root);\n\n  var updateLayersList = function () {\n    var options = '';\n    for (var i = 0; i < app.viewer.layers.length; i++) {\n      var layer = app.viewer.layers[i];\n      options += \"<option value='\"+layer.name+\"'>\"+layer.name+\"</option>\"\n    }\n    layerSelection.select.html(options).val(app.viewer.activeLayer.name);\n  };\n  updateLayersList();\n  app.viewer.bus.subscribe(\"activeLayer\", function() {\n    updateLayersList();\n  });\n  layerSelection.select\n    .mousedown(updateLayersList)\n    .change(function () {\n      var layer = app.viewer.findLayerByName(layerSelection.select.val());\n      if (layer != null) {\n        app.viewer.activeLayer = layer;\n      }\n    });\n\n  var dimScale = new toolkit.Number(\"Dim Scale\", 1, 0.1, 1);\n  dimScale.min = 0.1;\n  app.dock.views['Properties'].node.append(dimScale.root);\n  dimScale.input.on('t-change', function() {\n    app.viewer.dimScale = $(this).val();\n  });\n  app.viewer.bus.subscribe('dimScale', function(value) {\n    dimScale.input.val(value);\n  });\n  var constantTextArea = $('<textarea />', {placeholder : 'for example: A = 50', css: {\n    width: '100%',\n    resize: 'vertical',\n    background: 'inherit',\n    border : 'none',\n    color: '#C4E1A4'\n  } });\n  app.viewer.params.subscribe('constantDefinition', 'constantTextArea', function(value) {\n    constantTextArea.val(value);\n  })();\n  constantTextArea.bind(\"change\", function() {\n    app.viewer.params.set('constantDefinition', $(this).val(), 'constantTextArea');\n  });\n\n  app.dock.views['Dimensions'].node.append(constantTextArea);\n}\n\n$( () => initializeSketcherApplication() );\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher.js\n **/","import {Viewer} from './viewer2d.js'\nimport * as ui from '../ui/ui'\nimport {Terminal} from '../ui/terminal'\nimport {IO, BBox} from './io'\nimport {AddFreeDimTool, AddHorizontalDimTool, AddVerticalDimTool, AddCircleDimTool} from './tools/dim'\nimport {AddPointTool} from './tools/point'\nimport {AddSegmentTool} from './tools/segment'\nimport {AddArcTool} from './tools/arc'\nimport {EditCircleTool} from './tools/circle'\nimport {FilletTool} from './tools/fillet'\nimport {EllipseTool} from './tools/ellipse'\nimport {BezierCurveTool} from './tools/bezier-curve'\nimport {RectangleTool} from './tools/rectangle'\nimport {ReferencePointTool} from './tools/origin'\nimport {InputManager} from './input-manager'\n\nfunction App2D() {\n  var app = this;\n\n  this.viewer = new Viewer(document.getElementById('viewer'), IO);\n  this.winManager = new ui.WinManager();\n  this.inputManager = new InputManager(this); \n  \n  this.initSketchManager();\n  this._exportWin = new ui.Window($('#exportManager'), app.winManager);\n\n  $('#exportManager li').click(function() {ui.closeWin(app._exportWin);});\n\n  this.constraintFilter = {};\n  this.actions = {};\n  this.commands = {};\n\n  //For debug view\n  this._actionsOrder = [];\n\n  var dockEl = $('#dock');\n  var buttonGroup = $('#status .button-group');\n  this.dock = new ui.Dock(dockEl, buttonGroup, App2D.views);\n  this.dock.show('Constraints');\n\n  var consoleBtn = ui.dockBtn('Commands', 'list');\n  buttonGroup.append(consoleBtn);\n  this.commandsWin = new ui.Window($('#commands'), this.winManager);\n  this.commandsWin.tileUpRelative = $('#viewer');\n  consoleBtn.click((e) => {\n    this.actions['terminal'].action(e)\n  });\n  $(document).on('mousemove', '#viewer', (e) => {\n    let coord = this.viewer.screenToModel(e);\n    $('.coordinates-info').text(this.viewer.roundToPrecision(coord.x) + \" : \" + this.viewer.roundToPrecision(coord.y));\n  });\n  this.terminalHandler = undefined;\n  this.terminal = new Terminal(this.commandsWin, (command) => this.handleTerminalInput(command), () => this.getAllCommandList());\n  this.bindToolsToTerminal();\n  \n  \n  this.winManager.registerResize(dockEl, ui.DIRECTIONS.EAST, function() {$('body').trigger('layout'); });\n  $('body').on('layout', this.viewer.onWindowResize);\n  \n  this.registerAction = function(id, desc, action, command) {\n    app.actions[id] = {id, desc, action};\n    if (command) {\n      app.commands[command] = id;\n    }\n    app._actionsOrder.push(id);\n  };\n  \n  function checkForTerminalVisibility() {\n    const terminalVisible = app.commandsWin.root.is(':visible');\n    if (terminalVisible) {\n      app.terminal.scrollToTheEnd();\n    }\n    app.viewer.referencePoint.visible = terminalVisible;\n  }\n  checkForTerminalVisibility();\n  \n  this.registerAction('terminal', \"Open/Close Terminal Window\", function () {\n    app.commandsWin.toggle();\n    checkForTerminalVisibility();\n    app.viewer.refresh();\n  });\n\n  this.registerAction('open', \"Open Sketch\", function (e) {\n    app._sketchesList.refresh();\n    ui.openWin(app._sketchesWin, e);\n  });\n\n  this.registerAction('clone', \"Clone Sketch\", function () {\n    app.cloneSketch();\n  });\n\n  this.registerAction('export', \"Export\", function (e) {\n    ui.openWin(app._exportWin, e);\n  });\n\n  this.registerAction('exportSVG', \"Export To SVG\", function () {\n    IO.exportTextData(app.viewer.io.svgExport(), app.getSketchId() + \".svg\");\n  });\n\n  this.registerAction('exportDXF', \"Export To DXF\", function () {\n    IO.exportTextData(app.viewer.io.dxfExport(), app.getSketchId() + \".dxf\");\n  });\n  \n  this.registerAction('undo', \"Undo\", function () {\n    app.viewer.historyManager.undo();\n  });\n\n  this.registerAction('redo', \"Redo\", function () {\n    app.viewer.historyManager.redo();\n  });\n\n  this.registerAction('checkpoint', \"Checkpoint\", function () {\n    app.viewer.historyManager.checkpoint();\n  });\n\n  this.registerAction('referencePoint', \"Set Reference Point\", function () {\n    app.viewer.toolManager.takeControl(new ReferencePointTool(app.viewer));\n  }, \"origin\");\n\n  this.registerAction('addPoint', \"Add Point\", function () {\n    app.viewer.toolManager.takeControl(new AddPointTool(app.viewer));\n  }, \"point\");\n  \n  this.registerAction('addSegment', \"Add Segment\", function () {\n    app.viewer.toolManager.takeControl(new AddSegmentTool(app.viewer, false));\n  }, 'line');\n\n  this.registerAction('addMultiSegment', \"Add Multi Segment\", function () {\n    app.viewer.toolManager.takeControl(new AddSegmentTool(app.viewer, true));\n  }, 'mline');\n\n  this.registerAction('addArc', \"Add Arc\", function () {\n    app.viewer.toolManager.takeControl(new AddArcTool(app.viewer));\n  }, 'arc');\n\n  this.registerAction('addCircle', \"Add Circle\", function () {\n    app.viewer.toolManager.takeControl(new EditCircleTool(app.viewer));\n  }, 'circle');\n\n  this.registerAction('addEllipse', \"Add Ellipse\", function () {\n    app.viewer.toolManager.takeControl(new EllipseTool(app.viewer, false));\n  });\n\n  this.registerAction('addEllipticalArc', \"Add Elliptical Arc\", function () {\n    app.viewer.toolManager.takeControl(new EllipseTool(app.viewer, true));\n  });\n\n  this.registerAction('addBezierCurve', \"Add Bezier Curve\", function () {\n    app.viewer.toolManager.takeControl(new BezierCurveTool(app.viewer));\n  });\n  \n  this.registerAction('addRectangle', \"Add Rectangle\", function () {\n    app.viewer.toolManager.takeControl(new RectangleTool(app.viewer));\n  }, 'rect');\n\n  this.registerAction('pan', \"Pan\", function () {\n    app.viewer.toolManager.releaseControl();\n  });\n  \n  this.registerAction('addFillet', \"Add Fillet\", function () {\n    app.viewer.toolManager.takeControl(new FilletTool(app.viewer));\n  });\n\n  this.registerAction('addDim', \"Add Dimension\", function () {\n    app.viewer.toolManager.takeControl(new AddFreeDimTool(app.viewer, app.viewer.dimLayer));\n  });\n  \n  this.registerAction('addHDim', \"Add Horizontal Dimension\", function () {\n    app.viewer.toolManager.takeControl(new AddHorizontalDimTool(app.viewer, app.viewer.dimLayer));\n  });\n  \n  this.registerAction('addVDim', \"Add Vertical Dimension\", function () {\n    app.viewer.toolManager.takeControl(new AddVerticalDimTool(app.viewer, app.viewer.dimLayer));\n  });\n\n  this.registerAction('addCircleDim', \"Add Circle Dimension\", function () {\n    app.viewer.toolManager.takeControl(new AddCircleDimTool(app.viewer, app.viewer.dimLayer));\n  });\n\n  this.registerAction('save', \"Save\", function () {\n      var sketchData = app.viewer.io.serializeSketch();\n      var sketchId = app.getSketchId();\n      localStorage.setItem(app.getSketchId(), sketchData);\n      app.viewer.historyManager.checkpoint();\n  });\n\n  this.registerAction('coincident', \"Coincident\", function () {\n    app.viewer.parametricManager.coincident(app.viewer.selected);\n  });\n\n  this.registerAction('verticalConstraint', \"Vertical Constraint\", function () {\n    app.viewer.parametricManager.vertical(app.viewer.selected);\n  });\n\n  this.registerAction('horizontalConstraint', \"Horizontal Constraint\", function () {\n    app.viewer.parametricManager.horizontal(app.viewer.selected);\n  });\n\n  this.registerAction('parallelConstraint', \"Parallel Constraint\", function () {\n    app.viewer.parametricManager.parallel(app.viewer.selected);\n  });\n\n  this.registerAction('perpendicularConstraint', \"Perpendicular Constraint\", function () {\n    app.viewer.parametricManager.perpendicular(app.viewer.selected);\n  });\n\n  this.registerAction('P2LDistanceConstraint', \"Distance Between Point and Line\", function () {\n    app.viewer.parametricManager.p2lDistance(app.viewer.selected, prompt);\n  });\n\n  this.registerAction('P2PDistanceConstraint', \"Distance Between two Points\", function () {\n    app.viewer.parametricManager.p2pDistance(app.viewer.selected, prompt);\n  });\n\n  this.registerAction('RadiusConstraint', \"Radius Constraint\", function () {\n    app.viewer.parametricManager.radius(app.viewer.selected, prompt);\n  });\n\n  this.registerAction('EntityEqualityConstraint', \"Radius Equals Constraint\", function () {\n    app.viewer.parametricManager.entityEquality(app.viewer.selected);\n  });\n\n  this.registerAction('tangentConstraint', \"Tangent Constraint\", function () {\n    app.viewer.parametricManager.tangent(app.viewer.selected);\n  });\n\n  this.registerAction('lockConstraint', \"Lock Constraint\", function () {\n    app.viewer.parametricManager.lock(app.viewer.selected);\n  });\n\n  this.registerAction('pointOnLine', \"Point On Line\", function () {\n    app.viewer.parametricManager.pointOnLine(app.viewer.selected);\n  });\n\n  this.registerAction('pointOnArc', \"Point On Arc / Ellipse\", function () {\n    app.viewer.parametricManager.pointOnArc(app.viewer.selected);\n  });\n  \n  this.registerAction('pointInMiddle', \"Point In the Middle\", function () {\n    app.viewer.parametricManager.pointInMiddle(app.viewer.selected);\n  });\n\n  this.registerAction('llAngle', \"Angle Between 2 Lines\", function () {\n    app.viewer.parametricManager.llAngle(app.viewer.selected, prompt);\n  });\n  \n  this.registerAction('symmetry', \"Symmetry\", function () {\n    app.viewer.parametricManager.symmetry(app.viewer.selected, prompt);\n  });\n  this.registerAction('lockConvex', \"Lock Convexity\", function () {\n    app.viewer.parametricManager.lockConvex(app.viewer.selected, alert);\n  });\n  \n  this.registerAction('analyzeConstraint', \"Analyze Constraint\", function () {\n    app.viewer.parametricManager.analyze(alert);\n  });\n\n  this.registerAction('solve', \"Solve System\", function () {\n    app.viewer.parametricManager.solve();\n    app.viewer.refresh();\n  });\n\n  this.registerAction('CLEAN UP', \"Clean All Draw\", function () {\n    app.cleanUpData();\n    app.viewer.refresh();\n  });\n\n  this.registerAction('fit', \"Fit Sketch On Screen\", function () {\n    app.fit();\n    app.viewer.refresh();\n  });\n}\n\nApp2D.views = [\n  {\n    name: 'Dimensions',\n    icon: 'arrows-v'\n  },\n  {\n    name: 'Properties',\n    icon: 'sliders'\n  },\n  {\n    name: 'Constraints',\n    icon: 'cogs'\n  }\n];\n\nApp2D.prototype.fit = function() {\n\n  var bbox = new BBox();\n  \n  for (var l = 0; l < this.viewer.layers.length; ++l) {\n    var layer = this.viewer.layers[l];\n    for (var i = 0; i < layer.objects.length; ++i) {\n      var obj = layer.objects[i];\n      bbox.check(obj);\n    }\n  }\n  if (!bbox.isValid()) {\n    return;\n  }\n  var bounds = bbox.bbox;\n  this.viewer.showBounds(bounds[0], bounds[1], bounds[2], bounds[3]);\n  bbox.inc(20 / this.viewer.scale);\n  this.viewer.showBounds(bounds[0], bounds[1], bounds[2], bounds[3]);\n};\n\nApp2D.prototype.cloneSketch = function() {\n  var name = prompt(\"Name for sketch clone\");\n  if (name != null) {\n    if (this.isSketchExists(name)) {\n      alert(\"Sorry, a sketch with the name '\" + name + \"' already exists. Won't override it.\");\n      return;\n    }\n    localStorage.setItem(App2D.STORAGE_PREFIX + name, this.viewer.io.serializeSketch());\n    this.openSketch(name);\n  }\n};\n\nApp2D.prototype.isSketchExists = function(name) {\n  return localStorage.getItem(App2D.STORAGE_PREFIX + name) != null;\n};\n\nApp2D.prototype.openSketch = function(name) {\n  var uri = window.location.href.split(\"#\")[0];\n  if (name !== \"untitled\") {\n    uri += \"#\" + name;\n  }\n  var win = window.open(uri, '_blank');\n  win.focus();\n};\n\nApp2D.prototype.newSketch = function() {\n  var name = prompt(\"Name for sketch\");\n  if (name != null) {\n    if (this.isSketchExists(name)) {\n      alert(\"Sorry, a sketch with the name '\" + name + \"' already exists. Won't override it.\");\n      return;\n    }\n    this.openSketch(name);\n  }\n};\n\nApp2D.prototype.initSketchManager = function(data, ext) {\n  this._sketchesWin = new ui.Window($('#sketchManager'), this.winManager);\n  var app = this;\n  var sketchesList = new ui.List('sketchList', {\n    items : function() {\n      var theItems = [];\n      for (var name in localStorage) {\n        if (!localStorage.hasOwnProperty(name)) {\n          continue;\n        }\n        if (name.indexOf(App2D.STORAGE_PREFIX) === 0) {\n          name = name.substring(App2D.STORAGE_PREFIX.length);\n        }\n        theItems.push({name : name});\n      }\n      return theItems;\n    },\n\n    remove : function(item) {\n      if (confirm(\"Selected sketch will be REMOVED! Are you sure?\")) {\n        localStorage.removeItem(App2D.STORAGE_PREFIX + item.name);\n        sketchesList.refresh();\n      }\n    },\n\n    mouseleave : function(item) {},\n    hover : function(item) {},\n\n    click : function(item) {\n      app.openSketch(item.name);\n    }\n  });\n  $('#sketchManager').find('.content').append(sketchesList.ul);\n  sketchesList.refresh();\n  this._sketchesList = sketchesList;\n};\n\nApp2D.prototype.loadFromLocalStorage = function() {\n  var sketchId = this.getSketchId();\n  var sketchData = localStorage.getItem(sketchId);\n  if (sketchData != null) {\n    this.viewer.historyManager.init(sketchData);\n    this.viewer.io.loadSketch(sketchData);\n  }\n  this.viewer.repaint();\n};\n\nApp2D.prototype.getSketchId = function() {\n  var id = window.location.hash.substring(1);\n  if (!id) {\n    id = \"untitled\";\n  }\n  return App2D.STORAGE_PREFIX + id;\n};\n\nApp2D.prototype.bindToolsToTerminal = function() {\n  const toolCommandProcessor = (command) => this.viewer.toolManager.tool.processCommand(command);\n  this.viewer.bus.subscribe('tool-change', () => {\n    var tool = this.viewer.toolManager.tool;\n    this.terminalHandler = tool.processCommand ? toolCommandProcessor : undefined;\n    $('.tool-info').text('tool: ' + tool.name);\n    $('.tool-hint').text('');\n  })();\n  this.viewer.bus.subscribe('tool-message', (message) => {\n    this.terminal.print(message);\n  });\n  this.viewer.bus.subscribe('tool-hint', (message) => {\n    this.terminal.print(message);\n    $('.tool-hint').text(message);\n  });\n};\n\nApp2D.STATIC_COMMANDS = {\n  \"time\" : () => new Date(),\n  \"help\" : (app) => app.getAllCommandList().join(\", \")\n};\n\nApp2D.prototype.getAllCommandList = function() {\n  const commands = Object.keys(this.commands);\n  commands.push.apply(commands, Object.keys(App2D.STATIC_COMMANDS));\n  commands.sort();\n  return commands;\n};\n\nApp2D.prototype.handleTerminalInput = function(commandStr) {\n  commandStr = commandStr.trim();\n  if (this.terminalHandler) {\n    return this.terminalHandler(commandStr);\n  } else {\n    let cmd = App2D.STATIC_COMMANDS[commandStr];\n    if (cmd) {\n      return cmd(this);\n    }\n    let actionId = this.commands[commandStr];\n    if (actionId) {\n      this.actions[actionId].action();\n    } else {\n      try {\n        return eval(commandStr);\n      } catch(e) {\n      }\n    }\n  }\n};\n\nApp2D.STORAGE_PREFIX = \"TCAD.projects.\";\n\nexport default App2D;\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/sketcher-app.js\n **/","\n/** @constructor */\nfunction Window(el, winManager) {\n  this.root = el;\n  this.neverOpened = !this.root.is(':visible');\n  this.tileUpRelative = $('body');\n  this.onShowCallback = null;\n  var root = this.root;\n  var caption = this.root.find('.tool-caption');\n  caption.each(function() {\n    var closeBtn = '<span class=\"btn rm\" style=\"float: right;\"><i class=\"fa fa-remove\"></i></span>';\n    $(this).append(closeBtn);\n  }); \n  this.root.find('.tool-caption .rm').click(function() {\n    root.hide();\n  });\n  var DIRS = DIRECTIONS;\n  winManager.registerResize(this.root, DIRS.NORTH | DIRS.SOUTH | DIRS.WEST | DIRS.EAST);\n  winManager.registerDrag(this.root, caption);\n}\n\nWindow.prototype.toggle = function() {\n  var aboutToShow = !this.root.is(':visible');\n  if (aboutToShow) {\n    this.tileUpPolicy(this.neverOpened, this.tileUpRelative);\n  }\n  this.neverOpened = false ;\n  this.root.toggle();\n  if (aboutToShow && this.onShowCallback != null) {\n    this.onShowCallback(this);\n  }\n};\n\nWindow.prototype.tileUpPolicy = function(firstTime, relativeEl) {\n  var span = 20;\n  var relOff = relativeEl.offset();\n  var off = this.root.offset();\n  off = {\n    left: parseInt(this.root.css('left')),\n    top: parseInt(this.root.css('top'))\n  };\n\n  if (firstTime) {\n    off = {\n      left: relOff.left + relativeEl.width() - this.root.width() - span,\n      top: relOff.top + relativeEl.height() - this.root.height() - span\n    };\n    this.root.css({\n      left: off.left + 'px',\n      top: off.top + 'px'\n    });\n  }\n  var needToSet = false;\n  if (off.left < relOff.left || off.left >= relOff.left + relativeEl.width() - span) {\n    off.left = relOff.left + span;\n    needToSet = true;\n  }\n  if (off.top < relOff.top || off.top >= relOff.top + relativeEl.height() - span) {\n    off.top = relOff.top + span;\n    needToSet = true;\n  }\n  if (needToSet) {\n    this.root.css({\n      left: off.left + 'px',\n      top: off.top + 'px'\n    });\n  }\n  //var fixedWidth = null;\n  //var fixedHeight = null;\n  //\n  //if (off.left + this.root.width() > relOff.left + relativeEl.width()) {\n  //  fixedWidth = this.root.width() - span * 2; \n  //}\n  //if (off.top + this.root.height() > relOff.top + relativeEl.height()) {\n  //  fixedHeight = this.root.width() - span * 2;\n  //}\n  //if (fixedWidth != null) {\n  //  console.log(fixedWidth)\n  //  this.root.css({ width : fixedWidth + 'px'});\n  //}\n  //if (fixedHeight != null) {\n  //  this.root.css({ height : fixedHeight + 'px'});\n  //}\n};\n\nfunction WinManager() {\n  this.moveHandler = null;\n  var wm = this;\n  $('body').mousemove(function(e) {\n    if (wm.moveHandler != null) {\n      wm.moveHandler(e);\n      e.preventDefault();\n    }\n  });\n  $('body').mouseup(function(e) {\n    wm.moveHandler = null;\n  });\n}\n\nWinManager.prototype.captureDrag = function(el, e) {\n  var origin = {x : e.pageX, y : e.pageY};\n  var originLocation = el.offset();\n  this.moveHandler = function(e) {\n    var dx = e.pageX - origin.x;\n    var dy = e.pageY - origin.y;\n    el.offset({left : originLocation.left + dx, top : originLocation.top + dy});\n  };\n};\n\nWinManager.prototype.captureResize = function(el, dirMask, e, onResize) {\n  \n  var origin = {x : e.pageX, y : e.pageY};\n  var originSize = {x : el.width(), y : el.height()};\n  var originLocation = el.offset();\n  var north = _maskTest(dirMask, DIRECTIONS.NORTH);\n  var south = _maskTest(dirMask, DIRECTIONS.SOUTH);\n  var west = _maskTest(dirMask, DIRECTIONS.WEST);\n  var east = _maskTest(dirMask, DIRECTIONS.EAST);\n  \n  this.moveHandler = function(e) {\n    var dx = e.pageX - origin.x;\n    var dy = e.pageY - origin.y;\n    if (east) {\n      el.css('width', (originSize.x + dx) + 'px');\n    }\n    var top = originLocation.top;\n    var left = originLocation.left;\n    var setLoc = false;\n    if (west) {\n      el.css('width', (originSize.x - dx) + 'px');\n      left += dx;\n      setLoc = true;\n    }\n    if (south) {\n      el.css('height', (originSize.y + dy) + 'px');\n    }\n    if (north) {\n      el.css('height', (originSize.y - dy) + 'px');\n      top += dy;\n      setLoc = true;\n    }\n    if (setLoc) {\n      el.offset({left : left, top: top});\n    }\n    if (onResize !== undefined) {\n      onResize();\n    }\n  }\n};\n\nvar DIRECTIONS = {\n  NORTH : 0x0001,\n  SOUTH : 0x0010,\n  WEST :  0x0100,\n  EAST :  0x1000,\n};\n\nWinManager.prototype.registerResize = function(el, dirMask, onResize) {\n  var wm = this;\n  var north = _maskTest(dirMask, DIRECTIONS.NORTH);\n  var south = _maskTest(dirMask, DIRECTIONS.SOUTH);\n  var west = _maskTest(dirMask, DIRECTIONS.WEST);\n  var east = _maskTest(dirMask, DIRECTIONS.EAST);\n\n  var borderTop = parseInt(el.css('borderTopWidth'), 10);\n  var borderLeft = parseInt(el.css('borderLeftWidth'), 10);\n  \n  function onNorthEdge(e, el) {\n    var offset = el.offset();\n    return e.pageY < offset.top + borderTop;\n  }\n\n  function onSouthEdge(e, el) {\n    var offset = el.offset();\n    var height = el.height();\n    return e.pageY > offset.top + height + borderTop;\n  }\n\n  function onWestEdge(e, el) {\n    var offset = el.offset();\n    return e.pageX < offset.left + borderLeft;\n  }\n\n  function onEastEdge(e, el) {\n    var offset = el.offset();\n    var width = el.width();\n    return e.pageX > offset.left + width + borderLeft;\n  }\n  \n  \n  el.mousedown(function(e) {\n    var $this = $(this);\n    if (north && east && onNorthEdge(e, $this) && onEastEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.NORTH | DIRECTIONS.EAST, e, onResize);\n    } else if (north && west && onNorthEdge(e, $this) && onWestEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.NORTH | DIRECTIONS.WEST, e, onResize);\n    } else if (south && east && onSouthEdge(e, $this) && onEastEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.SOUTH | DIRECTIONS.EAST, e, onResize);\n    } else if (south && west && onSouthEdge(e, $this) && onWestEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.SOUTH | DIRECTIONS.WEST, e, onResize);\n    } else if (north && onNorthEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.NORTH, e, onResize);\n    } else if (south && onSouthEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.SOUTH, e, onResize);\n    } else if (west && onWestEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.WEST, e, onResize);\n    } else if (east && onEastEdge(e, $this)) {\n      wm.captureResize(el, DIRECTIONS.EAST, e, onResize);\n    }\n  });\n  el.mousemove(function(e) {\n\n    var $this = $(this);\n    if (north && east && onNorthEdge(e, $this) && onEastEdge(e, $this)) {\n      el.css('cursor', 'nesw-resize');\n    } else if (north && west && onNorthEdge(e, $this) && onWestEdge(e, $this)) {\n      el.css('cursor', 'nwse-resize');\n    } else if (south && east && onSouthEdge(e, $this) && onEastEdge(e, $this)) {\n      el.css('cursor', 'nwse-resize');\n    } else if (south && west && onSouthEdge(e, $this) && onWestEdge(e, $this)) {\n      el.css('cursor', 'nesw-resize');\n    } else if (south && onSouthEdge(e, $this)) {\n      el.css('cursor', 'ns-resize');\n    } else if (north && onNorthEdge(e, $this)) {\n      el.css('cursor', 'ns-resize');\n    } else if (east && onEastEdge(e, $this)) {\n      el.css('cursor', 'ew-resize');\n    } else if (west && onWestEdge(e, $this)) {\n      el.css('cursor', 'ew-resize');\n    } else {\n      el.css('cursor', 'inherited');\n    }\n  });\n};\n\nWinManager.prototype.registerDrag = function(el, dragger) {\n  var wm = this;\n  dragger.mousedown(function(e) {\n    wm.captureDrag(el, e);\n  });\n};\n\nfunction bindOpening(btn, win) {\n btn.click(function(e) {\n    openWin(win, e);\n  });\n}\n\nfunction createActionsWinBuilder(win) {\n  var content = win.root.find('.content');\n  var template = content.html();\n  content.empty();\n  return function(name, action) {\n    content.append(template.replace(\"$value$\", name));\n    content.find('div:last input').click(action);\n  };\n}\n\nfunction closeWin(win) {\n  win.root.hide();\n}\n\nfunction openWin(win, mouseEvent) {\n\n  var x = mouseEvent.pageX;\n  var y = mouseEvent.pageY;\n  var pageW = $(window).width();\n  var pageH = $(window).height();\n  var winW = win.root.width();\n  var winH = win.root.height();\n\n  var left = x < pageW / 2 ? x : x - winW;\n  var top = y < pageH / 2 ? y : y - winH;\n\n  win.root.show();\n  win.root.offset({top : top, left : left});\n\n}\n\n/** @constructor */\nfunction List(id, model) {\n  this.ul = $('<ul>', { 'class' : 'tlist', id : id});\n  this.model = model;\n  this.template = '<li>$name$<span class=\"btn rm\" style=\"float: right;\"><i class=\"fa fa-remove\"></i></span></li>';\n}\n\nList.prototype.refresh = function() {\n  this.ul.empty();\n  var items = this.model.items();\n  var model = this.model;\n  function makeCallbacks(li, item, index) {\n    li.find('.rm').click(function(e) {\n      model.remove(item, index);\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    li.hover(function() {model.hover(item, index)});\n    li.mouseleave(function() {model.mouseleave(item, index)});\n    li.click(function() {model.click(item, index)});\n  }\n  \n\n  for (var i = 0; i < items.length; ++i) {\n    var item = items[i];\n    var li = $(this.template.replace('$name$', item.name));\n    this.ul.append(li);\n    makeCallbacks(li, item, i)\n  }\n};\n\nfunction dockBtn(name, icon) {\n  var btn = $('<span>', {'class': 'dock-btn'});\n  btn.append(faBtn(icon));\n  btn.append($('<span>', {'class': 'txt'}).text(name));\n  return btn;\n}\n\nfunction faBtn (iconName) {\n  return $('<i>', {'class' : 'fa fa-'+iconName});\n}\n\nfunction Dock(dockEl, switcherEl, viewDefinitions) {\n  this.views = {};\n  this.dockEl = dockEl;\n  function bindClick(dock, switchEl, viewName) {\n    switchEl.click(function(e) {\n      if (dock.isVisible(viewName)) {\n        dock.hide(viewName);\n      } else {\n        dock.show(viewName);\n      }\n    });\n  }\n  for (var i = 0; i < viewDefinitions.length; i++) {\n    var viewDef = viewDefinitions[i];\n    var view = {};\n    this.views[viewDef.name] = view;\n    view.node = $('<div>', {'class': 'dock-node'});\n    var caption = $('<div>', {'class': 'tool-caption'});\n    caption.append($('<span>', {'class': 'txt'}).text(viewDef.name.toUpperCase()));\n    caption.append(faBtn(viewDef.icon));\n    view.node.append(caption);\n    view.node.hide();\n    this.dockEl.append(view.node);\n    view.switchBtn = dockBtn(viewDef.name, viewDef.icon);\n    bindClick(this, view.switchBtn, viewDef.name);\n    switcherEl.append(view.switchBtn);\n  }\n}\n\nDock.prototype.show = function(viewName) {\n  var view = this.views[viewName];\n  if (view.switchBtn.hasClass('selected')) {\n    return;\n  }\n  if (!this.dockEl.is(\":visible\")) {\n    this.dockEl.show();\n    $('body').trigger('layout');\n  }\n  view.node.show();\n  view.switchBtn.addClass('selected');\n};\n\nDock.prototype.hide = function(viewName) {\n  var view = this.views[viewName];\n  if (!view.switchBtn.hasClass('selected')) {\n    return;\n  }\n  view.node.hide();\n  view.switchBtn.removeClass('selected');\n  if (this.dockEl.find('.dock-node:visible').length == 0) {\n    this.dockEl.hide();\n    $('body').trigger('layout');\n  } \n};\n\nDock.prototype.isVisible = function(viewName) {\n  return this.views[viewName].switchBtn.hasClass('selected');\n};\n\nfunction _maskTest(mask, value) {\n  return (mask & value) === value;\n}\n\nexport { WinManager, Window, List, Dock, dockBtn, faBtn, openWin, closeWin, bindOpening, createActionsWinBuilder, DIRECTIONS };\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/ui/ui.js\n **/","export function Terminal(win, commandProcessor, variantsSupplier) {\n  this.win = win;\n  this.out = win.root.find('.terminal-output');\n  const input = win.root.find('.terminal-input input');\n  this.input = input;\n  \n  win.onShowCallback = function() {\n    input.focus();\n  };\n  this.makeAlwaysFocusable();\n\n  this.history = [];\n  this.historyPointer = 0;\n  const setHistory = () => {\n    if (this.history.length == 0) return;\n    input.val(this.history[this.historyPointer]);\n  };\n\n  input.keydown((e) => {\n    function consumeEvent() {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (e.keyCode == 9) {\n      const text = input.val();\n      let variants = variantsSupplier().filter(v => v.startsWith(text));\n      variants.sort();\n      if (variants.length == 0) {\n      } else  {\n        const shared = sharedStartOfSortedArray(variants);\n        if (shared.length != text.length) {\n          input.val(shared);\n        } else {\n          let autocompleteArea = this.out.find('.autocomplete-area');\n          if (autocompleteArea.length == 0) {\n            autocompleteArea = $('<div>', {'class': 'terminal-commandText autocomplete-area'});\n            this.out.append(autocompleteArea);\n          }\n          let more = '';\n          const limit = 20;\n          if (variants.length > limit) {\n            more = '... and ' + (variants.length - limit) + ' more';\n            variants = variants.slice(0,limit);\n          }\n          autocompleteArea.text(variants.join(' ') + more);\n          this.scrollToTheEnd();\n        }\n      }\n      consumeEvent();\n    } else if (e.keyCode == 38) {\n      this.historyPointer = Math.max(this.historyPointer - 1, 0);\n      setHistory();\n      consumeEvent();\n    } else if (e.keyCode == 40) {\n      if (this.historyPointer != this.history.length) {\n        this.historyPointer = Math.min(this.historyPointer + 1, this.history.length - 1);\n        setHistory();\n      }\n      consumeEvent();\n    }\n  });\n\n  input.keyup((e) => {\n    if(e.keyCode == 13) {\n      const command = input.val();\n      this.out.find('.autocomplete-area').remove();\n      input.val('');\n      this.out.append($('<div>', {text: '> '+command, 'class': 'terminal-commandText'}));\n      if (command != null && command.trim().length != 0) {\n        const result = commandProcessor(command);\n        this.print(result);\n        if (this.history.length == 0 || command != this.history[this.history.length - 1]) {\n          this.history.push(command);\n        }\n        this.historyPointer = this.history.length;\n      }\n      this.scrollToTheEnd();\n    }\n  });\n}\n\nTerminal.prototype.makeAlwaysFocusable = function() {\n  let wasMove = false;\n  this.win.root.mousedown(() => {\n    wasMove = false;\n    return true;\n  });\n  this.win.root.mousemove(() => {\n    wasMove = true;\n    return true;\n  });\n  this.win.root.mouseup(() => {\n    if (!wasMove) this.input.focus();\n    return true;\n  });\n};\n\nTerminal.prototype.scrollToTheEnd = function() {\n  this.out.parent().scrollTop(this.out.height());\n};\n\nTerminal.prototype.print = function(text) {\n  this.out.append($('<div>', {text, 'class': 'terminal-commandResult'}));\n  this.scrollToTheEnd();\n};\n\nfunction sharedStartOfSortedArray(array){\n  var a1= array[0], a2= array[array.length-1], L= a1.length, i= 0;\n  while(i<L && a1.charAt(i)=== a2.charAt(i)) i++;\n  return a1.substring(0, i);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/ui/terminal.js\n **/","import {HDimension, VDimension, Dimension, DiameterDimension} from '../shapes/dim'\nimport Vector from '../../math/vector'\nimport {EndPoint} from '../shapes/point'\nimport {Tool} from './tool'\n\nexport class AddDimTool extends Tool {\n\n  constructor(name, viewer, layer, dimCreation) {\n    super(name, viewer);\n    this.layer = layer;\n    this.dim = null;\n    this._v = new Vector(0, 0, 0);\n    this.dimCreation = dimCreation;\n  }\n\n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    this.viewer.snap(p.x, p.y, []);\n    if (this.dim != null) {\n      this.dim.b.x = p.x;\n      this.dim.b.y = p.y;\n    }\n    this.viewer.refresh();\n  }\n\n  mouseup(e) {\n\n    if (e.button > 0 && this.dim != null) {\n      this.dim.flip = !this.dim.flip;\n      this.viewer.refresh();\n      return;\n    }\n\n    if (this.viewer.snapped == null) {\n      return;\n    }\n\n    const p = this.viewer.snapped;\n    this.viewer.cleanSnap();\n\n    if (this.dim == null) {\n      this.viewer.historyManager.checkpoint();\n      this.dim = this.dimCreation(p, new EndPoint(p.x, p.y));\n      this.layer.add(this.dim);\n      this.viewer.refresh();\n    } else {\n      this.dim.b = p;\n      this.viewer.toolManager.releaseControl();\n      this.viewer.refresh();\n    }\n  }\n}\n\nexport class AddFreeDimTool extends AddDimTool {\n  constructor(viewer, layer) {\n    super('free dimension', viewer, layer, (a, b) => new Dimension(a, b));\n  }\n}\n\nexport class AddHorizontalDimTool extends AddDimTool {\n  constructor(viewer, layer) {\n    super('horizontal dimension', viewer, layer, (a, b) => new HDimension(a, b));\n  }\n}\n\nexport class AddVerticalDimTool extends AddDimTool {\n  constructor(viewer, layer) {\n    super('vertical dimension', viewer, layer, (a, b) => new VDimension(a, b));\n  }\n}\n\nexport class AddCircleDimTool extends Tool {\n  constructor(viewer, layer) {\n    super('arc/circle dimension', viewer);\n    this.layer = layer;\n    this.dim = new DiameterDimension(null);\n    this.viewer.add(this.dim, this.layer);\n  }\n\n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    var objects = this.viewer.search(p.x, p.y, 20 / this.viewer.scale, true, false, []).filter(function (o) {\n      return o._class === 'TCAD.TWO.Circle' || o._class === 'TCAD.TWO.Arc';\n    });\n\n    if (objects.length != 0) {\n      this.dim.obj = objects[0];\n    } else {\n      this.dim.obj = null;\n    }\n    if (this.dim.obj != null) {\n      this.dim.angle = Math.atan2(p.y - this.dim.obj.c.y, p.x - this.dim.obj.c.x);\n    }\n    this.viewer.refresh();\n  }\n\n  mouseup(e) {\n    if (this.dim.obj !== null) {\n      this.viewer.historyManager.checkpoint();\n    } else {\n      this.viewer.remove(this.dim);\n    }\n    this.viewer.toolManager.releaseControl();\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/dim.js\n **/","import {EndPoint} from '../shapes/point'\nimport {Tool} from './tool'\n\nexport class AddPointTool extends Tool {\n  \n  constructor(viewer) {\n    super('point', viewer);\n  }\n\n  restart() {\n    this.sendSpecifyPointHint();\n  }\n\n  mouseup(e) {\n    const input = this.viewer.screenToModel(e);\n    this.processPointInput(input);\n  }\n\n  processCommand(command) {\n    const result = Tool.ParseVector(this.viewer.referencePoint, command);\n    if(typeof result === 'string') {\n      return result;\n    }\n    this.processPointInput(result);\n  }\n\n  processPointInput(input) {\n    this.viewer.historyManager.checkpoint();\n    const p = new EndPoint(input.x, input.y);\n    const layer = this.viewer.activeLayer;\n    layer.add(p);\n    this.pointPicked(input.x, input.y);\n    this.viewer.refresh();\n    this.restart();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/point.js\n **/","import {Tool} from './tool'\n\nexport class AddSegmentTool extends Tool {\n\n  constructor(viewer, multi) {\n    super(multi ? \"multi line\" : \"line\", viewer);\n    this.line = null;\n    this.multi = multi;\n  }\n\n  restart() {\n    this.line = null;\n    this.sendHint('specify the first point')\n  }\n\n  cleanup() {\n    this.viewer.cleanSnap();\n    this.line = null;\n  }\n\n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    if (this.line != null) {\n      this.viewer.snap(p.x, p.y, [this.line.a, this.line.b]);\n      this.line.b.x = p.x;\n      this.line.b.y = p.y;\n      this.viewer.refresh();\n    } else {\n      this.viewer.snap(p.x, p.y, []);\n      this.viewer.refresh();\n    }\n  }\n  \n  mouseup(e) {\n    if (this.line == null) {\n      const b = this.viewer.screenToModel(e);\n      let a = b;\n      var needSnap = false;\n      if (this.viewer.snapped != null) {\n        a = this.viewer.snapped;\n        this.viewer.cleanSnap();\n        needSnap = true;\n      }\n      this.line = this.viewer.addSegment(a.x, a.y, b.x, b.y, this.viewer.activeLayer);\n      if (needSnap) {\n        this.viewer.parametricManager.linkObjects([this.line.a, a]);\n      }\n      this.firstPointPicked();\n      this.viewer.refresh();\n    } else {\n      if (this.viewer.snapped != null) {\n        var p = this.viewer.snapped;\n        this.viewer.cleanSnap();\n        this.line.b.x = p.x;\n        this.line.b.y = p.y;\n        this.viewer.parametricManager.linkObjects([this.line.b, p]);\n      }\n      this.nextPointPicked();\n    }\n  }\n  \n  nextPointPicked() {\n    this.pointPicked(this.line.b.x, this.line.b.y);\n    if (this.multi) {\n      const b = this.line.b;\n      this.line = this.viewer.addSegment(b.x, b.y, b.x, b.y, this.viewer.activeLayer);\n      this.viewer.parametricManager.linkObjects([this.line.a, b]);\n    } else {\n      this.restart()\n    }\n    if (this.multi) {\n      this.sendHint('specify next point');\n    }\n    this.viewer.refresh();\n  }\n\n  firstPointPicked() {\n    this.pointPicked(this.line.a.x, this.line.a.y);\n    this.sendHint('specify ' + (this.multi ? 'next' : 'end') +' point');\n  }\n\n  dblclick(e) {\n    this.cancelSegment();\n  }\n\n  keydown(e) {\n    if (e.keyCode == 27) {\n      this.cancelSegment();\n    }\n  }\n\n  cancelSegment() {\n    if (this.multi && this.line != null) {\n      this.viewer.remove(this.line);\n      this.viewer.refresh();\n      this.cleanup(null);\n    }\n  }\n\n  processCommand(command) {\n    const result = Tool.ParseVector(this.viewer.referencePoint, command);\n    if(typeof result === 'string') {\n      return result;\n    }\n    const p = result;\n    if (this.line == null) {\n      this.line = this.viewer.addSegment(p.x, p.y, p.x, p.y, this.viewer.activeLayer);\n      this.firstPointPicked();\n    } else {\n      this.line.b.x = p.x;\n      this.line.b.y = p.y;\n      this.nextPointPicked();\n      \n    }\n    this.viewer.refresh();\n  }\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/segment.js\n **/","import {Arc} from '../shapes/arc'\nimport {EndPoint} from '../shapes/point'\nimport {Tool} from './tool'\nimport Vector from '../../math/vector'\nimport * as math from '../../math/math';\n\nexport class AddArcTool extends Tool {\n\n  constructor(viewer) {\n    super('arc', viewer);\n    this.arc = null;\n    this.point = null;\n    this._v = new Vector(0, 0, 0);\n  }\n\n  restart() {\n    this.sendHint('specify center');\n  }\n\n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    if (this.point != null) {\n      this.point.x = p.x;\n      this.point.y = p.y;\n      \n      if (this.point.id === this.arc.b.id) {\n        //force placement second point on the arc\n        const r = this.radiusOfFirstPoint();\n        const v = this._v;\n        v.set(this.arc.b.x - this.arc.c.x, this.arc.b.y - this.arc.c.y, 0);\n        v._normalize()._multiply(r);\n        this.arc.b.x = v.x + this.arc.c.x;\n        this.arc.b.y = v.y + this.arc.c.y;\n      } else {\n        this.demoSecondPoint();\n      }\n\n      this.viewer.snap(p.x, p.y, [this.arc.a, this.arc.b, this.arc.c]);\n      this.viewer.refresh();\n    } else {\n      this.viewer.snap(p.x, p.y, []);\n      this.viewer.refresh();\n    }\n  }\n  \n  mouseup(e) {\n    if (this.arc == null) {\n      const center = this.viewer.screenToModel(e);\n      this.createArcStep(center);\n    } else if (this.point.id === this.arc.a.id) {\n      this.snapIfNeed(this.arc.a);\n      this.startingPointSetStep();\n    } else {\n      this.snapIfNeed(this.arc.b);\n      this.finishStep();\n    }\n  }\n  \n  createArcStep(p) {\n    this.viewer.historyManager.checkpoint();\n    this.arc = new Arc(\n      new EndPoint(p.x, p.y),\n      new EndPoint(p.x, p.y),\n      new EndPoint(p.x, p.y)\n    );\n    this.point = this.arc.a;\n    this.viewer.activeLayer.add(this.arc);\n    this.snapIfNeed(this.arc.c);\n    this.pointPicked(p.x, p.y);\n    this.sendHint('specify arc starting point');\n    this.viewer.refresh();\n  }\n\n  startingPointSetStep() {\n    this.point = this.arc.b;\n    this.pointPicked(this.arc.a.x, this.arc.a.y);\n    this.sendHint('specify angle')\n  }\n\n  finishStep() {\n    this.arc.stabilize(this.viewer);\n    this.pointPicked(this.arc.b.x, this.arc.b.y);\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n  }\n\n  demoSecondPoint() {\n    const r = this.radiusOfFirstPoint();\n    let ang = Math.atan2(this.arc.a.y - this.arc.c.y, this.arc.a.x - this.arc.c.x) + (2 * Math.PI - 0.3);\n    ang %= 2 * Math.PI;\n    this.arc.b.x = this.arc.c.x + r * Math.cos(ang);\n    this.arc.b.y = this.arc.c.y + r * Math.sin(ang);\n  }\n\n  radiusOfFirstPoint() {\n    return math.distance(this.arc.a.x, this.arc.a.y, this.arc.c.x, this.arc.c.y);\n  }\n\n  processCommand(command) {\n    if (this.arc == null) {\n      const result = Tool.ParseVector(this.viewer.referencePoint, command);\n      if(typeof result === 'string') return result;\n      this.viewer.cleanSnap();\n      this.createArcStep(result);\n    } else if (this.point.id === this.arc.a.id) {\n      const result = Tool.ParseVector(this.viewer.referencePoint, command);\n      if(typeof result === 'string') return result;\n      this.arc.a.x = result.x;\n      this.arc.a.y = result.y;\n      this.startingPointSetStep();\n      this.demoSecondPoint();\n      this.viewer.refresh();\n    } else {\n      const startingAngle = Math.atan2(this.point.y - this.arc.c.y, this.point.x - this.arc.c.x);\n      const result = Tool.ParseNumberWithRef(command, startingAngle); // treated as radius and angle\n      const r = this.radiusOfFirstPoint();\n      if(typeof result === 'string') return result;\n      let angle = result / 180 * Math.PI;\n      angle %= 2 * Math.PI;\n      this.arc.b.x = this.arc.c.x + r * Math.cos(angle);\n      this.arc.b.y = this.arc.c.y + r * Math.sin(angle);\n      this.finishStep();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/arc.js\n **/","import Vector from '../../math/vector'\nimport {Styles} from '../styles'\nimport * as fetch from '../fetchers'\nimport * as math from '../../math/math'\nimport {EndPoint} from '../shapes/point'\nimport {Arc} from '../shapes/arc'\nimport {Constraints} from '../parametric'\nimport {Tool} from './tool'\n\nexport class FilletTool extends Tool {\n  \n  constructor(viewer) {\n    super('fillet', viewer);  \n    this.viewer = viewer;\n  }\n  \n  restart() {\n    for (let master of this.viewer.selected) {\n      if (master instanceof EndPoint) {\n        for (let slave of master.linked) {\n          if (slave instanceof EndPoint) {\n            if (this.breakLinkAndMakeFillet(master, slave)) {\n              this.viewer.toolManager.releaseControl();\n            }\n          }\n        }        \n      }\n    }\n  }\n  \n  makeFillet(point1, point2) {\n    function shrink(point1) {\n      var a, b;\n      if (point1.id === point1.parent.a.id) {\n        a = point1.parent.b;\n        b = point1.parent.a;\n      } else {\n        a = point1.parent.a;\n        b = point1.parent.b;\n      }\n      var d = math.distanceAB(a, b);\n      var k = 4 / 5;\n      b.x = a.x + (b.x - a.x) * k;\n      b.y = a.y + (b.y - a.y) * k;\n      return new Vector(a.x - b.x, a.y - b.y, 0);\n    }\n  \n    var v1 = shrink(point1);\n    var v2 = shrink(point2);\n  \n    if (v1.cross(v2).z > 0) {\n      var _ = point1;\n      point1 = point2;\n      point2 = _;\n    }\n  \n    var vec = new Vector();\n    vec.setV(point2);\n    vec._minus(point1);\n    vec._multiply(0.5);\n    vec._plus(point1);\n  \n    var arc = new Arc(\n      new EndPoint(point1.x, point1.y),\n      new EndPoint(point2.x, point2.y),\n      new EndPoint(vec.x, vec.y));\n    point1.parent.layer.add(arc);\n    var pm = this.viewer.parametricManager;\n    arc.stabilize(this.viewer);\n    pm._add(new Constraints.Tangent( arc, point1.parent));\n    pm._add(new Constraints.Tangent( arc, point2.parent));\n    pm._add(new Constraints.Coincident( arc.a, point1));\n    pm._add(new Constraints.Coincident( arc.b, point2));\n  \n    //function otherEnd(point) {\n    //  if (point.parent.a.id === point.id) {\n    //    return point.parent.b;\n    //  } else {\n    //    return point.parent.a;\n    //  }\n    //}\n    //\n    //pm._add(new Constraints.LockConvex(arc.c, arc.a, otherEnd(point1)));\n    //pm._add(new Constraints.LockConvex(otherEnd(point2), arc.b, arc.c));\n  \n    var solver = pm.solveWithLock([]);\n  //  var solver = pm.solveWithLock([point1._x, point1._y, point2._x, point2._y]);\n    pm.notify();\n    this.viewer.refresh();\n  }\n  \n  mouseup(e) {\n    var candi = this.getCandidate(e);\n    if (candi == null) return;\n    const point1 = candi[0];\n    const point2 = candi[1];\n    this.breakLinkAndMakeFillet(point1, point2)\n  }\n  \n  breakLinkAndMakeFillet(point1, point2) {\n    const pm = this.viewer.parametricManager;\n    const coi = pm.findCoincidentConstraint(point1, point2);\n    if (coi != null) {\n      pm.remove(coi);\n      this.makeFillet(point1, point2);\n      this.viewer.deselectAll();\n      return true;\n    }\n    return false;\n  }\n  \n  static isLine(line) {\n    return line != null && line._class === 'TCAD.TWO.Segment';\n  }\n  \n  getCandidate(e) {\n    var picked = this.viewer.pick(e);\n    if (picked.length > 0) {\n      var res = fetch.sketchObjects(picked, true, ['TCAD.TWO.EndPoint']);\n      if (res == null) return null;\n      var point1 = res[0];\n      if (!FilletTool.isLine(point1.parent)) return;\n      var line2 = null;\n      for (var i = 0; i < point1.linked.length; i++) {\n        var point2 = point1.linked[i];\n        if (FilletTool.isLine(point2.parent)) {\n          return [point1, point2];\n        }\n      }\n    }\n    return null;\n  }\n  \n  mousemove(e) {\n    var needRefresh = false;\n    if (this.viewer.selected.length != 0) {\n      this.viewer.deselectAll();\n      needRefresh = true;\n    }\n    var candi = this.getCandidate(e);\n    if (candi != null) {\n      this.viewer.mark(candi[0], Styles.SNAP);\n      needRefresh = true;\n    }\n    if (needRefresh) {\n      this.viewer.refresh();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/fillet.js\n **/","import {Tool} from './tool'\nimport {EndPoint} from '../shapes/point'\nimport {BezierCurve} from '../shapes/bezier-curve'\nimport {Constraints} from '../parametric'\nimport Vector from '../../math/vector'\nimport * as math from '../../math/math'\n\nexport class BezierCurveTool extends Tool {\n\n  constructor(viewer) {\n    super('bezier curve', viewer);\n    this.init();\n    this._v = new Vector();\n  }\n  \n  init() {\n    this.curve = null;\n    this.otherCurveEndPoint = null;\n  }\n  \n  restart() {\n    this.init();\n    this.sendHint('specify first point')\n  }\n\n  cleanup(e) {\n    this.viewer.cleanSnap();\n  }\n  \n  mouseup(e) {\n    if (this.curve == null) {\n      this.checkIfConnectedToOtherCurve();\n      const p = this.endpoint(e);\n      this.curve = new BezierCurve(p, p.copy(), p.copy(), p.copy());\n      this.viewer.activeLayer.add(this.curve);\n      this.viewer.refresh();\n    } else {\n      this.snapIfNeed(this.curve.b);\n      if (this.otherCurveEndPoint != null) {\n        this.viewer.parametricManager.add(new Constraints.Parallel(this.otherCurveEndPoint.parent, this.curve.a.parent));\n      }\n      this.viewer.toolManager.releaseControl();\n      this.viewer.refresh();\n    }\n  }\n\n  mousemove(e) {\n    const p = this.viewer.screenToModel(e);\n    if (this.curve != null) {\n      this.curve.b.setFromPoint(p);\n      const axis = this._v.set(this.curve.b.x - this.curve.a.x, this.curve.b.y - this.curve.a.y)._multiply(0.7);\n      //controlSegment = {x: -controlSegment.y, y: controlSegment.x};\n      const controlSegment = math.rotate(- axis.y, axis.x, - Math.PI * 0.25);\n      if (this.otherCurveEndPoint != null) {\n        const ctrlLength = axis.length();\n        this.curve.cp1.x = this.curve.a.x + this.snappedControl.x * ctrlLength;\n        this.curve.cp1.y = this.curve.a.y + this.snappedControl.y * ctrlLength;\n        if (this.snappedControl.x * controlSegment.x  + this.snappedControl.y * controlSegment.y < 0) {\n          controlSegment.x *= -1;\n          controlSegment.y *= -1;\n        }\n      } else {\n        this.curve.cp1.x = this.curve.a.x + controlSegment.x;\n        this.curve.cp1.y = this.curve.a.y + controlSegment.y;\n      }\n      this.curve.cp2.x = this.curve.b.x - controlSegment.x;\n      this.curve.cp2.y = this.curve.b.y - controlSegment.y;\n      this.viewer.snap(p.x, p.y, [this.curve.a, this.curve.b, this.curve.cp1, this.curve.cp2]);\n    } else {\n      this.viewer.snap(p.x, p.y, []);\n    }\n    this.viewer.refresh();\n  }\n\n  checkIfConnectedToOtherCurve() {\n    const snapped = this.viewer.snapped;\n    if (snapped != null && snapped.parent && snapped.parent.parent && \n      snapped.parent.parent instanceof BezierCurve && \n      snapped.parent.a === snapped) { //only a of Segment is a curve endpoint(other end is a control point) \n      const seg = snapped.parent;\n      this.otherCurveEndPoint = snapped;\n      this.snappedControl = new Vector(seg.b.x - seg.a.x, seg.b.y - seg.a.y)._normalize()._multiply(-1);\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/bezier-curve.js\n **/","import {Tool} from './tool'\nimport * as math from '../../math/math';\nimport {EndPoint} from '../shapes/point'\nimport {Segment} from '../shapes/segment'\nimport {Constraints} from '../parametric'\n\n\nexport class RectangleTool extends Tool {\n  constructor(viewer) {\n    super('rectangle', viewer);\n    this.rectangle = null;\n    this.firstPointSnap = null;\n    this.snapExclude = [];\n  }\n\n  restart() {\n    this.sendMessage('specify first point');\n  }\n\n  cleanup(e) {\n    this.viewer.cleanSnap();\n  }\n\n  mousemove(e) {\n    const p = this.viewer.screenToModel(e);\n    if (this.rectangle != null) {\n      this.alignSegments(p);\n      this.viewer.snap(p.x, p.y, this.snapExclude);\n    } else {\n      this.viewer.snap(p.x, p.y, []);\n    }\n    this.viewer.refresh();\n  }\n\n  mouseup(e) {\n    if (this.rectangle == null) {\n      let p;\n      if (this.viewer.snapped != null) {\n        this.firstPointSnap = this.viewer.snapped;\n        p = this.firstPointSnap;\n        this.viewer.cleanSnap();\n      } else {\n        p = this.viewer.screenToModel(e);\n      }\n      this.createRectangle(p);\n    } else {\n      let p = this.viewer.snapped;\n      if (this.viewer.snapped != null) {\n        p = this.viewer.snapped;\n      } else {\n        p = this.viewer.screenToModel(e);\n      }\n      this.alignSegments(p);\n      \n      if (this.viewer.snapped != null) {\n        this.viewer.parametricManager.linkObjects([this.rectangle[2].a, this.viewer.snapped]);\n      }\n      if (this.firstPointSnap != null) {\n        this.viewer.parametricManager.linkObjects([this.rectangle[0].a, this.firstPointSnap]);\n      }\n      \n      this.viewer.cleanSnap();\n      this.stepFinish(p);\n    }\n  }\n\n  createRectangle(v) {\n    const p = new EndPoint(v.x, v.y);\n    //from top, clockwise\n    this.rectangle = [\n      new Segment(p, p.copy()),\n      new Segment(p.copy(), p.copy()),\n      new Segment(p.copy(), p.copy()),\n      new Segment(p.copy(), p.copy())\n    ];\n    for (let s of this.rectangle) {\n      this.viewer.activeLayer.add(s);\n      this.snapExclude.push(s.a, s.b);\n    }\n    this.pointPicked(p.x, p.y);\n    this.viewer.refresh();\n  }\n  \n  alignSegments(p) {\n    this.rectangle[0].b.x = p.x;\n    this.rectangle[1].a.x = p.x;\n    this.rectangle[1].b.setFromPoint(p);\n    this.rectangle[2].a.setFromPoint(p);\n    this.rectangle[2].b.y = p.y;\n    this.rectangle[3].a.y = p.y;\n  }\n\n  stepFinish(p) {\n    this.pointPicked(p.x, p.y);\n    var pm = this.viewer.parametricManager;\n    pm.linkObjects([this.rectangle[3].b, this.rectangle[0].a]);\n    pm.linkObjects([this.rectangle[0].b, this.rectangle[1].a]);\n    pm.linkObjects([this.rectangle[1].b, this.rectangle[2].a]);\n    pm.linkObjects([this.rectangle[2].b, this.rectangle[3].a]);\n    const constraints = [\n      new Constraints.Horizontal(this.rectangle[0]),\n      new Constraints.Horizontal(this.rectangle[2]),\n      new Constraints.Vertical(this.rectangle[3]),\n      new Constraints.Vertical(this.rectangle[1])\n    ];\n    pm.addAll(constraints);\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n  }\n\n  processCommand(command) {\n    const result = Tool.ParseVector(this.viewer.referencePoint, command);\n    if(typeof result === 'string') return result;\n    if (this.rectangle == null) {\n      this.createRectangle(result)\n    } else {\n      this.alignSegments(result);\n      this.stepFinish(result);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/rectangle.js\n **/","import {Tool} from './tool'\n\nexport class ReferencePointTool extends Tool {\n  \n  constructor(viewer) {\n    super('origin', viewer);\n  }\n  \n  restart() {\n    this.sendSpecifyPointHint();\n  };\n  \n  cleanup(e) {\n    this.viewer.cleanSnap();\n  };\n  \n  mousemove(e) {\n    var p = this.viewer.screenToModel(e);\n    this.viewer.snap(p.x, p.y, []);\n    this.viewer.refresh();\n  };\n  \n  mousedown(e) {\n    const needSnap = this.viewer.snapped != null;\n    let p = needSnap ? this.viewer.snapped : this.viewer.screenToModel(e);\n    this.viewer.referencePoint.x = p.x;\n    this.viewer.referencePoint.y = p.y;\n    this.pointPicked(p.x, p.y);\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n  };\n  \n  processCommand(command) {\n    const referencePoint = this.viewer.referencePoint;\n    let result = Tool.ParseVector(referencePoint, command);\n    if(typeof result === 'string') {\n      return result;\n    }  \n    referencePoint.x += result.x;\n    referencePoint.y += result.y;\n    this.viewer.refresh();\n    this.viewer.toolManager.releaseControl();\n  };\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/tools/origin.js\n **/","import {keymap} from './keymaps/default'\nimport {jwerty} from 'jwerty'\n\nexport function InputManager(app) {\n  this.app = app;\n  this.keymap = keymap;\n  $(() => {\n    $(document)\n      .on('keydown', (e) => this.handleKeyPress(e))\n  });\n}\n\nInputManager.prototype.handleKeyPress = function(e) {\n  switch (e.keyCode) {\n    //case 27 : this.clear(); break;\n  }\n\n  for (let action in this.keymap) {\n    if (jwerty.is(this.keymap[action], e)) {\n      setTimeout(() => this.app.actions[action].action(e), 0);\n      e.stopPropagation();\n      e.preventDefault();\n      break;\n    }\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/input-manager.js\n **/","export const keymap = {\n  'save': 'ctrl+S',\n  'open': 'ctrl+O',\n  'new' : 'ctrl+N',\n  'terminal': '`',\n  'info': 'F1'\n}; \n\n\n\n/** WEBPACK FOOTER **\n ** ./web/app/sketcher/keymaps/default.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js?-url!./../../node_modules/less-loader/index.js!./app.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js?-url!./../../node_modules/less-loader/index.js!./app.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js?-url!./../../node_modules/less-loader/index.js!./app.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/css/app.less\n ** module id = 141\n ** module chunks = 1\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  font-family: sans-serif;\\n  font-size: 11px;\\n  overflow: hidden;\\n}\\nhtml,\\nbody {\\n  background: gray;\\n  height: 100%;\\n  padding: 0;\\n  margin: 0;\\n}\\n.helvetica {\\n  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, sans-serif;\\n}\\n.mono {\\n  font-family: Monaco, monospace;\\n}\\n.sans-serif {\\n  font-family: sans-serif;\\n}\\n.logo {\\n  color: #bbb;\\n  font-size: 16px;\\n  padding: 8px 0 0 10px;\\n  cursor: alias;\\n}\\n.logo sup {\\n  font-size: 9px;\\n  font-style: italic;\\n}\\n.panel {\\n  background: #444;\\n  border: 0px solid black;\\n}\\n.b-top {\\n  border-top-width: 1px;\\n}\\n.b-bot {\\n  border-bottom-width: 1px;\\n}\\n.b-left {\\n  border-left-width: 1px;\\n}\\n.b-right {\\n  border-right-width: 5px;\\n  border-color: #222222;\\n}\\n.btn:hover {\\n  background-color: #808080;\\n  border-color: #ccc;\\n}\\n.btn {\\n  border: 1px solid #808080;\\n  background: #606060 no-repeat center;\\n  border-radius: 4px;\\n  color: white;\\n  vertical-align: top;\\n}\\n#dock {\\n  color: #fff;\\n}\\n.dock-btn {\\n  padding: 1px 5px 1px 5px;\\n  border: 0 solid black;\\n  background: #606060 no-repeat center;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  margin: 1px 4px 1px 4px;\\n}\\n.dock-btn:hover {\\n  background-color: #808080;\\n}\\n.dock-btn .txt {\\n  padding-left: 5px;\\n}\\n.selected {\\n  background-color: #333;\\n  color: #ccc;\\n}\\n.sbtn {\\n  min-width: 20px;\\n  height: 20px;\\n  line-height: 1.1;\\n  border-color: #999;\\n  padding: 1px 3px;\\n  font-size: 14px;\\n}\\n.rbtn {\\n  width: 37px;\\n  height: 37px;\\n  margin: 2px 6px;\\n  font-size: 22px;\\n  line-height: 1.1;\\n}\\n.tbtn {\\n  width: 31px;\\n  height: 31px;\\n  margin: 2px 2px;\\n  font-size: 20px;\\n  padding: 0;\\n}\\n.tlist {\\n  list-style-type: none;\\n  padding: 0px;\\n  margin: 0;\\n  color: #fff;\\n  font-size: 13px;\\n}\\n.tlist li {\\n  border-bottom: 1px solid #777;\\n  padding: 2px 3px 2px  15px;\\n  cursor: pointer;\\n}\\n.tlist li:hover {\\n  background: #222;\\n}\\n.tool-caption {\\n  font-weight: bold;\\n  color: #fff;\\n  padding: 2px 0 2px 3px;\\n  background: #333;\\n}\\n.no-top-border {\\n  border-top: 0;\\n}\\n.tool-caption .btn {\\n  width: 14px;\\n  height: 14px;\\n  font-size: 10px;\\n  line-height: 11px;\\n  margin-top: -1px;\\n}\\n.tool-caption .fa {\\n  font-size: 11px;\\n}\\n.tool-caption .txt {\\n  padding-right: 3px;\\n}\\n.tlist .btn {\\n  font-size: 11px;\\n  border: 0;\\n}\\n.tlist .rm {\\n  visibility: hidden;\\n  padding: 0 5px 0 5px;\\n}\\n.tlist li:hover .rm {\\n  visibility: visible;\\n}\\n.scroll {\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n.scroll::-webkit-scrollbar {\\n  width: 4px;\\n}\\n.scroll::-webkit-scrollbar-track {\\n  background: white;\\n}\\n.scroll::-webkit-scrollbar-thumb {\\n  background: steelblue;\\n}\\n.scroll::-webkit-scrollbar-thumb:hover {\\n  background: royalblue;\\n}\\n.win {\\n  position: absolute;\\n  min-width: 100px;\\n  min-height: 20px;\\n  left: 100px;\\n  top: 300px;\\n  background: #666;\\n  border: 5px solid #444444;\\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\\n}\\n.win .content {\\n  font-family: sans-serif;\\n  color: #fff;\\n  padding: 7px;\\n  height: calc(100% - 19px);\\n}\\n.win .tool-caption {\\n  cursor: default;\\n  height: 15px;\\n}\\n.win .tool-caption .rm {\\n  border: 0;\\n  border-radius: 0px;\\n  color: white;\\n  font-size: 16px;\\n  height: 17px;\\n  padding-left: 5px;\\n}\\n.sep {\\n  margin-right: 13px;\\n}\\n.pseudo-btn:hover {\\n  background-color: #808080;\\n}\\n.pseudo-btn {\\n  background-color: #606060;\\n  color: white;\\n  width: 18px;\\n  text-align: center;\\n  cursor: pointer;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -khtml-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n.pseudo-btn a {\\n  color: white;\\n  text-decoration: none;\\n}\\n#layerSelection label {\\n  color: #fff;\\n}\\n#layersList {\\n  background-color: #ddd;\\n  margin: 10px;\\n}\\n.tc-ctrl {\\n  border-left: 0;\\n}\\n.tc-ctrl input[type=text],\\n.tc-ctrl select {\\n  color: #fff;\\n}\\n#commands {\\n  font-family: Monaco, monospace;\\n}\\n#commands .content {\\n  color: #C4E1A4;\\n  font-size: 11px;\\n}\\n.terminal-output-area {\\n  height: calc(100% - 30px);\\n  display: flex;\\n  flex-direction: column;\\n}\\n.terminal-output {\\n  flex: 1;\\n}\\n.terminal-pusher {\\n  height: 100%;\\n}\\n.terminal-input {\\n  height: 30px;\\n}\\n.terminal-input input {\\n  color: #C4E1A4;\\n  background: inherit;\\n  outline: none;\\n  border: 0;\\n  margin-top: 4px;\\n  padding: 3px;\\n  width: 100%;\\n  box-sizing: border-box;\\n  padding-left: 0;\\n}\\n.terminal-input input::-webkit-input-placeholder {\\n  color: #777777;\\n  font-style: italic;\\n}\\n.terminal-commandText {\\n  color: #777777;\\n}\\n.autocomplete-area {\\n  font-style: italic;\\n}\\ninput[type=checkbox],\\ninput[type=radio] {\\n  vertical-align: middle;\\n}\\n#status {\\n  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, sans-serif;\\n  color: #fff;\\n  font-size: 11px;\\n  padding-top: 4px;\\n}\\n#status .coordinates-info {\\n  font-style: italic;\\n  color: #fff;\\n}\\n.status-item {\\n  padding-right: 5px;\\n  padding-left: 5px;\\n  float: right;\\n  color: #bbb;\\n}\\n#viewer-container .tool-hint {\\n  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, sans-serif;\\n  color: #000;\\n  font-size: 11px;\\n  cursor: default;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?-url!./~/less-loader!./web/css/app.less\n ** module id = 142\n ** module chunks = 1\n **/"],"sourceRoot":""}